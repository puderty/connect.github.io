var Po=Object.defineProperty;var To=(a,t,e)=>t in a?Po(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var ee=(a,t,e)=>To(a,typeof t!="symbol"?t+"":t,e);import{r as wi,d as bs,B as re,E as ks,h as G,i as Bo,a as Lo,C as Co,p as ji,n as No}from"./ConnectLayout-DCXim5oJ.js";import{g as de,j as vi,k as bi,d as Oo,a as Ji,_ as zo,r as Jn,o as Zn,c as Yn,w as Re,b as Ir,e as Ko,t as Uo,f as gr,i as Zi}from"./index-CVQZtFQN.js";import{e as Or}from"./ed25519-Bz8XlsxS.js";import{s as ki,e as Yi}from"./secp256k1-BHJWReMe.js";import{k as Xi}from"./sha3-DfhIl4lu.js";var Ss={},gn={},Si={exports:{}};Si.exports;(function(a){(function(t,e){function r(g,n){if(!g)throw new Error(n||"Assertion failed")}function s(g,n){g.super_=n;var c=function(){};c.prototype=n.prototype,g.prototype=new c,g.prototype.constructor=g}function i(g,n,c){if(i.isBN(g))return g;this.negative=0,this.words=null,this.length=0,this.red=null,g!==null&&((n==="le"||n==="be")&&(c=n,n=10),this._init(g||0,n||10,c||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=wi.Buffer}catch{}i.isBN=function(n){return n instanceof i?!0:n!==null&&typeof n=="object"&&n.constructor.wordSize===i.wordSize&&Array.isArray(n.words)},i.max=function(n,c){return n.cmp(c)>0?n:c},i.min=function(n,c){return n.cmp(c)<0?n:c},i.prototype._init=function(n,c,h){if(typeof n=="number")return this._initNumber(n,c,h);if(typeof n=="object")return this._initArray(n,c,h);c==="hex"&&(c=16),r(c===(c|0)&&c>=2&&c<=36),n=n.toString().replace(/\s+/g,"");var f=0;n[0]==="-"&&(f++,this.negative=1),f<n.length&&(c===16?this._parseHex(n,f,h):(this._parseBase(n,c,f),h==="le"&&this._initArray(this.toArray(),c,h)))},i.prototype._initNumber=function(n,c,h){n<0&&(this.negative=1,n=-n),n<67108864?(this.words=[n&67108863],this.length=1):n<4503599627370496?(this.words=[n&67108863,n/67108864&67108863],this.length=2):(r(n<9007199254740992),this.words=[n&67108863,n/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),c,h)},i.prototype._initArray=function(n,c,h){if(r(typeof n.length=="number"),n.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(n.length/3),this.words=new Array(this.length);for(var f=0;f<this.length;f++)this.words[f]=0;var p,y,v=0;if(h==="be")for(f=n.length-1,p=0;f>=0;f-=3)y=n[f]|n[f-1]<<8|n[f-2]<<16,this.words[p]|=y<<v&67108863,this.words[p+1]=y>>>26-v&67108863,v+=24,v>=26&&(v-=26,p++);else if(h==="le")for(f=0,p=0;f<n.length;f+=3)y=n[f]|n[f+1]<<8|n[f+2]<<16,this.words[p]|=y<<v&67108863,this.words[p+1]=y>>>26-v&67108863,v+=24,v>=26&&(v-=26,p++);return this._strip()};function m(g,n){var c=g.charCodeAt(n);if(c>=48&&c<=57)return c-48;if(c>=65&&c<=70)return c-55;if(c>=97&&c<=102)return c-87;r(!1,"Invalid character in "+g)}function w(g,n,c){var h=m(g,c);return c-1>=n&&(h|=m(g,c-1)<<4),h}i.prototype._parseHex=function(n,c,h){this.length=Math.ceil((n.length-c)/6),this.words=new Array(this.length);for(var f=0;f<this.length;f++)this.words[f]=0;var p=0,y=0,v;if(h==="be")for(f=n.length-1;f>=c;f-=2)v=w(n,c,f)<<p,this.words[y]|=v&67108863,p>=18?(p-=18,y+=1,this.words[y]|=v>>>26):p+=8;else{var l=n.length-c;for(f=l%2===0?c+1:c;f<n.length;f+=2)v=w(n,c,f)<<p,this.words[y]|=v&67108863,p>=18?(p-=18,y+=1,this.words[y]|=v>>>26):p+=8}this._strip()};function b(g,n,c,h){for(var f=0,p=0,y=Math.min(g.length,c),v=n;v<y;v++){var l=g.charCodeAt(v)-48;f*=h,l>=49?p=l-49+10:l>=17?p=l-17+10:p=l,r(l>=0&&p<h,"Invalid character"),f+=p}return f}i.prototype._parseBase=function(n,c,h){this.words=[0],this.length=1;for(var f=0,p=1;p<=67108863;p*=c)f++;f--,p=p/c|0;for(var y=n.length-h,v=y%f,l=Math.min(y,y-v)+h,o=0,d=h;d<l;d+=f)o=b(n,d,d+f,c),this.imuln(p),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(v!==0){var T=1;for(o=b(n,d,n.length,c),d=0;d<v;d++)T*=c;this.imuln(T),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}this._strip()},i.prototype.copy=function(n){n.words=new Array(this.length);for(var c=0;c<this.length;c++)n.words[c]=this.words[c];n.length=this.length,n.negative=this.negative,n.red=this.red};function _(g,n){g.words=n.words,g.length=n.length,g.negative=n.negative,g.red=n.red}if(i.prototype._move=function(n){_(n,this)},i.prototype.clone=function(){var n=new i(null);return this.copy(n),n},i.prototype._expand=function(n){for(;this.length<n;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=I}catch{i.prototype.inspect=I}else i.prototype.inspect=I;function I(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var C=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],x=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(n,c){n=n||10,c=c|0||1;var h;if(n===16||n==="hex"){h="";for(var f=0,p=0,y=0;y<this.length;y++){var v=this.words[y],l=((v<<f|p)&16777215).toString(16);p=v>>>24-f&16777215,f+=2,f>=26&&(f-=26,y--),p!==0||y!==this.length-1?h=C[6-l.length]+l+h:h=l+h}for(p!==0&&(h=p.toString(16)+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(n===(n|0)&&n>=2&&n<=36){var o=M[n],d=x[n];h="";var T=this.clone();for(T.negative=0;!T.isZero();){var R=T.modrn(d).toString(n);T=T.idivn(d),T.isZero()?h=R+h:h=C[o-R.length]+R+h}for(this.isZero()&&(h="0"+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var n=this.words[0];return this.length===2?n+=this.words[1]*67108864:this.length===3&&this.words[2]===1?n+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-n:n},i.prototype.toJSON=function(){return this.toString(16,2)},u&&(i.prototype.toBuffer=function(n,c){return this.toArrayLike(u,n,c)}),i.prototype.toArray=function(n,c){return this.toArrayLike(Array,n,c)};var A=function(n,c){return n.allocUnsafe?n.allocUnsafe(c):new n(c)};i.prototype.toArrayLike=function(n,c,h){this._strip();var f=this.byteLength(),p=h||Math.max(1,f);r(f<=p,"byte array longer than desired length"),r(p>0,"Requested array length <= 0");var y=A(n,p),v=c==="le"?"LE":"BE";return this["_toArrayLike"+v](y,f),y},i.prototype._toArrayLikeLE=function(n,c){for(var h=0,f=0,p=0,y=0;p<this.length;p++){var v=this.words[p]<<y|f;n[h++]=v&255,h<n.length&&(n[h++]=v>>8&255),h<n.length&&(n[h++]=v>>16&255),y===6?(h<n.length&&(n[h++]=v>>24&255),f=0,y=0):(f=v>>>24,y+=2)}if(h<n.length)for(n[h++]=f;h<n.length;)n[h++]=0},i.prototype._toArrayLikeBE=function(n,c){for(var h=n.length-1,f=0,p=0,y=0;p<this.length;p++){var v=this.words[p]<<y|f;n[h--]=v&255,h>=0&&(n[h--]=v>>8&255),h>=0&&(n[h--]=v>>16&255),y===6?(h>=0&&(n[h--]=v>>24&255),f=0,y=0):(f=v>>>24,y+=2)}if(h>=0)for(n[h--]=f;h>=0;)n[h--]=0},Math.clz32?i.prototype._countBits=function(n){return 32-Math.clz32(n)}:i.prototype._countBits=function(n){var c=n,h=0;return c>=4096&&(h+=13,c>>>=13),c>=64&&(h+=7,c>>>=7),c>=8&&(h+=4,c>>>=4),c>=2&&(h+=2,c>>>=2),h+c},i.prototype._zeroBits=function(n){if(n===0)return 26;var c=n,h=0;return c&8191||(h+=13,c>>>=13),c&127||(h+=7,c>>>=7),c&15||(h+=4,c>>>=4),c&3||(h+=2,c>>>=2),c&1||h++,h},i.prototype.bitLength=function(){var n=this.words[this.length-1],c=this._countBits(n);return(this.length-1)*26+c};function P(g){for(var n=new Array(g.bitLength()),c=0;c<n.length;c++){var h=c/26|0,f=c%26;n[c]=g.words[h]>>>f&1}return n}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var n=0,c=0;c<this.length;c++){var h=this._zeroBits(this.words[c]);if(n+=h,h!==26)break}return n},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(n){return this.negative!==0?this.abs().inotn(n).iaddn(1):this.clone()},i.prototype.fromTwos=function(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var c=0;c<n.length;c++)this.words[c]=this.words[c]|n.words[c];return this._strip()},i.prototype.ior=function(n){return r((this.negative|n.negative)===0),this.iuor(n)},i.prototype.or=function(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},i.prototype.uor=function(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},i.prototype.iuand=function(n){var c;this.length>n.length?c=n:c=this;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]&n.words[h];return this.length=c.length,this._strip()},i.prototype.iand=function(n){return r((this.negative|n.negative)===0),this.iuand(n)},i.prototype.and=function(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},i.prototype.uand=function(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},i.prototype.iuxor=function(n){var c,h;this.length>n.length?(c=this,h=n):(c=n,h=this);for(var f=0;f<h.length;f++)this.words[f]=c.words[f]^h.words[f];if(this!==c)for(;f<c.length;f++)this.words[f]=c.words[f];return this.length=c.length,this._strip()},i.prototype.ixor=function(n){return r((this.negative|n.negative)===0),this.iuxor(n)},i.prototype.xor=function(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},i.prototype.uxor=function(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},i.prototype.inotn=function(n){r(typeof n=="number"&&n>=0);var c=Math.ceil(n/26)|0,h=n%26;this._expand(c),h>0&&c--;for(var f=0;f<c;f++)this.words[f]=~this.words[f]&67108863;return h>0&&(this.words[f]=~this.words[f]&67108863>>26-h),this._strip()},i.prototype.notn=function(n){return this.clone().inotn(n)},i.prototype.setn=function(n,c){r(typeof n=="number"&&n>=0);var h=n/26|0,f=n%26;return this._expand(h+1),c?this.words[h]=this.words[h]|1<<f:this.words[h]=this.words[h]&~(1<<f),this._strip()},i.prototype.iadd=function(n){var c;if(this.negative!==0&&n.negative===0)return this.negative=0,c=this.isub(n),this.negative^=1,this._normSign();if(this.negative===0&&n.negative!==0)return n.negative=0,c=this.isub(n),n.negative=1,c._normSign();var h,f;this.length>n.length?(h=this,f=n):(h=n,f=this);for(var p=0,y=0;y<f.length;y++)c=(h.words[y]|0)+(f.words[y]|0)+p,this.words[y]=c&67108863,p=c>>>26;for(;p!==0&&y<h.length;y++)c=(h.words[y]|0)+p,this.words[y]=c&67108863,p=c>>>26;if(this.length=h.length,p!==0)this.words[this.length]=p,this.length++;else if(h!==this)for(;y<h.length;y++)this.words[y]=h.words[y];return this},i.prototype.add=function(n){var c;return n.negative!==0&&this.negative===0?(n.negative=0,c=this.sub(n),n.negative^=1,c):n.negative===0&&this.negative!==0?(this.negative=0,c=n.sub(this),this.negative=1,c):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},i.prototype.isub=function(n){if(n.negative!==0){n.negative=0;var c=this.iadd(n);return n.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var h=this.cmp(n);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var f,p;h>0?(f=this,p=n):(f=n,p=this);for(var y=0,v=0;v<p.length;v++)c=(f.words[v]|0)-(p.words[v]|0)+y,y=c>>26,this.words[v]=c&67108863;for(;y!==0&&v<f.length;v++)c=(f.words[v]|0)+y,y=c>>26,this.words[v]=c&67108863;if(y===0&&v<f.length&&f!==this)for(;v<f.length;v++)this.words[v]=f.words[v];return this.length=Math.max(this.length,v),f!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(n){return this.clone().isub(n)};function z(g,n,c){c.negative=n.negative^g.negative;var h=g.length+n.length|0;c.length=h,h=h-1|0;var f=g.words[0]|0,p=n.words[0]|0,y=f*p,v=y&67108863,l=y/67108864|0;c.words[0]=v;for(var o=1;o<h;o++){for(var d=l>>>26,T=l&67108863,R=Math.min(o,n.length-1),B=Math.max(0,o-g.length+1);B<=R;B++){var Ut=o-B|0;f=g.words[Ut]|0,p=n.words[B]|0,y=f*p+T,d+=y/67108864|0,T=y&67108863}c.words[o]=T|0,l=d|0}return l!==0?c.words[o]=l|0:c.length--,c._strip()}var D=function(n,c,h){var f=n.words,p=c.words,y=h.words,v=0,l,o,d,T=f[0]|0,R=T&8191,B=T>>>13,Ut=f[1]|0,H=Ut&8191,j=Ut>>>13,Dr=f[2]|0,X=Dr&8191,Q=Dr>>>13,$r=f[3]|0,tt=$r&8191,et=$r>>>13,Vr=f[4]|0,rt=Vr&8191,nt=Vr>>>13,Hr=f[5]|0,it=Hr&8191,st=Hr>>>13,Gr=f[6]|0,ot=Gr&8191,at=Gr>>>13,jr=f[7]|0,ct=jr&8191,ut=jr>>>13,Jr=f[8]|0,ht=Jr&8191,lt=Jr>>>13,Zr=f[9]|0,ft=Zr&8191,dt=Zr>>>13,Yr=p[0]|0,pt=Yr&8191,gt=Yr>>>13,Xr=p[1]|0,mt=Xr&8191,yt=Xr>>>13,Qr=p[2]|0,wt=Qr&8191,vt=Qr>>>13,tn=p[3]|0,bt=tn&8191,kt=tn>>>13,en=p[4]|0,St=en&8191,Mt=en>>>13,rn=p[5]|0,_t=rn&8191,xt=rn>>>13,nn=p[6]|0,It=nn&8191,At=nn>>>13,sn=p[7]|0,Et=sn&8191,Rt=sn>>>13,on=p[8]|0,Pt=on&8191,Tt=on>>>13,an=p[9]|0,Bt=an&8191,Lt=an>>>13;h.negative=n.negative^c.negative,h.length=19,l=Math.imul(R,pt),o=Math.imul(R,gt),o=o+Math.imul(B,pt)|0,d=Math.imul(B,gt);var Ze=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,l=Math.imul(H,pt),o=Math.imul(H,gt),o=o+Math.imul(j,pt)|0,d=Math.imul(j,gt),l=l+Math.imul(R,mt)|0,o=o+Math.imul(R,yt)|0,o=o+Math.imul(B,mt)|0,d=d+Math.imul(B,yt)|0;var Ye=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,l=Math.imul(X,pt),o=Math.imul(X,gt),o=o+Math.imul(Q,pt)|0,d=Math.imul(Q,gt),l=l+Math.imul(H,mt)|0,o=o+Math.imul(H,yt)|0,o=o+Math.imul(j,mt)|0,d=d+Math.imul(j,yt)|0,l=l+Math.imul(R,wt)|0,o=o+Math.imul(R,vt)|0,o=o+Math.imul(B,wt)|0,d=d+Math.imul(B,vt)|0;var Xe=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,l=Math.imul(tt,pt),o=Math.imul(tt,gt),o=o+Math.imul(et,pt)|0,d=Math.imul(et,gt),l=l+Math.imul(X,mt)|0,o=o+Math.imul(X,yt)|0,o=o+Math.imul(Q,mt)|0,d=d+Math.imul(Q,yt)|0,l=l+Math.imul(H,wt)|0,o=o+Math.imul(H,vt)|0,o=o+Math.imul(j,wt)|0,d=d+Math.imul(j,vt)|0,l=l+Math.imul(R,bt)|0,o=o+Math.imul(R,kt)|0,o=o+Math.imul(B,bt)|0,d=d+Math.imul(B,kt)|0;var Qe=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,l=Math.imul(rt,pt),o=Math.imul(rt,gt),o=o+Math.imul(nt,pt)|0,d=Math.imul(nt,gt),l=l+Math.imul(tt,mt)|0,o=o+Math.imul(tt,yt)|0,o=o+Math.imul(et,mt)|0,d=d+Math.imul(et,yt)|0,l=l+Math.imul(X,wt)|0,o=o+Math.imul(X,vt)|0,o=o+Math.imul(Q,wt)|0,d=d+Math.imul(Q,vt)|0,l=l+Math.imul(H,bt)|0,o=o+Math.imul(H,kt)|0,o=o+Math.imul(j,bt)|0,d=d+Math.imul(j,kt)|0,l=l+Math.imul(R,St)|0,o=o+Math.imul(R,Mt)|0,o=o+Math.imul(B,St)|0,d=d+Math.imul(B,Mt)|0;var tr=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(tr>>>26)|0,tr&=67108863,l=Math.imul(it,pt),o=Math.imul(it,gt),o=o+Math.imul(st,pt)|0,d=Math.imul(st,gt),l=l+Math.imul(rt,mt)|0,o=o+Math.imul(rt,yt)|0,o=o+Math.imul(nt,mt)|0,d=d+Math.imul(nt,yt)|0,l=l+Math.imul(tt,wt)|0,o=o+Math.imul(tt,vt)|0,o=o+Math.imul(et,wt)|0,d=d+Math.imul(et,vt)|0,l=l+Math.imul(X,bt)|0,o=o+Math.imul(X,kt)|0,o=o+Math.imul(Q,bt)|0,d=d+Math.imul(Q,kt)|0,l=l+Math.imul(H,St)|0,o=o+Math.imul(H,Mt)|0,o=o+Math.imul(j,St)|0,d=d+Math.imul(j,Mt)|0,l=l+Math.imul(R,_t)|0,o=o+Math.imul(R,xt)|0,o=o+Math.imul(B,_t)|0,d=d+Math.imul(B,xt)|0;var er=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(er>>>26)|0,er&=67108863,l=Math.imul(ot,pt),o=Math.imul(ot,gt),o=o+Math.imul(at,pt)|0,d=Math.imul(at,gt),l=l+Math.imul(it,mt)|0,o=o+Math.imul(it,yt)|0,o=o+Math.imul(st,mt)|0,d=d+Math.imul(st,yt)|0,l=l+Math.imul(rt,wt)|0,o=o+Math.imul(rt,vt)|0,o=o+Math.imul(nt,wt)|0,d=d+Math.imul(nt,vt)|0,l=l+Math.imul(tt,bt)|0,o=o+Math.imul(tt,kt)|0,o=o+Math.imul(et,bt)|0,d=d+Math.imul(et,kt)|0,l=l+Math.imul(X,St)|0,o=o+Math.imul(X,Mt)|0,o=o+Math.imul(Q,St)|0,d=d+Math.imul(Q,Mt)|0,l=l+Math.imul(H,_t)|0,o=o+Math.imul(H,xt)|0,o=o+Math.imul(j,_t)|0,d=d+Math.imul(j,xt)|0,l=l+Math.imul(R,It)|0,o=o+Math.imul(R,At)|0,o=o+Math.imul(B,It)|0,d=d+Math.imul(B,At)|0;var rr=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(rr>>>26)|0,rr&=67108863,l=Math.imul(ct,pt),o=Math.imul(ct,gt),o=o+Math.imul(ut,pt)|0,d=Math.imul(ut,gt),l=l+Math.imul(ot,mt)|0,o=o+Math.imul(ot,yt)|0,o=o+Math.imul(at,mt)|0,d=d+Math.imul(at,yt)|0,l=l+Math.imul(it,wt)|0,o=o+Math.imul(it,vt)|0,o=o+Math.imul(st,wt)|0,d=d+Math.imul(st,vt)|0,l=l+Math.imul(rt,bt)|0,o=o+Math.imul(rt,kt)|0,o=o+Math.imul(nt,bt)|0,d=d+Math.imul(nt,kt)|0,l=l+Math.imul(tt,St)|0,o=o+Math.imul(tt,Mt)|0,o=o+Math.imul(et,St)|0,d=d+Math.imul(et,Mt)|0,l=l+Math.imul(X,_t)|0,o=o+Math.imul(X,xt)|0,o=o+Math.imul(Q,_t)|0,d=d+Math.imul(Q,xt)|0,l=l+Math.imul(H,It)|0,o=o+Math.imul(H,At)|0,o=o+Math.imul(j,It)|0,d=d+Math.imul(j,At)|0,l=l+Math.imul(R,Et)|0,o=o+Math.imul(R,Rt)|0,o=o+Math.imul(B,Et)|0,d=d+Math.imul(B,Rt)|0;var nr=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(nr>>>26)|0,nr&=67108863,l=Math.imul(ht,pt),o=Math.imul(ht,gt),o=o+Math.imul(lt,pt)|0,d=Math.imul(lt,gt),l=l+Math.imul(ct,mt)|0,o=o+Math.imul(ct,yt)|0,o=o+Math.imul(ut,mt)|0,d=d+Math.imul(ut,yt)|0,l=l+Math.imul(ot,wt)|0,o=o+Math.imul(ot,vt)|0,o=o+Math.imul(at,wt)|0,d=d+Math.imul(at,vt)|0,l=l+Math.imul(it,bt)|0,o=o+Math.imul(it,kt)|0,o=o+Math.imul(st,bt)|0,d=d+Math.imul(st,kt)|0,l=l+Math.imul(rt,St)|0,o=o+Math.imul(rt,Mt)|0,o=o+Math.imul(nt,St)|0,d=d+Math.imul(nt,Mt)|0,l=l+Math.imul(tt,_t)|0,o=o+Math.imul(tt,xt)|0,o=o+Math.imul(et,_t)|0,d=d+Math.imul(et,xt)|0,l=l+Math.imul(X,It)|0,o=o+Math.imul(X,At)|0,o=o+Math.imul(Q,It)|0,d=d+Math.imul(Q,At)|0,l=l+Math.imul(H,Et)|0,o=o+Math.imul(H,Rt)|0,o=o+Math.imul(j,Et)|0,d=d+Math.imul(j,Rt)|0,l=l+Math.imul(R,Pt)|0,o=o+Math.imul(R,Tt)|0,o=o+Math.imul(B,Pt)|0,d=d+Math.imul(B,Tt)|0;var ir=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(ir>>>26)|0,ir&=67108863,l=Math.imul(ft,pt),o=Math.imul(ft,gt),o=o+Math.imul(dt,pt)|0,d=Math.imul(dt,gt),l=l+Math.imul(ht,mt)|0,o=o+Math.imul(ht,yt)|0,o=o+Math.imul(lt,mt)|0,d=d+Math.imul(lt,yt)|0,l=l+Math.imul(ct,wt)|0,o=o+Math.imul(ct,vt)|0,o=o+Math.imul(ut,wt)|0,d=d+Math.imul(ut,vt)|0,l=l+Math.imul(ot,bt)|0,o=o+Math.imul(ot,kt)|0,o=o+Math.imul(at,bt)|0,d=d+Math.imul(at,kt)|0,l=l+Math.imul(it,St)|0,o=o+Math.imul(it,Mt)|0,o=o+Math.imul(st,St)|0,d=d+Math.imul(st,Mt)|0,l=l+Math.imul(rt,_t)|0,o=o+Math.imul(rt,xt)|0,o=o+Math.imul(nt,_t)|0,d=d+Math.imul(nt,xt)|0,l=l+Math.imul(tt,It)|0,o=o+Math.imul(tt,At)|0,o=o+Math.imul(et,It)|0,d=d+Math.imul(et,At)|0,l=l+Math.imul(X,Et)|0,o=o+Math.imul(X,Rt)|0,o=o+Math.imul(Q,Et)|0,d=d+Math.imul(Q,Rt)|0,l=l+Math.imul(H,Pt)|0,o=o+Math.imul(H,Tt)|0,o=o+Math.imul(j,Pt)|0,d=d+Math.imul(j,Tt)|0,l=l+Math.imul(R,Bt)|0,o=o+Math.imul(R,Lt)|0,o=o+Math.imul(B,Bt)|0,d=d+Math.imul(B,Lt)|0;var sr=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(sr>>>26)|0,sr&=67108863,l=Math.imul(ft,mt),o=Math.imul(ft,yt),o=o+Math.imul(dt,mt)|0,d=Math.imul(dt,yt),l=l+Math.imul(ht,wt)|0,o=o+Math.imul(ht,vt)|0,o=o+Math.imul(lt,wt)|0,d=d+Math.imul(lt,vt)|0,l=l+Math.imul(ct,bt)|0,o=o+Math.imul(ct,kt)|0,o=o+Math.imul(ut,bt)|0,d=d+Math.imul(ut,kt)|0,l=l+Math.imul(ot,St)|0,o=o+Math.imul(ot,Mt)|0,o=o+Math.imul(at,St)|0,d=d+Math.imul(at,Mt)|0,l=l+Math.imul(it,_t)|0,o=o+Math.imul(it,xt)|0,o=o+Math.imul(st,_t)|0,d=d+Math.imul(st,xt)|0,l=l+Math.imul(rt,It)|0,o=o+Math.imul(rt,At)|0,o=o+Math.imul(nt,It)|0,d=d+Math.imul(nt,At)|0,l=l+Math.imul(tt,Et)|0,o=o+Math.imul(tt,Rt)|0,o=o+Math.imul(et,Et)|0,d=d+Math.imul(et,Rt)|0,l=l+Math.imul(X,Pt)|0,o=o+Math.imul(X,Tt)|0,o=o+Math.imul(Q,Pt)|0,d=d+Math.imul(Q,Tt)|0,l=l+Math.imul(H,Bt)|0,o=o+Math.imul(H,Lt)|0,o=o+Math.imul(j,Bt)|0,d=d+Math.imul(j,Lt)|0;var or=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(or>>>26)|0,or&=67108863,l=Math.imul(ft,wt),o=Math.imul(ft,vt),o=o+Math.imul(dt,wt)|0,d=Math.imul(dt,vt),l=l+Math.imul(ht,bt)|0,o=o+Math.imul(ht,kt)|0,o=o+Math.imul(lt,bt)|0,d=d+Math.imul(lt,kt)|0,l=l+Math.imul(ct,St)|0,o=o+Math.imul(ct,Mt)|0,o=o+Math.imul(ut,St)|0,d=d+Math.imul(ut,Mt)|0,l=l+Math.imul(ot,_t)|0,o=o+Math.imul(ot,xt)|0,o=o+Math.imul(at,_t)|0,d=d+Math.imul(at,xt)|0,l=l+Math.imul(it,It)|0,o=o+Math.imul(it,At)|0,o=o+Math.imul(st,It)|0,d=d+Math.imul(st,At)|0,l=l+Math.imul(rt,Et)|0,o=o+Math.imul(rt,Rt)|0,o=o+Math.imul(nt,Et)|0,d=d+Math.imul(nt,Rt)|0,l=l+Math.imul(tt,Pt)|0,o=o+Math.imul(tt,Tt)|0,o=o+Math.imul(et,Pt)|0,d=d+Math.imul(et,Tt)|0,l=l+Math.imul(X,Bt)|0,o=o+Math.imul(X,Lt)|0,o=o+Math.imul(Q,Bt)|0,d=d+Math.imul(Q,Lt)|0;var ar=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(ar>>>26)|0,ar&=67108863,l=Math.imul(ft,bt),o=Math.imul(ft,kt),o=o+Math.imul(dt,bt)|0,d=Math.imul(dt,kt),l=l+Math.imul(ht,St)|0,o=o+Math.imul(ht,Mt)|0,o=o+Math.imul(lt,St)|0,d=d+Math.imul(lt,Mt)|0,l=l+Math.imul(ct,_t)|0,o=o+Math.imul(ct,xt)|0,o=o+Math.imul(ut,_t)|0,d=d+Math.imul(ut,xt)|0,l=l+Math.imul(ot,It)|0,o=o+Math.imul(ot,At)|0,o=o+Math.imul(at,It)|0,d=d+Math.imul(at,At)|0,l=l+Math.imul(it,Et)|0,o=o+Math.imul(it,Rt)|0,o=o+Math.imul(st,Et)|0,d=d+Math.imul(st,Rt)|0,l=l+Math.imul(rt,Pt)|0,o=o+Math.imul(rt,Tt)|0,o=o+Math.imul(nt,Pt)|0,d=d+Math.imul(nt,Tt)|0,l=l+Math.imul(tt,Bt)|0,o=o+Math.imul(tt,Lt)|0,o=o+Math.imul(et,Bt)|0,d=d+Math.imul(et,Lt)|0;var cr=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(cr>>>26)|0,cr&=67108863,l=Math.imul(ft,St),o=Math.imul(ft,Mt),o=o+Math.imul(dt,St)|0,d=Math.imul(dt,Mt),l=l+Math.imul(ht,_t)|0,o=o+Math.imul(ht,xt)|0,o=o+Math.imul(lt,_t)|0,d=d+Math.imul(lt,xt)|0,l=l+Math.imul(ct,It)|0,o=o+Math.imul(ct,At)|0,o=o+Math.imul(ut,It)|0,d=d+Math.imul(ut,At)|0,l=l+Math.imul(ot,Et)|0,o=o+Math.imul(ot,Rt)|0,o=o+Math.imul(at,Et)|0,d=d+Math.imul(at,Rt)|0,l=l+Math.imul(it,Pt)|0,o=o+Math.imul(it,Tt)|0,o=o+Math.imul(st,Pt)|0,d=d+Math.imul(st,Tt)|0,l=l+Math.imul(rt,Bt)|0,o=o+Math.imul(rt,Lt)|0,o=o+Math.imul(nt,Bt)|0,d=d+Math.imul(nt,Lt)|0;var ur=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(ur>>>26)|0,ur&=67108863,l=Math.imul(ft,_t),o=Math.imul(ft,xt),o=o+Math.imul(dt,_t)|0,d=Math.imul(dt,xt),l=l+Math.imul(ht,It)|0,o=o+Math.imul(ht,At)|0,o=o+Math.imul(lt,It)|0,d=d+Math.imul(lt,At)|0,l=l+Math.imul(ct,Et)|0,o=o+Math.imul(ct,Rt)|0,o=o+Math.imul(ut,Et)|0,d=d+Math.imul(ut,Rt)|0,l=l+Math.imul(ot,Pt)|0,o=o+Math.imul(ot,Tt)|0,o=o+Math.imul(at,Pt)|0,d=d+Math.imul(at,Tt)|0,l=l+Math.imul(it,Bt)|0,o=o+Math.imul(it,Lt)|0,o=o+Math.imul(st,Bt)|0,d=d+Math.imul(st,Lt)|0;var hr=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(hr>>>26)|0,hr&=67108863,l=Math.imul(ft,It),o=Math.imul(ft,At),o=o+Math.imul(dt,It)|0,d=Math.imul(dt,At),l=l+Math.imul(ht,Et)|0,o=o+Math.imul(ht,Rt)|0,o=o+Math.imul(lt,Et)|0,d=d+Math.imul(lt,Rt)|0,l=l+Math.imul(ct,Pt)|0,o=o+Math.imul(ct,Tt)|0,o=o+Math.imul(ut,Pt)|0,d=d+Math.imul(ut,Tt)|0,l=l+Math.imul(ot,Bt)|0,o=o+Math.imul(ot,Lt)|0,o=o+Math.imul(at,Bt)|0,d=d+Math.imul(at,Lt)|0;var lr=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(lr>>>26)|0,lr&=67108863,l=Math.imul(ft,Et),o=Math.imul(ft,Rt),o=o+Math.imul(dt,Et)|0,d=Math.imul(dt,Rt),l=l+Math.imul(ht,Pt)|0,o=o+Math.imul(ht,Tt)|0,o=o+Math.imul(lt,Pt)|0,d=d+Math.imul(lt,Tt)|0,l=l+Math.imul(ct,Bt)|0,o=o+Math.imul(ct,Lt)|0,o=o+Math.imul(ut,Bt)|0,d=d+Math.imul(ut,Lt)|0;var fr=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(fr>>>26)|0,fr&=67108863,l=Math.imul(ft,Pt),o=Math.imul(ft,Tt),o=o+Math.imul(dt,Pt)|0,d=Math.imul(dt,Tt),l=l+Math.imul(ht,Bt)|0,o=o+Math.imul(ht,Lt)|0,o=o+Math.imul(lt,Bt)|0,d=d+Math.imul(lt,Lt)|0;var dr=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(dr>>>26)|0,dr&=67108863,l=Math.imul(ft,Bt),o=Math.imul(ft,Lt),o=o+Math.imul(dt,Bt)|0,d=Math.imul(dt,Lt);var pr=(v+l|0)+((o&8191)<<13)|0;return v=(d+(o>>>13)|0)+(pr>>>26)|0,pr&=67108863,y[0]=Ze,y[1]=Ye,y[2]=Xe,y[3]=Qe,y[4]=tr,y[5]=er,y[6]=rr,y[7]=nr,y[8]=ir,y[9]=sr,y[10]=or,y[11]=ar,y[12]=cr,y[13]=ur,y[14]=hr,y[15]=lr,y[16]=fr,y[17]=dr,y[18]=pr,v!==0&&(y[19]=v,h.length++),h};Math.imul||(D=z);function J(g,n,c){c.negative=n.negative^g.negative,c.length=g.length+n.length;for(var h=0,f=0,p=0;p<c.length-1;p++){var y=f;f=0;for(var v=h&67108863,l=Math.min(p,n.length-1),o=Math.max(0,p-g.length+1);o<=l;o++){var d=p-o,T=g.words[d]|0,R=n.words[o]|0,B=T*R,Ut=B&67108863;y=y+(B/67108864|0)|0,Ut=Ut+v|0,v=Ut&67108863,y=y+(Ut>>>26)|0,f+=y>>>26,y&=67108863}c.words[p]=v,h=y,y=f}return h!==0?c.words[p]=h:c.length--,c._strip()}function Y(g,n,c){return J(g,n,c)}i.prototype.mulTo=function(n,c){var h,f=this.length+n.length;return this.length===10&&n.length===10?h=D(this,n,c):f<63?h=z(this,n,c):f<1024?h=J(this,n,c):h=Y(this,n,c),h},i.prototype.mul=function(n){var c=new i(null);return c.words=new Array(this.length+n.length),this.mulTo(n,c)},i.prototype.mulf=function(n){var c=new i(null);return c.words=new Array(this.length+n.length),Y(this,n,c)},i.prototype.imul=function(n){return this.clone().mulTo(n,this)},i.prototype.imuln=function(n){var c=n<0;c&&(n=-n),r(typeof n=="number"),r(n<67108864);for(var h=0,f=0;f<this.length;f++){var p=(this.words[f]|0)*n,y=(p&67108863)+(h&67108863);h>>=26,h+=p/67108864|0,h+=y>>>26,this.words[f]=y&67108863}return h!==0&&(this.words[f]=h,this.length++),c?this.ineg():this},i.prototype.muln=function(n){return this.clone().imuln(n)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(n){var c=P(n);if(c.length===0)return new i(1);for(var h=this,f=0;f<c.length&&c[f]===0;f++,h=h.sqr());if(++f<c.length)for(var p=h.sqr();f<c.length;f++,p=p.sqr())c[f]!==0&&(h=h.mul(p));return h},i.prototype.iushln=function(n){r(typeof n=="number"&&n>=0);var c=n%26,h=(n-c)/26,f=67108863>>>26-c<<26-c,p;if(c!==0){var y=0;for(p=0;p<this.length;p++){var v=this.words[p]&f,l=(this.words[p]|0)-v<<c;this.words[p]=l|y,y=v>>>26-c}y&&(this.words[p]=y,this.length++)}if(h!==0){for(p=this.length-1;p>=0;p--)this.words[p+h]=this.words[p];for(p=0;p<h;p++)this.words[p]=0;this.length+=h}return this._strip()},i.prototype.ishln=function(n){return r(this.negative===0),this.iushln(n)},i.prototype.iushrn=function(n,c,h){r(typeof n=="number"&&n>=0);var f;c?f=(c-c%26)/26:f=0;var p=n%26,y=Math.min((n-p)/26,this.length),v=67108863^67108863>>>p<<p,l=h;if(f-=y,f=Math.max(0,f),l){for(var o=0;o<y;o++)l.words[o]=this.words[o];l.length=y}if(y!==0)if(this.length>y)for(this.length-=y,o=0;o<this.length;o++)this.words[o]=this.words[o+y];else this.words[0]=0,this.length=1;var d=0;for(o=this.length-1;o>=0&&(d!==0||o>=f);o--){var T=this.words[o]|0;this.words[o]=d<<26-p|T>>>p,d=T&v}return l&&d!==0&&(l.words[l.length++]=d),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(n,c,h){return r(this.negative===0),this.iushrn(n,c,h)},i.prototype.shln=function(n){return this.clone().ishln(n)},i.prototype.ushln=function(n){return this.clone().iushln(n)},i.prototype.shrn=function(n){return this.clone().ishrn(n)},i.prototype.ushrn=function(n){return this.clone().iushrn(n)},i.prototype.testn=function(n){r(typeof n=="number"&&n>=0);var c=n%26,h=(n-c)/26,f=1<<c;if(this.length<=h)return!1;var p=this.words[h];return!!(p&f)},i.prototype.imaskn=function(n){r(typeof n=="number"&&n>=0);var c=n%26,h=(n-c)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(c!==0&&h++,this.length=Math.min(h,this.length),c!==0){var f=67108863^67108863>>>c<<c;this.words[this.length-1]&=f}return this._strip()},i.prototype.maskn=function(n){return this.clone().imaskn(n)},i.prototype.iaddn=function(n){return r(typeof n=="number"),r(n<67108864),n<0?this.isubn(-n):this.negative!==0?this.length===1&&(this.words[0]|0)<=n?(this.words[0]=n-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this):this._iaddn(n)},i.prototype._iaddn=function(n){this.words[0]+=n;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},i.prototype.isubn=function(n){if(r(typeof n=="number"),r(n<67108864),n<0)return this.iaddn(-n);if(this.negative!==0)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this._strip()},i.prototype.addn=function(n){return this.clone().iaddn(n)},i.prototype.subn=function(n){return this.clone().isubn(n)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(n,c,h){var f=n.length+h,p;this._expand(f);var y,v=0;for(p=0;p<n.length;p++){y=(this.words[p+h]|0)+v;var l=(n.words[p]|0)*c;y-=l&67108863,v=(y>>26)-(l/67108864|0),this.words[p+h]=y&67108863}for(;p<this.length-h;p++)y=(this.words[p+h]|0)+v,v=y>>26,this.words[p+h]=y&67108863;if(v===0)return this._strip();for(r(v===-1),v=0,p=0;p<this.length;p++)y=-(this.words[p]|0)+v,v=y>>26,this.words[p]=y&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(n,c){var h=this.length-n.length,f=this.clone(),p=n,y=p.words[p.length-1]|0,v=this._countBits(y);h=26-v,h!==0&&(p=p.ushln(h),f.iushln(h),y=p.words[p.length-1]|0);var l=f.length-p.length,o;if(c!=="mod"){o=new i(null),o.length=l+1,o.words=new Array(o.length);for(var d=0;d<o.length;d++)o.words[d]=0}var T=f.clone()._ishlnsubmul(p,1,l);T.negative===0&&(f=T,o&&(o.words[l]=1));for(var R=l-1;R>=0;R--){var B=(f.words[p.length+R]|0)*67108864+(f.words[p.length+R-1]|0);for(B=Math.min(B/y|0,67108863),f._ishlnsubmul(p,B,R);f.negative!==0;)B--,f.negative=0,f._ishlnsubmul(p,1,R),f.isZero()||(f.negative^=1);o&&(o.words[R]=B)}return o&&o._strip(),f._strip(),c!=="div"&&h!==0&&f.iushrn(h),{div:o||null,mod:f}},i.prototype.divmod=function(n,c,h){if(r(!n.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var f,p,y;return this.negative!==0&&n.negative===0?(y=this.neg().divmod(n,c),c!=="mod"&&(f=y.div.neg()),c!=="div"&&(p=y.mod.neg(),h&&p.negative!==0&&p.iadd(n)),{div:f,mod:p}):this.negative===0&&n.negative!==0?(y=this.divmod(n.neg(),c),c!=="mod"&&(f=y.div.neg()),{div:f,mod:y.mod}):this.negative&n.negative?(y=this.neg().divmod(n.neg(),c),c!=="div"&&(p=y.mod.neg(),h&&p.negative!==0&&p.isub(n)),{div:y.div,mod:p}):n.length>this.length||this.cmp(n)<0?{div:new i(0),mod:this}:n.length===1?c==="div"?{div:this.divn(n.words[0]),mod:null}:c==="mod"?{div:null,mod:new i(this.modrn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new i(this.modrn(n.words[0]))}:this._wordDiv(n,c)},i.prototype.div=function(n){return this.divmod(n,"div",!1).div},i.prototype.mod=function(n){return this.divmod(n,"mod",!1).mod},i.prototype.umod=function(n){return this.divmod(n,"mod",!0).mod},i.prototype.divRound=function(n){var c=this.divmod(n);if(c.mod.isZero())return c.div;var h=c.div.negative!==0?c.mod.isub(n):c.mod,f=n.ushrn(1),p=n.andln(1),y=h.cmp(f);return y<0||p===1&&y===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},i.prototype.modrn=function(n){var c=n<0;c&&(n=-n),r(n<=67108863);for(var h=(1<<26)%n,f=0,p=this.length-1;p>=0;p--)f=(h*f+(this.words[p]|0))%n;return c?-f:f},i.prototype.modn=function(n){return this.modrn(n)},i.prototype.idivn=function(n){var c=n<0;c&&(n=-n),r(n<=67108863);for(var h=0,f=this.length-1;f>=0;f--){var p=(this.words[f]|0)+h*67108864;this.words[f]=p/n|0,h=p%n}return this._strip(),c?this.ineg():this},i.prototype.divn=function(n){return this.clone().idivn(n)},i.prototype.egcd=function(n){r(n.negative===0),r(!n.isZero());var c=this,h=n.clone();c.negative!==0?c=c.umod(n):c=c.clone();for(var f=new i(1),p=new i(0),y=new i(0),v=new i(1),l=0;c.isEven()&&h.isEven();)c.iushrn(1),h.iushrn(1),++l;for(var o=h.clone(),d=c.clone();!c.isZero();){for(var T=0,R=1;!(c.words[0]&R)&&T<26;++T,R<<=1);if(T>0)for(c.iushrn(T);T-- >0;)(f.isOdd()||p.isOdd())&&(f.iadd(o),p.isub(d)),f.iushrn(1),p.iushrn(1);for(var B=0,Ut=1;!(h.words[0]&Ut)&&B<26;++B,Ut<<=1);if(B>0)for(h.iushrn(B);B-- >0;)(y.isOdd()||v.isOdd())&&(y.iadd(o),v.isub(d)),y.iushrn(1),v.iushrn(1);c.cmp(h)>=0?(c.isub(h),f.isub(y),p.isub(v)):(h.isub(c),y.isub(f),v.isub(p))}return{a:y,b:v,gcd:h.iushln(l)}},i.prototype._invmp=function(n){r(n.negative===0),r(!n.isZero());var c=this,h=n.clone();c.negative!==0?c=c.umod(n):c=c.clone();for(var f=new i(1),p=new i(0),y=h.clone();c.cmpn(1)>0&&h.cmpn(1)>0;){for(var v=0,l=1;!(c.words[0]&l)&&v<26;++v,l<<=1);if(v>0)for(c.iushrn(v);v-- >0;)f.isOdd()&&f.iadd(y),f.iushrn(1);for(var o=0,d=1;!(h.words[0]&d)&&o<26;++o,d<<=1);if(o>0)for(h.iushrn(o);o-- >0;)p.isOdd()&&p.iadd(y),p.iushrn(1);c.cmp(h)>=0?(c.isub(h),f.isub(p)):(h.isub(c),p.isub(f))}var T;return c.cmpn(1)===0?T=f:T=p,T.cmpn(0)<0&&T.iadd(n),T},i.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var c=this.clone(),h=n.clone();c.negative=0,h.negative=0;for(var f=0;c.isEven()&&h.isEven();f++)c.iushrn(1),h.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;h.isEven();)h.iushrn(1);var p=c.cmp(h);if(p<0){var y=c;c=h,h=y}else if(p===0||h.cmpn(1)===0)break;c.isub(h)}while(!0);return h.iushln(f)},i.prototype.invm=function(n){return this.egcd(n).a.umod(n)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(n){return this.words[0]&n},i.prototype.bincn=function(n){r(typeof n=="number");var c=n%26,h=(n-c)/26,f=1<<c;if(this.length<=h)return this._expand(h+1),this.words[h]|=f,this;for(var p=f,y=h;p!==0&&y<this.length;y++){var v=this.words[y]|0;v+=p,p=v>>>26,v&=67108863,this.words[y]=v}return p!==0&&(this.words[y]=p,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(n){var c=n<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this._strip();var h;if(this.length>1)h=1;else{c&&(n=-n),r(n<=67108863,"Number is too big");var f=this.words[0]|0;h=f===n?0:f<n?-1:1}return this.negative!==0?-h|0:h},i.prototype.cmp=function(n){if(this.negative!==0&&n.negative===0)return-1;if(this.negative===0&&n.negative!==0)return 1;var c=this.ucmp(n);return this.negative!==0?-c|0:c},i.prototype.ucmp=function(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var c=0,h=this.length-1;h>=0;h--){var f=this.words[h]|0,p=n.words[h]|0;if(f!==p){f<p?c=-1:f>p&&(c=1);break}}return c},i.prototype.gtn=function(n){return this.cmpn(n)===1},i.prototype.gt=function(n){return this.cmp(n)===1},i.prototype.gten=function(n){return this.cmpn(n)>=0},i.prototype.gte=function(n){return this.cmp(n)>=0},i.prototype.ltn=function(n){return this.cmpn(n)===-1},i.prototype.lt=function(n){return this.cmp(n)===-1},i.prototype.lten=function(n){return this.cmpn(n)<=0},i.prototype.lte=function(n){return this.cmp(n)<=0},i.prototype.eqn=function(n){return this.cmpn(n)===0},i.prototype.eq=function(n){return this.cmp(n)===0},i.red=function(n){return new Z(n)},i.prototype.toRed=function(n){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),n.convertTo(this)._forceRed(n)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(n){return this.red=n,this},i.prototype.forceRed=function(n){return r(!this.red,"Already a number in reduction context"),this._forceRed(n)},i.prototype.redAdd=function(n){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,n)},i.prototype.redIAdd=function(n){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,n)},i.prototype.redSub=function(n){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,n)},i.prototype.redISub=function(n){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,n)},i.prototype.redShl=function(n){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,n)},i.prototype.redMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.mul(this,n)},i.prototype.redIMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.imul(this,n)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(n){return r(this.red&&!n.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,n)};var Ht={k256:null,p224:null,p192:null,p25519:null};function V(g,n){this.name=g,this.p=new i(n,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}V.prototype._tmp=function(){var n=new i(null);return n.words=new Array(Math.ceil(this.n/13)),n},V.prototype.ireduce=function(n){var c=n,h;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),h=c.bitLength();while(h>this.n);var f=h<this.n?-1:c.ucmp(this.p);return f===0?(c.words[0]=0,c.length=1):f>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},V.prototype.split=function(n,c){n.iushrn(this.n,0,c)},V.prototype.imulK=function(n){return n.imul(this.k)};function Dt(){V.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(Dt,V),Dt.prototype.split=function(n,c){for(var h=4194303,f=Math.min(n.length,9),p=0;p<f;p++)c.words[p]=n.words[p];if(c.length=f,n.length<=9){n.words[0]=0,n.length=1;return}var y=n.words[9];for(c.words[c.length++]=y&h,p=10;p<n.length;p++){var v=n.words[p]|0;n.words[p-10]=(v&h)<<4|y>>>22,y=v}y>>>=22,n.words[p-10]=y,y===0&&n.length>10?n.length-=10:n.length-=9},Dt.prototype.imulK=function(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var c=0,h=0;h<n.length;h++){var f=n.words[h]|0;c+=f*977,n.words[h]=c&67108863,c=f*64+(c/67108864|0)}return n.words[n.length-1]===0&&(n.length--,n.words[n.length-1]===0&&n.length--),n};function pe(){V.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(pe,V);function Fr(){V.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(Fr,V);function Je(){V.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(Je,V),Je.prototype.imulK=function(n){for(var c=0,h=0;h<n.length;h++){var f=(n.words[h]|0)*19+c,p=f&67108863;f>>>=26,n.words[h]=p,c=f}return c!==0&&(n.words[n.length++]=c),n},i._prime=function(n){if(Ht[n])return Ht[n];var c;if(n==="k256")c=new Dt;else if(n==="p224")c=new pe;else if(n==="p192")c=new Fr;else if(n==="p25519")c=new Je;else throw new Error("Unknown prime "+n);return Ht[n]=c,c};function Z(g){if(typeof g=="string"){var n=i._prime(g);this.m=n.p,this.prime=n}else r(g.gtn(1),"modulus must be greater than 1"),this.m=g,this.prime=null}Z.prototype._verify1=function(n){r(n.negative===0,"red works only with positives"),r(n.red,"red works only with red numbers")},Z.prototype._verify2=function(n,c){r((n.negative|c.negative)===0,"red works only with positives"),r(n.red&&n.red===c.red,"red works only with red numbers")},Z.prototype.imod=function(n){return this.prime?this.prime.ireduce(n)._forceRed(this):(_(n,n.umod(this.m)._forceRed(this)),n)},Z.prototype.neg=function(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},Z.prototype.add=function(n,c){this._verify2(n,c);var h=n.add(c);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},Z.prototype.iadd=function(n,c){this._verify2(n,c);var h=n.iadd(c);return h.cmp(this.m)>=0&&h.isub(this.m),h},Z.prototype.sub=function(n,c){this._verify2(n,c);var h=n.sub(c);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},Z.prototype.isub=function(n,c){this._verify2(n,c);var h=n.isub(c);return h.cmpn(0)<0&&h.iadd(this.m),h},Z.prototype.shl=function(n,c){return this._verify1(n),this.imod(n.ushln(c))},Z.prototype.imul=function(n,c){return this._verify2(n,c),this.imod(n.imul(c))},Z.prototype.mul=function(n,c){return this._verify2(n,c),this.imod(n.mul(c))},Z.prototype.isqr=function(n){return this.imul(n,n.clone())},Z.prototype.sqr=function(n){return this.mul(n,n)},Z.prototype.sqrt=function(n){if(n.isZero())return n.clone();var c=this.m.andln(3);if(r(c%2===1),c===3){var h=this.m.add(new i(1)).iushrn(2);return this.pow(n,h)}for(var f=this.m.subn(1),p=0;!f.isZero()&&f.andln(1)===0;)p++,f.iushrn(1);r(!f.isZero());var y=new i(1).toRed(this),v=y.redNeg(),l=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new i(2*o*o).toRed(this);this.pow(o,l).cmp(v)!==0;)o.redIAdd(v);for(var d=this.pow(o,f),T=this.pow(n,f.addn(1).iushrn(1)),R=this.pow(n,f),B=p;R.cmp(y)!==0;){for(var Ut=R,H=0;Ut.cmp(y)!==0;H++)Ut=Ut.redSqr();r(H<B);var j=this.pow(d,new i(1).iushln(B-H-1));T=T.redMul(j),d=j.redSqr(),R=R.redMul(d),B=H}return T},Z.prototype.invm=function(n){var c=n._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},Z.prototype.pow=function(n,c){if(c.isZero())return new i(1).toRed(this);if(c.cmpn(1)===0)return n.clone();var h=4,f=new Array(1<<h);f[0]=new i(1).toRed(this),f[1]=n;for(var p=2;p<f.length;p++)f[p]=this.mul(f[p-1],n);var y=f[0],v=0,l=0,o=c.bitLength()%26;for(o===0&&(o=26),p=c.length-1;p>=0;p--){for(var d=c.words[p],T=o-1;T>=0;T--){var R=d>>T&1;if(y!==f[0]&&(y=this.sqr(y)),R===0&&v===0){l=0;continue}v<<=1,v|=R,l++,!(l!==h&&(p!==0||T!==0))&&(y=this.mul(y,f[v]),l=0,v=0)}o=26}return y},Z.prototype.convertTo=function(n){var c=n.umod(this.m);return c===n?c.clone():c},Z.prototype.convertFrom=function(n){var c=n.clone();return c.red=null,c},i.mont=function(n){return new ge(n)};function ge(g){Z.call(this,g),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(ge,Z),ge.prototype.convertTo=function(n){return this.imod(n.ushln(this.shift))},ge.prototype.convertFrom=function(n){var c=this.imod(n.mul(this.rinv));return c.red=null,c},ge.prototype.imul=function(n,c){if(n.isZero()||c.isZero())return n.words[0]=0,n.length=1,n;var h=n.imul(c),f=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=h.isub(f).iushrn(this.shift),y=p;return p.cmp(this.m)>=0?y=p.isub(this.m):p.cmpn(0)<0&&(y=p.iadd(this.m)),y._forceRed(this)},ge.prototype.mul=function(n,c){if(n.isZero()||c.isZero())return new i(0)._forceRed(this);var h=n.mul(c),f=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=h.isub(f).iushrn(this.shift),y=p;return p.cmp(this.m)>=0?y=p.isub(this.m):p.cmpn(0)<0&&(y=p.iadd(this.m)),y._forceRed(this)},ge.prototype.invm=function(n){var c=this.imod(n._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(a,de)})(Si);var Wo=Si.exports;const Qi=vi(Wo);var kn=bs.Buffer;function qo(a){if(a.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<a.length;r++){var s=a.charAt(r),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=r}var u=a.length,m=a.charAt(0),w=Math.log(u)/Math.log(256),b=Math.log(256)/Math.log(u);function _(M){if((Array.isArray(M)||M instanceof Uint8Array)&&(M=kn.from(M)),!kn.isBuffer(M))throw new TypeError("Expected Buffer");if(M.length===0)return"";for(var x=0,A=0,P=0,z=M.length;P!==z&&M[P]===0;)P++,x++;for(var D=(z-P)*b+1>>>0,J=new Uint8Array(D);P!==z;){for(var Y=M[P],Ht=0,V=D-1;(Y!==0||Ht<A)&&V!==-1;V--,Ht++)Y+=256*J[V]>>>0,J[V]=Y%u>>>0,Y=Y/u>>>0;if(Y!==0)throw new Error("Non-zero carry");A=Ht,P++}for(var Dt=D-A;Dt!==D&&J[Dt]===0;)Dt++;for(var pe=m.repeat(x);Dt<D;++Dt)pe+=a.charAt(J[Dt]);return pe}function I(M){if(typeof M!="string")throw new TypeError("Expected String");if(M.length===0)return kn.alloc(0);for(var x=0,A=0,P=0;M[x]===m;)A++,x++;for(var z=(M.length-x)*w+1>>>0,D=new Uint8Array(z);x<M.length;){var J=t[M.charCodeAt(x)];if(J===255)return;for(var Y=0,Ht=z-1;(J!==0||Y<P)&&Ht!==-1;Ht--,Y++)J+=u*D[Ht]>>>0,D[Ht]=J%256>>>0,J=J/256>>>0;if(J!==0)throw new Error("Non-zero carry");P=Y,x++}for(var V=z-P;V!==z&&D[V]===0;)V++;var Dt=kn.allocUnsafe(A+(z-V));Dt.fill(0,0,A);for(var pe=A;V!==z;)Dt[pe++]=D[V++];return Dt}function C(M){var x=I(M);if(x)return x;throw new Error("Non-base"+u+" character")}return{encode:_,decodeUnsafe:I,decode:C}}var Fo=qo,Do=Fo,$o="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Vo=Do($o);const ae=vi(Vo);var oe={},Mi={exports:{}};Mi.exports;(function(a){(function(t,e){function r(g,n){if(!g)throw new Error(n||"Assertion failed")}function s(g,n){g.super_=n;var c=function(){};c.prototype=n.prototype,g.prototype=new c,g.prototype.constructor=g}function i(g,n,c){if(i.isBN(g))return g;this.negative=0,this.words=null,this.length=0,this.red=null,g!==null&&((n==="le"||n==="be")&&(c=n,n=10),this._init(g||0,n||10,c||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=wi.Buffer}catch{}i.isBN=function(n){return n instanceof i?!0:n!==null&&typeof n=="object"&&n.constructor.wordSize===i.wordSize&&Array.isArray(n.words)},i.max=function(n,c){return n.cmp(c)>0?n:c},i.min=function(n,c){return n.cmp(c)<0?n:c},i.prototype._init=function(n,c,h){if(typeof n=="number")return this._initNumber(n,c,h);if(typeof n=="object")return this._initArray(n,c,h);c==="hex"&&(c=16),r(c===(c|0)&&c>=2&&c<=36),n=n.toString().replace(/\s+/g,"");var f=0;n[0]==="-"&&(f++,this.negative=1),f<n.length&&(c===16?this._parseHex(n,f,h):(this._parseBase(n,c,f),h==="le"&&this._initArray(this.toArray(),c,h)))},i.prototype._initNumber=function(n,c,h){n<0&&(this.negative=1,n=-n),n<67108864?(this.words=[n&67108863],this.length=1):n<4503599627370496?(this.words=[n&67108863,n/67108864&67108863],this.length=2):(r(n<9007199254740992),this.words=[n&67108863,n/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),c,h)},i.prototype._initArray=function(n,c,h){if(r(typeof n.length=="number"),n.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(n.length/3),this.words=new Array(this.length);for(var f=0;f<this.length;f++)this.words[f]=0;var p,y,v=0;if(h==="be")for(f=n.length-1,p=0;f>=0;f-=3)y=n[f]|n[f-1]<<8|n[f-2]<<16,this.words[p]|=y<<v&67108863,this.words[p+1]=y>>>26-v&67108863,v+=24,v>=26&&(v-=26,p++);else if(h==="le")for(f=0,p=0;f<n.length;f+=3)y=n[f]|n[f+1]<<8|n[f+2]<<16,this.words[p]|=y<<v&67108863,this.words[p+1]=y>>>26-v&67108863,v+=24,v>=26&&(v-=26,p++);return this._strip()};function m(g,n){var c=g.charCodeAt(n);if(c>=48&&c<=57)return c-48;if(c>=65&&c<=70)return c-55;if(c>=97&&c<=102)return c-87;r(!1,"Invalid character in "+g)}function w(g,n,c){var h=m(g,c);return c-1>=n&&(h|=m(g,c-1)<<4),h}i.prototype._parseHex=function(n,c,h){this.length=Math.ceil((n.length-c)/6),this.words=new Array(this.length);for(var f=0;f<this.length;f++)this.words[f]=0;var p=0,y=0,v;if(h==="be")for(f=n.length-1;f>=c;f-=2)v=w(n,c,f)<<p,this.words[y]|=v&67108863,p>=18?(p-=18,y+=1,this.words[y]|=v>>>26):p+=8;else{var l=n.length-c;for(f=l%2===0?c+1:c;f<n.length;f+=2)v=w(n,c,f)<<p,this.words[y]|=v&67108863,p>=18?(p-=18,y+=1,this.words[y]|=v>>>26):p+=8}this._strip()};function b(g,n,c,h){for(var f=0,p=0,y=Math.min(g.length,c),v=n;v<y;v++){var l=g.charCodeAt(v)-48;f*=h,l>=49?p=l-49+10:l>=17?p=l-17+10:p=l,r(l>=0&&p<h,"Invalid character"),f+=p}return f}i.prototype._parseBase=function(n,c,h){this.words=[0],this.length=1;for(var f=0,p=1;p<=67108863;p*=c)f++;f--,p=p/c|0;for(var y=n.length-h,v=y%f,l=Math.min(y,y-v)+h,o=0,d=h;d<l;d+=f)o=b(n,d,d+f,c),this.imuln(p),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(v!==0){var T=1;for(o=b(n,d,n.length,c),d=0;d<v;d++)T*=c;this.imuln(T),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}this._strip()},i.prototype.copy=function(n){n.words=new Array(this.length);for(var c=0;c<this.length;c++)n.words[c]=this.words[c];n.length=this.length,n.negative=this.negative,n.red=this.red};function _(g,n){g.words=n.words,g.length=n.length,g.negative=n.negative,g.red=n.red}if(i.prototype._move=function(n){_(n,this)},i.prototype.clone=function(){var n=new i(null);return this.copy(n),n},i.prototype._expand=function(n){for(;this.length<n;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=I}catch{i.prototype.inspect=I}else i.prototype.inspect=I;function I(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var C=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],x=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(n,c){n=n||10,c=c|0||1;var h;if(n===16||n==="hex"){h="";for(var f=0,p=0,y=0;y<this.length;y++){var v=this.words[y],l=((v<<f|p)&16777215).toString(16);p=v>>>24-f&16777215,f+=2,f>=26&&(f-=26,y--),p!==0||y!==this.length-1?h=C[6-l.length]+l+h:h=l+h}for(p!==0&&(h=p.toString(16)+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(n===(n|0)&&n>=2&&n<=36){var o=M[n],d=x[n];h="";var T=this.clone();for(T.negative=0;!T.isZero();){var R=T.modrn(d).toString(n);T=T.idivn(d),T.isZero()?h=R+h:h=C[o-R.length]+R+h}for(this.isZero()&&(h="0"+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var n=this.words[0];return this.length===2?n+=this.words[1]*67108864:this.length===3&&this.words[2]===1?n+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-n:n},i.prototype.toJSON=function(){return this.toString(16,2)},u&&(i.prototype.toBuffer=function(n,c){return this.toArrayLike(u,n,c)}),i.prototype.toArray=function(n,c){return this.toArrayLike(Array,n,c)};var A=function(n,c){return n.allocUnsafe?n.allocUnsafe(c):new n(c)};i.prototype.toArrayLike=function(n,c,h){this._strip();var f=this.byteLength(),p=h||Math.max(1,f);r(f<=p,"byte array longer than desired length"),r(p>0,"Requested array length <= 0");var y=A(n,p),v=c==="le"?"LE":"BE";return this["_toArrayLike"+v](y,f),y},i.prototype._toArrayLikeLE=function(n,c){for(var h=0,f=0,p=0,y=0;p<this.length;p++){var v=this.words[p]<<y|f;n[h++]=v&255,h<n.length&&(n[h++]=v>>8&255),h<n.length&&(n[h++]=v>>16&255),y===6?(h<n.length&&(n[h++]=v>>24&255),f=0,y=0):(f=v>>>24,y+=2)}if(h<n.length)for(n[h++]=f;h<n.length;)n[h++]=0},i.prototype._toArrayLikeBE=function(n,c){for(var h=n.length-1,f=0,p=0,y=0;p<this.length;p++){var v=this.words[p]<<y|f;n[h--]=v&255,h>=0&&(n[h--]=v>>8&255),h>=0&&(n[h--]=v>>16&255),y===6?(h>=0&&(n[h--]=v>>24&255),f=0,y=0):(f=v>>>24,y+=2)}if(h>=0)for(n[h--]=f;h>=0;)n[h--]=0},Math.clz32?i.prototype._countBits=function(n){return 32-Math.clz32(n)}:i.prototype._countBits=function(n){var c=n,h=0;return c>=4096&&(h+=13,c>>>=13),c>=64&&(h+=7,c>>>=7),c>=8&&(h+=4,c>>>=4),c>=2&&(h+=2,c>>>=2),h+c},i.prototype._zeroBits=function(n){if(n===0)return 26;var c=n,h=0;return c&8191||(h+=13,c>>>=13),c&127||(h+=7,c>>>=7),c&15||(h+=4,c>>>=4),c&3||(h+=2,c>>>=2),c&1||h++,h},i.prototype.bitLength=function(){var n=this.words[this.length-1],c=this._countBits(n);return(this.length-1)*26+c};function P(g){for(var n=new Array(g.bitLength()),c=0;c<n.length;c++){var h=c/26|0,f=c%26;n[c]=g.words[h]>>>f&1}return n}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var n=0,c=0;c<this.length;c++){var h=this._zeroBits(this.words[c]);if(n+=h,h!==26)break}return n},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(n){return this.negative!==0?this.abs().inotn(n).iaddn(1):this.clone()},i.prototype.fromTwos=function(n){return this.testn(n-1)?this.notn(n).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(n){for(;this.length<n.length;)this.words[this.length++]=0;for(var c=0;c<n.length;c++)this.words[c]=this.words[c]|n.words[c];return this._strip()},i.prototype.ior=function(n){return r((this.negative|n.negative)===0),this.iuor(n)},i.prototype.or=function(n){return this.length>n.length?this.clone().ior(n):n.clone().ior(this)},i.prototype.uor=function(n){return this.length>n.length?this.clone().iuor(n):n.clone().iuor(this)},i.prototype.iuand=function(n){var c;this.length>n.length?c=n:c=this;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]&n.words[h];return this.length=c.length,this._strip()},i.prototype.iand=function(n){return r((this.negative|n.negative)===0),this.iuand(n)},i.prototype.and=function(n){return this.length>n.length?this.clone().iand(n):n.clone().iand(this)},i.prototype.uand=function(n){return this.length>n.length?this.clone().iuand(n):n.clone().iuand(this)},i.prototype.iuxor=function(n){var c,h;this.length>n.length?(c=this,h=n):(c=n,h=this);for(var f=0;f<h.length;f++)this.words[f]=c.words[f]^h.words[f];if(this!==c)for(;f<c.length;f++)this.words[f]=c.words[f];return this.length=c.length,this._strip()},i.prototype.ixor=function(n){return r((this.negative|n.negative)===0),this.iuxor(n)},i.prototype.xor=function(n){return this.length>n.length?this.clone().ixor(n):n.clone().ixor(this)},i.prototype.uxor=function(n){return this.length>n.length?this.clone().iuxor(n):n.clone().iuxor(this)},i.prototype.inotn=function(n){r(typeof n=="number"&&n>=0);var c=Math.ceil(n/26)|0,h=n%26;this._expand(c),h>0&&c--;for(var f=0;f<c;f++)this.words[f]=~this.words[f]&67108863;return h>0&&(this.words[f]=~this.words[f]&67108863>>26-h),this._strip()},i.prototype.notn=function(n){return this.clone().inotn(n)},i.prototype.setn=function(n,c){r(typeof n=="number"&&n>=0);var h=n/26|0,f=n%26;return this._expand(h+1),c?this.words[h]=this.words[h]|1<<f:this.words[h]=this.words[h]&~(1<<f),this._strip()},i.prototype.iadd=function(n){var c;if(this.negative!==0&&n.negative===0)return this.negative=0,c=this.isub(n),this.negative^=1,this._normSign();if(this.negative===0&&n.negative!==0)return n.negative=0,c=this.isub(n),n.negative=1,c._normSign();var h,f;this.length>n.length?(h=this,f=n):(h=n,f=this);for(var p=0,y=0;y<f.length;y++)c=(h.words[y]|0)+(f.words[y]|0)+p,this.words[y]=c&67108863,p=c>>>26;for(;p!==0&&y<h.length;y++)c=(h.words[y]|0)+p,this.words[y]=c&67108863,p=c>>>26;if(this.length=h.length,p!==0)this.words[this.length]=p,this.length++;else if(h!==this)for(;y<h.length;y++)this.words[y]=h.words[y];return this},i.prototype.add=function(n){var c;return n.negative!==0&&this.negative===0?(n.negative=0,c=this.sub(n),n.negative^=1,c):n.negative===0&&this.negative!==0?(this.negative=0,c=n.sub(this),this.negative=1,c):this.length>n.length?this.clone().iadd(n):n.clone().iadd(this)},i.prototype.isub=function(n){if(n.negative!==0){n.negative=0;var c=this.iadd(n);return n.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(n),this.negative=1,this._normSign();var h=this.cmp(n);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var f,p;h>0?(f=this,p=n):(f=n,p=this);for(var y=0,v=0;v<p.length;v++)c=(f.words[v]|0)-(p.words[v]|0)+y,y=c>>26,this.words[v]=c&67108863;for(;y!==0&&v<f.length;v++)c=(f.words[v]|0)+y,y=c>>26,this.words[v]=c&67108863;if(y===0&&v<f.length&&f!==this)for(;v<f.length;v++)this.words[v]=f.words[v];return this.length=Math.max(this.length,v),f!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(n){return this.clone().isub(n)};function z(g,n,c){c.negative=n.negative^g.negative;var h=g.length+n.length|0;c.length=h,h=h-1|0;var f=g.words[0]|0,p=n.words[0]|0,y=f*p,v=y&67108863,l=y/67108864|0;c.words[0]=v;for(var o=1;o<h;o++){for(var d=l>>>26,T=l&67108863,R=Math.min(o,n.length-1),B=Math.max(0,o-g.length+1);B<=R;B++){var Ut=o-B|0;f=g.words[Ut]|0,p=n.words[B]|0,y=f*p+T,d+=y/67108864|0,T=y&67108863}c.words[o]=T|0,l=d|0}return l!==0?c.words[o]=l|0:c.length--,c._strip()}var D=function(n,c,h){var f=n.words,p=c.words,y=h.words,v=0,l,o,d,T=f[0]|0,R=T&8191,B=T>>>13,Ut=f[1]|0,H=Ut&8191,j=Ut>>>13,Dr=f[2]|0,X=Dr&8191,Q=Dr>>>13,$r=f[3]|0,tt=$r&8191,et=$r>>>13,Vr=f[4]|0,rt=Vr&8191,nt=Vr>>>13,Hr=f[5]|0,it=Hr&8191,st=Hr>>>13,Gr=f[6]|0,ot=Gr&8191,at=Gr>>>13,jr=f[7]|0,ct=jr&8191,ut=jr>>>13,Jr=f[8]|0,ht=Jr&8191,lt=Jr>>>13,Zr=f[9]|0,ft=Zr&8191,dt=Zr>>>13,Yr=p[0]|0,pt=Yr&8191,gt=Yr>>>13,Xr=p[1]|0,mt=Xr&8191,yt=Xr>>>13,Qr=p[2]|0,wt=Qr&8191,vt=Qr>>>13,tn=p[3]|0,bt=tn&8191,kt=tn>>>13,en=p[4]|0,St=en&8191,Mt=en>>>13,rn=p[5]|0,_t=rn&8191,xt=rn>>>13,nn=p[6]|0,It=nn&8191,At=nn>>>13,sn=p[7]|0,Et=sn&8191,Rt=sn>>>13,on=p[8]|0,Pt=on&8191,Tt=on>>>13,an=p[9]|0,Bt=an&8191,Lt=an>>>13;h.negative=n.negative^c.negative,h.length=19,l=Math.imul(R,pt),o=Math.imul(R,gt),o=o+Math.imul(B,pt)|0,d=Math.imul(B,gt);var Ze=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,l=Math.imul(H,pt),o=Math.imul(H,gt),o=o+Math.imul(j,pt)|0,d=Math.imul(j,gt),l=l+Math.imul(R,mt)|0,o=o+Math.imul(R,yt)|0,o=o+Math.imul(B,mt)|0,d=d+Math.imul(B,yt)|0;var Ye=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,l=Math.imul(X,pt),o=Math.imul(X,gt),o=o+Math.imul(Q,pt)|0,d=Math.imul(Q,gt),l=l+Math.imul(H,mt)|0,o=o+Math.imul(H,yt)|0,o=o+Math.imul(j,mt)|0,d=d+Math.imul(j,yt)|0,l=l+Math.imul(R,wt)|0,o=o+Math.imul(R,vt)|0,o=o+Math.imul(B,wt)|0,d=d+Math.imul(B,vt)|0;var Xe=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,l=Math.imul(tt,pt),o=Math.imul(tt,gt),o=o+Math.imul(et,pt)|0,d=Math.imul(et,gt),l=l+Math.imul(X,mt)|0,o=o+Math.imul(X,yt)|0,o=o+Math.imul(Q,mt)|0,d=d+Math.imul(Q,yt)|0,l=l+Math.imul(H,wt)|0,o=o+Math.imul(H,vt)|0,o=o+Math.imul(j,wt)|0,d=d+Math.imul(j,vt)|0,l=l+Math.imul(R,bt)|0,o=o+Math.imul(R,kt)|0,o=o+Math.imul(B,bt)|0,d=d+Math.imul(B,kt)|0;var Qe=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,l=Math.imul(rt,pt),o=Math.imul(rt,gt),o=o+Math.imul(nt,pt)|0,d=Math.imul(nt,gt),l=l+Math.imul(tt,mt)|0,o=o+Math.imul(tt,yt)|0,o=o+Math.imul(et,mt)|0,d=d+Math.imul(et,yt)|0,l=l+Math.imul(X,wt)|0,o=o+Math.imul(X,vt)|0,o=o+Math.imul(Q,wt)|0,d=d+Math.imul(Q,vt)|0,l=l+Math.imul(H,bt)|0,o=o+Math.imul(H,kt)|0,o=o+Math.imul(j,bt)|0,d=d+Math.imul(j,kt)|0,l=l+Math.imul(R,St)|0,o=o+Math.imul(R,Mt)|0,o=o+Math.imul(B,St)|0,d=d+Math.imul(B,Mt)|0;var tr=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(tr>>>26)|0,tr&=67108863,l=Math.imul(it,pt),o=Math.imul(it,gt),o=o+Math.imul(st,pt)|0,d=Math.imul(st,gt),l=l+Math.imul(rt,mt)|0,o=o+Math.imul(rt,yt)|0,o=o+Math.imul(nt,mt)|0,d=d+Math.imul(nt,yt)|0,l=l+Math.imul(tt,wt)|0,o=o+Math.imul(tt,vt)|0,o=o+Math.imul(et,wt)|0,d=d+Math.imul(et,vt)|0,l=l+Math.imul(X,bt)|0,o=o+Math.imul(X,kt)|0,o=o+Math.imul(Q,bt)|0,d=d+Math.imul(Q,kt)|0,l=l+Math.imul(H,St)|0,o=o+Math.imul(H,Mt)|0,o=o+Math.imul(j,St)|0,d=d+Math.imul(j,Mt)|0,l=l+Math.imul(R,_t)|0,o=o+Math.imul(R,xt)|0,o=o+Math.imul(B,_t)|0,d=d+Math.imul(B,xt)|0;var er=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(er>>>26)|0,er&=67108863,l=Math.imul(ot,pt),o=Math.imul(ot,gt),o=o+Math.imul(at,pt)|0,d=Math.imul(at,gt),l=l+Math.imul(it,mt)|0,o=o+Math.imul(it,yt)|0,o=o+Math.imul(st,mt)|0,d=d+Math.imul(st,yt)|0,l=l+Math.imul(rt,wt)|0,o=o+Math.imul(rt,vt)|0,o=o+Math.imul(nt,wt)|0,d=d+Math.imul(nt,vt)|0,l=l+Math.imul(tt,bt)|0,o=o+Math.imul(tt,kt)|0,o=o+Math.imul(et,bt)|0,d=d+Math.imul(et,kt)|0,l=l+Math.imul(X,St)|0,o=o+Math.imul(X,Mt)|0,o=o+Math.imul(Q,St)|0,d=d+Math.imul(Q,Mt)|0,l=l+Math.imul(H,_t)|0,o=o+Math.imul(H,xt)|0,o=o+Math.imul(j,_t)|0,d=d+Math.imul(j,xt)|0,l=l+Math.imul(R,It)|0,o=o+Math.imul(R,At)|0,o=o+Math.imul(B,It)|0,d=d+Math.imul(B,At)|0;var rr=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(rr>>>26)|0,rr&=67108863,l=Math.imul(ct,pt),o=Math.imul(ct,gt),o=o+Math.imul(ut,pt)|0,d=Math.imul(ut,gt),l=l+Math.imul(ot,mt)|0,o=o+Math.imul(ot,yt)|0,o=o+Math.imul(at,mt)|0,d=d+Math.imul(at,yt)|0,l=l+Math.imul(it,wt)|0,o=o+Math.imul(it,vt)|0,o=o+Math.imul(st,wt)|0,d=d+Math.imul(st,vt)|0,l=l+Math.imul(rt,bt)|0,o=o+Math.imul(rt,kt)|0,o=o+Math.imul(nt,bt)|0,d=d+Math.imul(nt,kt)|0,l=l+Math.imul(tt,St)|0,o=o+Math.imul(tt,Mt)|0,o=o+Math.imul(et,St)|0,d=d+Math.imul(et,Mt)|0,l=l+Math.imul(X,_t)|0,o=o+Math.imul(X,xt)|0,o=o+Math.imul(Q,_t)|0,d=d+Math.imul(Q,xt)|0,l=l+Math.imul(H,It)|0,o=o+Math.imul(H,At)|0,o=o+Math.imul(j,It)|0,d=d+Math.imul(j,At)|0,l=l+Math.imul(R,Et)|0,o=o+Math.imul(R,Rt)|0,o=o+Math.imul(B,Et)|0,d=d+Math.imul(B,Rt)|0;var nr=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(nr>>>26)|0,nr&=67108863,l=Math.imul(ht,pt),o=Math.imul(ht,gt),o=o+Math.imul(lt,pt)|0,d=Math.imul(lt,gt),l=l+Math.imul(ct,mt)|0,o=o+Math.imul(ct,yt)|0,o=o+Math.imul(ut,mt)|0,d=d+Math.imul(ut,yt)|0,l=l+Math.imul(ot,wt)|0,o=o+Math.imul(ot,vt)|0,o=o+Math.imul(at,wt)|0,d=d+Math.imul(at,vt)|0,l=l+Math.imul(it,bt)|0,o=o+Math.imul(it,kt)|0,o=o+Math.imul(st,bt)|0,d=d+Math.imul(st,kt)|0,l=l+Math.imul(rt,St)|0,o=o+Math.imul(rt,Mt)|0,o=o+Math.imul(nt,St)|0,d=d+Math.imul(nt,Mt)|0,l=l+Math.imul(tt,_t)|0,o=o+Math.imul(tt,xt)|0,o=o+Math.imul(et,_t)|0,d=d+Math.imul(et,xt)|0,l=l+Math.imul(X,It)|0,o=o+Math.imul(X,At)|0,o=o+Math.imul(Q,It)|0,d=d+Math.imul(Q,At)|0,l=l+Math.imul(H,Et)|0,o=o+Math.imul(H,Rt)|0,o=o+Math.imul(j,Et)|0,d=d+Math.imul(j,Rt)|0,l=l+Math.imul(R,Pt)|0,o=o+Math.imul(R,Tt)|0,o=o+Math.imul(B,Pt)|0,d=d+Math.imul(B,Tt)|0;var ir=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(ir>>>26)|0,ir&=67108863,l=Math.imul(ft,pt),o=Math.imul(ft,gt),o=o+Math.imul(dt,pt)|0,d=Math.imul(dt,gt),l=l+Math.imul(ht,mt)|0,o=o+Math.imul(ht,yt)|0,o=o+Math.imul(lt,mt)|0,d=d+Math.imul(lt,yt)|0,l=l+Math.imul(ct,wt)|0,o=o+Math.imul(ct,vt)|0,o=o+Math.imul(ut,wt)|0,d=d+Math.imul(ut,vt)|0,l=l+Math.imul(ot,bt)|0,o=o+Math.imul(ot,kt)|0,o=o+Math.imul(at,bt)|0,d=d+Math.imul(at,kt)|0,l=l+Math.imul(it,St)|0,o=o+Math.imul(it,Mt)|0,o=o+Math.imul(st,St)|0,d=d+Math.imul(st,Mt)|0,l=l+Math.imul(rt,_t)|0,o=o+Math.imul(rt,xt)|0,o=o+Math.imul(nt,_t)|0,d=d+Math.imul(nt,xt)|0,l=l+Math.imul(tt,It)|0,o=o+Math.imul(tt,At)|0,o=o+Math.imul(et,It)|0,d=d+Math.imul(et,At)|0,l=l+Math.imul(X,Et)|0,o=o+Math.imul(X,Rt)|0,o=o+Math.imul(Q,Et)|0,d=d+Math.imul(Q,Rt)|0,l=l+Math.imul(H,Pt)|0,o=o+Math.imul(H,Tt)|0,o=o+Math.imul(j,Pt)|0,d=d+Math.imul(j,Tt)|0,l=l+Math.imul(R,Bt)|0,o=o+Math.imul(R,Lt)|0,o=o+Math.imul(B,Bt)|0,d=d+Math.imul(B,Lt)|0;var sr=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(sr>>>26)|0,sr&=67108863,l=Math.imul(ft,mt),o=Math.imul(ft,yt),o=o+Math.imul(dt,mt)|0,d=Math.imul(dt,yt),l=l+Math.imul(ht,wt)|0,o=o+Math.imul(ht,vt)|0,o=o+Math.imul(lt,wt)|0,d=d+Math.imul(lt,vt)|0,l=l+Math.imul(ct,bt)|0,o=o+Math.imul(ct,kt)|0,o=o+Math.imul(ut,bt)|0,d=d+Math.imul(ut,kt)|0,l=l+Math.imul(ot,St)|0,o=o+Math.imul(ot,Mt)|0,o=o+Math.imul(at,St)|0,d=d+Math.imul(at,Mt)|0,l=l+Math.imul(it,_t)|0,o=o+Math.imul(it,xt)|0,o=o+Math.imul(st,_t)|0,d=d+Math.imul(st,xt)|0,l=l+Math.imul(rt,It)|0,o=o+Math.imul(rt,At)|0,o=o+Math.imul(nt,It)|0,d=d+Math.imul(nt,At)|0,l=l+Math.imul(tt,Et)|0,o=o+Math.imul(tt,Rt)|0,o=o+Math.imul(et,Et)|0,d=d+Math.imul(et,Rt)|0,l=l+Math.imul(X,Pt)|0,o=o+Math.imul(X,Tt)|0,o=o+Math.imul(Q,Pt)|0,d=d+Math.imul(Q,Tt)|0,l=l+Math.imul(H,Bt)|0,o=o+Math.imul(H,Lt)|0,o=o+Math.imul(j,Bt)|0,d=d+Math.imul(j,Lt)|0;var or=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(or>>>26)|0,or&=67108863,l=Math.imul(ft,wt),o=Math.imul(ft,vt),o=o+Math.imul(dt,wt)|0,d=Math.imul(dt,vt),l=l+Math.imul(ht,bt)|0,o=o+Math.imul(ht,kt)|0,o=o+Math.imul(lt,bt)|0,d=d+Math.imul(lt,kt)|0,l=l+Math.imul(ct,St)|0,o=o+Math.imul(ct,Mt)|0,o=o+Math.imul(ut,St)|0,d=d+Math.imul(ut,Mt)|0,l=l+Math.imul(ot,_t)|0,o=o+Math.imul(ot,xt)|0,o=o+Math.imul(at,_t)|0,d=d+Math.imul(at,xt)|0,l=l+Math.imul(it,It)|0,o=o+Math.imul(it,At)|0,o=o+Math.imul(st,It)|0,d=d+Math.imul(st,At)|0,l=l+Math.imul(rt,Et)|0,o=o+Math.imul(rt,Rt)|0,o=o+Math.imul(nt,Et)|0,d=d+Math.imul(nt,Rt)|0,l=l+Math.imul(tt,Pt)|0,o=o+Math.imul(tt,Tt)|0,o=o+Math.imul(et,Pt)|0,d=d+Math.imul(et,Tt)|0,l=l+Math.imul(X,Bt)|0,o=o+Math.imul(X,Lt)|0,o=o+Math.imul(Q,Bt)|0,d=d+Math.imul(Q,Lt)|0;var ar=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(ar>>>26)|0,ar&=67108863,l=Math.imul(ft,bt),o=Math.imul(ft,kt),o=o+Math.imul(dt,bt)|0,d=Math.imul(dt,kt),l=l+Math.imul(ht,St)|0,o=o+Math.imul(ht,Mt)|0,o=o+Math.imul(lt,St)|0,d=d+Math.imul(lt,Mt)|0,l=l+Math.imul(ct,_t)|0,o=o+Math.imul(ct,xt)|0,o=o+Math.imul(ut,_t)|0,d=d+Math.imul(ut,xt)|0,l=l+Math.imul(ot,It)|0,o=o+Math.imul(ot,At)|0,o=o+Math.imul(at,It)|0,d=d+Math.imul(at,At)|0,l=l+Math.imul(it,Et)|0,o=o+Math.imul(it,Rt)|0,o=o+Math.imul(st,Et)|0,d=d+Math.imul(st,Rt)|0,l=l+Math.imul(rt,Pt)|0,o=o+Math.imul(rt,Tt)|0,o=o+Math.imul(nt,Pt)|0,d=d+Math.imul(nt,Tt)|0,l=l+Math.imul(tt,Bt)|0,o=o+Math.imul(tt,Lt)|0,o=o+Math.imul(et,Bt)|0,d=d+Math.imul(et,Lt)|0;var cr=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(cr>>>26)|0,cr&=67108863,l=Math.imul(ft,St),o=Math.imul(ft,Mt),o=o+Math.imul(dt,St)|0,d=Math.imul(dt,Mt),l=l+Math.imul(ht,_t)|0,o=o+Math.imul(ht,xt)|0,o=o+Math.imul(lt,_t)|0,d=d+Math.imul(lt,xt)|0,l=l+Math.imul(ct,It)|0,o=o+Math.imul(ct,At)|0,o=o+Math.imul(ut,It)|0,d=d+Math.imul(ut,At)|0,l=l+Math.imul(ot,Et)|0,o=o+Math.imul(ot,Rt)|0,o=o+Math.imul(at,Et)|0,d=d+Math.imul(at,Rt)|0,l=l+Math.imul(it,Pt)|0,o=o+Math.imul(it,Tt)|0,o=o+Math.imul(st,Pt)|0,d=d+Math.imul(st,Tt)|0,l=l+Math.imul(rt,Bt)|0,o=o+Math.imul(rt,Lt)|0,o=o+Math.imul(nt,Bt)|0,d=d+Math.imul(nt,Lt)|0;var ur=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(ur>>>26)|0,ur&=67108863,l=Math.imul(ft,_t),o=Math.imul(ft,xt),o=o+Math.imul(dt,_t)|0,d=Math.imul(dt,xt),l=l+Math.imul(ht,It)|0,o=o+Math.imul(ht,At)|0,o=o+Math.imul(lt,It)|0,d=d+Math.imul(lt,At)|0,l=l+Math.imul(ct,Et)|0,o=o+Math.imul(ct,Rt)|0,o=o+Math.imul(ut,Et)|0,d=d+Math.imul(ut,Rt)|0,l=l+Math.imul(ot,Pt)|0,o=o+Math.imul(ot,Tt)|0,o=o+Math.imul(at,Pt)|0,d=d+Math.imul(at,Tt)|0,l=l+Math.imul(it,Bt)|0,o=o+Math.imul(it,Lt)|0,o=o+Math.imul(st,Bt)|0,d=d+Math.imul(st,Lt)|0;var hr=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(hr>>>26)|0,hr&=67108863,l=Math.imul(ft,It),o=Math.imul(ft,At),o=o+Math.imul(dt,It)|0,d=Math.imul(dt,At),l=l+Math.imul(ht,Et)|0,o=o+Math.imul(ht,Rt)|0,o=o+Math.imul(lt,Et)|0,d=d+Math.imul(lt,Rt)|0,l=l+Math.imul(ct,Pt)|0,o=o+Math.imul(ct,Tt)|0,o=o+Math.imul(ut,Pt)|0,d=d+Math.imul(ut,Tt)|0,l=l+Math.imul(ot,Bt)|0,o=o+Math.imul(ot,Lt)|0,o=o+Math.imul(at,Bt)|0,d=d+Math.imul(at,Lt)|0;var lr=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(lr>>>26)|0,lr&=67108863,l=Math.imul(ft,Et),o=Math.imul(ft,Rt),o=o+Math.imul(dt,Et)|0,d=Math.imul(dt,Rt),l=l+Math.imul(ht,Pt)|0,o=o+Math.imul(ht,Tt)|0,o=o+Math.imul(lt,Pt)|0,d=d+Math.imul(lt,Tt)|0,l=l+Math.imul(ct,Bt)|0,o=o+Math.imul(ct,Lt)|0,o=o+Math.imul(ut,Bt)|0,d=d+Math.imul(ut,Lt)|0;var fr=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(fr>>>26)|0,fr&=67108863,l=Math.imul(ft,Pt),o=Math.imul(ft,Tt),o=o+Math.imul(dt,Pt)|0,d=Math.imul(dt,Tt),l=l+Math.imul(ht,Bt)|0,o=o+Math.imul(ht,Lt)|0,o=o+Math.imul(lt,Bt)|0,d=d+Math.imul(lt,Lt)|0;var dr=(v+l|0)+((o&8191)<<13)|0;v=(d+(o>>>13)|0)+(dr>>>26)|0,dr&=67108863,l=Math.imul(ft,Bt),o=Math.imul(ft,Lt),o=o+Math.imul(dt,Bt)|0,d=Math.imul(dt,Lt);var pr=(v+l|0)+((o&8191)<<13)|0;return v=(d+(o>>>13)|0)+(pr>>>26)|0,pr&=67108863,y[0]=Ze,y[1]=Ye,y[2]=Xe,y[3]=Qe,y[4]=tr,y[5]=er,y[6]=rr,y[7]=nr,y[8]=ir,y[9]=sr,y[10]=or,y[11]=ar,y[12]=cr,y[13]=ur,y[14]=hr,y[15]=lr,y[16]=fr,y[17]=dr,y[18]=pr,v!==0&&(y[19]=v,h.length++),h};Math.imul||(D=z);function J(g,n,c){c.negative=n.negative^g.negative,c.length=g.length+n.length;for(var h=0,f=0,p=0;p<c.length-1;p++){var y=f;f=0;for(var v=h&67108863,l=Math.min(p,n.length-1),o=Math.max(0,p-g.length+1);o<=l;o++){var d=p-o,T=g.words[d]|0,R=n.words[o]|0,B=T*R,Ut=B&67108863;y=y+(B/67108864|0)|0,Ut=Ut+v|0,v=Ut&67108863,y=y+(Ut>>>26)|0,f+=y>>>26,y&=67108863}c.words[p]=v,h=y,y=f}return h!==0?c.words[p]=h:c.length--,c._strip()}function Y(g,n,c){return J(g,n,c)}i.prototype.mulTo=function(n,c){var h,f=this.length+n.length;return this.length===10&&n.length===10?h=D(this,n,c):f<63?h=z(this,n,c):f<1024?h=J(this,n,c):h=Y(this,n,c),h},i.prototype.mul=function(n){var c=new i(null);return c.words=new Array(this.length+n.length),this.mulTo(n,c)},i.prototype.mulf=function(n){var c=new i(null);return c.words=new Array(this.length+n.length),Y(this,n,c)},i.prototype.imul=function(n){return this.clone().mulTo(n,this)},i.prototype.imuln=function(n){var c=n<0;c&&(n=-n),r(typeof n=="number"),r(n<67108864);for(var h=0,f=0;f<this.length;f++){var p=(this.words[f]|0)*n,y=(p&67108863)+(h&67108863);h>>=26,h+=p/67108864|0,h+=y>>>26,this.words[f]=y&67108863}return h!==0&&(this.words[f]=h,this.length++),c?this.ineg():this},i.prototype.muln=function(n){return this.clone().imuln(n)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(n){var c=P(n);if(c.length===0)return new i(1);for(var h=this,f=0;f<c.length&&c[f]===0;f++,h=h.sqr());if(++f<c.length)for(var p=h.sqr();f<c.length;f++,p=p.sqr())c[f]!==0&&(h=h.mul(p));return h},i.prototype.iushln=function(n){r(typeof n=="number"&&n>=0);var c=n%26,h=(n-c)/26,f=67108863>>>26-c<<26-c,p;if(c!==0){var y=0;for(p=0;p<this.length;p++){var v=this.words[p]&f,l=(this.words[p]|0)-v<<c;this.words[p]=l|y,y=v>>>26-c}y&&(this.words[p]=y,this.length++)}if(h!==0){for(p=this.length-1;p>=0;p--)this.words[p+h]=this.words[p];for(p=0;p<h;p++)this.words[p]=0;this.length+=h}return this._strip()},i.prototype.ishln=function(n){return r(this.negative===0),this.iushln(n)},i.prototype.iushrn=function(n,c,h){r(typeof n=="number"&&n>=0);var f;c?f=(c-c%26)/26:f=0;var p=n%26,y=Math.min((n-p)/26,this.length),v=67108863^67108863>>>p<<p,l=h;if(f-=y,f=Math.max(0,f),l){for(var o=0;o<y;o++)l.words[o]=this.words[o];l.length=y}if(y!==0)if(this.length>y)for(this.length-=y,o=0;o<this.length;o++)this.words[o]=this.words[o+y];else this.words[0]=0,this.length=1;var d=0;for(o=this.length-1;o>=0&&(d!==0||o>=f);o--){var T=this.words[o]|0;this.words[o]=d<<26-p|T>>>p,d=T&v}return l&&d!==0&&(l.words[l.length++]=d),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(n,c,h){return r(this.negative===0),this.iushrn(n,c,h)},i.prototype.shln=function(n){return this.clone().ishln(n)},i.prototype.ushln=function(n){return this.clone().iushln(n)},i.prototype.shrn=function(n){return this.clone().ishrn(n)},i.prototype.ushrn=function(n){return this.clone().iushrn(n)},i.prototype.testn=function(n){r(typeof n=="number"&&n>=0);var c=n%26,h=(n-c)/26,f=1<<c;if(this.length<=h)return!1;var p=this.words[h];return!!(p&f)},i.prototype.imaskn=function(n){r(typeof n=="number"&&n>=0);var c=n%26,h=(n-c)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(c!==0&&h++,this.length=Math.min(h,this.length),c!==0){var f=67108863^67108863>>>c<<c;this.words[this.length-1]&=f}return this._strip()},i.prototype.maskn=function(n){return this.clone().imaskn(n)},i.prototype.iaddn=function(n){return r(typeof n=="number"),r(n<67108864),n<0?this.isubn(-n):this.negative!==0?this.length===1&&(this.words[0]|0)<=n?(this.words[0]=n-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(n),this.negative=1,this):this._iaddn(n)},i.prototype._iaddn=function(n){this.words[0]+=n;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},i.prototype.isubn=function(n){if(r(typeof n=="number"),r(n<67108864),n<0)return this.iaddn(-n);if(this.negative!==0)return this.negative=0,this.iaddn(n),this.negative=1,this;if(this.words[0]-=n,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this._strip()},i.prototype.addn=function(n){return this.clone().iaddn(n)},i.prototype.subn=function(n){return this.clone().isubn(n)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(n,c,h){var f=n.length+h,p;this._expand(f);var y,v=0;for(p=0;p<n.length;p++){y=(this.words[p+h]|0)+v;var l=(n.words[p]|0)*c;y-=l&67108863,v=(y>>26)-(l/67108864|0),this.words[p+h]=y&67108863}for(;p<this.length-h;p++)y=(this.words[p+h]|0)+v,v=y>>26,this.words[p+h]=y&67108863;if(v===0)return this._strip();for(r(v===-1),v=0,p=0;p<this.length;p++)y=-(this.words[p]|0)+v,v=y>>26,this.words[p]=y&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(n,c){var h=this.length-n.length,f=this.clone(),p=n,y=p.words[p.length-1]|0,v=this._countBits(y);h=26-v,h!==0&&(p=p.ushln(h),f.iushln(h),y=p.words[p.length-1]|0);var l=f.length-p.length,o;if(c!=="mod"){o=new i(null),o.length=l+1,o.words=new Array(o.length);for(var d=0;d<o.length;d++)o.words[d]=0}var T=f.clone()._ishlnsubmul(p,1,l);T.negative===0&&(f=T,o&&(o.words[l]=1));for(var R=l-1;R>=0;R--){var B=(f.words[p.length+R]|0)*67108864+(f.words[p.length+R-1]|0);for(B=Math.min(B/y|0,67108863),f._ishlnsubmul(p,B,R);f.negative!==0;)B--,f.negative=0,f._ishlnsubmul(p,1,R),f.isZero()||(f.negative^=1);o&&(o.words[R]=B)}return o&&o._strip(),f._strip(),c!=="div"&&h!==0&&f.iushrn(h),{div:o||null,mod:f}},i.prototype.divmod=function(n,c,h){if(r(!n.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var f,p,y;return this.negative!==0&&n.negative===0?(y=this.neg().divmod(n,c),c!=="mod"&&(f=y.div.neg()),c!=="div"&&(p=y.mod.neg(),h&&p.negative!==0&&p.iadd(n)),{div:f,mod:p}):this.negative===0&&n.negative!==0?(y=this.divmod(n.neg(),c),c!=="mod"&&(f=y.div.neg()),{div:f,mod:y.mod}):this.negative&n.negative?(y=this.neg().divmod(n.neg(),c),c!=="div"&&(p=y.mod.neg(),h&&p.negative!==0&&p.isub(n)),{div:y.div,mod:p}):n.length>this.length||this.cmp(n)<0?{div:new i(0),mod:this}:n.length===1?c==="div"?{div:this.divn(n.words[0]),mod:null}:c==="mod"?{div:null,mod:new i(this.modrn(n.words[0]))}:{div:this.divn(n.words[0]),mod:new i(this.modrn(n.words[0]))}:this._wordDiv(n,c)},i.prototype.div=function(n){return this.divmod(n,"div",!1).div},i.prototype.mod=function(n){return this.divmod(n,"mod",!1).mod},i.prototype.umod=function(n){return this.divmod(n,"mod",!0).mod},i.prototype.divRound=function(n){var c=this.divmod(n);if(c.mod.isZero())return c.div;var h=c.div.negative!==0?c.mod.isub(n):c.mod,f=n.ushrn(1),p=n.andln(1),y=h.cmp(f);return y<0||p===1&&y===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},i.prototype.modrn=function(n){var c=n<0;c&&(n=-n),r(n<=67108863);for(var h=(1<<26)%n,f=0,p=this.length-1;p>=0;p--)f=(h*f+(this.words[p]|0))%n;return c?-f:f},i.prototype.modn=function(n){return this.modrn(n)},i.prototype.idivn=function(n){var c=n<0;c&&(n=-n),r(n<=67108863);for(var h=0,f=this.length-1;f>=0;f--){var p=(this.words[f]|0)+h*67108864;this.words[f]=p/n|0,h=p%n}return this._strip(),c?this.ineg():this},i.prototype.divn=function(n){return this.clone().idivn(n)},i.prototype.egcd=function(n){r(n.negative===0),r(!n.isZero());var c=this,h=n.clone();c.negative!==0?c=c.umod(n):c=c.clone();for(var f=new i(1),p=new i(0),y=new i(0),v=new i(1),l=0;c.isEven()&&h.isEven();)c.iushrn(1),h.iushrn(1),++l;for(var o=h.clone(),d=c.clone();!c.isZero();){for(var T=0,R=1;!(c.words[0]&R)&&T<26;++T,R<<=1);if(T>0)for(c.iushrn(T);T-- >0;)(f.isOdd()||p.isOdd())&&(f.iadd(o),p.isub(d)),f.iushrn(1),p.iushrn(1);for(var B=0,Ut=1;!(h.words[0]&Ut)&&B<26;++B,Ut<<=1);if(B>0)for(h.iushrn(B);B-- >0;)(y.isOdd()||v.isOdd())&&(y.iadd(o),v.isub(d)),y.iushrn(1),v.iushrn(1);c.cmp(h)>=0?(c.isub(h),f.isub(y),p.isub(v)):(h.isub(c),y.isub(f),v.isub(p))}return{a:y,b:v,gcd:h.iushln(l)}},i.prototype._invmp=function(n){r(n.negative===0),r(!n.isZero());var c=this,h=n.clone();c.negative!==0?c=c.umod(n):c=c.clone();for(var f=new i(1),p=new i(0),y=h.clone();c.cmpn(1)>0&&h.cmpn(1)>0;){for(var v=0,l=1;!(c.words[0]&l)&&v<26;++v,l<<=1);if(v>0)for(c.iushrn(v);v-- >0;)f.isOdd()&&f.iadd(y),f.iushrn(1);for(var o=0,d=1;!(h.words[0]&d)&&o<26;++o,d<<=1);if(o>0)for(h.iushrn(o);o-- >0;)p.isOdd()&&p.iadd(y),p.iushrn(1);c.cmp(h)>=0?(c.isub(h),f.isub(p)):(h.isub(c),p.isub(f))}var T;return c.cmpn(1)===0?T=f:T=p,T.cmpn(0)<0&&T.iadd(n),T},i.prototype.gcd=function(n){if(this.isZero())return n.abs();if(n.isZero())return this.abs();var c=this.clone(),h=n.clone();c.negative=0,h.negative=0;for(var f=0;c.isEven()&&h.isEven();f++)c.iushrn(1),h.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;h.isEven();)h.iushrn(1);var p=c.cmp(h);if(p<0){var y=c;c=h,h=y}else if(p===0||h.cmpn(1)===0)break;c.isub(h)}while(!0);return h.iushln(f)},i.prototype.invm=function(n){return this.egcd(n).a.umod(n)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(n){return this.words[0]&n},i.prototype.bincn=function(n){r(typeof n=="number");var c=n%26,h=(n-c)/26,f=1<<c;if(this.length<=h)return this._expand(h+1),this.words[h]|=f,this;for(var p=f,y=h;p!==0&&y<this.length;y++){var v=this.words[y]|0;v+=p,p=v>>>26,v&=67108863,this.words[y]=v}return p!==0&&(this.words[y]=p,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(n){var c=n<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this._strip();var h;if(this.length>1)h=1;else{c&&(n=-n),r(n<=67108863,"Number is too big");var f=this.words[0]|0;h=f===n?0:f<n?-1:1}return this.negative!==0?-h|0:h},i.prototype.cmp=function(n){if(this.negative!==0&&n.negative===0)return-1;if(this.negative===0&&n.negative!==0)return 1;var c=this.ucmp(n);return this.negative!==0?-c|0:c},i.prototype.ucmp=function(n){if(this.length>n.length)return 1;if(this.length<n.length)return-1;for(var c=0,h=this.length-1;h>=0;h--){var f=this.words[h]|0,p=n.words[h]|0;if(f!==p){f<p?c=-1:f>p&&(c=1);break}}return c},i.prototype.gtn=function(n){return this.cmpn(n)===1},i.prototype.gt=function(n){return this.cmp(n)===1},i.prototype.gten=function(n){return this.cmpn(n)>=0},i.prototype.gte=function(n){return this.cmp(n)>=0},i.prototype.ltn=function(n){return this.cmpn(n)===-1},i.prototype.lt=function(n){return this.cmp(n)===-1},i.prototype.lten=function(n){return this.cmpn(n)<=0},i.prototype.lte=function(n){return this.cmp(n)<=0},i.prototype.eqn=function(n){return this.cmpn(n)===0},i.prototype.eq=function(n){return this.cmp(n)===0},i.red=function(n){return new Z(n)},i.prototype.toRed=function(n){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),n.convertTo(this)._forceRed(n)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(n){return this.red=n,this},i.prototype.forceRed=function(n){return r(!this.red,"Already a number in reduction context"),this._forceRed(n)},i.prototype.redAdd=function(n){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,n)},i.prototype.redIAdd=function(n){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,n)},i.prototype.redSub=function(n){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,n)},i.prototype.redISub=function(n){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,n)},i.prototype.redShl=function(n){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,n)},i.prototype.redMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.mul(this,n)},i.prototype.redIMul=function(n){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,n),this.red.imul(this,n)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(n){return r(this.red&&!n.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,n)};var Ht={k256:null,p224:null,p192:null,p25519:null};function V(g,n){this.name=g,this.p=new i(n,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}V.prototype._tmp=function(){var n=new i(null);return n.words=new Array(Math.ceil(this.n/13)),n},V.prototype.ireduce=function(n){var c=n,h;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),h=c.bitLength();while(h>this.n);var f=h<this.n?-1:c.ucmp(this.p);return f===0?(c.words[0]=0,c.length=1):f>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},V.prototype.split=function(n,c){n.iushrn(this.n,0,c)},V.prototype.imulK=function(n){return n.imul(this.k)};function Dt(){V.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(Dt,V),Dt.prototype.split=function(n,c){for(var h=4194303,f=Math.min(n.length,9),p=0;p<f;p++)c.words[p]=n.words[p];if(c.length=f,n.length<=9){n.words[0]=0,n.length=1;return}var y=n.words[9];for(c.words[c.length++]=y&h,p=10;p<n.length;p++){var v=n.words[p]|0;n.words[p-10]=(v&h)<<4|y>>>22,y=v}y>>>=22,n.words[p-10]=y,y===0&&n.length>10?n.length-=10:n.length-=9},Dt.prototype.imulK=function(n){n.words[n.length]=0,n.words[n.length+1]=0,n.length+=2;for(var c=0,h=0;h<n.length;h++){var f=n.words[h]|0;c+=f*977,n.words[h]=c&67108863,c=f*64+(c/67108864|0)}return n.words[n.length-1]===0&&(n.length--,n.words[n.length-1]===0&&n.length--),n};function pe(){V.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(pe,V);function Fr(){V.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(Fr,V);function Je(){V.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(Je,V),Je.prototype.imulK=function(n){for(var c=0,h=0;h<n.length;h++){var f=(n.words[h]|0)*19+c,p=f&67108863;f>>>=26,n.words[h]=p,c=f}return c!==0&&(n.words[n.length++]=c),n},i._prime=function(n){if(Ht[n])return Ht[n];var c;if(n==="k256")c=new Dt;else if(n==="p224")c=new pe;else if(n==="p192")c=new Fr;else if(n==="p25519")c=new Je;else throw new Error("Unknown prime "+n);return Ht[n]=c,c};function Z(g){if(typeof g=="string"){var n=i._prime(g);this.m=n.p,this.prime=n}else r(g.gtn(1),"modulus must be greater than 1"),this.m=g,this.prime=null}Z.prototype._verify1=function(n){r(n.negative===0,"red works only with positives"),r(n.red,"red works only with red numbers")},Z.prototype._verify2=function(n,c){r((n.negative|c.negative)===0,"red works only with positives"),r(n.red&&n.red===c.red,"red works only with red numbers")},Z.prototype.imod=function(n){return this.prime?this.prime.ireduce(n)._forceRed(this):(_(n,n.umod(this.m)._forceRed(this)),n)},Z.prototype.neg=function(n){return n.isZero()?n.clone():this.m.sub(n)._forceRed(this)},Z.prototype.add=function(n,c){this._verify2(n,c);var h=n.add(c);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},Z.prototype.iadd=function(n,c){this._verify2(n,c);var h=n.iadd(c);return h.cmp(this.m)>=0&&h.isub(this.m),h},Z.prototype.sub=function(n,c){this._verify2(n,c);var h=n.sub(c);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},Z.prototype.isub=function(n,c){this._verify2(n,c);var h=n.isub(c);return h.cmpn(0)<0&&h.iadd(this.m),h},Z.prototype.shl=function(n,c){return this._verify1(n),this.imod(n.ushln(c))},Z.prototype.imul=function(n,c){return this._verify2(n,c),this.imod(n.imul(c))},Z.prototype.mul=function(n,c){return this._verify2(n,c),this.imod(n.mul(c))},Z.prototype.isqr=function(n){return this.imul(n,n.clone())},Z.prototype.sqr=function(n){return this.mul(n,n)},Z.prototype.sqrt=function(n){if(n.isZero())return n.clone();var c=this.m.andln(3);if(r(c%2===1),c===3){var h=this.m.add(new i(1)).iushrn(2);return this.pow(n,h)}for(var f=this.m.subn(1),p=0;!f.isZero()&&f.andln(1)===0;)p++,f.iushrn(1);r(!f.isZero());var y=new i(1).toRed(this),v=y.redNeg(),l=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new i(2*o*o).toRed(this);this.pow(o,l).cmp(v)!==0;)o.redIAdd(v);for(var d=this.pow(o,f),T=this.pow(n,f.addn(1).iushrn(1)),R=this.pow(n,f),B=p;R.cmp(y)!==0;){for(var Ut=R,H=0;Ut.cmp(y)!==0;H++)Ut=Ut.redSqr();r(H<B);var j=this.pow(d,new i(1).iushln(B-H-1));T=T.redMul(j),d=j.redSqr(),R=R.redMul(d),B=H}return T},Z.prototype.invm=function(n){var c=n._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},Z.prototype.pow=function(n,c){if(c.isZero())return new i(1).toRed(this);if(c.cmpn(1)===0)return n.clone();var h=4,f=new Array(1<<h);f[0]=new i(1).toRed(this),f[1]=n;for(var p=2;p<f.length;p++)f[p]=this.mul(f[p-1],n);var y=f[0],v=0,l=0,o=c.bitLength()%26;for(o===0&&(o=26),p=c.length-1;p>=0;p--){for(var d=c.words[p],T=o-1;T>=0;T--){var R=d>>T&1;if(y!==f[0]&&(y=this.sqr(y)),R===0&&v===0){l=0;continue}v<<=1,v|=R,l++,!(l!==h&&(p!==0||T!==0))&&(y=this.mul(y,f[v]),l=0,v=0)}o=26}return y},Z.prototype.convertTo=function(n){var c=n.umod(this.m);return c===n?c.clone():c},Z.prototype.convertFrom=function(n){var c=n.clone();return c.red=null,c},i.mont=function(n){return new ge(n)};function ge(g){Z.call(this,g),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(ge,Z),ge.prototype.convertTo=function(n){return this.imod(n.ushln(this.shift))},ge.prototype.convertFrom=function(n){var c=this.imod(n.mul(this.rinv));return c.red=null,c},ge.prototype.imul=function(n,c){if(n.isZero()||c.isZero())return n.words[0]=0,n.length=1,n;var h=n.imul(c),f=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=h.isub(f).iushrn(this.shift),y=p;return p.cmp(this.m)>=0?y=p.isub(this.m):p.cmpn(0)<0&&(y=p.iadd(this.m)),y._forceRed(this)},ge.prototype.mul=function(n,c){if(n.isZero()||c.isZero())return new i(0)._forceRed(this);var h=n.mul(c),f=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=h.isub(f).iushrn(this.shift),y=p;return p.cmp(this.m)>=0?y=p.isub(this.m):p.cmpn(0)<0&&(y=p.iadd(this.m)),y._forceRed(this)},ge.prototype.invm=function(n){var c=this.imod(n._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(a,de)})(Mi);var Ho=Mi.exports,Sn=bs.Buffer;function Go(a){if(a.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<a.length;r++){var s=a.charAt(r),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=r}var u=a.length,m=a.charAt(0),w=Math.log(u)/Math.log(256),b=Math.log(256)/Math.log(u);function _(M){if((Array.isArray(M)||M instanceof Uint8Array)&&(M=Sn.from(M)),!Sn.isBuffer(M))throw new TypeError("Expected Buffer");if(M.length===0)return"";for(var x=0,A=0,P=0,z=M.length;P!==z&&M[P]===0;)P++,x++;for(var D=(z-P)*b+1>>>0,J=new Uint8Array(D);P!==z;){for(var Y=M[P],Ht=0,V=D-1;(Y!==0||Ht<A)&&V!==-1;V--,Ht++)Y+=256*J[V]>>>0,J[V]=Y%u>>>0,Y=Y/u>>>0;if(Y!==0)throw new Error("Non-zero carry");A=Ht,P++}for(var Dt=D-A;Dt!==D&&J[Dt]===0;)Dt++;for(var pe=m.repeat(x);Dt<D;++Dt)pe+=a.charAt(J[Dt]);return pe}function I(M){if(typeof M!="string")throw new TypeError("Expected String");if(M.length===0)return Sn.alloc(0);for(var x=0,A=0,P=0;M[x]===m;)A++,x++;for(var z=(M.length-x)*w+1>>>0,D=new Uint8Array(z);x<M.length;){var J=t[M.charCodeAt(x)];if(J===255)return;for(var Y=0,Ht=z-1;(J!==0||Y<P)&&Ht!==-1;Ht--,Y++)J+=u*D[Ht]>>>0,D[Ht]=J%256>>>0,J=J/256>>>0;if(J!==0)throw new Error("Non-zero carry");P=Y,x++}for(var V=z-P;V!==z&&D[V]===0;)V++;var Dt=Sn.allocUnsafe(A+(z-V));Dt.fill(0,0,A);for(var pe=A;V!==z;)Dt[pe++]=D[V++];return Dt}function C(M){var x=I(M);if(x)return x;throw new Error("Non-base"+u+" character")}return{encode:_,decodeUnsafe:I,decode:C}}var jo=Go,Jo=jo,Zo="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Yo=Jo(Zo);function De(a,t,e){return t<=a&&a<=e}function On(a){if(a===void 0)return{};if(a===Object(a))return a;throw TypeError("Could not convert argument to dictionary")}function Xo(a){for(var t=String(a),e=t.length,r=0,s=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)s.push(65533);else{var u=a.charCodeAt(r+1);if(56320<=u&&u<=57343){var m=i&1023,w=u&1023;s.push(65536+(m<<10)+w),r+=1}else s.push(65533)}r+=1}return s}function Qo(a){for(var t="",e=0;e<a.length;++e){var r=a[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var En=-1;function _i(a){this.tokens=[].slice.call(a)}_i.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():En},prepend:function(a){if(Array.isArray(a))for(var t=a;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(a)},push:function(a){if(Array.isArray(a))for(var t=a;t.length;)this.tokens.push(t.shift());else this.tokens.push(a)}};var Lr=-1;function Xn(a,t){if(a)throw TypeError("Decoder error");return t||65533}var Rn="utf-8";function Pn(a,t){if(!(this instanceof Pn))return new Pn(a,t);if(a=a!==void 0?String(a).toLowerCase():Rn,a!==Rn)throw new Error("Encoding not supported. Only utf-8 is supported");t=On(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Pn.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=On(e),this._streaming||(this._decoder=new ta({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new _i(r),i=[],u;!s.endOfStream()&&(u=this._decoder.handler(s,s.read()),u!==Lr);)u!==null&&(Array.isArray(u)?i.push.apply(i,u):i.push(u));if(!this._streaming){do{if(u=this._decoder.handler(s,s.read()),u===Lr)break;u!==null&&(Array.isArray(u)?i.push.apply(i,u):i.push(u))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),Qo(i)}};function Tn(a,t){if(!(this instanceof Tn))return new Tn(a,t);if(a=a!==void 0?String(a).toLowerCase():Rn,a!==Rn)throw new Error("Encoding not supported. Only utf-8 is supported");t=On(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Tn.prototype={encode:function(t,e){t=t?String(t):"",e=On(e),this._streaming||(this._encoder=new ea(this._options)),this._streaming=!!e.stream;for(var r=[],s=new _i(Xo(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Lr);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Lr;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function ta(a){var t=a.fatal,e=0,r=0,s=0,i=128,u=191;this.handler=function(m,w){if(w===En&&s!==0)return s=0,Xn(t);if(w===En)return Lr;if(s===0){if(De(w,0,127))return w;if(De(w,194,223))s=1,e=w-192;else if(De(w,224,239))w===224&&(i=160),w===237&&(u=159),s=2,e=w-224;else if(De(w,240,244))w===240&&(i=144),w===244&&(u=143),s=3,e=w-240;else return Xn(t);return e=e<<6*s,null}if(!De(w,i,u))return e=s=r=0,i=128,u=191,m.prepend(w),Xn(t);if(i=128,u=191,r+=1,e+=w-128<<6*(s-r),r!==s)return null;var b=e;return e=s=r=0,b}}function ea(a){a.fatal,this.handler=function(t,e){if(e===En)return Lr;if(De(e,0,127))return e;var r,s;De(e,128,2047)?(r=1,s=192):De(e,2048,65535)?(r=2,s=224):De(e,65536,1114111)&&(r=3,s=240);for(var i=[(e>>6*r)+s];r>0;){var u=e>>6*(r-1);i.push(128|u&63),r-=1}return i}}const ra=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Pn,TextEncoder:Tn},Symbol.toStringTag,{value:"Module"})),na=bi(ra);var ia=de&&de.__createBinding||(Object.create?function(a,t,e,r){r===void 0&&(r=e),Object.defineProperty(a,r,{enumerable:!0,get:function(){return t[e]}})}:function(a,t,e,r){r===void 0&&(r=e),a[r]=t[e]}),sa=de&&de.__setModuleDefault||(Object.create?function(a,t){Object.defineProperty(a,"default",{enumerable:!0,value:t})}:function(a,t){a.default=t}),Ke=de&&de.__decorate||function(a,t,e,r){var s=arguments.length,i=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(a,t,e,r);else for(var m=a.length-1;m>=0;m--)(u=a[m])&&(i=(s<3?u(i):s>3?u(t,e,i):u(t,e))||i);return s>3&&i&&Object.defineProperty(t,e,i),i},oa=de&&de.__importStar||function(a){if(a&&a.__esModule)return a;var t={};if(a!=null)for(var e in a)e!=="default"&&Object.hasOwnProperty.call(a,e)&&ia(t,a,e);return sa(t,a),t},Ms=de&&de.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(oe,"__esModule",{value:!0});var _s=oe.deserializeUnchecked=Ps=oe.deserialize=Rs=oe.serialize=oe.BinaryReader=oe.BinaryWriter=oe.BorshError=oe.baseDecode=oe.baseEncode=void 0;const Ve=Ms(Ho),xs=Ms(Yo),aa=oa(na),ca=typeof TextDecoder!="function"?aa.TextDecoder:TextDecoder,ua=new ca("utf-8",{fatal:!0});function ha(a){return typeof a=="string"&&(a=re.from(a,"utf8")),xs.default.encode(re.from(a))}oe.baseEncode=ha;function la(a){return re.from(xs.default.decode(a))}oe.baseDecode=la;const Qn=1024;class me extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}oe.BorshError=me;class Is{constructor(){this.buf=re.alloc(Qn),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=re.concat([this.buf,re.alloc(Qn)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(re.from(new Ve.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(re.from(new Ve.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(re.from(new Ve.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(re.from(new Ve.default(t).toArray("le",64)))}writeBuffer(t){this.buf=re.concat([re.from(this.buf.subarray(0,this.length)),t,re.alloc(Qn)]),this.length+=t.length}writeString(t){this.maybeResize();const e=re.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(re.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const r of t)this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}oe.BinaryWriter=Is;function Ue(a,t,e){const r=e.value;e.value=function(...s){try{return r.apply(this,s)}catch(i){if(i instanceof RangeError){const u=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(u)>=0)throw new me("Reached the end of buffer when deserializing")}throw i}}}class Me{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new Ve.default(t,"le")}readU128(){const t=this.readBuffer(16);return new Ve.default(t,"le")}readU256(){const t=this.readBuffer(32);return new Ve.default(t,"le")}readU512(){const t=this.readBuffer(64);return new Ve.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new me(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return ua.decode(e)}catch(r){throw new me(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),r=Array();for(let s=0;s<e;++s)r.push(t());return r}}Ke([Ue],Me.prototype,"readU8",null);Ke([Ue],Me.prototype,"readU16",null);Ke([Ue],Me.prototype,"readU32",null);Ke([Ue],Me.prototype,"readU64",null);Ke([Ue],Me.prototype,"readU128",null);Ke([Ue],Me.prototype,"readU256",null);Ke([Ue],Me.prototype,"readU512",null);Ke([Ue],Me.prototype,"readString",null);Ke([Ue],Me.prototype,"readFixedArray",null);Ke([Ue],Me.prototype,"readArray",null);oe.BinaryReader=Me;function As(a){return a.charAt(0).toUpperCase()+a.slice(1)}function mr(a,t,e,r,s){try{if(typeof r=="string")s[`write${As(r)}`](e);else if(r instanceof Array)if(typeof r[0]=="number"){if(e.length!==r[0])throw new me(`Expecting byte array of length ${r[0]}, but got ${e.length} bytes`);s.writeFixedArray(e)}else if(r.length===2&&typeof r[1]=="number"){if(e.length!==r[1])throw new me(`Expecting byte array of length ${r[1]}, but got ${e.length} bytes`);for(let i=0;i<r[1];i++)mr(a,null,e[i],r[0],s)}else s.writeArray(e,i=>{mr(a,t,i,r[0],s)});else if(r.kind!==void 0)switch(r.kind){case"option":{e==null?s.writeU8(0):(s.writeU8(1),mr(a,t,e,r.type,s));break}case"map":{s.writeU32(e.size),e.forEach((i,u)=>{mr(a,t,u,r.key,s),mr(a,t,i,r.value,s)});break}default:throw new me(`FieldType ${r} unrecognized`)}else Es(a,e,s)}catch(i){throw i instanceof me&&i.addToFieldPath(t),i}}function Es(a,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const r=a.get(t.constructor);if(!r)throw new me(`Class ${t.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([s,i])=>{mr(a,s,t[s],i,e)});else if(r.kind==="enum"){const s=t[r.field];for(let i=0;i<r.values.length;++i){const[u,m]=r.values[i];if(u===s){e.writeU8(i),mr(a,u,t[u],m,e);break}}}else throw new me(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function fa(a,t,e=Is){const r=new e;return Es(a,t,r),r.toArray()}var Rs=oe.serialize=fa;function yr(a,t,e,r){try{if(typeof e=="string")return r[`read${As(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return r.readFixedArray(e[0]);if(typeof e[1]=="number"){const s=[];for(let i=0;i<e[1];i++)s.push(yr(a,null,e[0],r));return s}else return r.readArray(()=>yr(a,t,e[0],r))}if(e.kind==="option")return r.readU8()?yr(a,t,e.type,r):void 0;if(e.kind==="map"){let s=new Map;const i=r.readU32();for(let u=0;u<i;u++){const m=yr(a,t,e.key,r),w=yr(a,t,e.value,r);s.set(m,w)}return s}return xi(a,e,r)}catch(s){throw s instanceof me&&s.addToFieldPath(t),s}}function xi(a,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const r=a.get(t);if(!r)throw new me(`Class ${t.name} is missing in schema`);if(r.kind==="struct"){const s={};for(const[i,u]of a.get(t).fields)s[i]=yr(a,i,u,e);return new t(s)}if(r.kind==="enum"){const s=e.readU8();if(s>=r.values.length)throw new me(`Enum index: ${s} is out of range`);const[i,u]=r.values[s],m=yr(a,i,u,e);return new t({[i]:m})}throw new me(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function da(a,t,e,r=Me){const s=new r(e),i=xi(a,t,s);if(s.offset<e.length)throw new me(`Unexpected ${e.length-s.offset} bytes after deserialized data`);return i}var Ps=oe.deserialize=da;function pa(a,t,e,r=Me){const s=new r(e);return xi(a,t,s)}_s=oe.deserializeUnchecked=pa;var S={};Object.defineProperty(S,"__esModule",{value:!0});S.s16=S.s8=S.nu64be=S.u48be=S.u40be=S.u32be=S.u24be=S.u16be=se=S.nu64=S.u48=S.u40=W=S.u32=S.u24=_e=S.u16=Wt=S.u8=Ge=S.offset=S.greedy=S.Constant=S.UTF8=S.CString=S.Blob=S.Boolean=S.BitField=S.BitStructure=S.VariantLayout=S.Union=S.UnionLayoutDiscriminator=S.UnionDiscriminator=S.Structure=S.Sequence=S.DoubleBE=S.Double=S.FloatBE=S.Float=S.NearInt64BE=S.NearInt64=S.NearUInt64BE=S.NearUInt64=S.IntBE=S.Int=S.UIntBE=S.UInt=S.OffsetLayout=S.GreedyCount=S.ExternalLayout=S.bindConstructorLayout=S.nameWithProperty=S.Layout=S.uint8ArrayToBuffer=S.checkUint8Array=void 0;S.constant=S.utf8=S.cstr=Zt=S.blob=S.unionLayoutDiscriminator=S.union=ce=S.seq=S.bits=q=S.struct=S.f64be=S.f64=S.f32be=S.f32=S.ns64be=S.s48be=S.s40be=S.s32be=S.s24be=S.s16be=ke=S.ns64=S.s48=S.s40=S.s32=S.s24=void 0;const Ii=wi;function zr(a){if(!(a instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}S.checkUint8Array=zr;function Ft(a){return zr(a),Ii.Buffer.from(a.buffer,a.byteOffset,a.length)}S.uint8ArrayToBuffer=Ft;class Vt{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}S.Layout=Vt;function Ai(a,t){return t.property?a+"["+t.property+"]":a}S.nameWithProperty=Ai;function ga(a,t){if(typeof a!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(a,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof Vt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");a.layout_=t,t.boundConstructor_=a,t.makeDestinationObject=()=>new a,Object.defineProperty(a.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(a,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}S.bindConstructorLayout=ga;class be extends Vt{isCount(){throw new Error("ExternalLayout is abstract")}}S.ExternalLayout=be;class Ts extends be{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){zr(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}S.GreedyCount=Ts;class Ei extends be{constructor(t,e=0,r){if(!(t instanceof Vt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof xe||this.layout instanceof Ie}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}S.OffsetLayout=Ei;class xe extends Vt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Ft(t).readUIntLE(e,this.span)}encode(t,e,r=0){return Ft(e).writeUIntLE(t,r,this.span),this.span}}S.UInt=xe;class Ie extends Vt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Ft(t).readUIntBE(e,this.span)}encode(t,e,r=0){return Ft(e).writeUIntBE(t,r,this.span),this.span}}S.UIntBE=Ie;class Sr extends Vt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Ft(t).readIntLE(e,this.span)}encode(t,e,r=0){return Ft(e).writeIntLE(t,r,this.span),this.span}}S.Int=Sr;class Kr extends Vt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Ft(t).readIntBE(e,this.span)}encode(t,e,r=0){return Ft(e).writeIntBE(t,r,this.span),this.span}}S.IntBE=Kr;const li=Math.pow(2,32);function zn(a){const t=Math.floor(a/li),e=a-t*li;return{hi32:t,lo32:e}}function Kn(a,t){return a*li+t}class Bs extends Vt{constructor(t){super(8,t)}decode(t,e=0){const r=Ft(t),s=r.readUInt32LE(e),i=r.readUInt32LE(e+4);return Kn(i,s)}encode(t,e,r=0){const s=zn(t),i=Ft(e);return i.writeUInt32LE(s.lo32,r),i.writeUInt32LE(s.hi32,r+4),8}}S.NearUInt64=Bs;class Ls extends Vt{constructor(t){super(8,t)}decode(t,e=0){const r=Ft(t),s=r.readUInt32BE(e),i=r.readUInt32BE(e+4);return Kn(s,i)}encode(t,e,r=0){const s=zn(t),i=Ft(e);return i.writeUInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}}S.NearUInt64BE=Ls;class Cs extends Vt{constructor(t){super(8,t)}decode(t,e=0){const r=Ft(t),s=r.readUInt32LE(e),i=r.readInt32LE(e+4);return Kn(i,s)}encode(t,e,r=0){const s=zn(t),i=Ft(e);return i.writeUInt32LE(s.lo32,r),i.writeInt32LE(s.hi32,r+4),8}}S.NearInt64=Cs;class Ns extends Vt{constructor(t){super(8,t)}decode(t,e=0){const r=Ft(t),s=r.readInt32BE(e),i=r.readUInt32BE(e+4);return Kn(s,i)}encode(t,e,r=0){const s=zn(t),i=Ft(e);return i.writeInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}}S.NearInt64BE=Ns;class Os extends Vt{constructor(t){super(4,t)}decode(t,e=0){return Ft(t).readFloatLE(e)}encode(t,e,r=0){return Ft(e).writeFloatLE(t,r),4}}S.Float=Os;class zs extends Vt{constructor(t){super(4,t)}decode(t,e=0){return Ft(t).readFloatBE(e)}encode(t,e,r=0){return Ft(e).writeFloatBE(t,r),4}}S.FloatBE=zs;class Ks extends Vt{constructor(t){super(8,t)}decode(t,e=0){return Ft(t).readDoubleLE(e)}encode(t,e,r=0){return Ft(e).writeDoubleLE(t,r),8}}S.Double=Ks;class Us extends Vt{constructor(t){super(8,t)}decode(t,e=0){return Ft(t).readDoubleBE(e)}encode(t,e,r=0){return Ft(e).writeDoubleBE(t,r),8}}S.DoubleBE=Us;class Ws extends Vt{constructor(t,e,r){if(!(t instanceof Vt))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof be&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(e instanceof be)&&0<t.span&&(s=e*t.span),super(s,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,s=this.count;if(s instanceof be&&(s=s.decode(t,e)),0<this.elementLayout.span)r=s*this.elementLayout.span;else{let i=0;for(;i<s;)r+=this.elementLayout.getSpan(t,e+r),++i}return r}decode(t,e=0){const r=[];let s=0,i=this.count;for(i instanceof be&&(i=i.decode(t,e));s<i;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),s+=1;return r}encode(t,e,r=0){const s=this.elementLayout,i=t.reduce((u,m)=>u+s.encode(m,e,r+u),0);return this.count instanceof be&&this.count.encode(t.length,e,r),i}}S.Sequence=Ws;class qs extends Vt{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((i,u)=>i&&u instanceof Vt,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=t.reduce((i,u)=>i+u.getSpan(),0)}catch{}super(s,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((s,i)=>{const u=i.getSpan(t,e);return e+=u,s+u},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e=0){zr(t);const r=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(r[s.property]=s.decode(t,e)),e+=s.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const s=r;let i=0,u=0;for(const m of this.fields){let w=m.span;if(u=0<w?w:0,m.property!==void 0){const b=t[m.property];b!==void 0&&(u=m.encode(b,e,r),0>w&&(w=m.getSpan(e,r)))}i=r,r+=w}return i+u-s}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}S.Structure=qs;class Ri{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}}S.UnionDiscriminator=Ri;class Bn extends Ri{constructor(t,e){if(!(t instanceof be&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}S.UnionLayoutDiscriminator=Bn;class Pi extends Vt{constructor(t,e,r){let s;if(t instanceof xe||t instanceof Ie)s=new Bn(new Ei(t));else if(t instanceof be&&t.isCount())s=new Bn(t);else if(t instanceof Ri)s=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof Vt))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof xe||t instanceof Ie)&&(i+=s.layout.span)),super(i,r),this.discriminator=s,this.usesPrefixDiscriminator=t instanceof xe||t instanceof Ie,this.defaultLayout=e,this.registry={};let u=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(m){return u(m)},this.configGetSourceVariant=function(m){u=m.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const s=this.discriminator,i=s.decode(t,e),u=this.registry[i];if(u===void 0){const m=this.defaultLayout;let w=0;this.usesPrefixDiscriminator&&(w=s.layout.span),r=this.makeDestinationObject(),r[s.property]=i,r[m.property]=m.decode(t,e+w)}else r=u.decode(t,e);return r}encode(t,e,r=0){const s=this.getSourceVariant(t);if(s===void 0){const i=this.discriminator,u=this.defaultLayout;let m=0;return this.usesPrefixDiscriminator&&(m=i.layout.span),i.encode(t[i.property],e,r),m+u.encode(t[u.property],e,r+m)}return s.encode(t,e,r)}addVariant(t,e,r){const s=new Fs(this,t,e,r);return this.registry[t]=s,s}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}}S.Union=Pi;class Fs extends Vt{constructor(t,e,r,s){if(!(t instanceof Pi))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&s===void 0&&(s=r,r=null),r){if(!(r instanceof Vt))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,s),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(t,e+r)),r+s}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+s):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=s;if(this.layout&&(this.layout.encode(t[this.property],e,r+s),i+=this.layout.getSpan(e,r+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}S.VariantLayout=Fs;function Ar(a){return 0>a&&(a+=4294967296),a}class Ti extends Vt{constructor(t,e,r){if(!(t instanceof xe||t instanceof Ie))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let s=0;this._packedSetValue=function(i){return s=Ar(i),this},this._packedGetValue=function(){return s}}decode(t,e=0){const r=this.makeDestinationObject(),s=this.word.decode(t,e);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(r[i.property]=i.decode(t));return r}encode(t,e,r=0){const s=this.word.decode(e,r);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const u=t[i.property];u!==void 0&&i.encode(u)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new Bi(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new Ds(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}S.BitStructure=Ti;class Bi{constructor(t,e,r){if(!(t instanceof Ti))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const s=8*t.span,i=t.fields.reduce((u,m)=>u+m.bits,0);if(e+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-e),this.wordMask=Ar(this.valueMask<<this.start),this.property=r}decode(t,e){const r=this.container._packedGetValue();return Ar(r&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==Ar(t&this.valueMask))throw new TypeError(Ai("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=Ar(t<<this.start);this.container._packedSetValue(Ar(e&~this.wordMask)|r)}}S.BitField=Bi;let Ds=class extends Bi{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};S.Boolean=Ds;class $s extends Vt{constructor(t,e){if(!(t instanceof be&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof be||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),Ft(t).slice(e,e+r)}encode(t,e,r){let s=this.length;if(this.length instanceof be&&(s=t.length),!(t instanceof Uint8Array&&s===t.length))throw new TypeError(Ai("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(r+s>e.length)throw new RangeError("encoding overruns Uint8Array");const i=Ft(t);return Ft(e).write(i.toString("hex"),r,s,"hex"),this.length instanceof be&&this.length.encode(s,e,r),s}}S.Blob=$s;class Vs extends Vt{constructor(t){super(-1,t)}getSpan(t,e=0){zr(t);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return Ft(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const s=Ii.Buffer.from(t,"utf8"),i=s.length;if(r+i>e.length)throw new RangeError("encoding overruns Buffer");const u=Ft(e);return s.copy(u,r),u[r+i]=0,i+1}}S.CString=Vs;class Hs extends Vt{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return zr(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return Ft(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const s=Ii.Buffer.from(t,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return s.copy(Ft(e),r),i}}S.UTF8=Hs;class Gs extends Vt{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}}S.Constant=Gs;S.greedy=(a,t)=>new Ts(a,t);var Ge=S.offset=(a,t,e)=>new Ei(a,t,e),Wt=S.u8=a=>new xe(1,a),_e=S.u16=a=>new xe(2,a);S.u24=a=>new xe(3,a);var W=S.u32=a=>new xe(4,a);S.u40=a=>new xe(5,a);S.u48=a=>new xe(6,a);var se=S.nu64=a=>new Bs(a);S.u16be=a=>new Ie(2,a);S.u24be=a=>new Ie(3,a);S.u32be=a=>new Ie(4,a);S.u40be=a=>new Ie(5,a);S.u48be=a=>new Ie(6,a);S.nu64be=a=>new Ls(a);S.s8=a=>new Sr(1,a);S.s16=a=>new Sr(2,a);S.s24=a=>new Sr(3,a);S.s32=a=>new Sr(4,a);S.s40=a=>new Sr(5,a);S.s48=a=>new Sr(6,a);var ke=S.ns64=a=>new Cs(a);S.s16be=a=>new Kr(2,a);S.s24be=a=>new Kr(3,a);S.s32be=a=>new Kr(4,a);S.s40be=a=>new Kr(5,a);S.s48be=a=>new Kr(6,a);S.ns64be=a=>new Ns(a);S.f32=a=>new Os(a);S.f32be=a=>new zs(a);S.f64=a=>new Ks(a);S.f64be=a=>new Us(a);var q=S.struct=(a,t,e)=>new qs(a,t,e);S.bits=(a,t,e)=>new Ti(a,t,e);var ce=S.seq=(a,t,e)=>new Ws(a,t,e);S.union=(a,t,e)=>new Pi(a,t,e);S.unionLayoutDiscriminator=(a,t)=>new Bn(a,t);var Zt=S.blob=(a,t)=>new $s(a,t);S.cstr=a=>new Vs(a);S.utf8=(a,t)=>new Hs(a,t);S.constant=(a,t)=>new Gs(a,t);var mn={};Object.defineProperty(mn,"__esModule",{value:!0});function ma(a){{const t=re.from(a);t.reverse();const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}var ya=mn.toBigIntLE=ma;function wa(a){{const t=a.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}mn.toBigIntBE=wa;function va(a,t){{const e=a.toString(16),r=re.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return r.reverse(),r}}var js=mn.toBufferLE=va;function ba(a,t){{const e=a.toString(16);return re.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}}mn.toBufferBE=ba;class ka extends TypeError{constructor(t,e){let r;const{message:s,explanation:i,...u}=t,{path:m}=t,w=m.length===0?s:`At path: ${m.join(".")} -- ${s}`;super(i??w),i!=null&&(this.cause=w),Object.assign(this,u),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}}function Sa(a){return yn(a)&&typeof a[Symbol.iterator]=="function"}function yn(a){return typeof a=="object"&&a!=null}function Ln(a){return yn(a)&&!Array.isArray(a)}function Ae(a){return typeof a=="symbol"?a.toString():typeof a=="string"?JSON.stringify(a):`${a}`}function Ma(a){const{done:t,value:e}=a.next();return t?void 0:e}function _a(a,t,e,r){if(a===!0)return;a===!1?a={}:typeof a=="string"&&(a={message:a});const{path:s,branch:i}=t,{type:u}=e,{refinement:m,message:w=`Expected a value of type \`${u}\`${m?` with refinement \`${m}\``:""}, but received: \`${Ae(r)}\``}=a;return{value:r,type:u,refinement:m,key:s[s.length-1],path:s,branch:i,...a,message:w}}function*ts(a,t,e,r){Sa(a)||(a=[a]);for(const s of a){const i=_a(s,t,e,r);i&&(yield i)}}function*Li(a,t,e={}){const{path:r=[],branch:s=[a],coerce:i=!1,mask:u=!1}=e,m={path:r,branch:s,mask:u};i&&(a=t.coercer(a,m));let w="valid";for(const b of t.validator(a,m))b.explanation=e.message,w="not_valid",yield[b,void 0];for(let[b,_,I]of t.entries(a,m)){const C=Li(_,I,{path:b===void 0?r:[...r,b],branch:b===void 0?s:[...s,_],coerce:i,mask:u,message:e.message});for(const M of C)M[0]?(w=M[0].refinement!=null?"not_refined":"not_valid",yield[M[0],void 0]):i&&(_=M[1],b===void 0?a=_:a instanceof Map?a.set(b,_):a instanceof Set?a.add(_):yn(a)&&(_!==void 0||b in a)&&(a[b]=_))}if(w!=="not_valid")for(const b of t.refiner(a,m))b.explanation=e.message,w="not_refined",yield[b,void 0];w==="valid"&&(yield[void 0,a])}let We=class{constructor(t){const{type:e,schema:r,validator:s,refiner:i,coercer:u=w=>w,entries:m=function*(){}}=t;this.type=e,this.schema=r,this.entries=m,this.coercer=u,s?this.validator=(w,b)=>{const _=s(w,b);return ts(_,b,this,w)}:this.validator=()=>[],i?this.refiner=(w,b)=>{const _=i(w,b);return ts(_,b,this,w)}:this.refiner=()=>[]}assert(t,e){return Js(t,this,e)}create(t,e){return O(t,this,e)}is(t){return Zs(t,this)}mask(t,e){return xa(t,this,e)}validate(t,e={}){return wn(t,this,e)}};function Js(a,t,e){const r=wn(a,t,{message:e});if(r[0])throw r[0]}function O(a,t,e){const r=wn(a,t,{coerce:!0,message:e});if(r[0])throw r[0];return r[1]}function xa(a,t,e){const r=wn(a,t,{coerce:!0,mask:!0,message:e});if(r[0])throw r[0];return r[1]}function Zs(a,t){return!wn(a,t)[0]}function wn(a,t,e={}){const r=Li(a,t,e),s=Ma(r);return s[0]?[new ka(s[0],function*(){for(const u of r)u[0]&&(yield u[0])}),void 0]:[void 0,s[1]]}function Mr(a,t){return new We({type:a,schema:null,validator:t})}function Ia(){return Mr("any",()=>!0)}function K(a){return new We({type:"array",schema:a,*entries(t){if(a&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,a]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Ae(t)}`}})}function ze(){return Mr("boolean",a=>typeof a=="boolean")}function Ci(a){return Mr("instance",t=>t instanceof a||`Expected a \`${a.name}\` instance, but received: ${Ae(t)}`)}function Xt(a){const t=Ae(a),e=typeof a;return new We({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?a:null,validator(r){return r===a||`Expected the literal \`${t}\`, but received: ${Ae(r)}`}})}function Aa(){return Mr("never",()=>!1)}function U(a){return new We({...a,validator:(t,e)=>t===null||a.validator(t,e),refiner:(t,e)=>t===null||a.refiner(t,e)})}function k(){return Mr("number",a=>typeof a=="number"&&!isNaN(a)||`Expected a number, but received: ${Ae(a)}`)}function $(a){return new We({...a,validator:(t,e)=>t===void 0||a.validator(t,e),refiner:(t,e)=>t===void 0||a.refiner(t,e)})}function Ys(a,t){return new We({type:"record",schema:null,*entries(e){if(yn(e))for(const r in e){const s=e[r];yield[r,r,a],yield[r,s,t]}},validator(e){return Ln(e)||`Expected an object, but received: ${Ae(e)}`},coercer(e){return Ln(e)?{...e}:e}})}function L(){return Mr("string",a=>typeof a=="string"||`Expected a string, but received: ${Ae(a)}`)}function Ni(a){const t=Aa();return new We({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(a.length,e.length);for(let s=0;s<r;s++)yield[s,e[s],a[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${Ae(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function E(a){const t=Object.keys(a);return new We({type:"type",schema:a,*entries(e){if(yn(e))for(const r of t)yield[r,e[r],a[r]]},validator(e){return Ln(e)||`Expected an object, but received: ${Ae(e)}`},coercer(e){return Ln(e)?{...e}:e}})}function ye(a){const t=a.map(e=>e.type).join(" | ");return new We({type:"union",schema:null,coercer(e,r){for(const s of a){const[i,u]=s.validate(e,{coerce:!0,mask:r.mask});if(!i)return u}return e},validator(e,r){const s=[];for(const i of a){const[...u]=Li(e,i,r),[m]=u;if(m[0])for(const[w]of u)w&&s.push(w);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Ae(e)}`,...s]}})}function Ur(){return Mr("unknown",()=>!0)}function vn(a,t,e){return new We({...a,coercer:(r,s)=>Zs(r,t)?a.coercer(e(r,s),s):a.coercer(r,s)})}var Mn,Ea=new Uint8Array(16);function Xs(){if(!Mn&&(Mn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Mn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Mn(Ea)}const Ra=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Un(a){return typeof a=="string"&&Ra.test(a)}var ie=[];for(var ti=0;ti<256;++ti)ie.push((ti+256).toString(16).substr(1));function Wn(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(ie[a[t+0]]+ie[a[t+1]]+ie[a[t+2]]+ie[a[t+3]]+"-"+ie[a[t+4]]+ie[a[t+5]]+"-"+ie[a[t+6]]+ie[a[t+7]]+"-"+ie[a[t+8]]+ie[a[t+9]]+"-"+ie[a[t+10]]+ie[a[t+11]]+ie[a[t+12]]+ie[a[t+13]]+ie[a[t+14]]+ie[a[t+15]]).toLowerCase();if(!Un(e))throw TypeError("Stringified UUID is invalid");return e}var es,ei,ri=0,ni=0;function Pa(a,t,e){var r=t&&e||0,s=t||new Array(16);a=a||{};var i=a.node||es,u=a.clockseq!==void 0?a.clockseq:ei;if(i==null||u==null){var m=a.random||(a.rng||Xs)();i==null&&(i=es=[m[0]|1,m[1],m[2],m[3],m[4],m[5]]),u==null&&(u=ei=(m[6]<<8|m[7])&16383)}var w=a.msecs!==void 0?a.msecs:Date.now(),b=a.nsecs!==void 0?a.nsecs:ni+1,_=w-ri+(b-ni)/1e4;if(_<0&&a.clockseq===void 0&&(u=u+1&16383),(_<0||w>ri)&&a.nsecs===void 0&&(b=0),b>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ri=w,ni=b,ei=u,w+=122192928e5;var I=((w&268435455)*1e4+b)%4294967296;s[r++]=I>>>24&255,s[r++]=I>>>16&255,s[r++]=I>>>8&255,s[r++]=I&255;var C=w/4294967296*1e4&268435455;s[r++]=C>>>8&255,s[r++]=C&255,s[r++]=C>>>24&15|16,s[r++]=C>>>16&255,s[r++]=u>>>8|128,s[r++]=u&255;for(var M=0;M<6;++M)s[r+M]=i[M];return t||Wn(s)}function Qs(a){if(!Un(a))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(a.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(a.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(a.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(a.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(a.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function Ta(a){a=unescape(encodeURIComponent(a));for(var t=[],e=0;e<a.length;++e)t.push(a.charCodeAt(e));return t}var Ba="6ba7b810-9dad-11d1-80b4-00c04fd430c8",La="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function to(a,t,e){function r(s,i,u,m){if(typeof s=="string"&&(s=Ta(s)),typeof i=="string"&&(i=Qs(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var w=new Uint8Array(16+s.length);if(w.set(i),w.set(s,i.length),w=e(w),w[6]=w[6]&15|t,w[8]=w[8]&63|128,u){m=m||0;for(var b=0;b<16;++b)u[m+b]=w[b];return u}return Wn(w)}try{r.name=a}catch{}return r.DNS=Ba,r.URL=La,r}function Ca(a){if(typeof a=="string"){var t=unescape(encodeURIComponent(a));a=new Uint8Array(t.length);for(var e=0;e<t.length;++e)a[e]=t.charCodeAt(e)}return Na(Oa(za(a),a.length*8))}function Na(a){for(var t=[],e=a.length*32,r="0123456789abcdef",s=0;s<e;s+=8){var i=a[s>>5]>>>s%32&255,u=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(u)}return t}function eo(a){return(a+64>>>9<<4)+14+1}function Oa(a,t){a[t>>5]|=128<<t%32,a[eo(t)-1]=t;for(var e=1732584193,r=-271733879,s=-1732584194,i=271733878,u=0;u<a.length;u+=16){var m=e,w=r,b=s,_=i;e=ue(e,r,s,i,a[u],7,-680876936),i=ue(i,e,r,s,a[u+1],12,-389564586),s=ue(s,i,e,r,a[u+2],17,606105819),r=ue(r,s,i,e,a[u+3],22,-1044525330),e=ue(e,r,s,i,a[u+4],7,-176418897),i=ue(i,e,r,s,a[u+5],12,1200080426),s=ue(s,i,e,r,a[u+6],17,-1473231341),r=ue(r,s,i,e,a[u+7],22,-45705983),e=ue(e,r,s,i,a[u+8],7,1770035416),i=ue(i,e,r,s,a[u+9],12,-1958414417),s=ue(s,i,e,r,a[u+10],17,-42063),r=ue(r,s,i,e,a[u+11],22,-1990404162),e=ue(e,r,s,i,a[u+12],7,1804603682),i=ue(i,e,r,s,a[u+13],12,-40341101),s=ue(s,i,e,r,a[u+14],17,-1502002290),r=ue(r,s,i,e,a[u+15],22,1236535329),e=he(e,r,s,i,a[u+1],5,-165796510),i=he(i,e,r,s,a[u+6],9,-1069501632),s=he(s,i,e,r,a[u+11],14,643717713),r=he(r,s,i,e,a[u],20,-373897302),e=he(e,r,s,i,a[u+5],5,-701558691),i=he(i,e,r,s,a[u+10],9,38016083),s=he(s,i,e,r,a[u+15],14,-660478335),r=he(r,s,i,e,a[u+4],20,-405537848),e=he(e,r,s,i,a[u+9],5,568446438),i=he(i,e,r,s,a[u+14],9,-1019803690),s=he(s,i,e,r,a[u+3],14,-187363961),r=he(r,s,i,e,a[u+8],20,1163531501),e=he(e,r,s,i,a[u+13],5,-1444681467),i=he(i,e,r,s,a[u+2],9,-51403784),s=he(s,i,e,r,a[u+7],14,1735328473),r=he(r,s,i,e,a[u+12],20,-1926607734),e=le(e,r,s,i,a[u+5],4,-378558),i=le(i,e,r,s,a[u+8],11,-2022574463),s=le(s,i,e,r,a[u+11],16,1839030562),r=le(r,s,i,e,a[u+14],23,-35309556),e=le(e,r,s,i,a[u+1],4,-1530992060),i=le(i,e,r,s,a[u+4],11,1272893353),s=le(s,i,e,r,a[u+7],16,-155497632),r=le(r,s,i,e,a[u+10],23,-1094730640),e=le(e,r,s,i,a[u+13],4,681279174),i=le(i,e,r,s,a[u],11,-358537222),s=le(s,i,e,r,a[u+3],16,-722521979),r=le(r,s,i,e,a[u+6],23,76029189),e=le(e,r,s,i,a[u+9],4,-640364487),i=le(i,e,r,s,a[u+12],11,-421815835),s=le(s,i,e,r,a[u+15],16,530742520),r=le(r,s,i,e,a[u+2],23,-995338651),e=fe(e,r,s,i,a[u],6,-198630844),i=fe(i,e,r,s,a[u+7],10,1126891415),s=fe(s,i,e,r,a[u+14],15,-1416354905),r=fe(r,s,i,e,a[u+5],21,-57434055),e=fe(e,r,s,i,a[u+12],6,1700485571),i=fe(i,e,r,s,a[u+3],10,-1894986606),s=fe(s,i,e,r,a[u+10],15,-1051523),r=fe(r,s,i,e,a[u+1],21,-2054922799),e=fe(e,r,s,i,a[u+8],6,1873313359),i=fe(i,e,r,s,a[u+15],10,-30611744),s=fe(s,i,e,r,a[u+6],15,-1560198380),r=fe(r,s,i,e,a[u+13],21,1309151649),e=fe(e,r,s,i,a[u+4],6,-145523070),i=fe(i,e,r,s,a[u+11],10,-1120210379),s=fe(s,i,e,r,a[u+2],15,718787259),r=fe(r,s,i,e,a[u+9],21,-343485551),e=He(e,m),r=He(r,w),s=He(s,b),i=He(i,_)}return[e,r,s,i]}function za(a){if(a.length===0)return[];for(var t=a.length*8,e=new Uint32Array(eo(t)),r=0;r<t;r+=8)e[r>>5]|=(a[r/8]&255)<<r%32;return e}function He(a,t){var e=(a&65535)+(t&65535),r=(a>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function Ka(a,t){return a<<t|a>>>32-t}function qn(a,t,e,r,s,i){return He(Ka(He(He(t,a),He(r,i)),s),e)}function ue(a,t,e,r,s,i,u){return qn(t&e|~t&r,a,t,s,i,u)}function he(a,t,e,r,s,i,u){return qn(t&r|e&~r,a,t,s,i,u)}function le(a,t,e,r,s,i,u){return qn(t^e^r,a,t,s,i,u)}function fe(a,t,e,r,s,i,u){return qn(e^(t|~r),a,t,s,i,u)}var Ua=to("v3",48,Ca);function Wa(a,t,e){a=a||{};var r=a.random||(a.rng||Xs)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=r[s];return t}return Wn(r)}function qa(a,t,e,r){switch(a){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function ii(a,t){return a<<t|a>>>32-t}function Fa(a){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof a=="string"){var r=unescape(encodeURIComponent(a));a=[];for(var s=0;s<r.length;++s)a.push(r.charCodeAt(s))}else Array.isArray(a)||(a=Array.prototype.slice.call(a));a.push(128);for(var i=a.length/4+2,u=Math.ceil(i/16),m=new Array(u),w=0;w<u;++w){for(var b=new Uint32Array(16),_=0;_<16;++_)b[_]=a[w*64+_*4]<<24|a[w*64+_*4+1]<<16|a[w*64+_*4+2]<<8|a[w*64+_*4+3];m[w]=b}m[u-1][14]=(a.length-1)*8/Math.pow(2,32),m[u-1][14]=Math.floor(m[u-1][14]),m[u-1][15]=(a.length-1)*8&4294967295;for(var I=0;I<u;++I){for(var C=new Uint32Array(80),M=0;M<16;++M)C[M]=m[I][M];for(var x=16;x<80;++x)C[x]=ii(C[x-3]^C[x-8]^C[x-14]^C[x-16],1);for(var A=e[0],P=e[1],z=e[2],D=e[3],J=e[4],Y=0;Y<80;++Y){var Ht=Math.floor(Y/20),V=ii(A,5)+qa(Ht,P,z,D)+J+t[Ht]+C[Y]>>>0;J=D,D=z,z=ii(P,30)>>>0,P=A,A=V}e[0]=e[0]+A>>>0,e[1]=e[1]+P>>>0,e[2]=e[2]+z>>>0,e[3]=e[3]+D>>>0,e[4]=e[4]+J>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Da=to("v5",80,Fa);const $a="00000000-0000-0000-0000-000000000000";function Va(a){if(!Un(a))throw TypeError("Invalid UUID");return parseInt(a.substr(14,1),16)}const Ha=Object.freeze(Object.defineProperty({__proto__:null,NIL:$a,parse:Qs,stringify:Wn,v1:Pa,v3:Ua,v4:Wa,v5:Da,validate:Un,version:Va},Symbol.toStringTag,{value:"Module"})),ro=bi(Ha),Ga=ro.v4,ja=function(a,t,e,r){if(typeof a!="string")throw new TypeError(a+" must be a string");r=r||{};const s=typeof r.version=="number"?r.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:a};if(s===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof e>"u"){const u=typeof r.generator=="function"?r.generator:function(){return Ga()};i.id=u(i,r)}else s===2&&e===null?r.notificationIdNull&&(i.id=null):i.id=e;return i};var Ja=ja;const Za=ro.v4,Ya=Ja,hn=function(a,t){if(!(this instanceof hn))return new hn(a,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return Za()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=a};var Xa=hn;hn.prototype.request=function(a,t,e,r){const s=this;let i=null;const u=Array.isArray(a)&&typeof t=="function";if(this.options.version===1&&u)throw new TypeError("JSON-RPC 1.0 does not support batching");if(u||!u&&a&&typeof a=="object"&&typeof t=="function")r=t,i=a;else{typeof e=="function"&&(r=e,e=void 0);const b=typeof r=="function";try{i=Ya(a,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(_){if(b)return r(_);throw _}if(!b)return i}let w;try{w=JSON.stringify(i,this.options.replacer)}catch(b){return r(b)}return this.callServer(w,function(b,_){s._parseResponse(b,_,r)}),i};hn.prototype._parseResponse=function(a,t,e){if(a){e(a);return}if(!t)return e();let r;try{r=JSON.parse(t,this.options.reviver)}catch(s){return e(s)}if(e.length===3)if(Array.isArray(r)){const s=function(u){return typeof u.error<"u"},i=function(u){return!s(u)};return e(null,r.filter(s),r.filter(i))}else return e(null,r.error,r.result);e(null,r)};const Qa=vi(Xa);var tc=class extends ks{constructor(t,e,r){super();ee(this,"socket");this.socket=new window.WebSocket(t,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(t,e,r){const s=r||e;try{this.socket.send(t),s()}catch(i){s(i)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,r){this.socket.addEventListener(t,e,r)}};function ec(a,t){return new tc(a,t)}var rc=class{encode(a){return JSON.stringify(a)}decode(a){return JSON.parse(a)}},nc=class extends ks{constructor(t,e="ws://localhost:8080",{autoconnect:r=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:u=5,...m}={},w,b){super();ee(this,"address");ee(this,"rpc_id");ee(this,"queue");ee(this,"options");ee(this,"autoconnect");ee(this,"ready");ee(this,"reconnect");ee(this,"reconnect_timer_id");ee(this,"reconnect_interval");ee(this,"max_reconnects");ee(this,"rest_options");ee(this,"current_reconnects");ee(this,"generate_request_id");ee(this,"socket");ee(this,"webSocketFactory");ee(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=r,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=u,this.rest_options=m,this.current_reconnects=0,this.generate_request_id=w||(()=>++this.rpc_id),b?this.dataPack=b:this.dataPack=new rc,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,r,s){return!s&&typeof r=="object"&&(s=r,r=null),new Promise((i,u)=>{if(!this.ready)return u(new Error("socket not ready"));const m=this.generate_request_id(t,e),w={jsonrpc:"2.0",method:t,params:e||void 0,id:m};this.socket.send(this.dataPack.encode(w),s,b=>{if(b)return u(b);this.queue[m]={promise:[i,u]},r&&(this.queue[m].timeout=setTimeout(()=>{delete this.queue[m],u(new Error("reply timeout"))},r))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((r,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),u=>{if(u)return s(u);r()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=G.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const s=[r.notification];if(r.params.constructor===Object)s.push(r.params);else for(let i=0;i<r.params.length;i++)s.push(r.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",r,s),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}};const ic=Or.utils.randomPrivateKey,rs=()=>{const a=Or.utils.randomPrivateKey(),t=Cn(a),e=new Uint8Array(64);return e.set(a),e.set(t,32),{publicKey:t,secretKey:e}},Cn=Or.getPublicKey;function ns(a){try{return Or.ExtendedPoint.fromHex(a),!0}catch{return!1}}const Oi=(a,t)=>Or.sign(a,t.slice(0,32)),sc=Or.verify,Nt=a=>G.isBuffer(a)?a:a instanceof Uint8Array?G.from(a.buffer,a.byteOffset,a.byteLength):G.from(a);class zi{constructor(t){Object.assign(this,t)}encode(){return G.from(Rs(un,this))}static decode(t){return Ps(un,this,t)}static decodeUnchecked(t){return _s(un,this,t)}}class oc extends zi{constructor(t){if(super(t),this.enum="",Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(e=>{this.enum=e})}}const un=new Map;var no;const io=32,Oe=32;function ac(a){return a._bn!==void 0}let is=1;class N extends zi{constructor(t){if(super({}),this._bn=void 0,ac(t))this._bn=t._bn;else{if(typeof t=="string"){const e=ae.decode(t);if(e.length!=Oe)throw new Error("Invalid public key input");this._bn=new Qi(e)}else this._bn=new Qi(t);if(this._bn.byteLength()>Oe)throw new Error("Invalid public key input")}}static unique(){const t=new N(is);return is+=1,new N(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return ae.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(G);if(t.length===Oe)return t;const e=G.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const s=G.concat([t.toBuffer(),G.from(e),r.toBuffer()]),i=Yi(s);return new N(i)}static createProgramAddressSync(t,e){let r=G.alloc(0);t.forEach(function(i){if(i.length>io)throw new TypeError("Max seed length exceeded");r=G.concat([r,Nt(i)])}),r=G.concat([r,e.toBuffer(),G.from("ProgramDerivedAddress")]);const s=Yi(r);if(ns(s))throw new Error("Invalid seeds, address must fall off the curve");return new N(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,s;for(;r!=0;){try{const i=t.concat(G.from([r]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new N(t);return ns(e.toBytes())}}no=N;N.default=new no("11111111111111111111111111111111");un.set(N,{kind:"struct",fields:[["_bn","u256"]]});class cc{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){const e=Nt(t);if(t.length!==64)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=Nt(ic()),this._publicKey=Nt(Cn(this._secretKey))}get publicKey(){return new N(this._publicKey)}get secretKey(){return G.concat([this._secretKey,this._publicKey],64)}}const uc=new N("BPFLoader1111111111111111111111111111111111"),je=1232,Fn=127,ln=64;class Ki extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Ki.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Ui extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Ui.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Er extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Er.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class fn{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,u)=>{r.set(i.toBase58(),u)});const s=i=>{const u=r.get(i.toBase58());if(u===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return u};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(u=>s(u.pubkey)),data:i.data}))}}const Ot=(a="publicKey")=>Zt(32,a),hc=(a="signature")=>Zt(64,a),vr=(a="string")=>{const t=q([W("length"),W("lengthPadding"),Zt(Ge(W(),-8),"chars")],a),e=t.decode.bind(t),r=t.encode.bind(t),s=t;return s.decode=(i,u)=>e(i,u).chars.toString(),s.encode=(i,u,m)=>{const w={chars:G.from(i,"utf8")};return r(w,u,m)},s.alloc=i=>W().span+W().span+G.from(i,"utf8").length,s},lc=(a="authorized")=>q([Ot("staker"),Ot("withdrawer")],a),fc=(a="lockup")=>q([ke("unixTimestamp"),ke("epoch"),Ot("custodian")],a),dc=(a="voteInit")=>q([Ot("nodePubkey"),Ot("authorizedVoter"),Ot("authorizedWithdrawer"),Wt("commission")],a),pc=(a="voteAuthorizeWithSeedArgs")=>q([W("voteAuthorizationType"),Ot("currentAuthorityDerivedKeyOwnerPubkey"),vr("currentAuthorityDerivedKeySeed"),Ot("newAuthorized")],a);function so(a,t){const e=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(t[s.property]);if("count"in s&&"elementLayout"in s){const i=t[s.property];if(Array.isArray(i))return i.length*e(s.elementLayout)}else if("fields"in s)return so({layout:s},t[s.property]);return 0};let r=0;return a.layout.fields.forEach(s=>{r+=e(s)}),r}function we(a){let t=0,e=0;for(;;){let r=a.shift();if(t|=(r&127)<<e*7,e+=1,!(r&128))break}return t}function Se(a,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){a.push(r);break}else r|=128,a.push(r)}}function qt(a,t){if(!a)throw new Error(t||"Assertion failed")}class Dn{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,s=u=>{const m=u.toBase58();let w=r.get(m);return w===void 0&&(w={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(m,w)),w},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const u of t){s(u.programId).isInvoked=!0;for(const m of u.keys){const w=s(m.pubkey);w.isSigner||(w.isSigner=m.isSigner),w.isWritable||(w.isWritable=m.isWritable)}}return new Dn(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];qt(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,w])=>w.isSigner&&w.isWritable),r=t.filter(([,w])=>w.isSigner&&!w.isWritable),s=t.filter(([,w])=>!w.isSigner&&w.isWritable),i=t.filter(([,w])=>!w.isSigner&&!w.isWritable),u={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{qt(e.length>0,"Expected at least one writable signer key");const[w]=e[0];qt(w===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const m=[...e.map(([w])=>new N(w)),...r.map(([w])=>new N(w)),...s.map(([w])=>new N(w)),...i.map(([w])=>new N(w))];return[u,m]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,u=>!u.isSigner&&!u.isInvoked&&u.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,u=>!u.isSigner&&!u.isInvoked&&!u.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,s=new Array;for(const[i,u]of this.keyMetaMap.entries())if(e(u)){const m=new N(i),w=t.findIndex(b=>b.equals(m));w>=0&&(qt(w<256,"Max lookup table index exceeded"),r.push(w),s.push(m),this.keyMetaMap.delete(i))}return[r,s]}}const oo="Reached end of buffer unexpectedly";function Le(a){if(a.length===0)throw new Error(oo);return a.shift()}function ve(a,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>a.length:e>=a.length)throw new Error(oo);return a.splice(...t)}class Ee{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new N(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:ae.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new fn(this.staticAccountKeys)}static compile(t){const e=Dn.compile(t.instructions,t.payerKey),[r,s]=e.getMessageComponents(),u=new fn(s).compileInstructions(t.instructions).map(m=>({programIdIndex:m.programIdIndex,accounts:m.accountKeyIndexes,data:ae.encode(m.data)}));return new Ee({header:r,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:u})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Se(e,t);const r=this.instructions.map(I=>{const{accounts:C,programIdIndex:M}=I,x=Array.from(ae.decode(I.data));let A=[];Se(A,C.length);let P=[];return Se(P,x.length),{programIdIndex:M,keyIndicesCount:G.from(A),keyIndices:C,dataLength:G.from(P),data:x}});let s=[];Se(s,r.length);let i=G.alloc(je);G.from(s).copy(i);let u=s.length;r.forEach(I=>{const M=q([Wt("programIdIndex"),Zt(I.keyIndicesCount.length,"keyIndicesCount"),ce(Wt("keyIndex"),I.keyIndices.length,"keyIndices"),Zt(I.dataLength.length,"dataLength"),ce(Wt("userdatum"),I.data.length,"data")]).encode(I,i,u);u+=M}),i=i.slice(0,u);const m=q([Zt(1,"numRequiredSignatures"),Zt(1,"numReadonlySignedAccounts"),Zt(1,"numReadonlyUnsignedAccounts"),Zt(e.length,"keyCount"),ce(Ot("key"),t,"keys"),Ot("recentBlockhash")]),w={numRequiredSignatures:G.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:G.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:G.from([this.header.numReadonlyUnsignedAccounts]),keyCount:G.from(e),keys:this.accountKeys.map(I=>Nt(I.toBytes())),recentBlockhash:ae.decode(this.recentBlockhash)};let b=G.alloc(2048);const _=m.encode(w,b);return i.copy(b,_),b.slice(0,_+i.length)}static from(t){let e=[...t];const r=Le(e);if(r!==(r&Fn))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Le(e),i=Le(e),u=we(e);let m=[];for(let C=0;C<u;C++){const M=ve(e,0,Oe);m.push(new N(G.from(M)))}const w=ve(e,0,Oe),b=we(e);let _=[];for(let C=0;C<b;C++){const M=Le(e),x=we(e),A=ve(e,0,x),P=we(e),z=ve(e,0,P),D=ae.encode(G.from(z));_.push({programIdIndex:M,accounts:A,data:D})}const I={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:ae.encode(G.from(w)),accountKeys:m,instructions:_};return new Ee(I)}}class br{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new fn(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const s=t-r,i=this.addressTableLookups.reduce((u,m)=>u+m.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,u=r-e-this.header.numReadonlyUnsignedAccounts;return s<u}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=t.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=Dn.compile(t.instructions,t.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const _ of i){const I=e.extractTableLookup(_);if(I!==void 0){const[C,{writable:M,readonly:x}]=I;r.push(C),s.writable.push(...M),s.readonly.push(...x)}}const[u,m]=e.getMessageComponents(),b=new fn(m,s).compileInstructions(t.instructions);return new br({header:u,staticAccountKeys:m,recentBlockhash:t.recentBlockhash,compiledInstructions:b,addressTableLookups:r})}serialize(){const t=Array();Se(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();Se(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Se(i,this.addressTableLookups.length);const u=q([Wt("prefix"),q([Wt("numRequiredSignatures"),Wt("numReadonlySignedAccounts"),Wt("numReadonlyUnsignedAccounts")],"header"),Zt(t.length,"staticAccountKeysLength"),ce(Ot(),this.staticAccountKeys.length,"staticAccountKeys"),Ot("recentBlockhash"),Zt(r.length,"instructionsLength"),Zt(e.length,"serializedInstructions"),Zt(i.length,"addressTableLookupsLength"),Zt(s.length,"serializedAddressTableLookups")]),m=new Uint8Array(je),b=u.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(_=>_.toBytes()),recentBlockhash:ae.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},m);return m.slice(0,b)}serializeInstructions(){let t=0;const e=new Uint8Array(je);for(const r of this.compiledInstructions){const s=Array();Se(s,r.accountKeyIndexes.length);const i=Array();Se(i,r.data.length);const u=q([Wt("programIdIndex"),Zt(s.length,"encodedAccountKeyIndexesLength"),ce(Wt(),r.accountKeyIndexes.length,"accountKeyIndexes"),Zt(i.length,"encodedDataLength"),Zt(r.data.length,"data")]);t+=u.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(je);for(const r of this.addressTableLookups){const s=Array();Se(s,r.writableIndexes.length);const i=Array();Se(i,r.readonlyIndexes.length);const u=q([Ot("accountKey"),Zt(s.length,"encodedWritableIndexesLength"),ce(Wt(),r.writableIndexes.length,"writableIndexes"),Zt(i.length,"encodedReadonlyIndexesLength"),ce(Wt(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=u.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=Le(e),s=r&Fn;qt(r!==s,"Expected versioned message but received legacy message");const i=s;qt(i===0,`Expected versioned message with version 0 but found version ${i}`);const u={numRequiredSignatures:Le(e),numReadonlySignedAccounts:Le(e),numReadonlyUnsignedAccounts:Le(e)},m=[],w=we(e);for(let x=0;x<w;x++)m.push(new N(ve(e,0,Oe)));const b=ae.encode(ve(e,0,Oe)),_=we(e),I=[];for(let x=0;x<_;x++){const A=Le(e),P=we(e),z=ve(e,0,P),D=we(e),J=new Uint8Array(ve(e,0,D));I.push({programIdIndex:A,accountKeyIndexes:z,data:J})}const C=we(e),M=[];for(let x=0;x<C;x++){const A=new N(ve(e,0,Oe)),P=we(e),z=ve(e,0,P),D=we(e),J=ve(e,0,D);M.push({accountKey:A,writableIndexes:z,readonlyIndexes:J})}return new br({header:u,staticAccountKeys:m,recentBlockhash:b,compiledInstructions:I,addressTableLookups:M})}}const Wi={deserializeMessageVersion(a){const t=a[0],e=t&Fn;return e===t?"legacy":e},deserialize:a=>{const t=Wi.deserializeMessageVersion(a);if(t==="legacy")return Ee.from(a);if(t===0)return br.deserialize(a);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let Fe=function(a){return a[a.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",a[a.PROCESSED=1]="PROCESSED",a[a.TIMED_OUT=2]="TIMED_OUT",a[a.NONCE_INVALID=3]="NONCE_INVALID",a}({});const gc=G.alloc(ln).fill(0);class Gt{constructor(t){this.keys=void 0,this.programId=void 0,this.data=G.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class Kt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Gt(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let A=0;A<e.length;A++)if(e[A].programId===void 0)throw new Error(`Transaction instruction index ${A} has undefined program id`);const s=[],i=[];e.forEach(A=>{A.keys.forEach(z=>{i.push({...z})});const P=A.programId.toString();s.includes(P)||s.push(P)}),s.forEach(A=>{i.push({pubkey:new N(A),isSigner:!1,isWritable:!1})});const u=[];i.forEach(A=>{const P=A.pubkey.toString(),z=u.findIndex(D=>D.pubkey.toString()===P);z>-1?(u[z].isWritable=u[z].isWritable||A.isWritable,u[z].isSigner=u[z].isSigner||A.isSigner):u.push(A)}),u.sort(function(A,P){if(A.isSigner!==P.isSigner)return A.isSigner?-1:1;if(A.isWritable!==P.isWritable)return A.isWritable?-1:1;const z={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return A.pubkey.toBase58().localeCompare(P.pubkey.toBase58(),"en",z)});const m=u.findIndex(A=>A.pubkey.equals(r));if(m>-1){const[A]=u.splice(m,1);A.isSigner=!0,A.isWritable=!0,u.unshift(A)}else u.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const A of this.signatures){const P=u.findIndex(z=>z.pubkey.equals(A.publicKey));if(P>-1)u[P].isSigner||(u[P].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${A.publicKey.toString()}`)}let w=0,b=0,_=0;const I=[],C=[];u.forEach(({pubkey:A,isSigner:P,isWritable:z})=>{P?(I.push(A.toString()),w+=1,z||(b+=1)):(C.push(A.toString()),z||(_+=1))});const M=I.concat(C),x=e.map(A=>{const{data:P,programId:z}=A;return{programIdIndex:M.indexOf(z.toString()),accounts:A.keys.map(D=>M.indexOf(D.pubkey.toString())),data:ae.encode(P)}});return x.forEach(A=>{qt(A.programIdIndex>=0),A.accounts.forEach(P=>qt(P>=0))}),new Ee({header:{numRequiredSignatures:w,numReadonlySignedAccounts:b,numReadonlyUnsignedAccounts:_},accountKeys:M,recentBlockhash:t,instructions:x})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const s=r.toString();return e.has(s)?!1:(e.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const u=i.publicKey.toString();e.has(u)||(e.add(u),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const u=i.publicKey.toString();e.has(u)||(e.add(u),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(s=>{const i=Oi(r,s.secretKey);this._addSignature(s.publicKey,Nt(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){qt(e.length===64);const r=this.signatures.findIndex(s=>t.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=G.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(r.missing||(r.missing=[])).push(i):sc(s,t,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,e);if(i){let u="Signature verification failed.";throw i.invalid&&(u+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(m=>m.toBase58()).join("`, `")}\`].`),i.missing&&(u+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(m=>m.toBase58()).join("`, `")}\`].`),new Error(u)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,r=[];Se(r,e.length);const s=r.length+e.length*64+t.length,i=G.alloc(s);return qt(e.length<256),G.from(r).copy(i,0),e.forEach(({signature:u},m)=>{u!==null&&(qt(u.length===64,"signature has invalid length"),G.from(u).copy(i,r.length+m*64))}),t.copy(i,r.length+e.length*64),qt(i.length<=je,`Transaction too large: ${i.length} > ${je}`),i}get keys(){return qt(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return qt(this.instructions.length===1),this.instructions[0].programId}get data(){return qt(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=we(e);let s=[];for(let i=0;i<r;i++){const u=ve(e,0,ln);s.push(ae.encode(G.from(u)))}return Kt.populate(Ee.from(e),s)}static populate(t,e=[]){const r=new Kt;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const u={signature:s==ae.encode(gc)?null:ae.decode(s),publicKey:t.accountKeys[i]};r.signatures.push(u)}),t.instructions.forEach(s=>{const i=s.accounts.map(u=>{const m=t.accountKeys[u];return{pubkey:m,isSigner:r.signatures.some(w=>w.publicKey.toString()===m.toString())||t.isAccountSigner(u),isWritable:t.isAccountWritable(u)}});r.instructions.push(new Gt({keys:i,programId:t.accountKeys[s.programIdIndex],data:ae.decode(s.data)}))}),r._message=t,r._json=r.toJSON(),r}}class Rr{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:r,compiledInstructions:s,recentBlockhash:i}=t,{numRequiredSignatures:u,numReadonlySignedAccounts:m,numReadonlyUnsignedAccounts:w}=r,b=u-m;qt(b>0,"Message header is invalid");const _=t.staticAccountKeys.length-u-w;qt(_>=0,"Message header is invalid");const I=t.getAccountKeys(e),C=I.get(0);if(C===void 0)throw new Error("Failed to decompile message because no account keys were found");const M=[];for(const x of s){const A=[];for(const z of x.accountKeyIndexes){const D=I.get(z);if(D===void 0)throw new Error(`Failed to find key for account key index ${z}`);const J=z<u;let Y;J?Y=z<b:z<I.staticAccountKeys.length?Y=z-u<_:Y=z-I.staticAccountKeys.length<I.accountKeysFromLookups.writable.length,A.push({pubkey:D,isSigner:z<r.numRequiredSignatures,isWritable:Y})}const P=I.get(x.programIdIndex);if(P===void 0)throw new Error(`Failed to find program id for program id index ${x.programIdIndex}`);M.push(new Gt({programId:P,data:Nt(x.data),keys:A}))}return new Rr({payerKey:C,instructions:M,recentBlockhash:i})}compileToLegacyMessage(){return Ee.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return br.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class Pr{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)qt(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const r=[];for(let s=0;s<t.header.numRequiredSignatures;s++)r.push(new Uint8Array(ln));this.signatures=r}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Se(e,this.signatures.length);const r=q([Zt(e.length,"encodedSignaturesLength"),ce(hc(),this.signatures.length,"signatures"),Zt(t.length,"serializedMessage")]),s=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},s);return s.slice(0,i)}static deserialize(t){let e=[...t];const r=[],s=we(e);for(let u=0;u<s;u++)r.push(new Uint8Array(ve(e,0,ln)));const i=Wi.deserialize(new Uint8Array(e));return new Pr(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of t){const i=r.findIndex(u=>u.equals(s.publicKey));qt(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=Oi(e,s.secretKey)}}addSignature(t,e){qt(e.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));qt(s>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=e}}const mc=160,yc=64,wc=mc/yc,ao=1e3/wc,Be=new N("SysvarC1ock11111111111111111111111111111111"),vc=new N("SysvarEpochSchedu1e111111111111111111111111"),bc=new N("Sysvar1nstructions1111111111111111111111111"),In=new N("SysvarRecentB1ockHashes11111111111111111111"),Cr=new N("SysvarRent111111111111111111111111111111111"),kc=new N("SysvarRewards111111111111111111111111111111"),Sc=new N("SysvarS1otHashes111111111111111111111111111"),Mc=new N("SysvarS1otHistory11111111111111111111111111"),An=new N("SysvarStakeHistory1111111111111111111111111");class dn extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",u="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let m;switch(t){case"send":m=`Transaction ${e} resulted in an error. 
${r}. `+i+u;break;case"simulate":m=`Simulation failed. 
Message: ${r}. 
`+i+u;break;default:m=`Unknown action '${(w=>w)(t)}'`}super(m),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}const _c={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class F extends Error{constructor({code:t,message:e,data:r},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}async function fi(a,t,e,r){const s=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},i=await a.sendTransaction(t,e,s);let u;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)u=(await a.confirmTransaction({abortSignal:r==null?void 0:r.abortSignal,signature:i,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},r&&r.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){const{nonceInstruction:m}=t.nonceInfo,w=m.keys[0].pubkey;u=(await a.confirmTransaction({abortSignal:r==null?void 0:r.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:w,nonceValue:t.nonceInfo.nonce,signature:i},r&&r.commitment)).value}else(r==null?void 0:r.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),u=(await a.confirmTransaction(i,r&&r.commitment)).value;if(u.err)throw i!=null?new dn({action:"send",signature:i,transactionMessage:`Status: (${JSON.stringify(u)})`}):new Error(`Transaction ${i} failed (${JSON.stringify(u)})`);return i}function wr(a){return new Promise(t=>setTimeout(t,a))}function zt(a,t){const e=a.layout.span>=0?a.layout.span:so(a,t),r=G.alloc(e),s=Object.assign({instruction:a.index},t);return a.layout.encode(s,r),r}function $t(a,t){let e;try{e=a.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.instruction!==a.index)throw new Error(`invalid instruction; instruction index mismatch ${e.instruction} != ${a.index}`);return e}const co=se("lamportsPerSignature"),uo=q([W("version"),W("state"),Ot("authorizedPubkey"),Ot("nonce"),q([co],"feeCalculator")]),di=uo.span;class $n{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=uo.decode(Nt(t),0);return new $n({authorizedPubkey:new N(e.authorizedPubkey),nonce:new N(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const xc=a=>{const t=a.decode.bind(a),e=a.encode.bind(a);return{decode:t,encode:e}},Ic=a=>t=>{const e=Zt(a,t),{encode:r,decode:s}=xc(e),i=e;return i.decode=(u,m)=>{const w=s(u,m);return ya(G.from(w))},i.encode=(u,m,w)=>{const b=js(u,a);return r(b,m,w)},i},Nr=Ic(8);class Ac{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=W("instruction").decode(t.data);let s;for(const[i,u]of Object.entries(Jt))if(u.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a SystemInstruction");return s}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e,space:r,programId:s}=$t(Jt.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:r,programId:new N(s)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e}=$t(Jt.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e,seed:r,programId:s}=$t(Jt.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:r,programId:new N(s)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{space:e}=$t(Jt.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,space:s,programId:i}=$t(Jt.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new N(e),seed:r,space:s,programId:new N(i)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{programId:e}=$t(Jt.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new N(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,programId:s}=$t(Jt.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new N(e),seed:r,programId:new N(s)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{base:e,seed:r,lamports:s,space:i,programId:u}=$t(Jt.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new N(e),seed:r,lamports:s,space:i,programId:new N(u)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{authorized:e}=$t(Jt.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new N(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),$t(Jt.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=$t(Jt.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e}=$t(Jt.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new N(e)}}static checkProgramId(t){if(!t.equals(Yt.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Jt=Object.freeze({Create:{index:0,layout:q([W("instruction"),ke("lamports"),ke("space"),Ot("programId")])},Assign:{index:1,layout:q([W("instruction"),Ot("programId")])},Transfer:{index:2,layout:q([W("instruction"),Nr("lamports")])},CreateWithSeed:{index:3,layout:q([W("instruction"),Ot("base"),vr("seed"),ke("lamports"),ke("space"),Ot("programId")])},AdvanceNonceAccount:{index:4,layout:q([W("instruction")])},WithdrawNonceAccount:{index:5,layout:q([W("instruction"),ke("lamports")])},InitializeNonceAccount:{index:6,layout:q([W("instruction"),Ot("authorized")])},AuthorizeNonceAccount:{index:7,layout:q([W("instruction"),Ot("authorized")])},Allocate:{index:8,layout:q([W("instruction"),ke("space")])},AllocateWithSeed:{index:9,layout:q([W("instruction"),Ot("base"),vr("seed"),ke("space"),Ot("programId")])},AssignWithSeed:{index:10,layout:q([W("instruction"),Ot("base"),vr("seed"),Ot("programId")])},TransferWithSeed:{index:11,layout:q([W("instruction"),Nr("lamports"),vr("seed"),Ot("programId")])},UpgradeNonceAccount:{index:12,layout:q([W("instruction")])}});class Yt{constructor(){}static createAccount(t){const e=Jt.Create,r=zt(e,{lamports:t.lamports,space:t.space,programId:Nt(t.programId.toBuffer())});return new Gt({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const s=Jt.TransferWithSeed;e=zt(s,{lamports:BigInt(t.lamports),seed:t.seed,programId:Nt(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=Jt.Transfer;e=zt(s,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new Gt({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const s=Jt.AssignWithSeed;e=zt(s,{base:Nt(t.basePubkey.toBuffer()),seed:t.seed,programId:Nt(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Jt.Assign;e=zt(s,{programId:Nt(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Gt({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Jt.CreateWithSeed,r=zt(e,{base:Nt(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:Nt(t.programId.toBuffer())});let s=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||s.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new Gt({keys:s,programId:this.programId,data:r})}static createNonceAccount(t){const e=new Kt;"basePubkey"in t&&"seed"in t?e.add(Yt.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:di,programId:this.programId})):e.add(Yt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:di,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=Jt.InitializeNonceAccount,r=zt(e,{authorized:Nt(t.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:In,isSigner:!1,isWritable:!1},{pubkey:Cr,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Gt(s)}static nonceAdvance(t){const e=Jt.AdvanceNonceAccount,r=zt(e),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:In,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Gt(s)}static nonceWithdraw(t){const e=Jt.WithdrawNonceAccount,r=zt(e,{lamports:t.lamports});return new Gt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:In,isSigner:!1,isWritable:!1},{pubkey:Cr,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=Jt.AuthorizeNonceAccount,r=zt(e,{authorized:Nt(t.newAuthorizedPubkey.toBuffer())});return new Gt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const s=Jt.AllocateWithSeed;e=zt(s,{base:Nt(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:Nt(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Jt.Allocate;e=zt(s,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Gt({keys:r,programId:this.programId,data:e})}}Yt.programId=new N("11111111111111111111111111111111");const Ec=je-300;class kr{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/kr.chunkSize)+1+1)}static async load(t,e,r,s,i){{const I=await t.getMinimumBalanceForRentExemption(i.length),C=await t.getAccountInfo(r.publicKey,"confirmed");let M=null;if(C!==null){if(C.executable)return console.error("Program load failed, account is already executable"),!1;C.data.length!==i.length&&(M=M||new Kt,M.add(Yt.allocate({accountPubkey:r.publicKey,space:i.length}))),C.owner.equals(s)||(M=M||new Kt,M.add(Yt.assign({accountPubkey:r.publicKey,programId:s}))),C.lamports<I&&(M=M||new Kt,M.add(Yt.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:I-C.lamports})))}else M=new Kt().add(Yt.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:I>0?I:1,space:i.length,programId:s}));M!==null&&await fi(t,M,[e,r],{commitment:"confirmed"})}const u=q([W("instruction"),W("offset"),W("bytesLength"),W("bytesLengthPadding"),ce(Wt("byte"),Ge(W(),-8),"bytes")]),m=kr.chunkSize;let w=0,b=i,_=[];for(;b.length>0;){const I=b.slice(0,m),C=G.alloc(m+16);u.encode({instruction:0,offset:w,bytes:I,bytesLength:0,bytesLengthPadding:0},C);const M=new Kt().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:C});_.push(fi(t,M,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await wr(1e3/4),w+=m,b=b.slice(m)}await Promise.all(_);{const I=q([W("instruction")]),C=G.alloc(I.span);I.encode({instruction:1},C);const M=new Kt().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:Cr,isSigner:!1,isWritable:!1}],programId:s,data:C}),x="processed",A=await t.sendTransaction(M,[e,r],{preflightCommitment:x}),{context:P,value:z}=await t.confirmTransaction({signature:A,lastValidBlockHeight:M.lastValidBlockHeight,blockhash:M.recentBlockhash},x);if(z.err)throw new Error(`Transaction ${A} failed (${JSON.stringify(z)})`);for(;;){try{if(await t.getSlot({commitment:x})>P.slot)break}catch{}await new Promise(D=>setTimeout(D,Math.round(ao/2)))}}return!0}}kr.chunkSize=Ec;const Rc=new N("BPFLoader2111111111111111111111111111111111");class Pc{static getMinNumSignatures(t){return kr.getMinNumSignatures(t)}static load(t,e,r,s,i){return kr.load(t,e,r,i,s)}}function Tc(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var si,ss;function Bc(){if(ss)return si;ss=1;var a=Object.prototype.toString,t=Object.keys||function(r){var s=[];for(var i in r)s.push(i);return s};function e(r,s){var i,u,m,w,b,_,I;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return e(r.toJSON(),s);if(I=a.call(r),I==="[object Array]"){for(m="[",u=r.length-1,i=0;i<u;i++)m+=e(r[i],!0)+",";return u>-1&&(m+=e(r[i],!0)),m+"]"}else if(I==="[object Object]"){for(w=t(r).sort(),u=w.length,m="",i=0;i<u;)b=w[i],_=e(r[b],!1),_!==void 0&&(m&&(m+=","),m+=JSON.stringify(b)+":"+_),i++;return"{"+m+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return si=function(r){var s=e(r,!1);if(s!==void 0)return""+s},si}var Lc=Bc(),os=Tc(Lc);const cn=32;function oi(a){let t=0;for(;a>1;)a/=2,t++;return t}function Cc(a){return a===0?1:(a--,a|=a>>1,a|=a>>2,a|=a>>4,a|=a>>8,a|=a>>16,a|=a>>32,a+1)}class ho{constructor(t,e,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=oi(Cc(t+cn+1))-oi(cn)-1,r=this.getSlotsInEpoch(e),s=t-(r-cn);return[e,s]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*cn:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+oi(cn)):this.slotsPerEpoch}}var Nc=globalThis.fetch;class Oc extends nc{constructor(t,e,r){const s=i=>{const u=ec(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in u?this.underlyingSocket=u.socket:this.underlyingSocket=u,u};super(s,t,e,r),this.underlyingSocket=void 0}call(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function zc(a,t){let e;try{e=a.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==a.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${a.index}`);return e}const as=56;class pi{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=zc(Kc,t),r=t.length-as;qt(r>=0,"lookup table is invalid"),qt(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=q([ce(Ot(),s,"addresses")]).decode(t.slice(as));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new N(e.authority[0]):void 0,addresses:i.map(u=>new N(u))}}}const Kc={index:1,layout:q([W("typeIndex"),Nr("deactivationSlot"),se("lastExtendedSlot"),Wt("lastExtendedStartIndex"),Wt(),ce(Ot(),Ge(Wt(),-1),"authority")])},Uc=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Wc(a){const t=a.match(Uc);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${a}\``);const[e,r,s,i]=t,u=a.startsWith("https:")?"wss:":"ws:",m=s==null?null:parseInt(s.slice(1),10),w=m==null?"":`:${m+1}`;return`${u}//${r}${w}${i}`}const Qt=vn(Ci(N),L(),a=>new N(a)),lo=Ni([L(),Xt("base64")]),qi=vn(Ci(G),lo,a=>G.from(a[0],"base64")),fo=30*1e3;function qc(a){if(/^https?:/.test(a)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return a}function jt(a){let t,e;if(typeof a=="string")t=a;else if(a){const{commitment:r,...s}=a;t=r,e=s}return{commitment:t,config:e}}function cs(a){return a.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function po(a){return ye([E({jsonrpc:Xt("2.0"),id:L(),result:a}),E({jsonrpc:Xt("2.0"),id:L(),error:E({code:Ur(),message:L(),data:$(Ia())})})])}const Fc=po(Ur());function Ct(a){return vn(po(a),Fc,t=>"error"in t?t:{...t,result:O(t.result,a)})}function te(a){return Ct(E({context:E({slot:k()}),value:a}))}function Vn(a){return E({context:E({slot:k()}),value:a})}function ai(a,t){return a===0?new br({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new N(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:ae.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new Ee(t)}const Dc=E({foundation:k(),foundationTerm:k(),initial:k(),taper:k(),terminal:k()}),$c=Ct(K(U(E({epoch:k(),effectiveSlot:k(),amount:k(),postBalance:k(),commission:$(U(k()))})))),Vc=K(E({slot:k(),prioritizationFee:k()})),Hc=E({total:k(),validator:k(),foundation:k(),epoch:k()}),Gc=E({epoch:k(),slotIndex:k(),slotsInEpoch:k(),absoluteSlot:k(),blockHeight:$(k()),transactionCount:$(k())}),jc=E({slotsPerEpoch:k(),leaderScheduleSlotOffset:k(),warmup:ze(),firstNormalEpoch:k(),firstNormalSlot:k()}),Jc=Ys(L(),K(k())),_r=U(ye([E({}),L()])),Zc=E({err:_r}),Yc=Xt("receivedSignature"),Xc=E({"solana-core":L(),"feature-set":$(k())}),Qc=E({program:L(),programId:Qt,parsed:Ur()}),tu=E({programId:Qt,accounts:K(Qt),data:L()}),us=te(E({err:U(ye([E({}),L()])),logs:U(K(L())),accounts:$(U(K(U(E({executable:ze(),owner:L(),lamports:k(),data:K(L()),rentEpoch:$(k())}))))),unitsConsumed:$(k()),returnData:$(U(E({programId:L(),data:Ni([L(),Xt("base64")])}))),innerInstructions:$(U(K(E({index:k(),instructions:K(ye([Qc,tu]))}))))})),eu=te(E({byIdentity:Ys(L(),K(k())),range:E({firstSlot:k(),lastSlot:k()})}));function ru(a,t,e,r,s,i){const u=e||Nc;let m;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let w;return r&&(w=async(_,I)=>{const C=await new Promise((M,x)=>{try{r(_,I,(A,P)=>M([A,P]))}catch(A){x(A)}});return await u(...C)}),new Qa(async(_,I)=>{const C={method:"POST",body:_,agent:m,headers:Object.assign({"Content-Type":"application/json"},t||{},rh)};try{let M=5,x,A=500;for(;w?x=await w(a,C):x=await u(a,C),!(x.status!==429||s===!0||(M-=1,M===0));)console.error(`Server responded with ${x.status} ${x.statusText}.  Retrying after ${A}ms delay...`),await wr(A),A*=2;const P=await x.text();x.ok?I(null,P):I(new Error(`${x.status} ${x.statusText}: ${P}`))}catch(M){M instanceof Error&&I(M)}},{})}function nu(a){return(t,e)=>new Promise((r,s)=>{a.request(t,e,(i,u)=>{if(i){s(i);return}r(u)})})}function iu(a){return t=>new Promise((e,r)=>{t.length===0&&e([]);const s=t.map(i=>a.request(i.methodName,i.args));a.request(s,(i,u)=>{if(i){r(i);return}e(u)})})}const su=Ct(Dc),ou=Ct(Hc),au=Ct(Vc),cu=Ct(Gc),uu=Ct(jc),hu=Ct(Jc),lu=Ct(k()),fu=te(E({total:k(),circulating:k(),nonCirculating:k(),nonCirculatingAccounts:K(Qt)})),gi=E({amount:L(),uiAmount:U(k()),decimals:k(),uiAmountString:$(L())}),du=te(K(E({address:Qt,amount:L(),uiAmount:U(k()),decimals:k(),uiAmountString:$(L())}))),pu=te(K(E({pubkey:Qt,account:E({executable:ze(),owner:Qt,lamports:k(),data:qi,rentEpoch:k()})}))),mi=E({program:L(),parsed:Ur(),space:k()}),gu=te(K(E({pubkey:Qt,account:E({executable:ze(),owner:Qt,lamports:k(),data:mi,rentEpoch:k()})}))),mu=te(K(E({lamports:k(),address:Qt}))),pn=E({executable:ze(),owner:Qt,lamports:k(),data:qi,rentEpoch:k()}),yu=E({pubkey:Qt,account:pn}),wu=vn(ye([Ci(G),mi]),ye([lo,mi]),a=>Array.isArray(a)?O(a,qi):a),yi=E({executable:ze(),owner:Qt,lamports:k(),data:wu,rentEpoch:k()}),vu=E({pubkey:Qt,account:yi}),bu=E({state:ye([Xt("active"),Xt("inactive"),Xt("activating"),Xt("deactivating")]),active:k(),inactive:k()}),ku=Ct(K(E({signature:L(),slot:k(),err:_r,memo:U(L()),blockTime:$(U(k()))}))),Su=Ct(K(E({signature:L(),slot:k(),err:_r,memo:U(L()),blockTime:$(U(k()))}))),Mu=E({subscription:k(),result:Vn(pn)}),_u=E({pubkey:Qt,account:pn}),xu=E({subscription:k(),result:Vn(_u)}),Iu=E({parent:k(),slot:k(),root:k()}),Au=E({subscription:k(),result:Iu}),Eu=ye([E({type:ye([Xt("firstShredReceived"),Xt("completed"),Xt("optimisticConfirmation"),Xt("root")]),slot:k(),timestamp:k()}),E({type:Xt("createdBank"),parent:k(),slot:k(),timestamp:k()}),E({type:Xt("frozen"),slot:k(),timestamp:k(),stats:E({numTransactionEntries:k(),numSuccessfulTransactions:k(),numFailedTransactions:k(),maxTransactionsPerEntry:k()})}),E({type:Xt("dead"),slot:k(),timestamp:k(),err:L()})]),Ru=E({subscription:k(),result:Eu}),Pu=E({subscription:k(),result:Vn(ye([Zc,Yc]))}),Tu=E({subscription:k(),result:k()}),Bu=E({pubkey:L(),gossip:U(L()),tpu:U(L()),rpc:U(L()),version:U(L())}),hs=E({votePubkey:L(),nodePubkey:L(),activatedStake:k(),epochVoteAccount:ze(),epochCredits:K(Ni([k(),k(),k()])),commission:k(),lastVote:k(),rootSlot:U(k())}),Lu=Ct(E({current:K(hs),delinquent:K(hs)})),Cu=ye([Xt("processed"),Xt("confirmed"),Xt("finalized")]),Nu=E({slot:k(),confirmations:U(k()),err:_r,confirmationStatus:$(Cu)}),Ou=te(K(U(Nu))),zu=Ct(k()),go=E({accountKey:Qt,writableIndexes:K(k()),readonlyIndexes:K(k())}),Fi=E({signatures:K(L()),message:E({accountKeys:K(L()),header:E({numRequiredSignatures:k(),numReadonlySignedAccounts:k(),numReadonlyUnsignedAccounts:k()}),instructions:K(E({accounts:K(k()),data:L(),programIdIndex:k()})),recentBlockhash:L(),addressTableLookups:$(K(go))})}),mo=E({pubkey:Qt,signer:ze(),writable:ze(),source:$(ye([Xt("transaction"),Xt("lookupTable")]))}),yo=E({accountKeys:K(mo),signatures:K(L())}),wo=E({parsed:Ur(),program:L(),programId:Qt}),vo=E({accounts:K(Qt),data:L(),programId:Qt}),Ku=ye([vo,wo]),Uu=ye([E({parsed:Ur(),program:L(),programId:L()}),E({accounts:K(L()),data:L(),programId:L()})]),bo=vn(Ku,Uu,a=>"accounts"in a?O(a,vo):O(a,wo)),ko=E({signatures:K(L()),message:E({accountKeys:K(mo),instructions:K(bo),recentBlockhash:L(),addressTableLookups:$(U(K(go)))})}),Nn=E({accountIndex:k(),mint:L(),owner:$(L()),programId:$(L()),uiTokenAmount:gi}),So=E({writable:K(Qt),readonly:K(Qt)}),Hn=E({err:_r,fee:k(),innerInstructions:$(U(K(E({index:k(),instructions:K(E({accounts:K(k()),data:L(),programIdIndex:k()}))})))),preBalances:K(k()),postBalances:K(k()),logMessages:$(U(K(L()))),preTokenBalances:$(U(K(Nn))),postTokenBalances:$(U(K(Nn))),loadedAddresses:$(So),computeUnitsConsumed:$(k())}),Di=E({err:_r,fee:k(),innerInstructions:$(U(K(E({index:k(),instructions:K(bo)})))),preBalances:K(k()),postBalances:K(k()),logMessages:$(U(K(L()))),preTokenBalances:$(U(K(Nn))),postTokenBalances:$(U(K(Nn))),loadedAddresses:$(So),computeUnitsConsumed:$(k())}),Wr=ye([Xt(0),Xt("legacy")]),xr=E({pubkey:L(),lamports:k(),postBalance:U(k()),rewardType:U(L()),commission:$(U(k()))}),Wu=Ct(U(E({blockhash:L(),previousBlockhash:L(),parentSlot:k(),transactions:K(E({transaction:Fi,meta:U(Hn),version:$(Wr)})),rewards:$(K(xr)),blockTime:U(k()),blockHeight:U(k())}))),qu=Ct(U(E({blockhash:L(),previousBlockhash:L(),parentSlot:k(),rewards:$(K(xr)),blockTime:U(k()),blockHeight:U(k())}))),Fu=Ct(U(E({blockhash:L(),previousBlockhash:L(),parentSlot:k(),transactions:K(E({transaction:yo,meta:U(Hn),version:$(Wr)})),rewards:$(K(xr)),blockTime:U(k()),blockHeight:U(k())}))),Du=Ct(U(E({blockhash:L(),previousBlockhash:L(),parentSlot:k(),transactions:K(E({transaction:ko,meta:U(Di),version:$(Wr)})),rewards:$(K(xr)),blockTime:U(k()),blockHeight:U(k())}))),$u=Ct(U(E({blockhash:L(),previousBlockhash:L(),parentSlot:k(),transactions:K(E({transaction:yo,meta:U(Di),version:$(Wr)})),rewards:$(K(xr)),blockTime:U(k()),blockHeight:U(k())}))),Vu=Ct(U(E({blockhash:L(),previousBlockhash:L(),parentSlot:k(),rewards:$(K(xr)),blockTime:U(k()),blockHeight:U(k())}))),Hu=Ct(U(E({blockhash:L(),previousBlockhash:L(),parentSlot:k(),transactions:K(E({transaction:Fi,meta:U(Hn)})),rewards:$(K(xr)),blockTime:U(k())}))),ls=Ct(U(E({blockhash:L(),previousBlockhash:L(),parentSlot:k(),signatures:K(L()),blockTime:U(k())}))),ci=Ct(U(E({slot:k(),meta:U(Hn),blockTime:$(U(k())),transaction:Fi,version:$(Wr)}))),_n=Ct(U(E({slot:k(),transaction:ko,meta:U(Di),blockTime:$(U(k())),version:$(Wr)}))),Gu=te(E({blockhash:L(),lastValidBlockHeight:k()})),ju=te(ze()),Ju=E({slot:k(),numTransactions:k(),numSlots:k(),samplePeriodSecs:k()}),Zu=Ct(K(Ju)),Yu=te(U(E({feeCalculator:E({lamportsPerSignature:k()})}))),Xu=Ct(L()),Qu=Ct(L()),th=E({err:_r,logs:K(L()),signature:L()}),eh=E({result:Vn(th),subscription:k()}),rh={"solana-client":"js/1.0.0-maintenance"};class Mo{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const b={};return async _=>{const{commitment:I,config:C}=jt(_),M=this._buildArgs([],I,void 0,C),x=os(M);return b[x]=b[x]??(async()=>{try{const A=await this._rpcRequest("getBlockHeight",M),P=O(A,Ct(k()));if("error"in P)throw new F(P.error,"failed to get block height information");return P.result}finally{delete b[x]}})(),await b[x]}})();let r,s,i,u,m,w;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,u=e.fetchMiddleware,m=e.disableRetryOnRateLimit,w=e.httpAgent),this._rpcEndpoint=qc(t),this._rpcWsEndpoint=r||Wc(t),this._rpcClient=ru(t,s,i,u,m,w),this._rpcRequest=nu(this._rpcClient),this._rpcBatchRequest=iu(this._rpcClient),this._rpcWebSocket=new Oc(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:s}=jt(e),i=this._buildArgs([t.toBase58()],r,void 0,s),u=await this._rpcRequest("getBalance",i),m=O(u,te(k()));if("error"in m)throw new F(m.error,`failed to get balance for ${t.toBase58()}`);return m.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=O(e,Ct(U(k())));if("error"in r)throw new F(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=O(t,Ct(k()));if("error"in e)throw new F(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=O(t,lu);if("error"in e)throw new F(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),s=O(r,fu);if("error"in s)throw new F(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",r),i=O(s,te(gi));if("error"in i)throw new F(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",r),i=O(s,te(gi));if("error"in i)throw new F(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:s,config:i}=jt(r);let u=[t.toBase58()];"mint"in e?u.push({mint:e.mint.toBase58()}):u.push({programId:e.programId.toBase58()});const m=this._buildArgs(u,s,"base64",i),w=await this._rpcRequest("getTokenAccountsByOwner",m),b=O(w,pu);if("error"in b)throw new F(b.error,`failed to get token accounts owned by account ${t.toBase58()}`);return b.result}async getParsedTokenAccountsByOwner(t,e,r){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),u=await this._rpcRequest("getTokenAccountsByOwner",i),m=O(u,gu);if("error"in m)throw new F(m.error,`failed to get token accounts owned by account ${t.toBase58()}`);return m.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",r),i=O(s,mu);if("error"in i)throw new F(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",r),i=O(s,du);if("error"in i)throw new F(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:s}=jt(e),i=this._buildArgs([t.toBase58()],r,"base64",s),u=await this._rpcRequest("getAccountInfo",i),m=O(u,te(U(pn)));if("error"in m)throw new F(m.error,`failed to get info about account ${t.toBase58()}`);return m.result}async getParsedAccountInfo(t,e){const{commitment:r,config:s}=jt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),u=await this._rpcRequest("getAccountInfo",i),m=O(u,te(U(yi)));if("error"in m)throw new F(m.error,`failed to get info about account ${t.toBase58()}`);return m.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:s}=jt(e),i=t.map(b=>b.toBase58()),u=this._buildArgs([i],r,"jsonParsed",s),m=await this._rpcRequest("getMultipleAccounts",u),w=O(m,te(K(U(yi))));if("error"in w)throw new F(w.error,`failed to get info for accounts ${i}`);return w.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:s}=jt(e),i=t.map(b=>b.toBase58()),u=this._buildArgs([i],r,"base64",s),m=await this._rpcRequest("getMultipleAccounts",u),w=O(m,te(K(U(pn))));if("error"in w)throw new F(w.error,`failed to get info for accounts ${i}`);return w.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:s,config:i}=jt(e),u=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:r??(i==null?void 0:i.epoch)}),m=await this._rpcRequest("getStakeActivation",u),w=O(m,Ct(bu));if("error"in w)throw new F(w.error,`failed to get Stake Activation ${t.toBase58()}`);return w.result}async getProgramAccounts(t,e){const{commitment:r,config:s}=jt(e),{encoding:i,...u}=s||{},m=this._buildArgs([t.toBase58()],r,i||"base64",{...u,...u.filters?{filters:cs(u.filters)}:null}),w=await this._rpcRequest("getProgramAccounts",m),b=K(yu),_=u.withContext===!0?O(w,te(b)):O(w,Ct(b));if("error"in _)throw new F(_.error,`failed to get accounts owned by program ${t.toBase58()}`);return _.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:s}=jt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),u=await this._rpcRequest("getProgramAccounts",i),m=O(u,Ct(K(vu)));if("error"in m)throw new F(m.error,`failed to get accounts owned by program ${t.toBase58()}`);return m.result}async confirmTransaction(t,e){var i;let r;if(typeof t=="string")r=t;else{const u=t;if((i=u.abortSignal)!=null&&i.aborted)return Promise.reject(u.abortSignal.reason);r=u.signature}let s;try{s=ae.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return qt(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,s,i=!1;const u=new Promise((w,b)=>{try{r=this.onSignature(e,(I,C)=>{r=void 0;const M={context:C,value:I};w({__type:Fe.PROCESSED,response:M})},t);const _=new Promise(I=>{r==null?I():s=this._onSubscriptionStateChange(r,C=>{C==="subscribed"&&I()})});(async()=>{if(await _,i)return;const I=await this.getSignatureStatus(e);if(i||I==null)return;const{context:C,value:M}=I;if(M!=null)if(M!=null&&M.err)b(M.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(M.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(M.confirmationStatus==="processed"||M.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,w({__type:Fe.PROCESSED,response:{context:C,value:M}})}})()}catch(_){b(_)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:u}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:s}}){let i=!1;const u=new Promise(I=>{const C=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let M=await C();if(!i){for(;M<=r;)if(await wr(1e3),i||(M=await C(),i))return;I({__type:Fe.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:m,confirmationPromise:w}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),b=this.getCancellationPromise(e);let _;try{const I=await Promise.race([b,w,u]);if(I.__type===Fe.PROCESSED)_=I.response;else throw new Ki(s)}finally{i=!0,m()}return _}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:u}}){let m=!1;const w=new Promise(M=>{let x=i,A=null;const P=async()=>{try{const{context:z,value:D}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:r});return A=z.slot,D==null?void 0:D.nonce}catch{return x}};(async()=>{if(x=await P(),!m)for(;;){if(i!==x){M({__type:Fe.NONCE_INVALID,slotInWhichNonceDidAdvance:A});return}if(await wr(2e3),m||(x=await P(),m))return}})()}),{abortConfirmation:b,confirmationPromise:_}=this.getTransactionConfirmationPromise({commitment:t,signature:u}),I=this.getCancellationPromise(e);let C;try{const M=await Promise.race([I,_,w]);if(M.__type===Fe.PROCESSED)C=M.response;else{let x;for(;;){const A=await this.getSignatureStatus(u);if(A==null)break;if(A.context.slot<(M.slotInWhichNonceDidAdvance??r)){await wr(400);continue}x=A;break}if(x!=null&&x.value){const A=t||"finalized",{confirmationStatus:P}=x.value;switch(A){case"processed":case"recent":if(P!=="processed"&&P!=="confirmed"&&P!=="finalized")throw new Er(u);break;case"confirmed":case"single":case"singleGossip":if(P!=="confirmed"&&P!=="finalized")throw new Er(u);break;case"finalized":case"max":case"root":if(P!=="finalized")throw new Er(u);break;default:}C={context:x.context,value:{err:x.value.err}}}else throw new Er(u)}}finally{m=!0,b()}return C}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const s=new Promise(w=>{let b=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{b=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>w({__type:Fe.TIMED_OUT,timeoutMs:b}),b)}),{abortConfirmation:i,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let m;try{const w=await Promise.race([u,s]);if(w.__type===Fe.PROCESSED)m=w.response;else throw new Ui(e,w.timeoutMs/1e3)}finally{clearTimeout(r),i()}return m}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=O(t,Ct(K(Bu)));if("error"in e)throw new F(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),s=O(r,Lu);if("error"in s)throw new F(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:r}=jt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",s),u=O(i,Ct(k()));if("error"in u)throw new F(u.error,"failed to get slot");return u.result}async getSlotLeader(t){const{commitment:e,config:r}=jt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",s),u=O(i,Ct(L()));if("error"in u)throw new F(u.error,"failed to get slot leader");return u.result}async getSlotLeaders(t,e){const r=[t,e],s=await this._rpcRequest("getSlotLeaders",r),i=O(s,Ct(K(Qt)));if("error"in i)throw new F(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:s}=await this.getSignatureStatuses([t],e);qt(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const s=await this._rpcRequest("getSignatureStatuses",r),i=O(s,Ou);if("error"in i)throw new F(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=jt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",s),u=O(i,Ct(k()));if("error"in u)throw new F(u.error,"failed to get transaction count");return u.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),s=O(r,su);if("error"in s)throw new F(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,r){const{commitment:s,config:i}=jt(r),u=this._buildArgs([t.map(b=>b.toBase58())],s,void 0,{...i,epoch:e??(i==null?void 0:i.epoch)}),m=await this._rpcRequest("getInflationReward",u),w=O(m,$c);if("error"in w)throw new F(w.error,"failed to get inflation reward");return w.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=O(t,ou);if("error"in e)throw new F(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=jt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",s),u=O(i,cu);if("error"in u)throw new F(u.error,"failed to get epoch info");return u.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=O(t,uu);if("error"in e)throw new F(e.error,"failed to get epoch schedule");const r=e.result;return new ho(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=O(t,hu);if("error"in e)throw new F(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=O(s,zu);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=O(e,Zu);if("error"in r)throw new F(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=O(s,Yu);if("error"in i)throw new F(i.error,"failed to get fee calculator");const{context:u,value:m}=i.result;return{context:u,value:m!==null?m.feeCalculator:null}}async getFeeForMessage(t,e){const r=Nt(t.serialize()).toString("base64"),s=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",s),u=O(i,te(U(k())));if("error"in u)throw new F(u.error,"failed to get fee for message");if(u.result===null)throw new Error("invalid blockhash");return u.result}async getRecentPrioritizationFees(t){var u;const e=(u=t==null?void 0:t.lockedWritableAccounts)==null?void 0:u.map(m=>m.toBase58()),r=e!=null&&e.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=O(s,au);if("error"in i)throw new F(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=jt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),u=O(i,Gu);if("error"in u)throw new F(u.error,"failed to get latest blockhash");return u.result}async isBlockhashValid(t,e){const{commitment:r,config:s}=jt(e),i=this._buildArgs([t],r,void 0,s),u=await this._rpcRequest("isBlockhashValid",i),m=O(u,ju);if("error"in m)throw new F(m.error,"failed to determine if the blockhash `"+t+"`is valid");return m.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=O(t,Ct(Xc));if("error"in e)throw new F(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=O(t,Ct(L()));if("error"in e)throw new F(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:s}=jt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),u=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const m=O(u,Fu);if("error"in m)throw m.error;return m.result}case"none":{const m=O(u,qu);if("error"in m)throw m.error;return m.result}default:{const m=O(u,Wu);if("error"in m)throw m.error;const{result:w}=m;return w?{...w,transactions:w.transactions.map(({transaction:b,meta:_,version:I})=>({meta:_,transaction:{...b,message:ai(I,b.message)},version:I}))}:null}}}catch(m){throw new F(m,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:s}=jt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),u=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const m=O(u,$u);if("error"in m)throw m.error;return m.result}case"none":{const m=O(u,Vu);if("error"in m)throw m.error;return m.result}default:{const m=O(u,Du);if("error"in m)throw m.error;return m.result}}}catch(m){throw new F(m,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:m,...w}=t;r=m,e=w}const s=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",s),u=O(i,eu);if("error"in u)throw new F(u.error,"failed to get block production information");return u.result}async getTransaction(t,e){const{commitment:r,config:s}=jt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),u=await this._rpcRequest("getTransaction",i),m=O(u,ci);if("error"in m)throw new F(m.error,"failed to get transaction");const w=m.result;return w&&{...w,transaction:{...w.transaction,message:ai(w.version,w.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:s}=jt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),u=await this._rpcRequest("getTransaction",i),m=O(u,_n);if("error"in m)throw new F(m.error,"failed to get transaction");return m.result}async getParsedTransactions(t,e){const{commitment:r,config:s}=jt(e),i=t.map(w=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([w],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(w=>{const b=O(w,_n);if("error"in b)throw new F(b.error,"failed to get transactions");return b.result})}async getTransactions(t,e){const{commitment:r,config:s}=jt(e),i=t.map(w=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([w],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(w=>{const b=O(w,ci);if("error"in b)throw new F(b.error,"failed to get transactions");const _=b.result;return _&&{..._,transaction:{..._.transaction,message:ai(_.version,_.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getBlock",r),i=O(s,Hu);if("error"in i)throw new F(i.error,"failed to get confirmed block");const u=i.result;if(!u)throw new Error("Confirmed block "+t+" not found");const m={...u,transactions:u.transactions.map(({transaction:w,meta:b})=>{const _=new Ee(w.message);return{meta:b,transaction:{...w,message:_}}})};return{...m,transactions:m.transactions.map(({transaction:w,meta:b})=>({meta:b,transaction:Kt.populate(w.message,w.signatures)}))}}async getBlocks(t,e,r){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",s),u=O(i,Ct(K(k())));if("error"in u)throw new F(u.error,"failed to get blocks");return u.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=O(s,ls);if("error"in i)throw new F(i.error,"failed to get block");const u=i.result;if(!u)throw new Error("Block "+t+" not found");return u}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=O(s,ls);if("error"in i)throw new F(i.error,"failed to get confirmed block");const u=i.result;if(!u)throw new Error("Confirmed block "+t+" not found");return u}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getTransaction",r),i=O(s,ci);if("error"in i)throw new F(i.error,"failed to get transaction");const u=i.result;if(!u)return u;const m=new Ee(u.transaction.message),w=u.transaction.signatures;return{...u,transaction:Kt.populate(m,w)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),i=O(s,_n);if("error"in i)throw new F(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(u=>{const m=O(u,_n);if("error"in m)throw new F(m.error,"failed to get confirmed transactions");return m.result})}async getConfirmedSignaturesForAddress(t,e,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const w=await this.getConfirmedBlockSignatures(e,"finalized");w.signatures.length>0&&(s.until=w.signatures[w.signatures.length-1].toString())}catch(w){if(w instanceof Error&&w.message.includes("skipped"))continue;throw w}let u=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>u));)try{const w=await this.getConfirmedBlockSignatures(r);w.signatures.length>0&&(s.before=w.signatures[w.signatures.length-1].toString())}catch(w){if(w instanceof Error&&w.message.includes("skipped"))continue;throw w}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(w=>w.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),u=O(i,ku);if("error"in u)throw new F(u.error,"failed to get confirmed signatures for address");return u.result}async getSignaturesForAddress(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),u=O(i,Su);if("error"in u)throw new F(u.error,"failed to get signatures for address");return u.result}async getAddressLookupTable(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new pi({key:t,state:pi.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=$n.fromAccountData(s.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=O(r,Xu);if("error"in s)throw new F(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await wr(100);const r=Date.now()-this._blockhashInfo.lastFetch>=fo;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await wr(ao/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=jt(t),s=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),u=O(i,te(k()));if("error"in u)throw new F(u.error,"failed to get stake minimum delegation");return u.result}async simulateTransaction(t,e,r){if("message"in t){const A=t.serialize(),P=G.from(A).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const z=e||{};z.encoding="base64","commitment"in z||(z.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(z.innerInstructions=e.innerInstructions);const D=[P,z],J=await this._rpcRequest("simulateTransaction",D),Y=O(J,us);if("error"in Y)throw new Error("failed to simulate transaction: "+Y.error.message);return Y.result}let s;if(t instanceof Kt){let x=t;s=new Kt,s.feePayer=x.feePayer,s.instructions=t.instructions,s.nonceInfo=x.nonceInfo,s.signatures=x.signatures}else s=Kt.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let x=this._disableBlockhashCaching;for(;;){const A=await this._blockhashWithExpiryBlockHeight(x);if(s.lastValidBlockHeight=A.lastValidBlockHeight,s.recentBlockhash=A.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const P=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(P)&&!this._blockhashInfo.transactionSignatures.includes(P)){this._blockhashInfo.simulatedSignatures.push(P);break}else x=!0}}const u=s._compile(),m=u.serialize(),b=s._serialize(m).toString("base64"),_={encoding:"base64",commitment:this.commitment};if(r){const x=(Array.isArray(r)?r:u.nonProgramIds()).map(A=>A.toBase58());_.accounts={encoding:"base64",addresses:x}}i&&(_.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(_.innerInstructions=e.innerInstructions);const I=[b,_],C=await this._rpcRequest("simulateTransaction",I),M=O(C,us);if("error"in M){let x;if("data"in M.error&&(x=M.error.data.logs,x&&Array.isArray(x))){const A=`
    `,P=A+x.join(A);console.error(M.error.message,P)}throw new dn({action:"simulate",signature:"",transactionMessage:M.error.message,logs:x})}return M.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const u=t.serialize();return await this.sendRawTransaction(u,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let u=this._disableBlockhashCaching;for(;;){const m=await this._blockhashWithExpiryBlockHeight(u);if(t.lastValidBlockHeight=m.lastValidBlockHeight,t.recentBlockhash=m.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const w=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(w))u=!0;else{this._blockhashInfo.transactionSignatures.push(w);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=Nt(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const u=[t,r],m=await this._rpcRequest("sendTransaction",u),w=O(m,Qu);if("error"in w){let b;throw"data"in w.error&&(b=w.error.data.logs),new dn({action:s?"send":"simulate",signature:"",transactionMessage:w.error.message,logs:b})}return w.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){var s;const r=(s=this._subscriptionsByHash[t])==null?void 0:s.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(u=>{try{u(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var i;const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[r]||(i[r]=new Set);return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:u}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const m=await this._rpcWebSocket.call(u,i);this._setSubscription(r,{...s,serverSubscriptionId:m,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[m]=s.callbacks,await this._updateSubscriptions()}catch(m){if(console.error(`Received ${m instanceof Error?"":"JSON-RPC "}error calling \`${u}\``,{args:i,error:m}),!e())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:u}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(u,[i])}catch(m){if(m instanceof Error&&console.error(`${u} error:`,m.message),!e())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=O(t,Mu);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,s=os([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const u=this._subscriptionsByHash[s];qt(u!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),u.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const{commitment:s,config:i}=jt(r),u=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},u)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=O(t,xu);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,s){const{commitment:i,config:u}=jt(r),m=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",u||(s?{filters:cs(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},m)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=O(t,eh);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=O(t,Au);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=O(t,Ru);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,s){const i=e||this._commitment;if(i||r||s){let u={};r&&(u.encoding=r),i&&(u.commitment=i),s&&(u=Object.assign(u,s)),t.push(u)}return t}_buildArgsAtLeastConfirmed(t,e,r,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,s)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=O(t,Pu);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const s=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(u,m)=>{if(u.type==="status"){e(u.result,m);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},u=this._buildArgs([t],s,void 0,i),m=this._makeSubscription({callback:(w,b)=>{e(w,b);try{this.removeSignatureListener(m)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},u);return m}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=O(t,Tu);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class Tr{constructor(t){this._keypair=void 0,this._keypair=t??rs()}static generate(){return new Tr(rs())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const s=t.slice(0,32),i=Cn(s);for(let u=0;u<32;u++)if(r[u]!==i[u])throw new Error("provided secretKey is invalid")}return new Tr({publicKey:r,secretKey:t})}static fromSeed(t){const e=Cn(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new Tr({publicKey:e,secretKey:r})}get publicKey(){return new N(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const $e=Object.freeze({CreateLookupTable:{index:0,layout:q([W("instruction"),Nr("recentSlot"),Wt("bumpSeed")])},FreezeLookupTable:{index:1,layout:q([W("instruction")])},ExtendLookupTable:{index:2,layout:q([W("instruction"),Nr(),ce(Ot(),Ge(W(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:q([W("instruction")])},CloseLookupTable:{index:4,layout:q([W("instruction")])}});class nh{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=W("instruction").decode(t.data);let s;for(const[i,u]of Object.entries($e))if(u.index==r){s=i;break}if(!s)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return s}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);const{recentSlot:e}=$t($e.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);const{addresses:e}=$t($e.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(r=>new N(r))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals($i.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}class $i{constructor(){}static createLookupTable(t){const[e,r]=N.findProgramAddressSync([t.authority.toBuffer(),js(BigInt(t.recentSlot),8)],this.programId),s=$e.CreateLookupTable,i=zt(s,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),u=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Yt.programId,isSigner:!1,isWritable:!1}];return[new Gt({programId:this.programId,keys:u,data:i}),e]}static freezeLookupTable(t){const e=$e.FreezeLookupTable,r=zt(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new Gt({programId:this.programId,keys:s,data:r})}static extendLookupTable(t){const e=$e.ExtendLookupTable,r=zt(e,{addresses:t.addresses.map(i=>i.toBytes())}),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&s.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Yt.programId,isSigner:!1,isWritable:!1}),new Gt({programId:this.programId,keys:s,data:r})}static deactivateLookupTable(t){const e=$e.DeactivateLookupTable,r=zt(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new Gt({programId:this.programId,keys:s,data:r})}static closeLookupTable(t){const e=$e.CloseLookupTable,r=zt(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new Gt({programId:this.programId,keys:s,data:r})}}$i.programId=new N("AddressLookupTab1e1111111111111111111111111");class ih{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=Wt("instruction").decode(t.data);let s;for(const[i,u]of Object.entries(Ce))if(u.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return s}static decodeRequestUnits(t){this.checkProgramId(t.programId);const{units:e,additionalFee:r}=$t(Ce.RequestUnits,t.data);return{units:e,additionalFee:r}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);const{bytes:e}=$t(Ce.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);const{units:e}=$t(Ce.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);const{microLamports:e}=$t(Ce.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(Vi.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const Ce=Object.freeze({RequestUnits:{index:0,layout:q([Wt("instruction"),W("units"),W("additionalFee")])},RequestHeapFrame:{index:1,layout:q([Wt("instruction"),W("bytes")])},SetComputeUnitLimit:{index:2,layout:q([Wt("instruction"),W("units")])},SetComputeUnitPrice:{index:3,layout:q([Wt("instruction"),Nr("microLamports")])}});class Vi{constructor(){}static requestUnits(t){const e=Ce.RequestUnits,r=zt(e,t);return new Gt({keys:[],programId:this.programId,data:r})}static requestHeapFrame(t){const e=Ce.RequestHeapFrame,r=zt(e,t);return new Gt({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(t){const e=Ce.SetComputeUnitLimit,r=zt(e,t);return new Gt({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(t){const e=Ce.SetComputeUnitPrice,r=zt(e,{microLamports:BigInt(t.microLamports)});return new Gt({keys:[],programId:this.programId,data:r})}}Vi.programId=new N("ComputeBudget111111111111111111111111111111");const fs=64,ds=32,ps=64,gs=q([Wt("numSignatures"),Wt("padding"),_e("signatureOffset"),_e("signatureInstructionIndex"),_e("publicKeyOffset"),_e("publicKeyInstructionIndex"),_e("messageDataOffset"),_e("messageDataSize"),_e("messageInstructionIndex")]);class Gn{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:s,instructionIndex:i}=t;qt(e.length===ds,`Public Key must be ${ds} bytes but received ${e.length} bytes`),qt(s.length===ps,`Signature must be ${ps} bytes but received ${s.length} bytes`);const u=gs.span,m=u+e.length,w=m+s.length,b=1,_=G.alloc(w+r.length),I=i??65535;return gs.encode({numSignatures:b,padding:0,signatureOffset:m,signatureInstructionIndex:I,publicKeyOffset:u,publicKeyInstructionIndex:I,messageDataOffset:w,messageDataSize:r.length,messageInstructionIndex:I},_),_.fill(e,u),_.fill(s,m),_.fill(r,w),new Gt({keys:[],programId:Gn.programId,data:_})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:s}=t;qt(e.length===fs,`Private key must be ${fs} bytes but received ${e.length} bytes`);try{const i=Tr.fromSecretKey(e),u=i.publicKey.toBytes(),m=Oi(r,i.secretKey);return this.createInstructionWithPublicKey({publicKey:u,message:r,signature:m,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}Gn.programId=new N("Ed25519SigVerify111111111111111111111111111");const sh=(a,t)=>{const e=ki.sign(a,t);return[e.toCompactRawBytes(),e.recovery]};ki.utils.isValidPrivateKey;const oh=ki.getPublicKey,ms=32,ui=20,ys=64,ah=11,hi=q([Wt("numSignatures"),_e("signatureOffset"),Wt("signatureInstructionIndex"),_e("ethAddressOffset"),Wt("ethAddressInstructionIndex"),_e("messageDataOffset"),_e("messageDataSize"),Wt("messageInstructionIndex"),Zt(20,"ethAddress"),Zt(64,"signature"),Wt("recoveryId")]);class Br{constructor(){}static publicKeyToEthAddress(t){qt(t.length===ys,`Public key must be ${ys} bytes but received ${t.length} bytes`);try{return G.from(Xi(Nt(t))).slice(-ui)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:s,recoveryId:i,instructionIndex:u}=t;return Br.createInstructionWithEthAddress({ethAddress:Br.publicKeyToEthAddress(e),message:r,signature:s,recoveryId:i,instructionIndex:u})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:r,signature:s,recoveryId:i,instructionIndex:u=0}=t;let m;typeof e=="string"?e.startsWith("0x")?m=G.from(e.substr(2),"hex"):m=G.from(e,"hex"):m=e,qt(m.length===ui,`Address must be ${ui} bytes but received ${m.length} bytes`);const w=1+ah,b=w,_=w+m.length,I=_+s.length+1,C=1,M=G.alloc(hi.span+r.length);return hi.encode({numSignatures:C,signatureOffset:_,signatureInstructionIndex:u,ethAddressOffset:b,ethAddressInstructionIndex:u,messageDataOffset:I,messageDataSize:r.length,messageInstructionIndex:u,signature:Nt(s),ethAddress:Nt(m),recoveryId:i},M),M.fill(Nt(r),hi.span),new Gt({keys:[],programId:Br.programId,data:M})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:s}=t;qt(e.length===ms,`Private key must be ${ms} bytes but received ${e.length} bytes`);try{const i=Nt(e),u=oh(i,!1).slice(1),m=G.from(Xi(Nt(r))),[w,b]=sh(m,i);return this.createInstructionWithPublicKey({publicKey:u,message:r,signature:w,recoveryId:b,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}Br.programId=new N("KeccakSecp256k11111111111111111111111111111");var _o;const xo=new N("StakeConfig11111111111111111111111111111111");class Io{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}}class bn{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}_o=bn;bn.default=new _o(0,0,N.default);class ch{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=W("instruction").decode(t.data);let s;for(const[i,u]of Object.entries(ne))if(u.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a StakeInstruction");return s}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e,lockup:r}=$t(ne.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new Io(new N(e.staker),new N(e.withdrawer)),lockup:new bn(r.unixTimestamp,r.epoch,new N(r.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),$t(ne.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,stakeAuthorizationType:r}=$t(ne.Authorize,t.data),s={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new N(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(s.custodianPubkey=t.keys[3].pubkey),s}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{newAuthorized:e,stakeAuthorizationType:r,authoritySeed:s,authorityOwner:i}=$t(ne.AuthorizeWithSeed,t.data),u={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:s,authorityOwner:new N(i),newAuthorizedPubkey:new N(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(u.custodianPubkey=t.keys[3].pubkey),u}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=$t(ne.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),$t(ne.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=$t(ne.Withdraw,t.data),r={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(r.custodianPubkey=t.keys[5].pubkey),r}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),$t(ne.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(jn.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const ne=Object.freeze({Initialize:{index:0,layout:q([W("instruction"),lc(),fc()])},Authorize:{index:1,layout:q([W("instruction"),Ot("newAuthorized"),W("stakeAuthorizationType")])},Delegate:{index:2,layout:q([W("instruction")])},Split:{index:3,layout:q([W("instruction"),ke("lamports")])},Withdraw:{index:4,layout:q([W("instruction"),ke("lamports")])},Deactivate:{index:5,layout:q([W("instruction")])},Merge:{index:7,layout:q([W("instruction")])},AuthorizeWithSeed:{index:8,layout:q([W("instruction"),Ot("newAuthorized"),W("stakeAuthorizationType"),vr("authoritySeed"),Ot("authorityOwner")])}}),uh=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class jn{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:s}=t,i=s||bn.default,u=ne.Initialize,m=zt(u,{authorized:{staker:Nt(r.staker.toBuffer()),withdrawer:Nt(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:Nt(i.custodian.toBuffer())}}),w={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Cr,isSigner:!1,isWritable:!1}],programId:this.programId,data:m};return new Gt(w)}static createAccountWithSeed(t){const e=new Kt;e.add(Yt.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:s,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:s,lockup:i}))}static createAccount(t){const e=new Kt;e.add(Yt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:s,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:s,lockup:i}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:s}=t,i=ne.Delegate,u=zt(i);return new Kt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:Be,isSigner:!1,isWritable:!1},{pubkey:An,isSigner:!1,isWritable:!1},{pubkey:xo,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:s,stakeAuthorizationType:i,custodianPubkey:u}=t,m=ne.Authorize,w=zt(m,{newAuthorized:Nt(s.toBuffer()),stakeAuthorizationType:i.index}),b=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Be,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return u&&b.push({pubkey:u,isSigner:!0,isWritable:!1}),new Kt().add({keys:b,programId:this.programId,data:w})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:s,authorityOwner:i,newAuthorizedPubkey:u,stakeAuthorizationType:m,custodianPubkey:w}=t,b=ne.AuthorizeWithSeed,_=zt(b,{newAuthorized:Nt(u.toBuffer()),stakeAuthorizationType:m.index,authoritySeed:s,authorityOwner:Nt(i.toBuffer())}),I=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:Be,isSigner:!1,isWritable:!1}];return w&&I.push({pubkey:w,isSigner:!0,isWritable:!1}),new Kt().add({keys:I,programId:this.programId,data:_})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:s,lamports:i}=t,u=ne.Split,m=zt(u,{lamports:i});return new Gt({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:m})}static split(t,e){const r=new Kt;return r.add(Yt.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:r,authorizedPubkey:s,splitStakePubkey:i,basePubkey:u,seed:m,lamports:w}=t,b=new Kt;return b.add(Yt.allocate({accountPubkey:i,basePubkey:u,seed:m,space:this.space,programId:this.programId})),e&&e>0&&b.add(Yt.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),b.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:s,splitStakePubkey:i,lamports:w}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:s}=t,i=ne.Merge,u=zt(i);return new Kt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Be,isSigner:!1,isWritable:!1},{pubkey:An,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:s,lamports:i,custodianPubkey:u}=t,m=ne.Withdraw,w=zt(m,{lamports:i}),b=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:Be,isSigner:!1,isWritable:!1},{pubkey:An,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return u&&b.push({pubkey:u,isSigner:!0,isWritable:!1}),new Kt().add({keys:b,programId:this.programId,data:w})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,s=ne.Deactivate,i=zt(s);return new Kt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Be,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}jn.programId=new N("Stake11111111111111111111111111111111111111");jn.space=200;class Ao{constructor(t,e,r,s){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=r,this.commission=s}}class hh{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=W("instruction").decode(t.data);let s;for(const[i,u]of Object.entries(Ne))if(u.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a VoteInstruction");return s}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);const{voteInit:e}=$t(Ne.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new Ao(new N(e.nodePubkey),new N(e.authorizedVoter),new N(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,voteAuthorizationType:r}=$t(Ne.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new N(e),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:r,newAuthorized:s,voteAuthorizationType:i}}=$t(Ne.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new N(e),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new N(s),voteAuthorizationType:{index:i},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=$t(Ne.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(qr.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Ne=Object.freeze({InitializeAccount:{index:0,layout:q([W("instruction"),dc()])},Authorize:{index:1,layout:q([W("instruction"),Ot("newAuthorized"),W("voteAuthorizationType")])},Withdraw:{index:3,layout:q([W("instruction"),ke("lamports")])},UpdateValidatorIdentity:{index:4,layout:q([W("instruction")])},AuthorizeWithSeed:{index:10,layout:q([W("instruction"),pc()])}}),lh=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class qr{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:r,voteInit:s}=t,i=Ne.InitializeAccount,u=zt(i,{voteInit:{nodePubkey:Nt(s.nodePubkey.toBuffer()),authorizedVoter:Nt(s.authorizedVoter.toBuffer()),authorizedWithdrawer:Nt(s.authorizedWithdrawer.toBuffer()),commission:s.commission}}),m={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Cr,isSigner:!1,isWritable:!1},{pubkey:Be,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:u};return new Gt(m)}static createAccount(t){const e=new Kt;return e.add(Yt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:s,voteAuthorizationType:i}=t,u=Ne.Authorize,m=zt(u,{newAuthorized:Nt(s.toBuffer()),voteAuthorizationType:i.index}),w=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Be,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Kt().add({keys:w,programId:this.programId,data:m})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:s,newAuthorizedPubkey:i,voteAuthorizationType:u,votePubkey:m}=t,w=Ne.AuthorizeWithSeed,b=zt(w,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:Nt(r.toBuffer()),currentAuthorityDerivedKeySeed:s,newAuthorized:Nt(i.toBuffer()),voteAuthorizationType:u.index}}),_=[{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:Be,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return new Kt().add({keys:_,programId:this.programId,data:b})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:s,toPubkey:i}=t,u=Ne.Withdraw,m=zt(u,{lamports:s}),w=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new Kt().add({keys:w,programId:this.programId,data:m})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return qr.withdraw(t)}static updateValidatorIdentity(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,nodePubkey:s}=t,i=Ne.UpdateValidatorIdentity,u=zt(i),m=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Kt().add({keys:m,programId:this.programId,data:u})}}qr.programId=new N("Vote111111111111111111111111111111111111111");qr.space=3762;const Eo=new N("Va1idator1nfo111111111111111111111111111111"),fh=E({name:L(),website:$(L()),details:$(L()),iconUrl:$(L()),keybaseUsername:$(L())});class Hi{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(we(e)!==2)return null;const s=[];for(let i=0;i<2;i++){const u=new N(ve(e,0,Oe)),m=Le(e)===1;s.push({publicKey:u,isSigner:m})}if(s[0].publicKey.equals(Eo)&&s[1].isSigner){const i=vr().decode(G.from(e)),u=JSON.parse(i);return Js(u,fh),new Hi(s[1].publicKey,u)}return null}}const dh=new N("Vote111111111111111111111111111111111111111"),ph=q([Ot("nodePubkey"),Ot("authorizedWithdrawer"),Wt("commission"),se(),ce(q([se("slot"),W("confirmationCount")]),Ge(W(),-8),"votes"),Wt("rootSlotValid"),se("rootSlot"),se(),ce(q([se("epoch"),Ot("authorizedVoter")]),Ge(W(),-8),"authorizedVoters"),q([ce(q([Ot("authorizedPubkey"),se("epochOfLastAuthorizedSwitch"),se("targetEpoch")]),32,"buf"),se("idx"),Wt("isEmpty")],"priorVoters"),se(),ce(q([se("epoch"),se("credits"),se("prevCredits")]),Ge(W(),-8),"epochCredits"),q([se("slot"),se("timestamp")],"lastTimestamp")]);class Gi{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){const r=ph.decode(Nt(t),4);let s=r.rootSlot;return r.rootSlotValid||(s=null),new Gi({nodePubkey:new N(r.nodePubkey),authorizedWithdrawer:new N(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:s,authorizedVoters:r.authorizedVoters.map(gh),priorVoters:mh(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}function gh({authorizedVoter:a,epoch:t}){return{epoch:t,authorizedVoter:new N(a)}}function ws({authorizedPubkey:a,epochOfLastAuthorizedSwitch:t,targetEpoch:e}){return{authorizedPubkey:new N(a),epochOfLastAuthorizedSwitch:t,targetEpoch:e}}function mh({buf:a,idx:t,isEmpty:e}){return e?[]:[...a.slice(t+1).map(ws),...a.slice(0,t).map(ws)]}const vs={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function yh(a,t){const e=t===!1?"http":"https";if(!a)return vs[e].devnet;const r=vs[e][a];if(!r)throw new Error(`Unknown ${e} cluster: ${a}`);return r}async function wh(a,t,e,r){let s,i;e&&Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")||e&&Object.prototype.hasOwnProperty.call(e,"nonceValue")?(s=e,i=r):i=e;const u=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,minContextSlot:i.minContextSlot},m=await a.sendRawTransaction(t,u),w=i&&i.commitment,_=(await(s?a.confirmTransaction(s,w):a.confirmTransaction(m,w))).value;if(_.err)throw m!=null?new dn({action:u!=null&&u.skipPreflight?"send":"simulate",signature:m,transactionMessage:`Status: (${JSON.stringify(_)})`}):new Error(`Raw transaction ${m} failed (${JSON.stringify(_)})`);return m}const vh=1e9,bh=Object.freeze(Object.defineProperty({__proto__:null,Account:cc,AddressLookupTableAccount:pi,AddressLookupTableInstruction:nh,AddressLookupTableProgram:$i,Authorized:Io,BLOCKHASH_CACHE_TIMEOUT_MS:fo,BPF_LOADER_DEPRECATED_PROGRAM_ID:uc,BPF_LOADER_PROGRAM_ID:Rc,BpfLoader:Pc,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:Ce,ComputeBudgetInstruction:ih,ComputeBudgetProgram:Vi,Connection:Mo,Ed25519Program:Gn,Enum:oc,EpochSchedule:ho,FeeCalculatorLayout:co,Keypair:Tr,LAMPORTS_PER_SOL:vh,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:$e,Loader:kr,Lockup:bn,MAX_SEED_LENGTH:io,Message:Ee,MessageAccountKeys:fn,MessageV0:br,NONCE_ACCOUNT_LENGTH:di,NonceAccount:$n,PACKET_DATA_SIZE:je,PUBLIC_KEY_LENGTH:Oe,PublicKey:N,SIGNATURE_LENGTH_IN_BYTES:ln,SOLANA_SCHEMA:un,STAKE_CONFIG_ID:xo,STAKE_INSTRUCTION_LAYOUTS:ne,SYSTEM_INSTRUCTION_LAYOUTS:Jt,SYSVAR_CLOCK_PUBKEY:Be,SYSVAR_EPOCH_SCHEDULE_PUBKEY:vc,SYSVAR_INSTRUCTIONS_PUBKEY:bc,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:In,SYSVAR_RENT_PUBKEY:Cr,SYSVAR_REWARDS_PUBKEY:kc,SYSVAR_SLOT_HASHES_PUBKEY:Sc,SYSVAR_SLOT_HISTORY_PUBKEY:Mc,SYSVAR_STAKE_HISTORY_PUBKEY:An,Secp256k1Program:Br,SendTransactionError:dn,SolanaJSONRPCError:F,SolanaJSONRPCErrorCode:_c,StakeAuthorizationLayout:uh,StakeInstruction:ch,StakeProgram:jn,Struct:zi,SystemInstruction:Ac,SystemProgram:Yt,Transaction:Kt,TransactionExpiredBlockheightExceededError:Ki,TransactionExpiredNonceInvalidError:Er,TransactionExpiredTimeoutError:Ui,TransactionInstruction:Gt,TransactionMessage:Rr,TransactionStatus:Fe,VALIDATOR_INFO_KEY:Eo,VERSION_PREFIX_MASK:Fn,VOTE_PROGRAM_ID:dh,ValidatorInfo:Hi,VersionedMessage:Wi,VersionedTransaction:Pr,VoteAccount:Gi,VoteAuthorizationLayout:lh,VoteInit:Ao,VoteInstruction:hh,VoteProgram:qr,clusterApiUrl:yh,sendAndConfirmRawTransaction:wh,sendAndConfirmTransaction:fi},Symbol.toStringTag,{value:"Module"})),kh=bi(bh);var xn=de&&de.__awaiter||function(a,t,e,r){function s(i){return i instanceof e?i:new e(function(u){u(i)})}return new(e||(e=Promise))(function(i,u){function m(_){try{b(r.next(_))}catch(I){u(I)}}function w(_){try{b(r.throw(_))}catch(I){u(I)}}function b(_){_.done?i(_.value):s(_.value).then(m,w)}b((r=r.apply(a,t||[])).next())})},Sh=de&&de.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(gn,"__esModule",{value:!0});gn.OKXSolanaProvider=void 0;const qe=kh,Pe=Sh(Bo),Te=Lo;class Ro{getRealChainId(t){if(t==null)if(this.chainsSet.size==1){let e="",r=this.defaultChainMap;if(this.chainsSet.forEach(function(s){r.has(s)&&(e=r.get(s))}),e=="")throw new Error("unsupported chainId");return e}else throw new Error("connected to multiple solana chains,chainId can not be null");else{if(t.startsWith("svm"))return t;if(this.caip.includes(t))return t;throw new Error("wrong chainId")}}getConnectedNamespace(){var t,e,r;(r=(e=(t=this.provider.session)===null||t===void 0?void 0:t.namespaces)===null||e===void 0?void 0:e.solana)===null||r===void 0||r.chains.forEach(s=>{this.chainsSet.add(s.split(":")[0])})}constructor(t){this.chainsSet=new Set,this.caip=["solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","sonic:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","sonic:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"],this.defaultChainMap=new Map,this.provider=t,this.defaultChainMap.set("solana","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp"),this.defaultChainMap.set("sonic","sonic:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"),this.getConnectedNamespace()}signMessage(t,e){return xn(this,void 0,void 0,function*(){var r,s,i,u;if(typeof t!="string")try{t=new TextDecoder().decode(t)}catch{}let m=t,w=null;try{const b=Pe.default.decode(t);try{w=qe.Transaction.from(b)}catch{w=qe.VersionedTransaction.deserialize(b)}}catch{}if(w!=null)return new Promise((b,_)=>{_("Please sign with normal message")});((s=(r=this.provider.session)===null||r===void 0?void 0:r.wallet)===null||s===void 0?void 0:s.appName)=="OKX Wallet"?m=Pe.default.encode(new TextEncoder().encode(t)):m=t,e=this.getRealChainId(e);try{let b={chainId:e,method:"solana_signMessage",params:{message:m,pubkey:(i=this.getAccount(e))===null||i===void 0?void 0:i.address},injectParams:{message:t,pubkey:(u=this.getAccount(e))===null||u===void 0?void 0:u.address}},_=yield this.provider.request(b,e);if((0,Te.logDebug)("signMessage111",_),"result"in _){let I=_.result;return new Promise((C,M)=>{var x;C({signature:Pe.default.decode(I),publicKey:(x=this.getAccount(e))===null||x===void 0?void 0:x.address})})}else return(0,Te.logDebug)("signMessage111",_),new Promise((I,C)=>{I(_.error)})}catch(b){return console.error(" --Error--",b),new Promise((_,I)=>{_(b)})}})}getAccount(t){var e,r,s,i;let u=(r=(e=this.provider.session)===null||e===void 0?void 0:e.namespaces.solana)===null||r===void 0?void 0:r.accounts[0];if(t!=null&&(u=(i=(s=this.provider.session)===null||s===void 0?void 0:s.namespaces.solana)===null||i===void 0?void 0:i.accounts.filter(function(w){return w.startsWith(t)})[0]),(0,Te.logDebug)("getAccount",u),!u)return;const m=u.split(":")[2];if(m)return{address:m,publicKey:new qe.PublicKey(m)}}signTransaction(t,e){var r,s;(0,Te.logDebug)("OKXSolanaProvider",typeof t),e=this.getRealChainId(e);try{let i=t.serialize({requireAllSignatures:!1,verifySignatures:!1}),u={data:Pe.default.encode(i),from:(r=this.getAccount(e))===null||r===void 0?void 0:r.address};return this.getSignedTransaction("solana_signTransaction",u,e,t)}catch{let u=t.serialize(),m={data:Pe.default.encode(u),from:(s=this.getAccount(e))===null||s===void 0?void 0:s.address};return this.getSignedTransaction("solana_signTransaction",m,e,t)}}signAllTransactions(t,e){return xn(this,void 0,void 0,function*(){e=this.getRealChainId(e);try{var r=t.map(i=>{var u,m;return i instanceof qe.VersionedTransaction?m=i.serialize():m=i.serialize({requireAllSignatures:!1,verifySignatures:!1}),{data:Pe.default.encode(m),from:(u=this.getAccount(e))===null||u===void 0?void 0:u.address}});const s=yield this.provider.request({method:"solana_signAllTransactions",params:{transactions:r},injectParams:t},e);if("result"in s){let i=s.result,u=JSON.parse(i).map(m=>{let w=Pe.default.decode(m);try{let b=qe.Transaction.from(w);return(0,Te.logDebug)("verifySignatures",b.verifySignatures()),b}catch{return qe.VersionedTransaction.deserialize(w)}});return new Promise((m,w)=>{m(u)})}else return new Promise((i,u)=>{i(s)})}catch(s){return(0,Te.logDebug)("getSignedTransaction",s),new Promise((i,u)=>{i(s)})}})}signAndSendTransaction(t,e){return xn(this,void 0,void 0,function*(){var r,s;e=this.getRealChainId(e);try{let i={};try{let m=t.serialize({requireAllSignatures:!1,verifySignatures:!1});i={data:Pe.default.encode(m),from:(r=this.getAccount(e))===null||r===void 0?void 0:r.address}}catch{let w=t.serialize();i={data:Pe.default.encode(w),from:(s=this.getAccount(e))===null||s===void 0?void 0:s.address}}let u=yield this.provider.request({method:"solana_signAndSendTransaction",params:i,injectParams:t},e);if("result"in u){let m=u.result;return new Promise((w,b)=>{w(m)})}else return new Promise((m,w)=>{m(u)})}catch(i){return(0,Te.logDebug)("getSignedTransaction",i),new Promise((u,m)=>{u(i)})}})}getSignedTransaction(t,e,r,s){return xn(this,void 0,void 0,function*(){try{let i=yield this.provider.request({method:t,params:e,injectParams:s},r);if("result"in i){let u=i.result,m=Pe.default.decode(u),w;try{w=qe.Transaction.from(m)}catch{w=qe.VersionedTransaction.deserialize(m)}return w instanceof qe.VersionedTransaction||(0,Te.logDebug)("verifySignatures",w.verifySignatures()),new Promise((b,_)=>{b(w)})}else if("injectResult"in i){(0,Te.logDebug)("getSignedTransaction injectResult");let u=i.injectResult;return new Promise((m,w)=>{m(u)})}else return new Promise((u,m)=>{m(i)})}catch(i){return(0,Te.logDebug)("getSignedTransaction",i),new Promise((u,m)=>{u(i)})}})}}gn.OKXSolanaProvider=Ro;gn.default=Ro;(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.OKXSolanaProvider=void 0;var t=gn;Object.defineProperty(a,"OKXSolanaProvider",{enumerable:!0,get:function(){return t.OKXSolanaProvider}})})(Ss);const Mh="solana",_h=Oo({props:{chainId:{type:String,required:!0},chainName:String},setup(a){const t=a.chainId,e=Ji({}),r=Ji("");return{chainId:t,chainNamespaces:{solana:{chains:[t],defaultChain:t}},chainName:a.chainName,transaction:e,transactionResult:r,solProvider:void 0}},components:{ConnectLayout:Co},computed:{usesSolanaChain(){return this.chainId.startsWith(Mh)}},methods:{getProvider(){if(!ji.provider)throw alert("Please connect a wallet first"),Error("No provider");this.solProvider||(this.solProvider=new Ss.OKXSolanaProvider(ji.provider))},async prepareTransaction(){try{this.getProvider()}catch(r){throw r}const a=new Mo(this.getSolConnect()),t=this.solProvider.getAccount();if(!t)throw Error("No account found");const{blockhash:e}=await a.getLatestBlockhash();return{account:t,blockhash:e}},async sol_signMessage(){try{this.getProvider()}catch(r){console.error(r.message);return}this.transaction={method:"solana_signMessage",params:{message:"Hello Solana",pubkey:""}};let a="hello solana";const t=await this.solProvider.signMessage(a,this.chainId);console.log("sol signMessage message",t);const e=No.sign.detached.verify(new TextEncoder().encode(a),t.signature,new N(t.publicKey).toBytes());console.log(e),this.transactionResult=String(e)},async sol_signVersionedTransaction(){let a,t;try{const i=await this.prepareTransaction();a=i.account,t=i.blockhash}catch(i){console.error(i.message);return}const e=new Rr({payerKey:a.publicKey,recentBlockhash:t,instructions:[Yt.transfer({fromPubkey:a.publicKey,toPubkey:a.publicKey,lamports:100})]}).compileToV0Message();let r=new Pr(e);this.transaction=r;let s=await this.solProvider.signTransaction(r,this.chainId);console.log("sol_signTransaction result",JSON.stringify(s)),typeof s=="string"?this.transactionResult=s:this.transactionResult=JSON.stringify(s)},async sol_signAndSendVersionedTransaction(){let a,t;try{const i=await this.prepareTransaction();a=i.account,t=i.blockhash}catch(i){console.error(i.message);return}const e=new Rr({payerKey:a.publicKey,recentBlockhash:t,instructions:[Yt.transfer({fromPubkey:a.publicKey,toPubkey:a.publicKey,lamports:100})]}).compileToV0Message();let r=new Pr(e);this.transaction=r;let s=await this.solProvider.signAndSendTransaction(r,this.chainId);console.log("sol_signTransaction result",JSON.stringify(s)),typeof s=="string"?this.transactionResult=s:this.transactionResult=JSON.stringify(s)},async sol_signAllVersionedTransactions(){let a,t;try{const i=await this.prepareTransaction();a=i.account,t=i.blockhash}catch(i){console.error(i.message);return}const e=new Rr({payerKey:a.publicKey,recentBlockhash:t,instructions:[Yt.transfer({fromPubkey:a.publicKey,toPubkey:a.publicKey,lamports:100})]}).compileToV0Message();let r=new Pr(e);this.transaction=r;let s=await this.solProvider.signAllTransactions([r],this.chainId);console.log("sol_signTransaction result",JSON.stringify(s)),typeof s=="string"?this.transactionResult=s:this.transactionResult=JSON.stringify(s)},async sol_signAndSendTransaction(){let a,t;try{const s=await this.prepareTransaction();a=s.account,t=s.blockhash}catch(s){console.error(s.message);return}const e=new Kt({feePayer:a.publicKey,recentBlockhash:t}).add(Yt.transfer({fromPubkey:a.publicKey,toPubkey:a.publicKey,lamports:100}));this.transaction=e;const r=await this.solProvider.signAndSendTransaction(e,this.chainId);this.transactionResult=JSON.stringify(r)},async sol_signTransaction(){let a,t;try{const s=await this.prepareTransaction();a=s.account,t=s.blockhash}catch(s){console.error(s.message);return}const e=new Kt({feePayer:a.publicKey,recentBlockhash:t}).add(Yt.transfer({fromPubkey:a.publicKey,toPubkey:a.publicKey,lamports:1e3}));this.transaction=e;let r=await this.solProvider.signTransaction(e,this.chainId);console.log("sol_signTransaction result",JSON.stringify(r)),typeof r=="string"?this.transactionResult=r:this.transactionResult=JSON.stringify(r)},async sol_signAllTransactions(){let a,t;try{const s=await this.prepareTransaction();a=s.account,t=s.blockhash}catch(s){console.error(s.message);return}const e=new Kt({feePayer:a.publicKey,recentBlockhash:t}).add(Yt.transfer({fromPubkey:a.publicKey,toPubkey:a.publicKey,lamports:100}));this.transaction=e;let r=await this.solProvider.signAllTransactions([e],this.chainId);typeof r=="string"?this.transactionResult=r:this.transactionResult=JSON.stringify(r)},getSolConnect(){let a="https://www.okx.com/fullnode/sol/discover/rpc";return this.chainId==="solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp"?a="https://www.okx.com//fullnode/sol/discover/rpc":this.chainId==="solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"?a="https://www.okx.com/fullnode/soltestnet/discover/rpc":this.chainId==="svm:70000062"&&(a="https://www.okx.com/fullnode/sonic/testnet/discover/rpc"),a}}});function xh(a,t,e,r,s,i){const u=Jn("el-button"),m=Jn("el-card"),w=Jn("ConnectLayout");return Zn(),Yn(w,{chainId:a.chainId,chainNamespaces:a.chainNamespaces,transaction:a.transaction,transactionResult:a.transactionResult},{default:Re(()=>[Ir(m,null,{header:Re(()=>[Ko("div",null,Uo(a.chainName||"SOL")+" methods",1)]),default:Re(()=>[Ir(u,{type:"primary",onClick:a.sol_signMessage},{default:Re(()=>t[0]||(t[0]=[gr("solana_signMessage")])),_:1},8,["onClick"]),Ir(u,{type:"primary",onClick:a.sol_signTransaction},{default:Re(()=>t[1]||(t[1]=[gr("solana_signTransaction")])),_:1},8,["onClick"]),a.usesSolanaChain?(Zn(),Yn(u,{key:0,type:"primary",onClick:a.sol_signVersionedTransaction},{default:Re(()=>t[2]||(t[2]=[gr(" solana_signVersionedTransaction ")])),_:1},8,["onClick"])):Zi("",!0),Ir(u,{type:"primary",onClick:a.sol_signAllTransactions},{default:Re(()=>t[3]||(t[3]=[gr(" solana_signAllTransactions ")])),_:1},8,["onClick"]),Ir(u,{type:"primary",onClick:a.sol_signAllVersionedTransactions},{default:Re(()=>t[4]||(t[4]=[gr(" solana_signAllVersionedTransactions ")])),_:1},8,["onClick"]),Ir(u,{type:"primary",onClick:a.sol_signAndSendTransaction},{default:Re(()=>t[5]||(t[5]=[gr(" solana_signAndSendTransaction ")])),_:1},8,["onClick"]),a.usesSolanaChain?(Zn(),Yn(u,{key:1,type:"primary",onClick:a.sol_signAndSendVersionedTransaction},{default:Re(()=>t[6]||(t[6]=[gr(" solana_signAndSendVersionedTransaction ")])),_:1},8,["onClick"])):Zi("",!0)]),_:1})]),_:1},8,["chainId","chainNamespaces","transaction","transactionResult"])}const Ch=zo(_h,[["render",xh]]);export{Ch as S};
