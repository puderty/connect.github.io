{"version":3,"file":"js/572.759ef9b4.js","mappings":"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","sources":["webpack://okxconnectdemo/./node_modules/ed2curve/ed2curve.js","webpack://okxconnectdemo/../../src/features/aptosSignAndSubmitTransaction.ts","webpack://okxconnectdemo/../../src/features/aptosSignIn.ts","webpack://okxconnectdemo/../../src/features/aptosSignMessage.ts","webpack://okxconnectdemo/../../src/features/aptosSignTransaction.ts","webpack://okxconnectdemo/../../src/features/aptosConnect.ts","webpack://okxconnectdemo/../../src/features/aptosDisconnect.ts","webpack://okxconnectdemo/../../src/features/aptosGetAccount.ts","webpack://okxconnectdemo/../../src/features/aptosGetNetwork.ts","webpack://okxconnectdemo/../../src/features/aptosOnAccountChange.ts","webpack://okxconnectdemo/../../src/features/aptosOnNetworkChange.ts","webpack://okxconnectdemo/../../src/AccountInfo.ts","webpack://okxconnectdemo/../../src/chains.ts","webpack://okxconnectdemo/../../src/errors.ts","webpack://okxconnectdemo/../../src/misc.ts","webpack://okxconnectdemo/../../src/register.ts","webpack://okxconnectdemo/../src/base64.ts","webpack://okxconnectdemo/../src/helpers.ts","webpack://okxconnectdemo/../src/shared/AccountAuthenticatorInput.ts","webpack://okxconnectdemo/../src/shared/PublicKey.ts","webpack://okxconnectdemo/../src/shared/AccountInfo.ts","webpack://okxconnectdemo/../src/shared/AccountInput.ts","webpack://okxconnectdemo/../src/shared/DappInfo.ts","webpack://okxconnectdemo/../src/shared/EntryFunctionArgument.ts","webpack://okxconnectdemo/../src/shared/Signature.ts","webpack://okxconnectdemo/../src/shared/TransactionPayloadInput.ts","webpack://okxconnectdemo/../src/features/connect/request.ts","webpack://okxconnectdemo/../src/features/connect/response.ts","webpack://okxconnectdemo/../src/features/disconnect/request.ts","webpack://okxconnectdemo/../src/features/disconnect/response.ts","webpack://okxconnectdemo/../src/features/signIn/request.ts","webpack://okxconnectdemo/../src/features/signIn/response.ts","webpack://okxconnectdemo/../src/features/getConnectedAccounts/request.ts","webpack://okxconnectdemo/../src/features/getConnectedAccounts/response.ts","webpack://okxconnectdemo/../src/features/isConnected/request.ts","webpack://okxconnectdemo/../src/features/isConnected/response.ts","webpack://okxconnectdemo/../src/features/signAndSubmitTransaction/request.ts","webpack://okxconnectdemo/../src/features/signAndSubmitTransaction/response.ts","webpack://okxconnectdemo/../src/features/signMessage/request.ts","webpack://okxconnectdemo/../src/features/signMessage/response.ts","webpack://okxconnectdemo/../src/features/signTransaction/request.ts","webpack://okxconnectdemo/../src/features/signTransaction/response.ts","webpack://okxconnectdemo/../src/WalletRequest.ts","webpack://okxconnectdemo/../src/UserResponse.ts","webpack://okxconnectdemo/../src/WalletResponse.ts","webpack://okxconnectdemo/../src/shared/AptosSignInInput.ts","webpack://okxconnectdemo/../src/shared/AptosSignInOutput.ts","webpack://okxconnectdemo/../src/messages/common.ts","webpack://okxconnectdemo/../src/messages/prompt.ts","webpack://okxconnectdemo/../src/WalletRequestBody.ts","webpack://okxconnectdemo/../src/PopupWalletRequest.ts","webpack://okxconnectdemo/../src/errors.ts","webpack://okxconnectdemo/../src/utils.ts","webpack://okxconnectdemo/../src/encrDecr.ts","webpack://okxconnectdemo/../src/securedEnvelope.ts","webpack://okxconnectdemo/../src/serialization.ts","webpack://okxconnectdemo/../../transformers/dist/index.js","webpack://okxconnectdemo/../src/env/hasWebviewProxy.ts","webpack://okxconnectdemo/../src/env/isIframe.ts","webpack://okxconnectdemo/../../toolkit/dist/index.js","webpack://okxconnectdemo/../../signals/dist/index.js","webpack://okxconnectdemo/../src/debug.ts","webpack://okxconnectdemo/../src/events/transformers.ts","webpack://okxconnectdemo/../src/methods/$targetOrigin.ts","webpack://okxconnectdemo/../src/methods/postEvent.ts","webpack://okxconnectdemo/./node_modules/@aptos-connect/web-transport/node_modules/uuid/dist/esm-browser/native.js","webpack://okxconnectdemo/./node_modules/@aptos-connect/web-transport/node_modules/uuid/dist/esm-browser/rng.js","webpack://okxconnectdemo/./node_modules/@aptos-connect/web-transport/node_modules/uuid/dist/esm-browser/stringify.js","webpack://okxconnectdemo/./node_modules/@aptos-connect/web-transport/node_modules/uuid/dist/esm-browser/v4.js","webpack://okxconnectdemo/../src/prompt.ts","webpack://okxconnectdemo/../src/state.ts","webpack://okxconnectdemo/../src/telegram/createWalletRequest.ts","webpack://okxconnectdemo/../src/telegram/getClientIdentityKey.ts","webpack://okxconnectdemo/../src/telegram/smartPolling.ts","webpack://okxconnectdemo/../src/telegram/getWalletResponse.ts","webpack://okxconnectdemo/../src/telegram/openTelegramPrompt.ts","webpack://okxconnectdemo/../src/telegram/index.ts","webpack://okxconnectdemo/../src/index.ts","webpack://okxconnectdemo/../src/network.ts","webpack://okxconnectdemo/../src/types/signingRequest.ts","webpack://okxconnectdemo/../src/_assert.ts","webpack://okxconnectdemo/../src/hmac.ts","webpack://okxconnectdemo/../src/pbkdf2.ts","webpack://okxconnectdemo/../src/_sha2.ts","webpack://okxconnectdemo/../src/_u64.ts","webpack://okxconnectdemo/../src/sha512.ts","webpack://okxconnectdemo/../src/sha256.ts","webpack://okxconnectdemo/../src/sha3.ts","webpack://okxconnectdemo/../src/utils/hd-key.ts","webpack://okxconnectdemo/../src/version.ts","webpack://okxconnectdemo/../src/utils/misc.ts","webpack://okxconnectdemo/../src/utils/memoize-decorator.ts","webpack://okxconnectdemo/../src/client/types.ts","webpack://okxconnectdemo/../src/client/core.ts","webpack://okxconnectdemo/../src/client/get.ts","webpack://okxconnectdemo/../src/client/post.ts","webpack://okxconnectdemo/../src/utils/pagination_helpers.ts","webpack://okxconnectdemo/../src/utils/api-endpoints.ts","webpack://okxconnectdemo/../src/utils/hex_string.ts","webpack://okxconnectdemo/../src/aptos_types/index.ts","webpack://okxconnectdemo/../src/bcs/index.ts","webpack://okxconnectdemo/../src/bcs/consts.ts","webpack://okxconnectdemo/../src/bcs/serializer.ts","webpack://okxconnectdemo/../src/bcs/deserializer.ts","webpack://okxconnectdemo/../src/bcs/helper.ts","webpack://okxconnectdemo/../src/aptos_types/account_address.ts","webpack://okxconnectdemo/../src/aptos_types/ed25519.ts","webpack://okxconnectdemo/../src/aptos_types/multi_ed25519.ts","webpack://okxconnectdemo/../src/aptos_types/authenticator.ts","webpack://okxconnectdemo/../src/aptos_types/identifier.ts","webpack://okxconnectdemo/../src/aptos_types/type_tag.ts","webpack://okxconnectdemo/../src/aptos_types/transaction.ts","webpack://okxconnectdemo/../src/aptos_types/abi.ts","webpack://okxconnectdemo/../src/aptos_types/authentication_key.ts","webpack://okxconnectdemo/../src/aptos_types/rotation_proof_challenge.ts","webpack://okxconnectdemo/../src/account/aptos_account.ts","webpack://okxconnectdemo/../src/indexer/generated/queries.ts","webpack://okxconnectdemo/../src/transaction_builder/builder_utils.ts","webpack://okxconnectdemo/../src/transaction_builder/builder.ts","webpack://okxconnectdemo/../src/providers/aptos_client.ts","webpack://okxconnectdemo/../src/providers/indexer.ts","webpack://okxconnectdemo/../src/providers/provider.ts","webpack://okxconnectdemo/../src/utils/property_map_serde.ts","webpack://okxconnectdemo/../src/aptos_types/token_types.ts","webpack://okxconnectdemo/../src/transactions/account_sequence_number.ts","webpack://okxconnectdemo/../src/transactions/async_queue.ts","webpack://okxconnectdemo/../src/transactions/transaction_worker.ts","webpack://okxconnectdemo/../src/generated/index.ts","webpack://okxconnectdemo/../src/generated/models/AptosErrorCode.ts","webpack://okxconnectdemo/../src/generated/models/MoveFunctionVisibility.ts","webpack://okxconnectdemo/../src/generated/models/RoleType.ts","webpack://okxconnectdemo/../src/serialization/bcsSerialization.ts","webpack://okxconnectdemo/../src/serialization/error.ts","webpack://okxconnectdemo/../src/serialization/jsonPayload.ts","webpack://okxconnectdemo/../src/serialization/rawTxn.ts","webpack://okxconnectdemo/../src/serialization/signAndSubmitTransactionRequestArgs.ts","webpack://okxconnectdemo/../src/serialization/signTransactionRequestArgs.ts","webpack://okxconnectdemo/../src/serialization/signTransactionResponseArgs.ts","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/helpers/bind.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/utils.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/core/AxiosError.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/helpers/null.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/helpers/toFormData.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/helpers/AxiosURLSearchParams.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/helpers/buildURL.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/core/InterceptorManager.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/defaults/transitional.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/platform/browser/classes/URLSearchParams.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/platform/browser/classes/FormData.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/platform/browser/classes/Blob.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/platform/browser/index.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/platform/common/utils.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/platform/index.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/helpers/toURLEncodedForm.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/helpers/formDataToJSON.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/defaults/index.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/helpers/parseHeaders.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/core/AxiosHeaders.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/core/transformData.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/cancel/isCancel.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/cancel/CanceledError.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/core/settle.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/helpers/parseProtocol.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/helpers/speedometer.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/helpers/throttle.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/helpers/progressEventReducer.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/helpers/isURLSameOrigin.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/helpers/cookies.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/helpers/isAbsoluteURL.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/helpers/combineURLs.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/core/buildFullPath.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/core/mergeConfig.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/helpers/resolveConfig.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/adapters/xhr.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/helpers/composeSignals.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/helpers/trackStream.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/adapters/fetch.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/adapters/adapters.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/core/dispatchRequest.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/env/data.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/helpers/validator.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/core/Axios.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/cancel/CancelToken.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/helpers/spread.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/helpers/isAxiosError.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/helpers/HttpStatusCode.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/lib/axios.js","webpack://okxconnectdemo/./node_modules/@identity-connect/dapp-sdk/node_modules/axios/index.js","webpack://okxconnectdemo/../src/constants.ts","webpack://okxconnectdemo/../src/conversion.ts","webpack://okxconnectdemo/../src/PairingClient.ts","webpack://okxconnectdemo/../src/ACDappClient.ts","webpack://okxconnectdemo/../src/ICDappClient.ts","webpack://okxconnectdemo/../src/AptosConnectAccount.ts","webpack://okxconnectdemo/../src/AptosConnectWallet.ts","webpack://okxconnectdemo/../src/config.ts","webpack://okxconnectdemo/../src/AptosConnectGoogleWallet.ts","webpack://okxconnectdemo/../src/AptosConnectAppleWallet.ts"],"sourcesContent":["/*\n * ed2curve: convert Ed25519 signing key pair into Curve25519\n * key pair suitable for Diffie-Hellman key exchange.\n *\n * Written by Dmitry Chestnykh in 2014. Public domain.\n */\n/* jshint newcap: false */\n(function(root, f) {\n  'use strict';\n  if (typeof module !== 'undefined' && module.exports) module.exports = f(require('tweetnacl'));\n  else root.ed2curve = f(root.nacl);\n}(this, function(nacl) {\n  'use strict';\n  if (!nacl) throw new Error('tweetnacl not loaded');\n\n  // -- Operations copied from TweetNaCl.js. --\n\n  var gf = function(init) {\n    var i, r = new Float64Array(16);\n    if (init) for (i = 0; i < init.length; i++) r[i] = init[i];\n    return r;\n  };\n\n  var gf0 = gf(),\n      gf1 = gf([1]),\n      D = gf([0x78a3, 0x1359, 0x4dca, 0x75eb, 0xd8ab, 0x4141, 0x0a4d, 0x0070, 0xe898, 0x7779, 0x4079, 0x8cc7, 0xfe73, 0x2b6f, 0x6cee, 0x5203]),\n      I = gf([0xa0b0, 0x4a0e, 0x1b27, 0xc4ee, 0xe478, 0xad2f, 0x1806, 0x2f43, 0xd7a7, 0x3dfb, 0x0099, 0x2b4d, 0xdf0b, 0x4fc1, 0x2480, 0x2b83]);\n\n  function car25519(o) {\n    var c;\n    var i;\n    for (i = 0; i < 16; i++) {\n      o[i] += 65536;\n      c = Math.floor(o[i] / 65536);\n      o[(i+1)*(i<15?1:0)] += c - 1 + 37 * (c-1) * (i===15?1:0);\n      o[i] -= (c * 65536);\n    }\n  }\n\n  function sel25519(p, q, b) {\n    var t, c = ~(b-1);\n    for (var i = 0; i < 16; i++) {\n      t = c & (p[i] ^ q[i]);\n      p[i] ^= t;\n      q[i] ^= t;\n    }\n  }\n\n  function unpack25519(o, n) {\n    var i;\n    for (i = 0; i < 16; i++) o[i] = n[2*i] + (n[2*i+1] << 8);\n    o[15] &= 0x7fff;\n  }\n\n  // addition\n  function A(o, a, b) {\n    var i;\n    for (i = 0; i < 16; i++) o[i] = (a[i] + b[i])|0;\n  }\n\n  // subtraction\n  function Z(o, a, b) {\n    var i;\n    for (i = 0; i < 16; i++) o[i] = (a[i] - b[i])|0;\n  }\n\n  // multiplication\n  function M(o, a, b) {\n    var i, j, t = new Float64Array(31);\n    for (i = 0; i < 31; i++) t[i] = 0;\n    for (i = 0; i < 16; i++) {\n      for (j = 0; j < 16; j++) {\n        t[i+j] += a[i] * b[j];\n      }\n    }\n    for (i = 0; i < 15; i++) {\n      t[i] += 38 * t[i+16];\n    }\n    for (i = 0; i < 16; i++) o[i] = t[i];\n    car25519(o);\n    car25519(o);\n  }\n\n  // squaring\n  function S(o, a) {\n    M(o, a, a);\n  }\n\n  // inversion\n  function inv25519(o, i) {\n    var c = gf();\n    var a;\n    for (a = 0; a < 16; a++) c[a] = i[a];\n    for (a = 253; a >= 0; a--) {\n      S(c, c);\n      if(a !== 2 && a !== 4) M(c, c, i);\n    }\n    for (a = 0; a < 16; a++) o[a] = c[a];\n  }\n\n  function pack25519(o, n) {\n    var i, j, b;\n    var m = gf(), t = gf();\n    for (i = 0; i < 16; i++) t[i] = n[i];\n    car25519(t);\n    car25519(t);\n    car25519(t);\n    for (j = 0; j < 2; j++) {\n      m[0] = t[0] - 0xffed;\n      for (i = 1; i < 15; i++) {\n        m[i] = t[i] - 0xffff - ((m[i-1]>>16) & 1);\n        m[i-1] &= 0xffff;\n      }\n      m[15] = t[15] - 0x7fff - ((m[14]>>16) & 1);\n      b = (m[15]>>16) & 1;\n      m[14] &= 0xffff;\n      sel25519(t, m, 1-b);\n    }\n    for (i = 0; i < 16; i++) {\n      o[2*i] = t[i] & 0xff;\n      o[2*i+1] = t[i] >> 8;\n    }\n  }\n\n  function par25519(a) {\n    var d = new Uint8Array(32);\n    pack25519(d, a);\n    return d[0] & 1;\n  }\n\n  function vn(x, xi, y, yi, n) {\n    var i, d = 0;\n    for (i = 0; i < n; i++) d |= x[xi + i] ^ y[yi + i];\n    return (1 & ((d - 1) >>> 8)) - 1;\n  }\n\n  function crypto_verify_32(x, xi, y, yi) {\n    return vn(x, xi, y, yi, 32);\n  }\n\n  function neq25519(a, b) {\n    var c = new Uint8Array(32), d = new Uint8Array(32);\n    pack25519(c, a);\n    pack25519(d, b);\n    return crypto_verify_32(c, 0, d, 0);\n  }\n\n  function pow2523(o, i) {\n    var c = gf();\n    var a;\n    for (a = 0; a < 16; a++) c[a] = i[a];\n    for (a = 250; a >= 0; a--) {\n      S(c, c);\n      if (a !== 1) M(c, c, i);\n    }\n    for (a = 0; a < 16; a++) o[a] = c[a];\n  }\n\n  function set25519(r, a) {\n    var i;\n    for (i = 0; i < 16; i++) r[i] = a[i] | 0;\n  }\n\n  function unpackneg(r, p) {\n    var t = gf(), chk = gf(), num = gf(),\n      den = gf(), den2 = gf(), den4 = gf(),\n      den6 = gf();\n\n    set25519(r[2], gf1);\n    unpack25519(r[1], p);\n    S(num, r[1]);\n    M(den, num, D);\n    Z(num, num, r[2]);\n    A(den, r[2], den);\n\n    S(den2, den);\n    S(den4, den2);\n    M(den6, den4, den2);\n    M(t, den6, num);\n    M(t, t, den);\n\n    pow2523(t, t);\n    M(t, t, num);\n    M(t, t, den);\n    M(t, t, den);\n    M(r[0], t, den);\n\n    S(chk, r[0]);\n    M(chk, chk, den);\n    if (neq25519(chk, num)) M(r[0], r[0], I);\n\n    S(chk, r[0]);\n    M(chk, chk, den);\n    if (neq25519(chk, num)) return -1;\n\n    if (par25519(r[0]) === (p[31] >> 7)) Z(r[0], gf0, r[0]);\n\n    M(r[3], r[0], r[1]);\n    return 0;\n  }\n\n  // ----\n\n  // Converts Ed25519 public key to Curve25519 public key.\n  // montgomeryX = (edwardsY + 1)*inverse(1 - edwardsY) mod p\n  function convertPublicKey(pk) {\n    var z = new Uint8Array(32),\n      q = [gf(), gf(), gf(), gf()],\n      a = gf(), b = gf();\n\n    if (unpackneg(q, pk)) return null; // reject invalid key\n\n    var y = q[1];\n\n    A(a, gf1, y);\n    Z(b, gf1, y);\n    inv25519(b, b);\n    M(a, a, b);\n\n    pack25519(z, a);\n    return z;\n  }\n\n  // Converts Ed25519 secret key to Curve25519 secret key.\n  function convertSecretKey(sk) {\n    var d = new Uint8Array(64), o = new Uint8Array(32), i;\n    nacl.lowlevel.crypto_hash(d, sk, 32);\n    d[0] &= 248;\n    d[31] &= 127;\n    d[31] |= 64;\n    for (i = 0; i < 32; i++) o[i] = d[i];\n    for (i = 0; i < 64; i++) d[i] = 0;\n    return o;\n  }\n\n  function convertKeyPair(edKeyPair) {\n    var publicKey = convertPublicKey(edKeyPair.publicKey);\n    if (!publicKey) return null;\n    return {\n      publicKey: publicKey,\n      secretKey: convertSecretKey(edKeyPair.secretKey)\n    };\n  }\n\n  return {\n    convertPublicKey: convertPublicKey,\n    convertSecretKey: convertSecretKey,\n    convertKeyPair: convertKeyPair,\n  };\n\n}));\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport { InputGenerateTransactionPayloadData } from '@aptos-labs/ts-sdk'\nimport { UserResponse } from '../misc'\n\n/** Version of the feature. */\nexport type AptosSignAndSubmitTransactionVersion = '1.1.0'\n/** Name of the feature. */\nexport const AptosSignAndSubmitTransactionNamespace = 'aptos:signAndSubmitTransaction'\n/**\n * A Wallet Standard feature for signing a transaction, and returning the\n * hash of the transaction.\n */\nexport type AptosSignAndSubmitTransactionFeature = {\n  /** Namespace for the feature. */\n  [AptosSignAndSubmitTransactionNamespace]: {\n    /** Version of the feature API. */\n    version: AptosSignAndSubmitTransactionVersion\n    signAndSubmitTransaction: AptosSignAndSubmitTransactionMethod\n  }\n}\n\nexport type AptosSignAndSubmitTransactionMethod = (\n  transaction: AptosSignAndSubmitTransactionInput\n) => Promise<UserResponse<AptosSignAndSubmitTransactionOutput>>\n\nexport interface AptosSignAndSubmitTransactionInput {\n  gasUnitPrice?: number;  // defaults to estimated gas unit price\n  maxGasAmount?: number;  // defaults to estimated max gas amount\n  payload: InputGenerateTransactionPayloadData;\n}\n\nexport interface AptosSignAndSubmitTransactionOutput {\n  hash: string;\n}\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Signature } from '@aptos-labs/ts-sdk'\nimport { UserResponse } from '../misc'\nimport { AccountInfo } from '../AccountInfo'\n\n/**\n * NOTE: This feature is currently experimental and is subject to change.\n *\n * Documentation: [Sign in with Aptos](https://github.com/aptos-foundation/AIPs/pull/556)\n */\n\n/** Version of the feature. */\nexport type AptosSignInVersion = '0.1.0'\n/** Name of the feature. */\nexport const AptosSignInNamespace = 'aptos:signIn'\n\nexport type AptosSignInFeature = {\n  /** Namespace for the feature. */\n  [AptosSignInNamespace]: {\n    /** Version of the feature API. */\n    version: AptosSignInVersion\n    signIn: AptosSignInMethod\n  }\n}\n\nexport type AptosSignInMethod = (\n  input: AptosSignInInput\n) => Promise<UserResponse<AptosSignInOutput>>\n\nexport type AptosSignInInput = {\n  address?: string\n  uri?: string\n  version?: string\n  statement?: string\n  nonce: string\n  chainId?: string\n  issuedAt?: string\n  expirationTime?: string\n  notBefore?: string\n  requestId?: string\n  resources?: string[]\n}\n\nexport type AptosSignInRequiredFields = {\n  domain: string\n  address: string\n  uri: string\n  version: string\n  chainId: string\n}\n\nexport type AptosSignInOutput = {\n  account: AccountInfo\n  input: AptosSignInInput & AptosSignInRequiredFields\n  plainText: string\n  signingMessage: Uint8Array\n  signature: Signature\n  /**\n   * The type of signing scheme used to sign the message.\n   *\n   * @example 'ed25519' | 'multi_ed25519' | 'single_key' | 'multi_key'\n   */\n  type: string\n}\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Signature } from '@aptos-labs/ts-sdk'\nimport { UserResponse } from '../misc'\n\n/** Version of the feature. */\nexport type AptosSignMessageVersion = '1.0.0'\n/** Name of the feature. */\nexport const AptosSignMessageNamespace = 'aptos:signMessage'\n\nexport type AptosSignMessageFeature = {\n  /** Namespace for the feature. */\n  [AptosSignMessageNamespace]: {\n    /** Version of the feature API. */\n    version: AptosSignMessageVersion\n    signMessage: AptosSignMessageMethod\n  }\n}\n\nexport type AptosSignMessageMethod = (\n  input: AptosSignMessageInput\n) => Promise<UserResponse<AptosSignMessageOutput>>\n\nexport type AptosSignMessageInput = {\n  address?: boolean\n  application?: boolean\n  chainId?: boolean\n  message: string\n  nonce: string\n}\n\nexport type AptosSignMessageOutput = {\n  address?: string\n  application?: string\n  chainId?: number\n  fullMessage: string\n  message: string\n  nonce: string\n  prefix: 'APTOS'\n  signature: Signature\n}\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  AccountAddress,\n  AccountAuthenticator,\n  AnyRawTransaction,\n  InputGenerateTransactionPayloadData,\n  Network,\n  PublicKey,\n  TransactionPayload\n} from '@aptos-labs/ts-sdk'\nimport { UserResponse } from '../misc'\n\n// region Feature definition\n\n/** Name of the feature. */\nexport const AptosSignTransactionNamespace = 'aptos:signTransaction'\n\nexport type AptosSignTransactionFeatureV1_0 = {\n  [AptosSignTransactionNamespace]: {\n    version: '1.0.0',\n    signTransaction: AptosSignTransactionMethod\n  }\n}\n\nexport type AptosSignTransactionFeatureV1_1 = {\n  [AptosSignTransactionNamespace]: {\n    version: '1.1'\n    signTransaction: AptosSignTransactionMethod & AptosSignTransactionMethodV1_1\n  }\n}\n\n/**\n * A Wallet Standard feature for signing an Aptos transaction, and returning the\n * account authenticator.\n */\nexport type AptosSignTransactionFeature =\n  AptosSignTransactionFeatureV1_0 | AptosSignTransactionFeatureV1_1;\n\n// endregion\n\n// region V1.0\n\nexport type AptosSignTransactionOutput = AccountAuthenticator;\n\nexport type AptosSignTransactionMethod = (\n  transaction: AnyRawTransaction,\n  asFeePayer?: boolean\n) => Promise<UserResponse<AptosSignTransactionOutput>>\n\n// endregion\n\n// region V1.1\n\nexport interface AccountInput {\n  address: AccountAddress;\n  publicKey?: PublicKey;\n}\n\nexport interface AptosSignTransactionInputV1_1 {\n  expirationSecondsFromNow?: number; // defaults to 30 seconds (depends on wallet)\n  expirationTimestamp?: number;\n  feePayer?: AccountInput; // defaults to no fee payer\n  gasUnitPrice?: number; // defaults to estimated gas unit price\n  maxGasAmount?: number; // defaults to simulation result with fuzz factor\n  network?: Network; // defaults to active network\n  payload: TransactionPayload | InputGenerateTransactionPayloadData;\n  secondarySigners?: AccountInput[]; // defaults to no secondary signers\n  sender?: AccountInput; // defaulting to active account (if applicable)\n  sequenceNumber?: number | bigint; // defaulting to sender's sequence number\n  signerAddress?: AccountAddress;\n}\n\nexport interface AptosSignTransactionOutputV1_1 {\n  authenticator: AccountAuthenticator;\n  rawTransaction: AnyRawTransaction;\n}\n\nexport type AptosSignTransactionMethodV1_1 = (\n  input: AptosSignTransactionInputV1_1\n) => Promise<UserResponse<AptosSignTransactionOutputV1_1>>;\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport { AccountInfo } from '../AccountInfo'\nimport { NetworkInfo, UserResponse } from '../misc'\n\n/** Version of the feature. */\nexport type AptosConnectVersion = '1.0.0'\n/** Name of the feature. */\nexport const AptosConnectNamespace = 'aptos:connect'\n\nexport type AptosConnectFeature = {\n  /** Namespace for the feature. */\n  [AptosConnectNamespace]: {\n    /** Version of the feature API. */\n    version: AptosConnectVersion\n    connect: AptosConnectMethod\n  }\n}\n\nexport type AptosConnectMethod = (\n  ...args: AptosConnectInput\n) => Promise<UserResponse<AptosConnectOutput>>\n\nexport type AptosConnectInput = [silent?: boolean, networkInfo?: NetworkInfo]\n\nexport type AptosConnectOutput = AccountInfo\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\n/** Version of the feature. */\nexport type AptosDisconnectVersion = '1.0.0'\n/** Name of the feature. */\nexport const AptosDisconnectNamespace = 'aptos:disconnect'\n\nexport type AptosDisconnectFeature = {\n  /** Namespace for the feature. */\n  [AptosDisconnectNamespace]: {\n    /** Version of the feature API. */\n    version: AptosDisconnectVersion\n    disconnect: AptosDisconnectMethod\n  }\n}\n\nexport type AptosDisconnectMethod = () => Promise<void>\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport { AccountInfo } from '../AccountInfo'\n\n/** Version of the feature. */\nexport type AptosGetAccountVersion = '1.0.0'\n/** Name of the feature. */\nexport const AptosGetAccountNamespace = 'aptos:account'\n\nexport type AptosGetAccountFeature = {\n  /** Namespace for the feature. */\n  [AptosGetAccountNamespace]: {\n    /** Version of the feature API. */\n    version: AptosGetAccountVersion\n    account: AptosGetAccountMethod\n  }\n}\n\nexport type AptosGetAccountMethod = () => Promise<AptoGetsAccountOutput>\n\nexport type AptoGetsAccountOutput = AccountInfo\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport { NetworkInfo } from '../misc'\n\n/** Version of the feature. */\nexport type AptosGetNetworkVersion = '1.0.0'\n/** Name of the feature. */\nexport const AptosGetNetworkNamespace = 'aptos:network'\n\nexport type AptosGetNetworkFeature = {\n  /** Namespace for the feature. */\n  [AptosGetNetworkNamespace]: {\n    /** Version of the feature API. */\n    version: AptosGetNetworkVersion\n    network: AptosGetNetworkMethod\n  }\n}\n\nexport type AptosGetNetworkMethod = () => Promise<AptosGetNetworkOutput>\n\nexport type AptosGetNetworkOutput = NetworkInfo\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport { AccountInfo } from '../AccountInfo'\n\n/** Version of the feature. */\nexport type AptosOnAccountChangeVersion = '1.0.0'\n/** Name of the feature. */\nexport const AptosOnAccountChangeNamespace = 'aptos:onAccountChange'\n\nexport type AptosOnAccountChangeFeature = {\n  /** Namespace for the feature. */\n  [AptosOnAccountChangeNamespace]: {\n    /** Version of the feature API. */\n    version: AptosOnAccountChangeVersion\n    onAccountChange: AptosOnAccountChangeMethod\n  }\n}\n\nexport type AptosOnAccountChangeMethod = (input: AptosOnAccountChangeInput) => Promise<void>\n\nexport type AptosOnAccountChangeInput = (newAccount: AccountInfo) => void\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport { NetworkInfo } from '../misc'\n\n/** Version of the feature. */\nexport type AptosOnNetworkChangeVersion = '1.0.0'\n/** Name of the feature. */\nexport const AptosOnNetworkChangeNamespace = 'aptos:onNetworkChange'\n\nexport type AptosOnNetworkChangeFeature = {\n  /** Namespace for the feature. */\n  [AptosOnNetworkChangeNamespace]: {\n    /** Version of the feature API. */\n    version: AptosOnNetworkChangeVersion\n    onNetworkChange: AptosOnNetworkChangeMethod\n  }\n}\n\nexport type AptosOnNetworkChangeMethod = (input: AptosOnNetworkChangeInput) => Promise<void>\n\nexport type AptosOnNetworkChangeInput = (newNetwork: NetworkInfo) => void\n","import {\n  AccountAddress, AccountAddressInput, AnyPublicKey,\n  Deserializer,\n  Ed25519PublicKey,\n  MultiEd25519PublicKey, MultiKey,\n  PublicKey,\n  Serializable,\n  Serializer, SigningScheme\n} from '@aptos-labs/ts-sdk'\n\nexport interface AccountInfoInput {\n  address: AccountAddressInput\n  publicKey: PublicKey\n  ansName?: string\n}\n\nexport class AccountInfo extends Serializable {\n  readonly address: AccountAddress\n  readonly publicKey: PublicKey\n  readonly ansName?: string\n\n  constructor({ address, publicKey, ansName }: AccountInfoInput) {\n    super()\n    this.address = AccountAddress.from(address)\n    this.publicKey = publicKey\n    this.ansName = ansName\n  }\n\n  serialize(serializer: Serializer) {\n    this.address.serialize(serializer)\n    if (this.publicKey instanceof Ed25519PublicKey) {\n      serializer.serializeU32AsUleb128(SigningScheme.Ed25519)\n    } else if (this.publicKey instanceof MultiEd25519PublicKey) {\n      serializer.serializeU32AsUleb128(SigningScheme.MultiEd25519)\n    } else if (this.publicKey instanceof AnyPublicKey) {\n      serializer.serializeU32AsUleb128(SigningScheme.SingleKey)\n    } else if (this.publicKey instanceof MultiKey) {\n      serializer.serializeU32AsUleb128(SigningScheme.MultiKey)\n    } else {\n      throw new Error('Unsupported public key')\n    }\n    this.publicKey.serialize(serializer)\n    serializer.serializeStr(this.ansName ?? '')\n  }\n\n  static deserialize(deserializer: Deserializer) {\n    const address = AccountAddress.deserialize(deserializer)\n    const variant = deserializer.deserializeUleb128AsU32()\n    let publicKey: PublicKey\n    switch (variant) {\n      case SigningScheme.Ed25519:\n        publicKey = Ed25519PublicKey.deserialize(deserializer)\n        break\n      case SigningScheme.MultiEd25519:\n        publicKey = MultiEd25519PublicKey.deserialize(deserializer)\n        break\n      case SigningScheme.SingleKey:\n        publicKey = AnyPublicKey.deserialize(deserializer)\n        break\n      case SigningScheme.MultiKey:\n        publicKey = MultiKey.deserialize(deserializer)\n        break\n      default:\n        throw new Error(`Unknown variant index for WrappedPublicKey: ${variant}`)\n    }\n    const ansName = deserializer.deserializeStr() || undefined\n    return new AccountInfo({ address, publicKey, ansName })\n  }\n}\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nexport type ChainsId = `${string}:${string}` // e.g. 'aptos:devnet'\n/** APTOS Devnet */\nexport const APTOS_DEVNET_CHAIN = 'aptos:devnet'\n\n/** APTOS Testnet */\nexport const APTOS_TESTNET_CHAIN = 'aptos:testnet'\n\n/** APTOS Localnet */\nexport const APTOS_LOCALNET_CHAIN = 'aptos:localnet'\n\n/** APTOS Mainnet */\nexport const APTOS_MAINNET_CHAIN = 'aptos:mainnet'\n\nexport const APTOS_CHAINS = [\n  APTOS_DEVNET_CHAIN,\n  APTOS_TESTNET_CHAIN,\n  APTOS_LOCALNET_CHAIN,\n  APTOS_MAINNET_CHAIN\n] as const\n\nexport type AptosChain =\n  | typeof APTOS_DEVNET_CHAIN\n  | typeof APTOS_TESTNET_CHAIN\n  | typeof APTOS_LOCALNET_CHAIN\n  | typeof APTOS_MAINNET_CHAIN\n","export enum AptosWalletErrorCode {\n  Unauthorized = 4100,\n  Unsupported = 4200,\n  InternalError = -30001\n}\n\nexport const AptosWalletErrors = Object.freeze({\n  [AptosWalletErrorCode.Unauthorized]: {\n    status: 'Unauthorized',\n    message: 'The requested method and/or account has not been authorized by the user.'\n  },\n  [AptosWalletErrorCode.InternalError]: {\n    status: 'Internal error',\n    message: 'Something went wrong within the wallet.'\n  },\n  [AptosWalletErrorCode.Unsupported]: {\n    status: 'Unsupported',\n    message: 'The requested feature is not supported.'\n  }\n})\n\nexport class AptosWalletError extends Error {\n  readonly code: number\n  readonly status: string\n\n  constructor(code: number, message?: string) {\n    super(\n      message ??\n        AptosWalletErrors[code as keyof typeof AptosWalletErrors]?.message ??\n        'Unknown error occurred'\n    )\n    this.code = code\n    this.status =\n      AptosWalletErrors[code as keyof typeof AptosWalletErrors]?.status ?? 'Unknown error'\n    this.name = 'AptosWalletError'\n    Object.setPrototypeOf(this, AptosWalletError.prototype)\n  }\n}\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Network } from '@aptos-labs/ts-sdk'\n\nexport type TransactionHash = `0x${string}`\n\nexport interface NetworkInfo {\n  name: Network // Name of the network.\n  chainId: number // Chain ID of the network.\n  url?: string // RPC URL of the network.\n}\n\nexport enum UserResponseStatus {\n  APPROVED = 'Approved',\n  REJECTED = 'Rejected'\n}\n\nexport interface UserApproval<TResponseArgs> {\n  status: UserResponseStatus.APPROVED\n  args: TResponseArgs\n}\n\nexport interface UserRejection {\n  status: UserResponseStatus.REJECTED\n}\n\nexport type UserResponse<TResponseArgs> = UserApproval<TResponseArgs> | UserRejection\n",null,"// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nexport function base64ToBytes(base64: string) {\n  const binaryString = atob(base64);\n  return Uint8Array.from(binaryString, (m) => m.charCodeAt(0));\n}\n\nexport function bytesToBase64(bytes: Uint8Array) {\n  const binaryString = String.fromCharCode(...bytes);\n  return btoa(binaryString);\n}\n\nexport function base64urlToBytes(base64: string) {\n  return base64ToBytes(base64.replace(/-/g, '+').replace(/_/g, '/'));\n}\n\nexport function bytesToBase64url(bytes: Uint8Array) {\n  return bytesToBase64(bytes).replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, '');\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Deserializer, Network, NetworkToChainId, Serializer } from '@aptos-labs/ts-sdk';\n\nexport type SerializeFn<T> = (serializer: Serializer, value: T) => void;\nexport type DeserializeFn<T> = (deserializer: Deserializer) => T;\n\nexport function chainIdToNetwork(chainId: number): Network {\n  switch (chainId) {\n    case NetworkToChainId.mainnet:\n      return Network.MAINNET;\n    case NetworkToChainId.testnet:\n      return Network.TESTNET;\n    default:\n      // TODO: fetch Devnet's chain id and compare, otherwise throw error\n      return Network.DEVNET;\n  }\n}\n\nexport function isSupportedNetwork(network: string): network is Network {\n  return [Network.MAINNET, Network.TESTNET, Network.DEVNET].includes(network as Network);\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { AccountAddress, AccountAuthenticator, Deserializer, Serializer } from '@aptos-labs/ts-sdk';\n\nexport interface AccountAuthenticatorInput {\n  address: AccountAddress;\n  authenticator: AccountAuthenticator;\n}\n\nexport function serializeAccountAuthenticatorInput(serializer: Serializer, value: AccountAuthenticatorInput) {\n  serializer.serialize(value.address);\n  serializer.serialize(value.authenticator);\n}\n\nexport function deserializeAccountAuthenticatorInput(deserializer: Deserializer): AccountAuthenticatorInput {\n  const address = deserializer.deserialize(AccountAddress);\n  const authenticator = deserializer.deserialize(AccountAuthenticator);\n  return { address, authenticator };\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  AnyPublicKey,\n  Deserializer,\n  Ed25519PublicKey,\n  MultiEd25519PublicKey,\n  MultiKey,\n  PublicKey,\n  Serializer,\n  SigningScheme,\n} from '@aptos-labs/ts-sdk';\n\nexport function serializePublicKey(serializer: Serializer, value: PublicKey) {\n  if (value instanceof Ed25519PublicKey) {\n    serializer.serializeU32AsUleb128(SigningScheme.Ed25519);\n  } else if (value instanceof MultiEd25519PublicKey) {\n    serializer.serializeU32AsUleb128(SigningScheme.MultiEd25519);\n  } else if (value instanceof AnyPublicKey) {\n    serializer.serializeU32AsUleb128(SigningScheme.SingleKey);\n  } else if (value instanceof MultiKey) {\n    serializer.serializeU32AsUleb128(SigningScheme.MultiKey);\n  } else {\n    throw new Error('Unexpected public key type');\n  }\n  serializer.serialize(value);\n}\n\nexport function deserializePublicKey(deserializer: Deserializer): PublicKey {\n  const signingScheme = deserializer.deserializeUleb128AsU32();\n  switch (signingScheme) {\n    case SigningScheme.Ed25519:\n      return deserializer.deserialize(Ed25519PublicKey);\n    case SigningScheme.MultiEd25519:\n      return deserializer.deserialize(MultiEd25519PublicKey);\n    case SigningScheme.SingleKey:\n      return deserializer.deserialize(AnyPublicKey);\n    case SigningScheme.MultiKey:\n      return deserializer.deserialize(MultiKey);\n    default:\n      throw new Error(`Unknown signing scheme: ${signingScheme}`);\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { AccountAddress, Deserializer, PublicKey, Serializer } from '@aptos-labs/ts-sdk';\nimport { deserializePublicKey, serializePublicKey } from './PublicKey';\n\nexport interface AccountInfo {\n  address: AccountAddress;\n  name?: string;\n  publicKey: PublicKey;\n}\n\nexport function serializeAccountInfo(serializer: Serializer, value: AccountInfo) {\n  serializer.serialize(value.address);\n  serializePublicKey(serializer, value.publicKey);\n  serializer.serializeStr(value.name ?? '');\n}\n\nexport function deserializeAccountInfo(deserializer: Deserializer): AccountInfo {\n  const address = deserializer.deserialize(AccountAddress);\n  const publicKey = deserializePublicKey(deserializer);\n  const name = deserializer.deserializeStr();\n  return {\n    address,\n    publicKey,\n    ...(name.length > 0 ? { name } : undefined),\n  };\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { AccountAddress, Deserializer, PublicKey, Serializer } from '@aptos-labs/ts-sdk';\nimport { deserializePublicKey, serializePublicKey } from './PublicKey';\n\nexport interface AccountInput {\n  address: AccountAddress;\n  publicKey?: PublicKey;\n}\n\nexport function serializeAccountInput(serializer: Serializer, value: AccountInput) {\n  serializer.serialize(value.address);\n  serializer.serializeBool(value.publicKey !== undefined);\n  if (value.publicKey) {\n    serializePublicKey(serializer, value.publicKey);\n  }\n}\n\nexport function deserializeAccountInput(deserializer: Deserializer): AccountInput {\n  const address = deserializer.deserialize(AccountAddress);\n  const hasPublicKey = deserializer.deserializeBool();\n  const publicKey = hasPublicKey ? deserializePublicKey(deserializer) : undefined;\n  return { address, publicKey };\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Deserializer, Serializer } from '@aptos-labs/ts-sdk';\n\nexport interface DappInfo {\n  domain: string;\n  imageURI?: string;\n  name: string;\n}\n\nexport function serializeDappInfo(serializer: Serializer, value: DappInfo) {\n  serializer.serializeStr(value.domain);\n  serializer.serializeStr(value.name);\n  serializer.serializeBool(value.imageURI !== undefined);\n  if (value.imageURI !== undefined) {\n    serializer.serializeStr(value.imageURI);\n  }\n}\n\nexport function deserializeDappInfo(deserializer: Deserializer): DappInfo {\n  const domain = deserializer.deserializeStr();\n  const name = deserializer.deserializeStr();\n  const hasImageUri = deserializer.deserializeBool();\n  const imageURI = hasImageUri ? deserializer.deserializeStr() : undefined;\n  return { domain, imageURI, name };\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  AccountAddress,\n  Deserializer,\n  EntryFunctionArgumentTypes,\n  FixedBytes,\n  Serializer,\n  SimpleEntryFunctionArgumentTypes,\n} from '@aptos-labs/ts-sdk';\n\nexport type EntryFunctionArgument = EntryFunctionArgumentTypes | SimpleEntryFunctionArgumentTypes;\n\n/* eslint-disable @typescript-eslint/no-shadow */\nexport enum EntryFunctionArgumentVariant {\n  Undefined,\n  Array,\n  String,\n  Uint8Array,\n  AccountAddress,\n  FixedBytes,\n}\n\n/* eslint-enable @typescript-eslint/no-shadow */\n\nexport function serializeEntryFunctionArgument(serializer: Serializer, argument: EntryFunctionArgument) {\n  // undefined | null -> undefined\n  if (argument === undefined || argument === null) {\n    serializer.serializeU32AsUleb128(EntryFunctionArgumentVariant.Undefined);\n    return;\n  }\n\n  // Array -> Array\n  if (Array.isArray(argument)) {\n    serializer.serializeU32AsUleb128(EntryFunctionArgumentVariant.Array);\n    serializer.serializeU32AsUleb128(argument.length);\n    for (const subArgument of argument) {\n      serializeEntryFunctionArgument(serializer, subArgument);\n    }\n    return;\n  }\n\n  // boolean | number | bigint | string -> string\n  if (\n    typeof argument === 'string' ||\n    typeof argument === 'number' ||\n    typeof argument === 'boolean' ||\n    typeof argument === 'bigint'\n  ) {\n    serializer.serializeU32AsUleb128(EntryFunctionArgumentVariant.String);\n    serializer.serializeStr(argument.toString());\n    return;\n  }\n\n  // Uint8Array -> Uint8Array\n  if (argument instanceof Uint8Array) {\n    serializer.serializeU32AsUleb128(EntryFunctionArgumentVariant.Uint8Array);\n    serializer.serializeBytes(argument);\n    return;\n  }\n\n  // ArrayBuffer -> Uint8Array\n  if (argument instanceof ArrayBuffer) {\n    serializer.serializeU32AsUleb128(EntryFunctionArgumentVariant.Uint8Array);\n    serializer.serializeBytes(new Uint8Array(argument));\n    return;\n  }\n\n  // MoveVector -> Array\n  if ('values' in argument) {\n    serializer.serializeU32AsUleb128(EntryFunctionArgumentVariant.Array);\n    serializer.serializeU32AsUleb128(argument.values.length);\n    for (const subArgument of argument.values) {\n      serializeEntryFunctionArgument(serializer, subArgument);\n    }\n    return;\n  }\n\n  // AccountAddress -> AccountAddress\n  if ('data' in argument) {\n    serializer.serializeU32AsUleb128(EntryFunctionArgumentVariant.AccountAddress);\n    serializer.serialize(argument);\n    return;\n  }\n\n  // Empty MoveOption -> undefined\n  if (argument.value === undefined) {\n    serializer.serializeU32AsUleb128(EntryFunctionArgumentVariant.Undefined);\n    serializer.serialize(argument);\n    return;\n  }\n\n  // FixedBytes -> FixedBytes\n  if (argument.value instanceof Uint8Array) {\n    serializer.serializeU32AsUleb128(EntryFunctionArgumentVariant.FixedBytes);\n    serializer.serializeBytes(argument.value);\n    return;\n  }\n\n  // Bool | U8 | U16 | U32 | U64 | U128 | U256 | MoveString -> string\n  serializer.serializeU32AsUleb128(EntryFunctionArgumentVariant.String);\n  serializer.serializeStr(argument.value.toString());\n}\n\nexport function deserializeEntryFunctionArgument(deserializer: Deserializer): EntryFunctionArgument {\n  const variant = deserializer.deserializeUleb128AsU32() as EntryFunctionArgumentVariant;\n\n  switch (variant) {\n    // undefined | null | empty MoveOption\n    case EntryFunctionArgumentVariant.Undefined: {\n      return undefined;\n    }\n    // Array | MoveVector\n    case EntryFunctionArgumentVariant.Array: {\n      const length = deserializer.deserializeUleb128AsU32();\n      const args: (EntryFunctionArgumentTypes | SimpleEntryFunctionArgumentTypes)[] = [];\n      for (let i = 0; i < length; i += 1) {\n        const argument = deserializeEntryFunctionArgument(deserializer);\n        args.push(argument);\n      }\n      return args;\n    }\n    // Uint8Array | ArrayBuffer | FixedBytes\n    case EntryFunctionArgumentVariant.Uint8Array: {\n      return deserializer.deserializeBytes();\n    }\n    // AccountAddress\n    case EntryFunctionArgumentVariant.AccountAddress: {\n      return deserializer.deserialize(AccountAddress);\n    }\n    // Bool | U8 | U16 | U32 | U64 | U128 | U256 | MoveString\n    case EntryFunctionArgumentVariant.String: {\n      return deserializer.deserializeStr();\n    }\n    // FixedBytes (custom serialization)\n    case EntryFunctionArgumentVariant.FixedBytes: {\n      const bytes = deserializer.deserializeBytes();\n      return new FixedBytes(bytes);\n    }\n    default: {\n      throw new Error('Unexpected variant');\n    }\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  AnySignature,\n  Deserializer,\n  Ed25519Signature,\n  MultiEd25519Signature,\n  // This type got renamed in the zeta branch, commenting out until it's synced with main\n  // MultiSignature,\n  Serializer,\n  Signature,\n  SigningScheme,\n} from '@aptos-labs/ts-sdk';\n\nexport function serializeSignature(serializer: Serializer, value: Signature) {\n  if (value instanceof Ed25519Signature) {\n    serializer.serializeU32AsUleb128(SigningScheme.Ed25519);\n  } else if (value instanceof MultiEd25519Signature) {\n    serializer.serializeU32AsUleb128(SigningScheme.MultiEd25519);\n  } else if (value instanceof AnySignature) {\n    serializer.serializeU32AsUleb128(SigningScheme.SingleKey);\n    // } else if (value instanceof MultiSignature) {\n    //   serializer.serializeU32AsUleb128(SigningScheme.MultiKey);\n  } else {\n    throw new Error('Unexpected signature type');\n  }\n  serializer.serialize(value);\n}\n\nexport function deserializeSignature(deserializer: Deserializer) {\n  const signingScheme = deserializer.deserializeUleb128AsU32();\n  switch (signingScheme) {\n    case SigningScheme.Ed25519:\n      return deserializer.deserialize(Ed25519Signature);\n    case SigningScheme.MultiEd25519:\n      return deserializer.deserialize(MultiEd25519Signature);\n    case SigningScheme.SingleKey:\n      return deserializer.deserialize(AnySignature);\n    // case SigningScheme.MultiKey:\n    //   return deserializer.deserialize(MultiSignature);\n    default:\n      throw new Error(`Unknown signing scheme: ${signingScheme}`);\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  AccountAddress,\n  deserializeFromScriptArgument,\n  Deserializer,\n  Hex,\n  InputGenerateTransactionPayloadData,\n  MoveFunctionId,\n  parseTypeTag,\n  ScriptFunctionArgumentTypes,\n  Serializer,\n  TypeArgument,\n  TypeTag,\n} from '@aptos-labs/ts-sdk';\nimport {\n  deserializeEntryFunctionArgument,\n  EntryFunctionArgument,\n  serializeEntryFunctionArgument,\n} from './EntryFunctionArgument';\n\nexport enum TransactionPayloadInputVariant {\n  EntryFunction,\n  Script,\n  Multisig,\n}\n\n// region Utils\n\nfunction serializeTypeArguments(serializer: Serializer, typeArguments: TypeArgument[]) {\n  serializer.serializeU32AsUleb128(typeArguments.length);\n  for (const typeArgument of typeArguments) {\n    const typeTag =\n      typeof typeArgument === 'string' ? parseTypeTag(typeArgument, { allowGenerics: true }) : typeArgument;\n    serializer.serialize(typeTag);\n  }\n}\n\nfunction deserializeTypeArguments(deserializer: Deserializer) {\n  const typeArguments: TypeTag[] = [];\n  const typeArgumentsLength = deserializer.deserializeUleb128AsU32();\n  for (let i = 0; i < typeArgumentsLength; i += 1) {\n    const typeTag = deserializer.deserialize(TypeTag);\n    typeArguments.push(typeTag);\n  }\n  return typeArguments;\n}\n\nfunction serializeEntryFunctionArguments(serializer: Serializer, functionArguments: EntryFunctionArgument[]) {\n  serializer.serializeU32AsUleb128(functionArguments.length);\n  for (const functionArgument of functionArguments) {\n    serializeEntryFunctionArgument(serializer, functionArgument);\n  }\n}\n\nfunction deserializeEntryFunctionArguments(deserializer: Deserializer) {\n  const functionArgumentsLength = deserializer.deserializeUleb128AsU32();\n  const functionArguments: EntryFunctionArgument[] = [];\n  for (let i = 0; i < functionArgumentsLength; i += 1) {\n    const functionArgument = deserializeEntryFunctionArgument(deserializer);\n    functionArguments.push(functionArgument);\n  }\n  return functionArguments;\n}\n\n// endregion\n\nexport function serializeTransactionPayloadInput(serializer: Serializer, value: InputGenerateTransactionPayloadData) {\n  if ('multisigAddress' in value) {\n    serializer.serializeU32AsUleb128(TransactionPayloadInputVariant.Multisig);\n    serializer.serializeStr(value.function);\n    serializeEntryFunctionArguments(serializer, value.functionArguments);\n    serializeTypeArguments(serializer, value.typeArguments ?? []);\n    const multisigAddress = AccountAddress.from(value.multisigAddress);\n    serializer.serialize(multisigAddress);\n  } else if ('function' in value) {\n    serializer.serializeU32AsUleb128(TransactionPayloadInputVariant.EntryFunction);\n    serializer.serializeStr(value.function);\n    serializeEntryFunctionArguments(serializer, value.functionArguments);\n    serializeTypeArguments(serializer, value.typeArguments ?? []);\n    // TODO: possibly serialize ABI?\n  } else {\n    serializer.serializeU32AsUleb128(TransactionPayloadInputVariant.Script);\n    const bytecode = Hex.fromHexInput(value.bytecode);\n    serializer.serializeBytes(bytecode.toUint8Array());\n    serializer.serializeU32AsUleb128(value.functionArguments.length);\n    for (const argument of value.functionArguments) {\n      argument.serializeForScriptFunction(serializer);\n    }\n    serializeTypeArguments(serializer, value.typeArguments ?? []);\n  }\n}\n\nexport function deserializeTransactionPayloadInput(deserializer: Deserializer): InputGenerateTransactionPayloadData {\n  const variant = deserializer.deserializeUleb128AsU32();\n  switch (variant) {\n    case TransactionPayloadInputVariant.Multisig: {\n      const functionId = deserializer.deserializeStr() as MoveFunctionId;\n      const functionArguments = deserializeEntryFunctionArguments(deserializer);\n      const typeArguments = deserializeTypeArguments(deserializer);\n      const multisigAddress = deserializer.deserialize(AccountAddress);\n      return {\n        function: functionId,\n        functionArguments,\n        multisigAddress,\n        typeArguments,\n      };\n    }\n    case TransactionPayloadInputVariant.EntryFunction: {\n      const functionId = deserializer.deserializeStr() as MoveFunctionId;\n      const functionArguments = deserializeEntryFunctionArguments(deserializer);\n      const typeArguments = deserializeTypeArguments(deserializer);\n      return {\n        function: functionId,\n        functionArguments,\n        typeArguments,\n      };\n    }\n    case TransactionPayloadInputVariant.Script: {\n      const bytecode = deserializer.deserializeBytes();\n      const functionArgumentsLength = deserializer.deserializeUleb128AsU32();\n      const functionArguments: ScriptFunctionArgumentTypes[] = [];\n      for (let i = 0; i < functionArgumentsLength; i += 1) {\n        const argument = deserializeFromScriptArgument(deserializer);\n        functionArguments.push(argument as ScriptFunctionArgumentTypes);\n      }\n      const typeArguments = deserializeTypeArguments(deserializer);\n      return {\n        bytecode,\n        functionArguments,\n        typeArguments,\n      };\n    }\n    default: {\n      throw new Error('Unexpected variant');\n    }\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Deserializer, Ed25519PrivateKey, Network, Serializer } from '@aptos-labs/ts-sdk';\nimport { DappInfo } from '../../shared';\nimport {\n  deserializeWalletRequestWithArgs,\n  SerializedWalletRequest,\n  serializeWalletRequestWithArgs,\n  WalletRequest,\n} from '../../WalletRequest';\nimport { isSupportedNetwork } from '../../helpers';\n\nexport interface ClaimOptions {\n  asset?: string;\n  network: Network;\n  secretKey: Ed25519PrivateKey;\n}\n\nexport interface ConnectRequest extends WalletRequest<ConnectRequest.RequestName, ConnectRequest.SupportedVersions> {\n  args: ConnectRequest.Args;\n}\n\nexport namespace ConnectRequest {\n  export const name = 'connect' as const;\n  export type RequestName = typeof name;\n\n  export const supportedVersions = [1, 2, 3, 4] as const;\n  export type SupportedVersions = (typeof supportedVersions)[number];\n  export const currentVersion = 4 as const;\n  export type CurrentVersion = typeof currentVersion;\n\n  // region Args\n\n  export type Args = {\n    claimOptions?: ClaimOptions;\n    dappEd25519PublicKeyB64?: string;\n    dappId?: string;\n    // Whether to display paired accounts under the specified wallet first\n    preferredWalletName?: string;\n  };\n\n  export function serializeArgs(serializer: Serializer, value: Args) {\n    serializer.serializeOptionStr(value.dappId);\n    serializer.serializeOptionStr(value.dappEd25519PublicKeyB64);\n    serializer.serializeOptionStr(value.preferredWalletName);\n\n    serializer.serializeBool(value.claimOptions !== undefined);\n    if (value.claimOptions) {\n      serializer.serialize(value.claimOptions.secretKey);\n      serializer.serializeStr(value.claimOptions.network);\n      serializer.serializeOptionStr(value.claimOptions.asset);\n      if (!isSupportedNetwork(value.claimOptions.network)) {\n        throw new Error(`Unsupported network '${value.claimOptions.network}'`);\n      }\n    }\n  }\n\n  export function deserializeArgs(deserializer: Deserializer, version: SupportedVersions): Args {\n    if (version === 1) {\n      return {};\n    }\n\n    const dappId = deserializer.deserializeOption('string');\n    const dappEd25519PublicKeyB64 = deserializer.deserializeOption('string');\n    const preferredWalletName = version >= 3 ? deserializer.deserializeOption('string') : undefined;\n\n    const hasClaimOptions = version >= 4 ? deserializer.deserializeBool() : false;\n    let claimOptions: ClaimOptions | undefined;\n    if (hasClaimOptions) {\n      const secretKey = deserializer.deserialize(Ed25519PrivateKey);\n      const network = deserializer.deserializeStr();\n      const asset = deserializer.deserializeOption('string');\n\n      if (!isSupportedNetwork(network)) {\n        throw new Error(`Unsupported network '${network}'`);\n      }\n\n      claimOptions = { asset, network, secretKey };\n    }\n\n    return { claimOptions, dappEd25519PublicKeyB64, dappId, preferredWalletName };\n  }\n\n  // endregion\n\n  export function serialize(\n    dappInfo: DappInfo,\n    args: ConnectRequest.Args = {},\n  ): SerializedWalletRequest<RequestName, CurrentVersion> {\n    return serializeWalletRequestWithArgs({ args, dappInfo, name, version: currentVersion }, serializeArgs);\n  }\n\n  export function deserialize(request: SerializedWalletRequest<RequestName, SupportedVersions>): ConnectRequest {\n    return deserializeWalletRequestWithArgs(request, (d) => deserializeArgs(d, request.version));\n  }\n\n  export function isSerialized(\n    request: SerializedWalletRequest,\n  ): request is SerializedWalletRequest<RequestName, SupportedVersions> {\n    return request.name === name && supportedVersions.includes(request.version as SupportedVersions);\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\n/* eslint-disable no-inner-declarations */\n\nimport { Deserializer, Serializer } from '@aptos-labs/ts-sdk';\nimport { FinalizedPairingData, SerializedDate } from '@identity-connect/api';\nimport { type AccountInfo, deserializeAccountInfo, serializeAccountInfo } from '../../shared';\nimport { makeUserResponseDeserializeFn, makeUserResponseSerializeFn, UserResponse } from '../../UserResponse';\nimport {\n  deserializeWalletResponse,\n  SerializedWalletResponse,\n  serializeWalletResponse,\n  WalletResponseWithArgs,\n} from '../../WalletResponse';\n\nexport interface ConnectResponse extends WalletResponseWithArgs<ConnectResponse.Args> {}\n\nexport namespace ConnectResponse {\n  export const supportedVersions = [1, 2] as const;\n  export type SupportedVersions = (typeof supportedVersions)[number];\n  export const currentVersion = 2 as const;\n\n  // region ApprovalArgs\n\n  export interface ApprovalArgs {\n    account: AccountInfo;\n    pairing?: SerializedDate<FinalizedPairingData>;\n  }\n\n  function serializeApprovalArgsV1(serializer: Serializer, value: ApprovalArgs) {\n    serializeAccountInfo(serializer, value.account);\n  }\n\n  function serializeApprovalArgs(serializer: Serializer, value: ApprovalArgs) {\n    serializeAccountInfo(serializer, value.account);\n    serializer.serializeOptionStr(value.pairing !== undefined ? JSON.stringify(value.pairing) : undefined);\n  }\n\n  function deserializeApprovalArgs(deserializer: Deserializer): ApprovalArgs {\n    const account = deserializeAccountInfo(deserializer);\n    const serializedPairing = deserializer.deserializeOption('string');\n    const pairing = serializedPairing !== undefined ? JSON.parse(serializedPairing) : undefined;\n    return { account, pairing };\n  }\n\n  // endregion\n\n  // region ResponseArgs\n\n  export type Args = UserResponse<ApprovalArgs>;\n\n  const serializeArgsV1 = makeUserResponseSerializeFn(serializeApprovalArgsV1);\n  const serializeArgs = makeUserResponseSerializeFn(serializeApprovalArgs);\n  const deserializeArgs = makeUserResponseDeserializeFn(deserializeApprovalArgs);\n\n  // endregion\n\n  type _Response = ConnectResponse;\n\n  export function serialize(args: Args, version: SupportedVersions = currentVersion): SerializedWalletResponse {\n    return serializeWalletResponse(args, version === 1 ? serializeArgsV1 : serializeArgs);\n  }\n\n  export function deserialize(serializedResponse: SerializedWalletResponse): _Response {\n    return deserializeWalletResponse(serializedResponse, deserializeArgs);\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { DappInfo } from '../../shared';\nimport {\n  deserializeWalletRequest,\n  SerializedWalletRequest,\n  serializeWalletRequest,\n  WalletRequest,\n} from '../../WalletRequest';\n\nexport interface DisconnectRequest\n  extends WalletRequest<DisconnectRequest.RequestName, DisconnectRequest.CurrentVersion> {}\n\nexport namespace DisconnectRequest {\n  export const name = 'disconnect' as const;\n  export type RequestName = typeof name;\n\n  export const currentVersion = 1 as const;\n  export type CurrentVersion = typeof currentVersion;\n\n  export function serialize(dappInfo: DappInfo): SerializedWalletRequest<RequestName, CurrentVersion> {\n    return serializeWalletRequest({ dappInfo, name, version: currentVersion });\n  }\n\n  export function deserialize(request: SerializedWalletRequest<RequestName, CurrentVersion>): DisconnectRequest {\n    return deserializeWalletRequest(request);\n  }\n\n  export function isSerialized(\n    request: SerializedWalletRequest,\n  ): request is SerializedWalletRequest<RequestName, CurrentVersion> {\n    return request.name === name && request.version === currentVersion;\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\n/* eslint-disable no-inner-declarations */\n\nimport {\n  deserializeWalletResponse,\n  SerializedWalletResponse,\n  serializeWalletResponse,\n  WalletResponseWithArgs,\n} from '../../WalletResponse';\n\nexport interface DisconnectResponse extends WalletResponseWithArgs<DisconnectResponse.Args> {}\n\nexport namespace DisconnectResponse {\n  export type Args = {};\n  type _Response = DisconnectResponse;\n\n  export function serialize(args: Args): SerializedWalletResponse {\n    return serializeWalletResponse(args, () => {});\n  }\n\n  export function deserialize(serializedResponse: SerializedWalletResponse): _Response {\n    return deserializeWalletResponse(serializedResponse, () => ({}));\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Deserializer, Network, Serializer } from '@aptos-labs/ts-sdk';\nimport { AptosSignInInput } from '@aptos-labs/wallet-standard';\nimport { DappInfo } from '../../shared';\nimport {\n  deserializeWalletRequestWithArgs,\n  SerializedWalletRequest,\n  serializeWalletRequestWithArgs,\n  WalletRequest,\n} from '../../WalletRequest';\nimport { deserializeAptosSignInInput, serializeAptosSignInInput } from '../../shared/AptosSignInInput';\nimport { isSupportedNetwork } from '../../helpers';\n\nexport interface SignInRequest extends WalletRequest<SignInRequest.RequestName, SignInRequest.SupportedVersions> {\n  args: SignInRequest.Args;\n}\n\nexport namespace SignInRequest {\n  export const name = 'signIn' as const;\n  export type RequestName = typeof name;\n\n  export const supportedVersions = [1] as const;\n  export type SupportedVersions = (typeof supportedVersions)[number];\n\n  export const currentVersion = 1 as const;\n  export type CurrentVersion = typeof currentVersion;\n\n  // region Args\n\n  export type Args = AptosSignInInput & {\n    network: Network;\n  };\n\n  export function serializeArgs(serializer: Serializer, value: Args) {\n    if (value.network !== undefined && !isSupportedNetwork(value.network)) {\n      throw new Error(`Unsupported network '${value.network}' in SignInRequest.serializeArgs`);\n    }\n\n    serializeAptosSignInInput(serializer, value);\n    serializer.serializeStr(value.network);\n  }\n\n  export function deserializeArgs(deserializer: Deserializer, _: SupportedVersions): Args {\n    return { ...deserializeAptosSignInInput(deserializer), network: deserializer.deserializeStr() as Network };\n  }\n\n  // endregion\n\n  export function serialize(\n    dappInfo: DappInfo,\n    args: SignInRequest.Args,\n  ): SerializedWalletRequest<RequestName, CurrentVersion> {\n    return serializeWalletRequestWithArgs({ args, dappInfo, name, version: currentVersion }, serializeArgs);\n  }\n\n  export function deserialize(request: SerializedWalletRequest<RequestName, SupportedVersions>): SignInRequest {\n    return deserializeWalletRequestWithArgs(request, (d) => deserializeArgs(d, request.version));\n  }\n\n  export function isSerialized(\n    request: SerializedWalletRequest,\n  ): request is SerializedWalletRequest<RequestName, SupportedVersions> {\n    return request.name === name && supportedVersions.includes(request.version as SupportedVersions);\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\n/* eslint-disable no-inner-declarations */\n\nimport { Deserializer, Serializer } from '@aptos-labs/ts-sdk';\nimport { AptosSignInOutput } from '@aptos-labs/wallet-standard';\nimport { makeUserResponseDeserializeFn, makeUserResponseSerializeFn, UserResponse } from '../../UserResponse';\nimport {\n  deserializeWalletResponse,\n  SerializedWalletResponse,\n  serializeWalletResponse,\n  WalletResponseWithArgs,\n} from '../../WalletResponse';\nimport { deserializeAptosSignInOutput, serializeAptosSignInOutput } from '../../shared/AptosSignInOutput';\n\nexport interface SignInResponse extends WalletResponseWithArgs<SignInResponse.Args> {}\n\nexport namespace SignInResponse {\n  export const supportedVersions = [1] as const;\n  export type SupportedVersions = (typeof supportedVersions)[number];\n\n  export const currentVersion = 1 as const;\n  export type CurrentVersion = typeof currentVersion;\n\n  // region ApprovalArgs\n\n  export interface ApprovalArgs extends AptosSignInOutput {}\n\n  function serializeApprovalArgs(serializer: Serializer, value: ApprovalArgs) {\n    serializeAptosSignInOutput(serializer, value);\n  }\n\n  function deserializeApprovalArgs(deserializer: Deserializer): ApprovalArgs {\n    return deserializeAptosSignInOutput(deserializer);\n  }\n\n  // endregion\n\n  // region ResponseArgs\n\n  export type Args = UserResponse<ApprovalArgs>;\n\n  const serializeArgs = makeUserResponseSerializeFn(serializeApprovalArgs);\n\n  const deserializeArgs = makeUserResponseDeserializeFn(deserializeApprovalArgs);\n\n  // endregion\n\n  type _Response = SignInResponse;\n\n  export function serialize(args: Args, _: SupportedVersions = currentVersion): SerializedWalletResponse {\n    return serializeWalletResponse(args, serializeArgs);\n  }\n\n  export function deserialize(serializedResponse: SerializedWalletResponse): _Response {\n    return deserializeWalletResponse(serializedResponse, deserializeArgs);\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { DappInfo } from '../../shared';\nimport {\n  deserializeWalletRequest,\n  SerializedWalletRequest,\n  serializeWalletRequest,\n  WalletRequest,\n} from '../../WalletRequest';\n\nexport interface GetConnectedAccountsRequest\n  extends WalletRequest<GetConnectedAccountsRequest.RequestName, GetConnectedAccountsRequest.CurrentVersion> {}\n\nexport namespace GetConnectedAccountsRequest {\n  export const name = 'getConnectedAccounts' as const;\n  export type RequestName = typeof name;\n\n  export const currentVersion = 1 as const;\n  export type CurrentVersion = typeof currentVersion;\n\n  export function serialize(dappInfo: DappInfo): SerializedWalletRequest<RequestName, CurrentVersion> {\n    return serializeWalletRequest({ dappInfo, name, version: currentVersion });\n  }\n\n  export function deserialize(\n    request: SerializedWalletRequest<RequestName, CurrentVersion>,\n  ): GetConnectedAccountsRequest {\n    return deserializeWalletRequest(request);\n  }\n\n  export function isSerialized(\n    request: SerializedWalletRequest,\n  ): request is SerializedWalletRequest<RequestName, CurrentVersion> {\n    return request.name === name && request.version === currentVersion;\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\n/* eslint-disable no-inner-declarations */\n\nimport { Deserializer, Serializer } from '@aptos-labs/ts-sdk';\nimport { type AccountInfo, deserializeAccountInfo, serializeAccountInfo } from '../../shared';\nimport {\n  deserializeWalletResponse,\n  SerializedWalletResponse,\n  serializeWalletResponse,\n  WalletResponseWithArgs,\n} from '../../WalletResponse';\n\nexport interface GetConnectedAccountsResponse extends WalletResponseWithArgs<GetConnectedAccountsResponse.Args> {}\n\nexport namespace GetConnectedAccountsResponse {\n  // region Args\n\n  export type Args = AccountInfo[];\n\n  function serializeArgs(serializer: Serializer, args: Args) {\n    serializer.serializeU32AsUleb128(args.length);\n    for (const account of args) {\n      serializeAccountInfo(serializer, account);\n    }\n  }\n\n  function deserializeArgs(deserializer: Deserializer): Args {\n    const length = deserializer.deserializeUleb128AsU32();\n\n    const accounts: AccountInfo[] = [];\n    for (let i = 0; i < length; i += 1) {\n      accounts.push(deserializeAccountInfo(deserializer));\n    }\n\n    return accounts;\n  }\n\n  // endregion\n\n  type _Response = GetConnectedAccountsResponse;\n\n  export function serialize(args: Args): SerializedWalletResponse {\n    return serializeWalletResponse(args, serializeArgs);\n  }\n\n  export function deserialize(serializedResponse: SerializedWalletResponse): _Response {\n    return deserializeWalletResponse(serializedResponse, deserializeArgs);\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { DappInfo } from '../../shared';\nimport {\n  deserializeWalletRequest,\n  SerializedWalletRequest,\n  serializeWalletRequest,\n  WalletRequest,\n} from '../../WalletRequest';\n\nexport interface IsConnectedRequest\n  extends WalletRequest<IsConnectedRequest.RequestName, IsConnectedRequest.CurrentVersion> {}\n\nexport namespace IsConnectedRequest {\n  export const name = 'isConnected' as const;\n  export type RequestName = typeof name;\n\n  export const currentVersion = 1 as const;\n  export type CurrentVersion = typeof currentVersion;\n\n  export function serialize(dappInfo: DappInfo): SerializedWalletRequest<RequestName, CurrentVersion> {\n    return serializeWalletRequest({ dappInfo, name, version: currentVersion });\n  }\n\n  export function deserialize(request: SerializedWalletRequest<RequestName, CurrentVersion>): IsConnectedRequest {\n    return deserializeWalletRequest(request);\n  }\n\n  export function isSerialized(\n    request: SerializedWalletRequest,\n  ): request is SerializedWalletRequest<RequestName, CurrentVersion> {\n    return request.name === name && request.version === currentVersion;\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\n/* eslint-disable no-inner-declarations */\n\nimport { Deserializer, Serializer } from '@aptos-labs/ts-sdk';\nimport {\n  deserializeWalletResponse,\n  SerializedWalletResponse,\n  serializeWalletResponse,\n  WalletResponseWithArgs,\n} from '../../WalletResponse';\n\nexport interface IsConnectedResponse extends WalletResponseWithArgs<IsConnectedResponse.Args> {}\n\nexport namespace IsConnectedResponse {\n  // region Args\n\n  export type Args = boolean;\n\n  function serializeArgs(serializer: Serializer, value: Args) {\n    serializer.serializeBool(value);\n  }\n\n  function deserializeArgs(deserializer: Deserializer): Args {\n    return deserializer.deserializeBool();\n  }\n\n  // endregion\n\n  type _Response = IsConnectedResponse;\n\n  export function serialize(args: Args): SerializedWalletResponse {\n    return serializeWalletResponse(args, serializeArgs);\n  }\n\n  export function deserialize(serializedResponse: SerializedWalletResponse): _Response {\n    return deserializeWalletResponse(serializedResponse, deserializeArgs);\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  AccountAddress,\n  Deserializer,\n  InputGenerateTransactionPayloadData,\n  Network,\n  Serializer,\n  TransactionPayload,\n} from '@aptos-labs/ts-sdk';\nimport { isSupportedNetwork } from '../../helpers';\nimport {\n  AccountAuthenticatorInput,\n  DappInfo,\n  deserializeAccountAuthenticatorInput,\n  deserializeTransactionPayloadInput,\n  serializeAccountAuthenticatorInput,\n  serializeTransactionPayloadInput,\n} from '../../shared';\nimport {\n  deserializeWalletRequestWithArgs,\n  SerializedWalletRequest,\n  serializeWalletRequestWithArgs,\n  WalletRequest,\n} from '../../WalletRequest';\n\nexport interface SignAndSubmitTransactionRequest\n  extends WalletRequest<\n    SignAndSubmitTransactionRequest.RequestName,\n    SignAndSubmitTransactionRequest.SupportedVersions\n  > {\n  args: SignAndSubmitTransactionRequest.Args;\n}\n\nexport namespace SignAndSubmitTransactionRequest {\n  export const name = 'signAndSubmitTransaction' as const;\n  export type RequestName = typeof name;\n\n  export const supportedVersions = [1, 2, 3] as const;\n  export type SupportedVersions = (typeof supportedVersions)[number];\n  export const currentVersion = 3 as const;\n  export type CurrentVersion = typeof currentVersion;\n\n  // region Args\n\n  export interface Args {\n    expirationTimestamp?: number;\n    feePayer?: AccountAuthenticatorInput;\n    gasUnitPrice?: number;\n    maxGasAmount?: number;\n    network?: Network;\n    payload: TransactionPayload | InputGenerateTransactionPayloadData;\n    signerAddress?: AccountAddress;\n  }\n\n  export function serializeArgs(serializer: Serializer, value: Args) {\n    if (value.network !== undefined && !isSupportedNetwork(value.network)) {\n      throw new Error(`Unsupported network '${value.network}'`);\n    }\n\n    serializer.serializeBool(value.signerAddress !== undefined);\n    if (value.signerAddress !== undefined) {\n      serializer.serialize(value.signerAddress);\n    }\n\n    serializer.serializeOptionStr(value.network);\n\n    if ('bcsToBytes' in value.payload) {\n      serializer.serializeBool(true);\n      serializer.serialize(value.payload);\n    } else {\n      serializer.serializeBool(false);\n      serializeTransactionPayloadInput(serializer, value.payload);\n    }\n\n    serializer.serializeU64(value.expirationTimestamp ?? 0);\n    serializer.serializeU32AsUleb128(value.gasUnitPrice ?? 0);\n    serializer.serializeU32AsUleb128(value.maxGasAmount ?? 0);\n    serializer.serializeU32AsUleb128(value.feePayer ? 1 : 0);\n    if (value.feePayer) {\n      serializeAccountAuthenticatorInput(serializer, value.feePayer);\n    }\n  }\n\n  export function deserializeArgs(deserializer: Deserializer, version: SupportedVersions): Args {\n    const hasSignerAddress = version >= 3 && deserializer.deserializeBool();\n    const signerAddress = hasSignerAddress ? deserializer.deserialize(AccountAddress) : undefined;\n\n    const network = version === 1 ? deserializer.deserializeStr() : deserializer.deserializeOption('string');\n    if (network !== undefined && !isSupportedNetwork(network)) {\n      throw new Error(`Unsupported network '${network}'`);\n    }\n\n    const isPayloadBcsSerializable = version === 1 || deserializer.deserializeBool();\n    const payload = isPayloadBcsSerializable\n      ? deserializer.deserialize(TransactionPayload)\n      : deserializeTransactionPayloadInput(deserializer);\n    const expirationTimestamp = Number(deserializer.deserializeU64());\n    const gasUnitPrice = deserializer.deserializeUleb128AsU32();\n    const maxGasAmount = deserializer.deserializeUleb128AsU32();\n    const hasFeePayer = deserializer.deserializeUleb128AsU32();\n    const feePayer = hasFeePayer ? deserializeAccountAuthenticatorInput(deserializer) : undefined;\n\n    return {\n      expirationTimestamp: expirationTimestamp > 0 ? expirationTimestamp : undefined,\n      feePayer,\n      gasUnitPrice: gasUnitPrice > 0 ? gasUnitPrice : undefined,\n      maxGasAmount: maxGasAmount > 0 ? maxGasAmount : undefined,\n      network,\n      payload,\n      signerAddress,\n    };\n  }\n\n  // endregion\n\n  // region Request\n\n  export function serialize(dappInfo: DappInfo, args: Args): SerializedWalletRequest<RequestName, CurrentVersion> {\n    const request = { args, dappInfo, name, version: currentVersion };\n    return serializeWalletRequestWithArgs(request, serializeArgs);\n  }\n\n  export function deserialize(\n    serializedRequest: SerializedWalletRequest<RequestName, SupportedVersions>,\n  ): SignAndSubmitTransactionRequest {\n    return deserializeWalletRequestWithArgs(serializedRequest, (deserializer) =>\n      deserializeArgs(deserializer, serializedRequest.version),\n    );\n  }\n\n  export function isSerialized(\n    request: SerializedWalletRequest,\n  ): request is SerializedWalletRequest<RequestName, SupportedVersions> {\n    return request.name === name && supportedVersions.includes(request.version as SupportedVersions);\n  }\n\n  // endregion\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\n/* eslint-disable no-inner-declarations */\n\nimport { Deserializer, Serializer } from '@aptos-labs/ts-sdk';\nimport { makeUserResponseDeserializeFn, makeUserResponseSerializeFn, UserResponse } from '../../UserResponse';\nimport {\n  deserializeWalletResponse,\n  SerializedWalletResponse,\n  serializeWalletResponse,\n  WalletResponseWithArgs,\n} from '../../WalletResponse';\n\nexport interface SignAndSubmitTransactionResponse\n  extends WalletResponseWithArgs<SignAndSubmitTransactionResponse.Args> {}\n\nexport namespace SignAndSubmitTransactionResponse {\n  // region ApprovalArgs\n\n  export interface ApprovalArgs {\n    txnHash: string;\n  }\n\n  function serializeApprovalArgs(serializer: Serializer, value: ApprovalArgs) {\n    serializer.serializeStr(value.txnHash);\n  }\n\n  function deserializeApprovalArgs(deserializer: Deserializer): ApprovalArgs {\n    const txnHash = deserializer.deserializeStr();\n    return { txnHash };\n  }\n\n  // endregion\n\n  // region ResponseArgs\n\n  export type Args = UserResponse<ApprovalArgs>;\n\n  const serializeArgs = makeUserResponseSerializeFn(serializeApprovalArgs);\n  const deserializeArgs = makeUserResponseDeserializeFn(deserializeApprovalArgs);\n\n  // endregion\n\n  type _Response = SignAndSubmitTransactionResponse;\n\n  export function serialize(args: Args): SerializedWalletResponse {\n    return serializeWalletResponse(args, serializeArgs);\n  }\n\n  export function deserialize(serializedResponse: SerializedWalletResponse): _Response {\n    return deserializeWalletResponse(serializedResponse, deserializeArgs);\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\n/* eslint-disable no-inner-declarations */\n\nimport { AccountAddress, Deserializer, Serializer } from '@aptos-labs/ts-sdk';\nimport { DappInfo } from '../../shared';\nimport {\n  deserializeWalletRequestWithArgs,\n  SerializedWalletRequest,\n  serializeWalletRequestWithArgs,\n  WalletRequest,\n} from '../../WalletRequest';\n\nexport interface SignMessageRequest\n  extends WalletRequest<SignMessageRequest.RequestName, SignMessageRequest.SupportedVersions> {\n  args: SignMessageRequest.Args;\n}\n\nexport namespace SignMessageRequest {\n  export const name = 'signMessage' as const;\n  export type RequestName = typeof name;\n\n  export const supportedVersions = [1, 2] as const;\n  export type SupportedVersions = (typeof supportedVersions)[number];\n  export const currentVersion = 2 as const;\n  export type CurrentVersion = typeof currentVersion;\n\n  // region Args\n\n  export interface Args {\n    chainId: number;\n    message: Uint8Array;\n    nonce: Uint8Array;\n    signerAddress?: AccountAddress;\n  }\n\n  function serializeArgs(serializer: Serializer, value: Args) {\n    serializer.serializeBool(value.signerAddress !== undefined);\n    if (value.signerAddress !== undefined) {\n      serializer.serialize(value.signerAddress);\n    }\n    serializer.serializeU8(value.chainId);\n    serializer.serializeBytes(value.nonce);\n    serializer.serializeBytes(value.message);\n  }\n\n  function deserializeArgs(deserializer: Deserializer, version: SupportedVersions): Args {\n    const hasSignerAddress = version >= 2 && deserializer.deserializeBool();\n    const signerAddress = hasSignerAddress ? deserializer.deserialize(AccountAddress) : undefined;\n    const chainId = deserializer.deserializeU8();\n    const nonce = deserializer.deserializeBytes();\n    const message = deserializer.deserializeBytes();\n    return { chainId, message, nonce, signerAddress };\n  }\n\n  // endregion\n\n  // region Request\n\n  export function serialize(dappInfo: DappInfo, args: Args): SerializedWalletRequest<RequestName, CurrentVersion> {\n    const request = { args, dappInfo, name, version: currentVersion };\n    return serializeWalletRequestWithArgs(request, serializeArgs);\n  }\n\n  export function deserialize(\n    serializedRequest: SerializedWalletRequest<RequestName, SupportedVersions>,\n  ): SignMessageRequest {\n    return deserializeWalletRequestWithArgs(serializedRequest, (d) => deserializeArgs(d, serializedRequest.version));\n  }\n\n  export function isSerialized(\n    request: SerializedWalletRequest,\n  ): request is SerializedWalletRequest<RequestName, SupportedVersions> {\n    return request.name === name && request.version === currentVersion;\n  }\n\n  // endregion\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\n/* eslint-disable no-inner-declarations */\n\nimport { Deserializer, Serializer, Signature } from '@aptos-labs/ts-sdk';\nimport { deserializeSignature, serializeSignature } from '../../shared';\nimport { makeUserResponseDeserializeFn, makeUserResponseSerializeFn, UserResponse } from '../../UserResponse';\nimport {\n  deserializeWalletResponse,\n  SerializedWalletResponse,\n  serializeWalletResponse,\n  WalletResponseWithArgs,\n} from '../../WalletResponse';\n\nexport interface SignMessageResponse extends WalletResponseWithArgs<SignMessageResponse.Args> {}\n\nexport namespace SignMessageResponse {\n  // region ApprovalArgs\n\n  export interface ApprovalArgs {\n    // Should return message parts\n    fullMessage: string;\n    signature: Signature;\n  }\n\n  function serializeApprovalArgs(serializer: Serializer, value: ApprovalArgs) {\n    serializer.serializeStr(value.fullMessage);\n    serializeSignature(serializer, value.signature);\n  }\n\n  function deserializeApprovalArgs(deserializer: Deserializer): ApprovalArgs {\n    const fullMessage = deserializer.deserializeStr();\n    const signature = deserializeSignature(deserializer);\n    return { fullMessage, signature };\n  }\n\n  // endregion\n\n  // region ResponseArgs\n\n  export type Args = UserResponse<ApprovalArgs>;\n\n  const serializeArgs = makeUserResponseSerializeFn(serializeApprovalArgs);\n  const deserializeArgs = makeUserResponseDeserializeFn(deserializeApprovalArgs);\n\n  // endregion\n\n  type _Response = SignMessageResponse;\n\n  export function serialize(args: Args): SerializedWalletResponse {\n    return serializeWalletResponse(args, serializeArgs);\n  }\n\n  export function deserialize(serializedResponse: SerializedWalletResponse): _Response {\n    return deserializeWalletResponse(serializedResponse, deserializeArgs);\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\n/* eslint-disable no-inner-declarations */\n\nimport {\n  AccountAddress,\n  Deserializer,\n  InputGenerateTransactionPayloadData,\n  Network,\n  PublicKey,\n  RawTransaction,\n  Serializer,\n  TransactionPayload,\n} from '@aptos-labs/ts-sdk';\nimport { chainIdToNetwork, isSupportedNetwork } from '../../helpers';\nimport {\n  AccountInput,\n  DappInfo,\n  deserializeAccountInput,\n  deserializeTransactionPayloadInput,\n  serializeAccountInput,\n  serializeTransactionPayloadInput,\n} from '../../shared';\nimport {\n  deserializeWalletRequestWithArgs,\n  SerializedWalletRequest,\n  serializeWalletRequestWithArgs,\n  WalletRequest,\n} from '../../WalletRequest';\n\nexport interface SignTransactionRequest\n  extends WalletRequest<SignTransactionRequest.RequestName, SignTransactionRequest.SupportedVersions> {\n  args: SignTransactionRequest.Args;\n}\n\nexport namespace SignTransactionRequest {\n  export const name = 'signTransaction' as const;\n  export type RequestName = typeof name;\n\n  export const supportedVersions = [1, 2, 3, 4] as const;\n  export type SupportedVersions = (typeof supportedVersions)[number];\n  export const currentVersion = 4 as const;\n  export type CurrentVersion = typeof currentVersion;\n\n  // region Args\n\n  export interface Args {\n    expirationSecondsFromNow?: number;\n    expirationTimestamp?: number;\n    feePayer?: AccountInput;\n    gasUnitPrice?: number;\n    maxGasAmount?: number;\n    network?: Network;\n    payload: TransactionPayload | InputGenerateTransactionPayloadData;\n    secondarySigners?: AccountInput[];\n    sender?: AccountInput;\n    sequenceNumber?: number | bigint;\n    signerAddress?: AccountAddress;\n  }\n\n  export interface ArgsWithTransaction {\n    feePayer?: AccountInput;\n    secondarySigners?: AccountInput[];\n    senderPublicKey?: PublicKey;\n    signerAddress?: AccountAddress;\n    transaction: RawTransaction;\n  }\n\n  export function normalizeArgs(args: ArgsWithTransaction): Args {\n    const { feePayer, secondarySigners, senderPublicKey, signerAddress, transaction } = args;\n\n    const sender: AccountInput = {\n      address: transaction.sender,\n      publicKey: senderPublicKey,\n    };\n\n    const network = chainIdToNetwork(args.transaction.chain_id.chainId);\n\n    return {\n      expirationTimestamp: Number(transaction.expiration_timestamp_secs),\n      feePayer,\n      gasUnitPrice: Number(transaction.gas_unit_price),\n      maxGasAmount: Number(transaction.max_gas_amount),\n      network,\n      payload: transaction.payload,\n      secondarySigners,\n      sender,\n      signerAddress,\n    };\n  }\n\n  function serializeArgs(serializer: Serializer, value: Args) {\n    if (value.network !== undefined && !isSupportedNetwork(value.network)) {\n      throw new Error(`Unsupported network '${value.network}'`);\n    }\n\n    serializer.serializeBool(value.signerAddress !== undefined);\n    if (value.signerAddress !== undefined) {\n      serializer.serialize(value.signerAddress);\n    }\n\n    serializer.serializeOptionStr(value.network);\n    serializer.serializeBool(value.sender !== undefined);\n    if (value.sender !== undefined) {\n      serializeAccountInput(serializer, value.sender);\n    }\n\n    if ('bcsToBytes' in value.payload) {\n      serializer.serializeBool(true);\n      serializer.serialize(value.payload);\n    } else {\n      serializer.serializeBool(false);\n      serializeTransactionPayloadInput(serializer, value.payload);\n    }\n\n    serializer.serializeU32AsUleb128(value.expirationSecondsFromNow ?? 0);\n    serializer.serializeU64(value.expirationTimestamp ?? 0);\n    serializer.serializeU32AsUleb128(value.gasUnitPrice ?? 0);\n    serializer.serializeU32AsUleb128(value.maxGasAmount ?? 0);\n\n    serializer.serializeBool(value.feePayer !== undefined);\n    if (value.feePayer !== undefined) {\n      serializeAccountInput(serializer, value.feePayer);\n    }\n\n    const secondarySigners = value.secondarySigners ?? [];\n    serializer.serializeU32AsUleb128(secondarySigners.length);\n    for (const signer of secondarySigners) {\n      serializeAccountInput(serializer, signer);\n    }\n  }\n\n  function deserializeArgs(deserializer: Deserializer, version: SupportedVersions): Args {\n    const hasSignerAddress = version >= 3 && deserializer.deserializeBool();\n    const signerAddress = hasSignerAddress ? deserializer.deserialize(AccountAddress) : undefined;\n\n    const network = version === 1 ? deserializer.deserializeStr() : deserializer.deserializeOption('string');\n    if (network !== undefined && !isSupportedNetwork(network)) {\n      throw new Error(`Unsupported network '${network}'`);\n    }\n\n    const hasSender = deserializer.deserializeBool();\n    const sender = hasSender ? deserializeAccountInput(deserializer) : undefined;\n\n    const isPayloadBcsSerializable = version < 4 || deserializer.deserializeBool();\n    const payload = isPayloadBcsSerializable\n      ? deserializer.deserialize(TransactionPayload)\n      : deserializeTransactionPayloadInput(deserializer);\n\n    const expirationSecondsFromNow = deserializer.deserializeUleb128AsU32();\n    const expirationTimestamp = Number(deserializer.deserializeU64());\n    const gasUnitPrice = deserializer.deserializeUleb128AsU32();\n    const maxGasAmount = deserializer.deserializeUleb128AsU32();\n    const hasFeePayer = deserializer.deserializeBool();\n    const feePayer = hasFeePayer ? deserializeAccountInput(deserializer) : undefined;\n\n    const secondarySignersLength = deserializer.deserializeUleb128AsU32();\n    const secondarySigners: AccountInput[] = [];\n    for (let i = 0; i < secondarySignersLength; i += 1) {\n      secondarySigners.push(deserializeAccountInput(deserializer));\n    }\n\n    return {\n      expirationSecondsFromNow: expirationSecondsFromNow > 0 ? expirationSecondsFromNow : undefined,\n      expirationTimestamp: expirationTimestamp > 0 ? expirationTimestamp : undefined,\n      feePayer,\n      gasUnitPrice: gasUnitPrice > 0 ? gasUnitPrice : undefined,\n      maxGasAmount: maxGasAmount > 0 ? maxGasAmount : undefined,\n      network,\n      payload,\n      secondarySigners,\n      sender,\n      signerAddress,\n    };\n  }\n\n  // endregion\n\n  // region Request\n\n  export function serialize(dappInfo: DappInfo, args: Args): SerializedWalletRequest<RequestName, CurrentVersion> {\n    const request = { args, dappInfo, name, version: currentVersion };\n    return serializeWalletRequestWithArgs(request, serializeArgs);\n  }\n\n  export function deserialize(\n    serializedRequest: SerializedWalletRequest<RequestName, SupportedVersions>,\n  ): SignTransactionRequest {\n    return deserializeWalletRequestWithArgs(serializedRequest, (deserializer) =>\n      deserializeArgs(deserializer, serializedRequest.version),\n    );\n  }\n\n  export function isSerialized(\n    request: SerializedWalletRequest,\n  ): request is SerializedWalletRequest<RequestName, SupportedVersions> {\n    return request.name === name && supportedVersions.includes(request.version as SupportedVersions);\n  }\n\n  // endregion\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\n/* eslint-disable no-inner-declarations */\n\nimport { AccountAuthenticator, Deserializer, RawTransaction, Serializer } from '@aptos-labs/ts-sdk';\nimport { makeUserResponseDeserializeFn, makeUserResponseSerializeFn, UserResponse } from '../../UserResponse';\nimport {\n  deserializeWalletResponse,\n  SerializedWalletResponse,\n  serializeWalletResponse,\n  WalletResponseWithArgs,\n} from '../../WalletResponse';\n\nexport interface SignTransactionResponse extends WalletResponseWithArgs<SignTransactionResponse.Args> {}\n\nexport namespace SignTransactionResponse {\n  // region ApprovalArgs\n\n  export interface ApprovalArgs {\n    authenticator: AccountAuthenticator;\n    rawTransaction?: RawTransaction;\n  }\n\n  function serializeApprovalArgs(serializer: Serializer, value: ApprovalArgs) {\n    serializer.serialize(value.authenticator);\n    serializer.serializeBool(value.rawTransaction !== undefined);\n    if (value.rawTransaction !== undefined) {\n      serializer.serialize(value.rawTransaction);\n    }\n  }\n\n  function deserializeApprovalArgs(deserializer: Deserializer): ApprovalArgs {\n    const authenticator = deserializer.deserialize(AccountAuthenticator);\n    const hasRawTransaction = deserializer.deserializeBool();\n    const rawTransaction = hasRawTransaction ? deserializer.deserialize(RawTransaction) : undefined;\n\n    return {\n      authenticator,\n      rawTransaction,\n    };\n  }\n\n  // endregion\n\n  // region ResponseArgs\n\n  export type Args = UserResponse<ApprovalArgs>;\n\n  const serializeArgs = makeUserResponseSerializeFn(serializeApprovalArgs);\n  const deserializeArgs = makeUserResponseDeserializeFn(deserializeApprovalArgs);\n\n  // endregion\n\n  type _Response = SignTransactionResponse;\n\n  export function serialize(args: Args): SerializedWalletResponse {\n    return serializeWalletResponse(args, serializeArgs);\n  }\n\n  export function deserialize(serializedResponse: SerializedWalletResponse): _Response {\n    return deserializeWalletResponse(serializedResponse, deserializeArgs);\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Deserializer, Serializer } from '@aptos-labs/ts-sdk';\nimport { DappInfo, deserializeDappInfo, serializeDappInfo } from './shared';\nimport { DeserializeFn, SerializeFn } from './helpers';\n\nexport interface WalletRequest<RequestName extends string, Version extends number> {\n  dappInfo: DappInfo;\n  name: RequestName;\n  version: Version;\n}\n\nexport interface WalletRequestWithArgs<RequestName extends string, Version extends number, TArgs>\n  extends WalletRequest<RequestName, Version> {\n  args: TArgs;\n}\n\nexport interface SerializedWalletRequest<RequestName extends string = string, Version extends number = number> {\n  data: Uint8Array;\n  name: RequestName;\n  version: Version;\n}\n\nexport function serializeWalletRequest<RequestName extends string, Version extends number>({\n  dappInfo,\n  name,\n  version,\n}: WalletRequest<RequestName, Version>): SerializedWalletRequest<RequestName, Version> {\n  const serializer = new Serializer();\n  serializeDappInfo(serializer, dappInfo);\n  const data = serializer.toUint8Array();\n  return { data, name, version };\n}\n\nexport function deserializeWalletRequest<RequestName extends string, Version extends number>({\n  data,\n  name,\n  version,\n}: SerializedWalletRequest<RequestName, Version>): WalletRequest<RequestName, Version> {\n  const deserializer = new Deserializer(data);\n  const dappInfo = deserializeDappInfo(deserializer);\n  return { dappInfo, name, version };\n}\n\nexport function serializeWalletRequestWithArgs<RequestName extends string, Version extends number, TArgs>(\n  { args, dappInfo, name, version }: WalletRequestWithArgs<RequestName, Version, TArgs>,\n  serializeArgsFn: SerializeFn<TArgs>,\n): SerializedWalletRequest<RequestName, Version> {\n  const serializer = new Serializer();\n  serializeDappInfo(serializer, dappInfo);\n  serializeArgsFn(serializer, args);\n  const data = serializer.toUint8Array();\n  return { data, name, version };\n}\n\nexport function deserializeWalletRequestWithArgs<RequestName extends string, Version extends number, TArgs>(\n  { data, name, version }: SerializedWalletRequest<RequestName, Version>,\n  deserializeArgsFn: DeserializeFn<TArgs>,\n): WalletRequestWithArgs<RequestName, Version, TArgs> {\n  const deserializer = new Deserializer(data);\n  const dappInfo = deserializeDappInfo(deserializer);\n  const args = deserializeArgsFn(deserializer);\n  return { args, dappInfo, name, version };\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Deserializer, Serializer } from '@aptos-labs/ts-sdk';\nimport { DeserializeFn, SerializeFn } from './helpers';\n\nexport interface UserApproval<TApprovalArgs> {\n  args: TApprovalArgs;\n  status: 'approved';\n}\n\nexport interface UserDismissal {\n  status: 'dismissed';\n}\n\nexport type UserResponse<TApprovalArgs> = UserApproval<TApprovalArgs> | UserDismissal;\n\nexport function makeUserApproval<TApprovalArgs>(args: TApprovalArgs): UserApproval<TApprovalArgs> {\n  return { args, status: 'approved' };\n}\n\nexport function makeUserResponseSerializeFn<TArgs>(\n  serializeArgs: SerializeFn<TArgs>,\n): SerializeFn<UserResponse<TArgs>> {\n  return (serializer: Serializer, value: UserResponse<TArgs>) => {\n    serializer.serializeBool(value.status === 'approved');\n    if (value.status === 'approved') {\n      serializeArgs(serializer, value.args);\n    }\n  };\n}\n\nexport function makeUserResponseDeserializeFn<TArgs>(\n  deserializeArgs: DeserializeFn<TArgs>,\n): DeserializeFn<UserResponse<TArgs>> {\n  return (deserializer: Deserializer) => {\n    const isApproved = deserializer.deserializeBool();\n    return isApproved ? { args: deserializeArgs(deserializer), status: 'approved' } : { status: 'dismissed' };\n  };\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Deserializer, Serializer } from '@aptos-labs/ts-sdk';\nimport { DeserializeFn, SerializeFn } from './helpers';\n\nexport interface WalletResponseWithArgs<TResponseArgs> {\n  args: TResponseArgs;\n}\n\nexport interface SerializedWalletResponse {\n  data: Uint8Array;\n}\n\nexport function serializeWalletResponse<TArgs>(args: TArgs, serializeFn: SerializeFn<TArgs>): SerializedWalletResponse {\n  const serializer = new Serializer();\n  serializeFn(serializer, args);\n  const data = serializer.toUint8Array();\n  return { data };\n}\n\nexport function deserializeWalletResponse<TArgs>(\n  { data }: SerializedWalletResponse,\n  deserializeFn: DeserializeFn<TArgs>,\n): WalletResponseWithArgs<TArgs> {\n  const deserializer = new Deserializer(data);\n  const args = deserializeFn(deserializer);\n  return { args };\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Deserializer, Serializer } from '@aptos-labs/ts-sdk';\nimport { AptosSignInInput } from '@aptos-labs/wallet-standard';\n\nexport function serializeAptosSignInInput(serializer: Serializer, value: AptosSignInInput) {\n  serializer.serializeStr(JSON.stringify(value));\n}\n\nexport function deserializeAptosSignInInput(deserializer: Deserializer): AptosSignInInput {\n  return JSON.parse(deserializer.deserializeStr());\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Deserializer, Serializer } from '@aptos-labs/ts-sdk';\nimport { AccountInfo, AptosSignInOutput } from '@aptos-labs/wallet-standard';\nimport { deserializeSignature, serializeSignature } from './Signature';\nimport { serializeAccountInfo, deserializeAccountInfo } from './AccountInfo';\n\nexport function serializeAptosSignInOutput(serializer: Serializer, value: AptosSignInOutput) {\n  serializeAccountInfo(serializer, value.account);\n  serializer.serializeStr(JSON.stringify(value.input));\n  serializer.serializeStr(value.plainText);\n  serializeSignature(serializer, value.signature);\n  serializer.serializeBytes(value.signingMessage);\n  serializer.serializeStr(value.type);\n}\n\nexport function deserializeAptosSignInOutput(deserializer: Deserializer): AptosSignInOutput {\n  return {\n    account: new AccountInfo(deserializeAccountInfo(deserializer)),\n    input: JSON.parse(deserializer.deserializeStr()),\n    plainText: deserializer.deserializeStr(),\n    signature: deserializeSignature(deserializer),\n    signingMessage: deserializer.deserializeBytes(),\n    type: deserializer.deserializeStr(),\n  };\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nexport type TypedMessage<MessageType extends string = string> = { __messageType: MessageType };\nexport type TypedMessageConstructor<TMessage extends TypedMessage<MessageType>, MessageType extends string> = {\n  TYPE: MessageType;\n  new (...args: any[]): TMessage;\n};\n\nexport function isTypedMessage<TMessage extends TypedMessage<MessageType>, MessageType extends string>(\n  messageCls: TypedMessageConstructor<TMessage, MessageType>,\n  message: any,\n): message is TMessage {\n  return message?.__messageType === messageCls.TYPE;\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Deserializer, Serializer } from '@aptos-labs/ts-sdk';\nimport { base64ToBytes, bytesToBase64 } from '../base64';\nimport { SerializedWalletRequest } from '../WalletRequest';\nimport { SerializedWalletResponse } from '../WalletResponse';\nimport { TypedMessage } from './common';\n\nexport class PromptConnectionRequestMessage implements TypedMessage {\n  static readonly TYPE = 'PromptConnectionRequest';\n  readonly __messageType = PromptConnectionRequestMessage.TYPE;\n}\n\nexport class PromptConnectionResponseMessage implements TypedMessage {\n  static readonly TYPE = 'PromptConnectionResponse';\n  readonly __messageType = PromptConnectionResponseMessage.TYPE;\n\n  constructor(public serializedRequest: SerializedWalletRequest) {}\n}\n\nexport class PromptApprovalResponseMessage implements TypedMessage {\n  static readonly TYPE = 'PromptApprovalResponse';\n  readonly __messageType = PromptApprovalResponseMessage.TYPE;\n\n  constructor(public serializedValue: SerializedWalletResponse) {}\n}\n\nexport class PromptUnauthorizedErrorMessage implements TypedMessage {\n  static readonly TYPE = 'PromptUnauthorizedError';\n  readonly __messageType = PromptUnauthorizedErrorMessage.TYPE;\n}\n\nexport function urlEncodeWalletRequest(request: SerializedWalletRequest) {\n  const serializer = new Serializer();\n  serializer.serializeStr(request.name);\n  serializer.serializeBytes(request.data);\n  serializer.serializeStr(request.version.toString());\n  return bytesToBase64(serializer.toUint8Array());\n}\n\nexport function urlDecodeWalletRequest(encodedRequest: string): SerializedWalletRequest {\n  const deserializer = new Deserializer(base64ToBytes(encodedRequest));\n  const name = deserializer.deserializeStr();\n  const data = deserializer.deserializeBytes();\n\n  let version: number;\n  try {\n    version = Number(deserializer.deserializeStr());\n  } catch {\n    version = 1;\n  }\n  return { data, name, version };\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { base64ToBytes, bytesToBase64 } from './base64';\n\nexport interface WalletRequestBody<RequestName extends string = string, Version extends number = number> {\n  data: Uint8Array;\n  name: RequestName;\n  version: Version;\n}\n\nexport function encodeWalletRequestBody({ data, ...rest }: WalletRequestBody): string {\n  const serialized = JSON.stringify({ data, ...rest }, (key, value) => (key === 'data' ? bytesToBase64(value) : value));\n  const utf8Encoded = new TextEncoder().encode(serialized);\n  return bytesToBase64(utf8Encoded);\n}\n\nexport function decodeWalletRequestBody(encoded: string): WalletRequestBody {\n  const utfEncoded = base64ToBytes(encoded);\n  const serialized = new TextDecoder().decode(utfEncoded);\n  return JSON.parse(serialized, (key, value) => (key === 'data' ? base64ToBytes(value) : value));\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  AccountAddress,\n  AccountAddressInput,\n  Ed25519PublicKey,\n  Ed25519Signature,\n  Serializer,\n} from '@aptos-labs/ts-sdk';\nimport { base64ToBytes, base64urlToBytes, bytesToBase64, bytesToBase64url } from './base64';\nimport { decodeWalletRequestBody, encodeWalletRequestBody, type WalletRequestBody } from './WalletRequestBody';\n\nexport interface UnsignedPopupWalletRequest {\n  accountAddress?: AccountAddressInput;\n  body: WalletRequestBody;\n  clientIdentityKey?: undefined;\n}\n\nexport interface BaseSignedPopupWalletRequest {\n  accountAddress?: AccountAddressInput;\n  clientIdentityKey: Ed25519PublicKey;\n  id: string;\n  // against ('AptosConnectWalletRequest', id, body, address, timestamp)\n  signature: Ed25519Signature;\n  timestamp: number;\n}\n\nexport interface DeferredSignedPopupWalletRequest extends BaseSignedPopupWalletRequest {\n  body?: undefined;\n}\n\nexport interface SignedPopupWalletRequest extends BaseSignedPopupWalletRequest {\n  body: WalletRequestBody;\n}\n\nexport type PopupWalletRequest =\n  | UnsignedPopupWalletRequest\n  | DeferredSignedPopupWalletRequest\n  | SignedPopupWalletRequest;\n\nexport function encodePopupWalletRequest(request: PopupWalletRequest): string {\n  const serialized = JSON.stringify(request, (key, value) => {\n    switch (key) {\n      case 'body':\n        return encodeWalletRequestBody(value);\n      case 'clientIdentityKey':\n        return bytesToBase64((value as Ed25519PublicKey).toUint8Array());\n      case 'signature':\n        return bytesToBase64((value as Ed25519Signature).toUint8Array());\n      default:\n        return value;\n    }\n  });\n  const utf8Encoded = new TextEncoder().encode(serialized);\n  return bytesToBase64url(utf8Encoded);\n}\n\nexport function decodePopupWalletRequest(encoded: string): PopupWalletRequest {\n  const utfEncoded = base64urlToBytes(encoded);\n  const serialized = new TextDecoder().decode(utfEncoded);\n  return JSON.parse(serialized, (key, value) => {\n    switch (key) {\n      case 'body':\n        return decodeWalletRequestBody(value);\n      case 'clientIdentityKey':\n        return new Ed25519PublicKey(base64ToBytes(value));\n      case 'signature':\n        return new Ed25519Signature(base64ToBytes(value));\n      default:\n        return value;\n    }\n  });\n}\n\nexport function makePopupWalletRequestChallenge({\n  accountAddress,\n  body,\n  id,\n  timestamp,\n}: Omit<SignedPopupWalletRequest, 'clientIdentityKey' | 'signature'>) {\n  const serializer = new Serializer();\n  serializer.serializeStr('SignedPopupWalletRequest');\n  serializer.serializeStr(id);\n  serializer.serializeU64(timestamp);\n  serializer.serializeBool(accountAddress !== undefined);\n  if (accountAddress !== undefined) {\n    serializer.serialize(AccountAddress.from(accountAddress));\n  }\n  serializer.serializeStr(body.name);\n  serializer.serializeU8(body.version);\n  serializer.serializeBytes(body.data);\n  return serializer.toUint8Array();\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nexport class EncryptionEnvelopeError extends Error {}\n\nexport class EnvelopeMessageMismatchError extends EncryptionEnvelopeError {\n  constructor(\n    message: string,\n    public field: string,\n  ) {\n    super(message);\n    this.name = 'EnvelopeMessageMismatchError';\n    Object.setPrototypeOf(this, EnvelopeMessageMismatchError.prototype);\n  }\n}\n\nexport class DecryptionError extends EncryptionEnvelopeError {\n  constructor(message: string) {\n    super(message);\n    this.name = 'DecryptionError';\n    Object.setPrototypeOf(this, DecryptionError.prototype);\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport nacl from 'tweetnacl';\n\nexport enum KeyTypes {\n  'Ed25519PublicKey' = 'Ed25519PublicKey',\n  'Ed25519SecretKey' = 'Ed25519SecretKey',\n  'X25519PublicKey' = 'X25519PublicKey',\n  'X25519SecretKey' = 'X25519SecretKey',\n}\n\nexport interface IKey<Type extends KeyTypes> {\n  key: Uint8Array;\n  type: Type;\n}\n\nexport type X25519PublicKey = IKey<KeyTypes.X25519PublicKey>;\nexport type X25519SecretKey = IKey<KeyTypes.X25519SecretKey>;\nexport type X25519KeyPair = {\n  publicKey: X25519PublicKey;\n  secretKey: X25519SecretKey;\n};\n\nexport type Ed25519PublicKey = IKey<KeyTypes.Ed25519PublicKey>;\nexport type Ed25519SecretKey = IKey<KeyTypes.Ed25519SecretKey>;\nexport type Ed25519KeyPair = {\n  publicKey: Ed25519PublicKey;\n  secretKey: Ed25519SecretKey;\n};\n\nexport type RawKeyPair = {\n  publicKey: Uint8Array;\n  secretKey: Uint8Array;\n};\n\nexport function createX25519KeyPair(): X25519KeyPair {\n  return keypairToX25519(nacl.box.keyPair());\n}\n\nexport function createEd25519KeyPair(): Ed25519KeyPair {\n  return keypairToEd25519(nacl.sign.keyPair());\n}\n\nexport function toKey<Type extends KeyTypes = KeyTypes>(\n  rawKey: Uint8Array,\n  type: Type,\n): Type extends KeyTypes.Ed25519PublicKey\n  ? Ed25519PublicKey\n  : Type extends KeyTypes.Ed25519SecretKey\n    ? Ed25519SecretKey\n    : Type extends KeyTypes.X25519PublicKey\n      ? X25519PublicKey\n      : Type extends KeyTypes.X25519SecretKey\n        ? X25519SecretKey\n        : never {\n  return {\n    key: rawKey,\n    type,\n  } as any;\n}\n\nexport function keypairToEd25519(keyPair: RawKeyPair): Ed25519KeyPair {\n  return {\n    publicKey: toKey(keyPair.publicKey, KeyTypes.Ed25519PublicKey),\n    secretKey: toKey(keyPair.secretKey, KeyTypes.Ed25519SecretKey),\n  };\n}\n\nexport function keypairToX25519(keyPair: RawKeyPair): X25519KeyPair {\n  return {\n    publicKey: toKey(keyPair.publicKey, KeyTypes.X25519PublicKey),\n    secretKey: toKey(keyPair.secretKey, KeyTypes.X25519SecretKey),\n  };\n}\n\nexport function aptosAccountToEd25519Keypair(account: { signingKey: nacl.SignKeyPair }) {\n  return ed25519KeypairFromSecret(account.signingKey.secretKey);\n}\n\nexport function ed25519KeypairFromSecret(ed25519SecretKeyBytes: Uint8Array): Ed25519KeyPair {\n  return keypairToEd25519(nacl.sign.keyPair.fromSeed(ed25519SecretKeyBytes.slice(0, 32)));\n}\n\nexport function decodeBase64(base64Str: string): Uint8Array {\n  if (globalThis.Buffer) {\n    return new Uint8Array(Buffer.from(base64Str, 'base64'));\n  }\n  return Uint8Array.from(atob(base64Str), (m) => m.codePointAt(0)!);\n}\n\nexport function encodeBase64(bytes: Uint8Array): string {\n  if (globalThis.Buffer) {\n    return Buffer.from(bytes).toString('base64');\n  }\n  return btoa(Array.from(bytes, (x) => String.fromCodePoint(x)).join(''));\n}\n\nexport function concatUint8array(arrayOne: Uint8Array, arrayTwo: Uint8Array): Uint8Array {\n  const mergedArray = new Uint8Array(arrayOne.length + arrayTwo.length);\n  mergedArray.set(arrayOne);\n  mergedArray.set(arrayTwo, arrayOne.length);\n  return mergedArray;\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Ed25519Signature, PublicKey, Signature } from '@aptos-labs/ts-sdk';\nimport { sha3_256 } from '@noble/hashes/sha3';\nimport nacl from 'tweetnacl';\nimport ed2curve from 'ed2curve';\nimport { DecryptionError } from './errors';\nimport {\n  concatUint8array,\n  decodeBase64,\n  Ed25519PublicKey,\n  Ed25519SecretKey,\n  encodeBase64,\n  KeyTypes,\n  toKey,\n  X25519PublicKey,\n  X25519SecretKey,\n} from './utils';\n\n// This callback takes in a message bytes, and signs it.\n// THIS DOES NOT PERFORM DOMAIN SEPARATION: IT IS ASSUMED OUR LIBRARY ALREADY DID IT.\n// This is to support hardware wallets.\nexport type SignCallback = (message: Uint8Array) => Promise<Signature>;\n\nexport type SignaturePurpose = 'TRANSPORT_KEYPAIR' | 'ACCOUNT_INFO' | 'SECURED_ENVELOPE';\n\nexport const SIGNATURE_PREFIX = 'APTOS::IDENTITY_CONNECT';\n\nexport type EncryptionResult = {\n  nonce: Uint8Array;\n  secured: Uint8Array;\n};\n\nexport type SerializedEncryptionResult = {\n  nonceB64: string;\n  securedB64: string;\n};\n\n/**\n * Converts an Ed25519 public key to an X25519 public key\n * HERE THERE BE DRAGONS. ONLY USE THIS IF YOU KNOW WHAT YOU ARE DOING.\n * @param ed25519PublicKey The Ed25519 public key to convert\n * @param errorKeyName The name of the key to use in error messages\n */\nexport function convertEd25519PublicKeyToX25519PublicKey(\n  ed25519PublicKey: Ed25519PublicKey,\n  errorKeyName: string,\n): X25519PublicKey {\n  const x25519PublicKey = ed2curve.convertPublicKey(ed25519PublicKey.key.slice(0, 32));\n  if (!x25519PublicKey) throw new Error(`${errorKeyName} is not a valid Ed25519 public key`);\n  return toKey(x25519PublicKey, KeyTypes.X25519PublicKey);\n}\n\n/**\n * Converts an Ed25519 secret key to an X25519 secret key\n * HERE THERE BE DRAGONS. ONLY USE THIS IF YOU KNOW WHAT YOU ARE DOING.\n * @param ed25519SecretKey The Ed25519 secret key to convert\n */\nexport function convertEd25519SecretKeyToX25519SecretKey(ed25519SecretKey: Ed25519SecretKey): X25519SecretKey {\n  const x25519SecretKey = ed2curve.convertSecretKey(ed25519SecretKey.key.slice(0, 32));\n  return toKey(x25519SecretKey, KeyTypes.X25519SecretKey);\n}\nexport function serializeEncryptionResult(enc: EncryptionResult): SerializedEncryptionResult {\n  return {\n    nonceB64: encodeBase64(enc.nonce),\n    securedB64: encodeBase64(enc.secured),\n  };\n}\n\nexport function deserializeEncryptionResult(enc: SerializedEncryptionResult): EncryptionResult {\n  return {\n    nonce: decodeBase64(enc.nonceB64),\n    secured: decodeBase64(enc.securedB64),\n  };\n}\n\n/**\n * Decrypts a `SerializedEncryptionResult` to an object\n * Uses the sender's X25519 public key and receiver's Ed25519 secret key\n * The receivers Ed25519 secret key is converted to an X25519 secret key for the Diffie-Hellman key exchange\n * @param senderX25519PublicKey The sender's X25519 public key\n * @param receiverEd25519SecretKey The receiver's Ed25519 secret key\n * @param enc The serialized encryption result\n */\nexport function decryptSerializedEncryptionResult<T>(\n  senderX25519PublicKey: X25519PublicKey,\n  receiverEd25519SecretKey: Ed25519SecretKey,\n  enc: SerializedEncryptionResult,\n): T {\n  const des = deserializeEncryptionResult(enc);\n  return decryptObject<T>(senderX25519PublicKey, receiverEd25519SecretKey, des.secured, des.nonce);\n}\n\n/**\n * Decrypts a `SerializedEncryptionResult` to an object\n * Uses the sender's X25519 public key and receiver's X25519 secret key\n * @param senderX25519PublicKey The sender's X25519 public key\n * @param receiverX25519SecretKey The receiver's X25519 secret key\n * @param enc The serialized encryption result\n */\nexport function decryptSerializedEncryptionResultDirect<T>(\n  senderX25519PublicKey: X25519PublicKey,\n  receiverX25519SecretKey: X25519SecretKey,\n  enc: SerializedEncryptionResult,\n): T {\n  const des = deserializeEncryptionResult(enc);\n  return decryptObjectDirect<T>(senderX25519PublicKey, receiverX25519SecretKey, des.secured, des.nonce);\n}\n\n/**\n * Encrypts a string, by using the sender's X25519 secret key and receiver's Ed25519 public key\n * The receiver's Ed25519 public key is converted to an X25519 public key for the Diffie-Hellman key exchange\n * @param senderX25519SecretKey The sender's X25519 secret key\n * @param receiverEd25519PublicKey The receiver's Ed25519 public key\n * @param message The message to encrypt\n */\nexport function encryptMessage(\n  senderX25519SecretKey: X25519SecretKey,\n  receiverEd25519PublicKey: Ed25519PublicKey,\n  message: string,\n): EncryptionResult {\n  // Encrypt the message with the receiver's public key and sender's secret key\n  const receiverX25519PublicKey = convertEd25519PublicKeyToX25519PublicKey(\n    receiverEd25519PublicKey,\n    'receiver public key',\n  );\n  return encryptMessageDirect(senderX25519SecretKey, receiverX25519PublicKey, message);\n}\n\n/**\n * Encrypts a string, by using the sender's X25519 secret key and receiver's X25519 public key\n * @param senderX25519SecretKey The sender's X25519 secret key\n * @param receiverX25519PublicKey The receiver's X25519 public key\n * @param message The message to encrypt\n */\nexport function encryptMessageDirect(\n  senderX25519SecretKey: X25519SecretKey,\n  receiverX25519PublicKey: X25519PublicKey,\n  message: string,\n): EncryptionResult {\n  // Generate a random nonce\n  const nonce = nacl.randomBytes(nacl.box.nonceLength);\n\n  // Convert the message to a Uint8Array\n  const messageUint8 = new TextEncoder().encode(message);\n\n  const secured = nacl.box(messageUint8, nonce, receiverX25519PublicKey.key, senderX25519SecretKey.key.slice(0, 32));\n\n  return { nonce, secured };\n}\n\n/**\n * Encrypts an object to a string, by using the sender's X25519 secret key and receiver's Ed25519 public key\n * The receiver's Ed25519 public key is converted to an X25519 public key for the Diffie-Hellman key exchange\n * @param senderX25519SecretKey The sender's X25519 secret key\n * @param receiverEd25519PublicKey The receiver's Ed25519 public key\n * @param message The message to encrypt\n */\nexport function encryptObject<T>(\n  senderX25519SecretKey: X25519SecretKey,\n  receiverEd25519PublicKey: Ed25519PublicKey,\n  message: T,\n): EncryptionResult {\n  const receiverX25519PublicKey = convertEd25519PublicKeyToX25519PublicKey(\n    receiverEd25519PublicKey,\n    'receiver public key',\n  );\n  return encryptObjectDirect(senderX25519SecretKey, receiverX25519PublicKey, message);\n}\n\n/**\n * Encrypts an object to a string, by using the sender's X25519 secret key and receiver's X25519 public key\n * @param senderX25519SecretKey The sender's X25519 secret key\n * @param receiverX25519PublicKey The receiver's X25519 public key\n * @param message The message to encrypt\n */\nexport function encryptObjectDirect<T>(\n  senderX25519SecretKey: X25519SecretKey,\n  receiverX25519PublicKey: X25519PublicKey,\n  message: T,\n): EncryptionResult {\n  return encryptMessageDirect(senderX25519SecretKey, receiverX25519PublicKey, JSON.stringify(message));\n}\n\n/**\n * Decrypts a string, by using the sender's X25519 public key and receiver's Ed25519 secret key\n * The receivers Ed25519 secret key is converted to an X25519 secret key for the Diffie-Hellman key exchange\n * @param senderX25519PublicKey The sender's X25519 public key\n * @param receiverEd25519SecretKey The receiver's Ed25519 secret key\n * @param securedMessage The message to decrypt\n * @param nonce The nonce used to encrypt the message\n */\nexport function decryptMessage(\n  senderX25519PublicKey: X25519PublicKey,\n  receiverEd25519SecretKey: Ed25519SecretKey,\n  securedMessage: Uint8Array,\n  nonce: Uint8Array,\n): string {\n  // Decrypt the message with the receiver's secret key and sender's public key\n  const receiverX25519SecretKey = convertEd25519SecretKeyToX25519SecretKey(receiverEd25519SecretKey);\n  return decryptMessageDirect(senderX25519PublicKey, receiverX25519SecretKey, securedMessage, nonce);\n}\n\n/**\n * Decrypts a string, by using the sender's X25519 public key and receiver's X25519 secret key\n * @param senderX25519PublicKey The sender's X25519 public key\n * @param receiverX25519SecretKey The receiver's X25519 secret key\n * @param securedMessage The message to decrypt\n * @param nonce The nonce used to encrypt the message\n */\nexport function decryptMessageDirect(\n  senderX25519PublicKey: X25519PublicKey,\n  receiverX25519SecretKey: X25519SecretKey,\n  securedMessage: Uint8Array,\n  nonce: Uint8Array,\n): string {\n  let decryptedUint8;\n  try {\n    decryptedUint8 = nacl.box.open(\n      securedMessage,\n      nonce,\n      senderX25519PublicKey.key.slice(0, 32),\n      receiverX25519SecretKey.key.slice(0, 32),\n    );\n  } catch (e: any) {\n    throw new DecryptionError(`Could not decrypt message: ${e.message}`);\n  }\n  if (!decryptedUint8) throw new DecryptionError('Could not decrypt message');\n\n  // Convert the decrypted Uint8Array back to a string\n  return new TextDecoder().decode(decryptedUint8);\n}\n\n/**\n * Decrypts an object, by using the sender's X25519 public key and receiver's Ed25519 secret key\n * The receivers Ed25519 secret key is converted to an X25519 secret key for the Diffie-Hellman key exchange\n * @param senderX25519PublicKey The sender's X25519 public key\n * @param receiverEd25519SecretKey The receiver's Ed25519 secret key\n * @param securedMessage The message to decrypt\n * @param nonce The nonce used to encrypt the message\n */\nexport function decryptObject<T>(\n  senderX25519PublicKey: X25519PublicKey,\n  receiverEd25519SecretKey: Ed25519SecretKey,\n  securedMessage: Uint8Array,\n  nonce: Uint8Array,\n): T {\n  const receiverX25519SecretKey = convertEd25519SecretKeyToX25519SecretKey(receiverEd25519SecretKey);\n  return decryptObjectDirect<T>(senderX25519PublicKey, receiverX25519SecretKey, securedMessage, nonce);\n}\n\n/**\n * Decrypts an object, by using the sender's X25519 public key and receiver's X25519 secret key\n * @param senderX25519PublicKey The sender's X25519 public key\n * @param receiverX25519SecretKey The receiver's X25519 secret key\n * @param securedMessage The message to decrypt\n * @param nonce The nonce used to encrypt the message\n */\nexport function decryptObjectDirect<T>(\n  senderX25519PublicKey: X25519PublicKey,\n  receiverX25519SecretKey: X25519SecretKey,\n  securedMessage: Uint8Array,\n  nonce: Uint8Array,\n): T {\n  const decryptedStr = decryptMessageDirect(senderX25519PublicKey, receiverX25519SecretKey, securedMessage, nonce);\n  return JSON.parse(decryptedStr) as T;\n}\n\n/**\n * Hashes a message with a purpose-specific prefix using SHA-3 256-bit algorithm.\n * The purpose prefix is constructed as `'APTOS::IDENTITY_CONNECT' + '::' + purpose + '::'`\n * This is to prevent hash collisions with other services, uses, and purposes\n * @param message The message to hash as a Uint8Array.\n * @param purpose The purpose of the signature.\n * @returns Uint8Array The hashed message as a Uint8Array\n */\nexport function messageHash(message: Uint8Array, purpose: SignaturePurpose) {\n  const signaturePrefixHash = new Uint8Array(sha3_256(`${SIGNATURE_PREFIX}::${purpose}::`));\n  return new Uint8Array(sha3_256(concatUint8array(signaturePrefixHash, message)));\n}\n\nexport function signWithEd25519SecretKey(\n  message: Uint8Array,\n  signingEd25519SecretKey: Ed25519SecretKey,\n  purpose: SignaturePurpose,\n) {\n  return nacl.sign.detached(messageHash(message, purpose), signingEd25519SecretKey.key);\n}\n\n// This assumes that domain separation has already happened: this emulates the behavior of a hardware device\nexport function makeEd25519SecretKeySignCallbackNoDomainSeparation(\n  signingEd25519SecretKey: Ed25519SecretKey,\n): SignCallback {\n  return async (message: Uint8Array) => new Ed25519Signature(nacl.sign.detached(message, signingEd25519SecretKey.key));\n}\n\nexport function verifySignature(\n  message: Uint8Array,\n  signature: Signature,\n  signingPublicKey: PublicKey,\n  purpose: SignaturePurpose,\n): boolean {\n  return signingPublicKey.verifySignature({ message: messageHash(message, purpose), signature });\n}\n\nexport function hashAndVerifySignature(\n  message: string | Uint8Array,\n  signature: Signature,\n  signingPublicKey: PublicKey,\n  purpose: SignaturePurpose,\n): boolean {\n  const messageUint8 = message instanceof Uint8Array ? message : new TextEncoder().encode(message);\n  const messageUint8Hash = sha3_256(messageUint8);\n  return verifySignature(messageUint8Hash, signature, signingPublicKey, purpose);\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Ed25519PublicKey as AptosEd25519PublicKey, Ed25519Signature, Hex } from '@aptos-labs/ts-sdk';\nimport { sha3_256 } from '@noble/hashes/sha3';\nimport {\n  createX25519KeyPair,\n  decodeBase64,\n  Ed25519PublicKey,\n  Ed25519SecretKey,\n  encodeBase64,\n  X25519KeyPair,\n  KeyTypes,\n  toKey,\n  X25519PublicKey,\n} from './utils';\nimport { EnvelopeMessageMismatchError } from './errors';\nimport {\n  SerializedEncryptionResult,\n  SignCallback,\n  decryptObject,\n  encryptObject,\n  serializeEncryptionResult,\n  deserializeEncryptionResult,\n  verifySignature,\n  signWithEd25519SecretKey,\n} from './encrDecr';\n\n/**\n * When sending messages back and forth, there are some things that Identity Connect must know to function and provide\n * security for users, and dApps and wallets need to know that any messages sent to one another were sent (and\n * received) by the expected parties.\n *\n * To allow for secure communication between parties, we are introducing the\n * *SecuredEnvelope*. This envelope provides a secure channel for parties to encrypt private messages, *and*\n * authenticate one another, while allowing IC to route requests and block invalid messages.\n *\n * The envelope can be thought of as a wrapper around the JSON payload of a POST/PUT request T, and has two parts:\n * `messagePrivate`: This contains some of the parameters of `T`, which will be signed by the sender and encrypted\n *                   with the recipient's public key.\n * `publicMessage`: This field is sent unencrypted, but signed so that the IC endpoint can do basic validation before\n *                  processing. The parameters in `publicMessage` are DISJOINT from `messagePrivate`, and are invalid\n *                  otherwise: there are no keys in `messagePrivate` that also appear in `publicMessage`. It must\n *                  contain a ``_metadata`` field with security features like the timestamp, public keys, sequence\n *                  number, etc.\n *\n * Both IC and dApps can verify, on chain, that the senders’ keys match their address and that they are speaking\n * with who they expect. Encryption is done with an X25519 key derived from the ED25519 PublicKey of the wallet\n * account that is connecting (this allows for seamless cross-device account access), and an ephemeral X25519 KeyPair,\n * of which the SecretKey is thrown away after encryption. Decryption uses the X25519 key derived from the receiver\n * ED25519 SecretKey.\n *\n * Account private keys Ska (and their counterpart X25519 keys) are only used to decrypt and sign:\n * THEY ARE NEVER USED TO ENCRYPT!\n *\n * Operations follow the Cryptographic Doom Principle:\n *   Always verify the signature of the message before any other cryptographic operations\n * https://moxie.org/2011/12/13/the-cryptographic-doom-principle.html\n *\n *\n * To send a `SecuredEnvelope` over the wire, it must first be turned into a `SecuredEnvelopeTransport` - this\n * involves:\n * 1. Encrypting and serializing the `privateMessage` field to an `encryptedPrivateMessage`field.\n *     a. Generate ephemeral X25519 sender keypair `xPkse/xSkse`. The `xPkse` becomes the `senderX25519PublicKeyB64` in\n *      the `EnvelopeMetadata`.\n *     b. Convert the `receiverEd25519PublicKey` to a `receiverX25519PublicKey` - `xPkr`\n *     c. Generate a random `nonce` for the `[nacl.box](http://nacl.box)` encryption\n *     d. Encrypt the `privateMessage` using `[nacl.box](http://nacl.box)` with the `xSkse` and `xPkr`\n *     e. Package this encrypted data, and the `nonce`, into a `SerializedEncryptionResult`\n * 2. JSON serializing the `publicMessage` field into a `serializedPublicMessage`. We don’t care about canonical\n *    serialization/ordering as the sender signs over this serialized string.\n * 3.  Now that we have the private `encryptedPrivateMessage` and public `serializedPublicMessage` we can generate the\n *    `messageSignature`:\n *     a. Hash the `SHA3-256(encryptedPublicMessage)` to get `publicMessageHash`\n *     b. Hash the `SHA3-256(encryptedPrivateMessage)` to get `privateMessageHash`\n *     c. Hash `SHA3-256(publicMessageHash | privateMessageHash)` to get `combinedMessageHash`\n *     d. Get the `domainSeparatedMessageHash` by hashing the `combinedMessageHash` with a domain separator:\n *        `SHA3-256(SHA3-256('APTOS::IDENTITY_CONNECT::') | combinedMessageHash)`\n *     e. To obtain the final `messageSignature`, we sign the `domainSeparatedMessageHash` with the Ed25519 private\n *        key of the sender, and hex encode it.\n * 4. This creates the final `SecuredEnvelopeTransport` object, ready to be JSON serialized and sent in an HTTP\n *    request\n */\n\nexport const REQUIRED_FIELDS: (keyof EnvelopeMetadata)[] = [\n  'receiverEd25519PublicKeyB64',\n  'senderEd25519PublicKeyB64',\n  'senderX25519PublicKeyB64',\n  'sequence',\n  'timestampMillis',\n].sort() as (keyof EnvelopeMetadata)[];\n\n// The publicMessage._metadata field looks like this:\nexport type EnvelopeMetadata = {\n  // The receiver's public key, base64\n  receiverEd25519PublicKeyB64: string;\n  // The sender public key, base64\n  senderEd25519PublicKeyB64: string;\n  // The senders X25519 public key, base64\n  senderX25519PublicKeyB64: string;\n  // The sequence of the sender.\n  // This number only goes up, to prevent relay attacks\n  // This exists per pairing\n  // dApps, wallets, accounts, etc are expected to keep track of them\n  // IC will reject out-of-order sequence numbers\n  sequence: number;\n  // The timestamp this message was sent at\n  // IC will reject if it's in the future or older than 5 minutes\n  timestampMillis: number;\n};\n\nexport interface IEnvelopeMetadata extends Message {\n  _metadata: EnvelopeMetadata;\n}\n\n// A message- whether the `Public` or `Private` component- is a JSON object.\n// As such, we know that the keys are strings, and the values are any JSON-serializable type ('unknown')\nexport type Message = Record<string, unknown>;\n\nexport type SecuredEnvelope<Public extends Message> = {\n  encryptedPrivateMessage: SerializedEncryptionResult;\n  messageSignature: string;\n  publicMessage: Public & IEnvelopeMetadata;\n};\n\nexport type SecuredEnvelopeTransport = {\n  encryptedPrivateMessage: SerializedEncryptionResult;\n  messageSignature: string;\n  serializedPublicMessage: string;\n};\n\nexport type DecryptedEnvelope<\n  Public extends Message & { [K in keyof Private]?: never },\n  Private extends Message & { [K in keyof Public]?: never },\n> = {\n  messageSignature: string;\n  privateMessage: Private;\n  publicMessage: Public & IEnvelopeMetadata;\n};\n\nexport type DeserializedTransportEnvelope<Public extends Message> = SecuredEnvelopeTransport & SecuredEnvelope<Public>;\n\nexport type SignCallbackOrEd25519SecretKey = SignCallback | Ed25519SecretKey;\n\nexport function ensurePrivatePublicFieldsDisjoint<\n  Public extends Message & { [K in keyof Private]?: never },\n  Private extends Message & { [K in keyof Public]?: never },\n>(privateMessage: Private, publicMessage: Public) {\n  // gets all fields in privateMessage that are also in publicMessage\n  const intersection = Object.keys(privateMessage).filter((x) => Object.keys(publicMessage).includes(x));\n  if (intersection.length > 0) {\n    const field = intersection[0];\n    throw new EnvelopeMessageMismatchError(`Field ${field} appears in both private and public message fields`, field);\n  }\n}\n\nexport function ensureMetadataFields(message: EnvelopeMetadata) {\n  // ensure ONLY the fields in REQUIRED_FIELDS are present in message. Sort asc.\n  const messageKeys = Object.keys(message).sort();\n  const extraFields = messageKeys.filter((key) => !REQUIRED_FIELDS.includes(key as any));\n  const missingFields = REQUIRED_FIELDS.filter((key) => !messageKeys.includes(key as any));\n  if (extraFields.length > 0 || missingFields.length > 0) {\n    let extraFieldsStr = extraFields.length > 0 ? `extra(${extraFields.join(', ')})` : '';\n    const missingFieldsStr = missingFields.length > 0 ? `missing(${missingFields.join(', ')})` : '';\n    extraFieldsStr = extraFieldsStr.length > 0 && missingFieldsStr.length > 0 ? `${extraFieldsStr}, ` : extraFieldsStr;\n    throw new EnvelopeMessageMismatchError(\n      `PublicMessage metadata fields do not conform to spec: ${extraFieldsStr}${missingFieldsStr}`,\n      '_metadata',\n    );\n  }\n}\n\nexport function deserializeTransportEnvelope<Public extends Message>(\n  transportEnvelope: SecuredEnvelopeTransport,\n): DeserializedTransportEnvelope<Public> {\n  const publicMessage = JSON.parse(transportEnvelope.serializedPublicMessage) as Public & IEnvelopeMetadata;\n  return {\n    ...transportEnvelope,\n    publicMessage,\n  };\n}\n\n// This signs with the senders ed25519 private key,\n// but encrypts with an ephemeral X25519 keyPair + the receivers x25519 public key (converted from their ed25519 key)\n// This is so that the private key IS ONLY EVER USED FOR DECRYPTION, NEVER FOR ENCRYPTION\nexport function encryptAndSignEnvelope<\n  Public extends Message & { [K in keyof Private]?: never },\n  Private extends Message & { [K in keyof Public]?: never },\n>(\n  senderEd25519SecretKey: Ed25519SecretKey,\n  senderEd25519PublicKey: Ed25519PublicKey,\n  receiverEd25519PublicKey: Ed25519PublicKey,\n  sequence: number,\n  publicMessage: Public,\n  privateMessage: Private,\n): SecuredEnvelopeTransport {\n  const senderEphemeralX25519KeyPair = createX25519KeyPair();\n  const metadata = constructMetadata(\n    senderEd25519PublicKey,\n    receiverEd25519PublicKey,\n    sequence,\n    senderEphemeralX25519KeyPair.publicKey,\n  );\n\n  ensureMetadataFields(metadata);\n  ensurePrivatePublicFieldsDisjoint<Public, Private>(privateMessage, publicMessage);\n\n  return dangerouslyEncryptAndSignEnvelopeUnvalidated(\n    senderEd25519SecretKey,\n    receiverEd25519PublicKey,\n    metadata,\n    privateMessage,\n    publicMessage,\n    senderEphemeralX25519KeyPair,\n  );\n}\n\nexport function constructMetadata(\n  senderEd25519PublicKey: Ed25519PublicKey,\n  receiverEd25519PublicKey: Ed25519PublicKey,\n  sequence: number,\n  senderEphemeralX25519PublicKey: X25519PublicKey,\n): EnvelopeMetadata {\n  // This is used for SIGNING ONLY!\n  return {\n    receiverEd25519PublicKeyB64: encodeBase64(receiverEd25519PublicKey.key),\n    senderEd25519PublicKeyB64: encodeBase64(senderEd25519PublicKey.key),\n    senderX25519PublicKeyB64: encodeBase64(senderEphemeralX25519PublicKey.key),\n    sequence,\n    timestampMillis: Date.now(),\n  };\n}\n\nexport function dangerouslyEncryptAndSignEnvelopeUnvalidated<\n  Public extends Message & { [K in keyof Private]?: never },\n  Private extends Message & { [K in keyof Public]?: never },\n>(\n  senderEd25519SecretKey: Ed25519SecretKey,\n  receiverEd25519PublicKey: Ed25519PublicKey,\n  metadata: EnvelopeMetadata,\n  privateMessage: Private,\n  publicMessage: Public,\n  senderEphemeralX25519KeyPair: X25519KeyPair,\n): SecuredEnvelopeTransport {\n  const encryptionResult = encryptObject(\n    senderEphemeralX25519KeyPair.secretKey,\n    receiverEd25519PublicKey,\n    privateMessage,\n  );\n  const encryptedPrivateMessage = serializeEncryptionResult(encryptionResult);\n  const encryptedPrivateMessageBytes = decodeBase64(encryptedPrivateMessage.securedB64);\n  const serializedPublicMessage = JSON.stringify({ ...publicMessage, _metadata: metadata });\n  const publicMessageBytes = new TextEncoder().encode(serializedPublicMessage);\n  const messageSignature = signEnvelope(publicMessageBytes, encryptedPrivateMessageBytes, senderEd25519SecretKey);\n  return {\n    encryptedPrivateMessage,\n    messageSignature,\n    serializedPublicMessage,\n  };\n}\n\nfunction combineHashedEnvelopeMessageBytes(\n  publicMessageBytes: Uint8Array,\n  privateMessageBytes: Uint8Array,\n): Uint8Array {\n  const publicMessageBytesHash = sha3_256(publicMessageBytes);\n  const privateMessageBytesHash = sha3_256(privateMessageBytes);\n  // Concatenate the two hashes\n  const combinedHash = new Uint8Array(publicMessageBytesHash.length + privateMessageBytesHash.length);\n  combinedHash.set(publicMessageBytesHash);\n  combinedHash.set(privateMessageBytesHash, publicMessageBytesHash.length);\n  // Hash and return\n  return sha3_256(combinedHash);\n}\n\nfunction signEnvelope(\n  publicMessageBytes: Uint8Array,\n  privateMessageBytes: Uint8Array,\n  senderEd25519SecretKey: Ed25519SecretKey,\n) {\n  const messageHashBytes = combineHashedEnvelopeMessageBytes(publicMessageBytes, privateMessageBytes);\n  const signatureBytes = signWithEd25519SecretKey(messageHashBytes, senderEd25519SecretKey, 'SECURED_ENVELOPE');\n  return Hex.fromHexInput(signatureBytes).toString();\n}\n\nexport function verifyEnvelopeSignature(\n  publicMessageBytes: Uint8Array,\n  privateMessageBytes: Uint8Array,\n  messageSignatureInput: string,\n  senderEd25519PublicKey: Ed25519PublicKey,\n) {\n  const messageSignature = new Ed25519Signature(Hex.fromHexInput(messageSignatureInput).toUint8Array());\n  const senderPublicKey = new AptosEd25519PublicKey(senderEd25519PublicKey.key);\n  const messageHashBytes = combineHashedEnvelopeMessageBytes(publicMessageBytes, privateMessageBytes);\n  const messageVerified = verifySignature(messageHashBytes, messageSignature, senderPublicKey, 'SECURED_ENVELOPE');\n  if (!messageVerified) {\n    throw new EnvelopeMessageMismatchError('Could not verify SecuredEnvelope signature', 'messageSignature');\n  }\n}\n\nexport function decryptEnvelope<\n  Public extends Message & { [K in keyof Private]?: never },\n  Private extends Message & { [K in keyof Public]?: never },\n>(\n  senderEd25519PublicKey: Ed25519PublicKey,\n  receiverEd25519SecretKey: Ed25519SecretKey,\n  message: SecuredEnvelopeTransport,\n): DecryptedEnvelope<Public, Private> {\n  const { encryptedPrivateMessage, messageSignature, serializedPublicMessage } = message;\n  const publicMessage = JSON.parse(serializedPublicMessage) as Public & IEnvelopeMetadata;\n\n  // Ensure the private/public message signature matches the expected signature\n  const rawPrivateMessage = decodeBase64(encryptedPrivateMessage.securedB64);\n  const rawPublicMessage = new TextEncoder().encode(serializedPublicMessage);\n  verifyEnvelopeSignature(rawPublicMessage, rawPrivateMessage, messageSignature, senderEd25519PublicKey);\n\n  // Ensure the public key matches the expected public key\n  const senderEd25519PublicKeyB64 = encodeBase64(senderEd25519PublicKey.key);\n  const expectedPublicKeyB64 = publicMessage._metadata.senderEd25519PublicKeyB64;\n  if (senderEd25519PublicKeyB64 !== expectedPublicKeyB64) {\n    throw new EnvelopeMessageMismatchError(\n      'senderEd25519PublicKey in envelope does not match provided receiverEd25519SecretKey',\n      'senderPublicKey',\n    );\n  }\n\n  const senderX25519PublicKeyBytes = decodeBase64(publicMessage._metadata.senderX25519PublicKeyB64);\n  const senderX25519PublicKey = toKey(senderX25519PublicKeyBytes, KeyTypes.X25519PublicKey);\n  const encryptionResult = deserializeEncryptionResult(encryptedPrivateMessage);\n  const privateMessage = decryptObject<Private>(\n    senderX25519PublicKey,\n    receiverEd25519SecretKey,\n    encryptionResult.secured,\n    encryptionResult.nonce,\n  );\n\n  ensureMetadataFields(publicMessage._metadata);\n  ensurePrivatePublicFieldsDisjoint(privateMessage, publicMessage);\n\n  return {\n    messageSignature,\n    privateMessage,\n    publicMessage,\n  };\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  base64ToBytes,\n  bytesToBase64,\n  deserializePublicKey,\n  deserializeSignature,\n  serializePublicKey,\n  serializeSignature,\n} from '@aptos-connect/wallet-api';\nimport {\n  AccountPublicKey,\n  Deserializer,\n  Ed25519PublicKey as AptosEd25519PublicKey,\n  Ed25519Signature,\n  Hex,\n  PublicKey,\n  Serializer,\n  Signature,\n} from '@aptos-labs/ts-sdk';\nimport { decodeBase64 } from './utils';\n\nexport function serializePublicKeyB64(publicKey: PublicKey) {\n  const serializer = new Serializer();\n  serializePublicKey(serializer, publicKey);\n  return bytesToBase64(serializer.toUint8Array());\n}\n\nexport function deserializePublicKeyB64(publicKeyB64: string) {\n  const serializedPublicKey = base64ToBytes(publicKeyB64);\n  const deserializer = new Deserializer(serializedPublicKey);\n  return deserializePublicKey(deserializer) as AccountPublicKey;\n}\n\nexport function deserializeEd25519PublicKeyB64(ed25519PublicKeyB64: string) {\n  return new AptosEd25519PublicKey(decodeBase64(ed25519PublicKeyB64));\n}\n\nexport function serializeSignatureB64(signature: Signature) {\n  const serializer = new Serializer();\n  serializeSignature(serializer, signature);\n  return bytesToBase64(serializer.toUint8Array());\n}\n\nexport function deserializeSignatureB64(signatureB64: string) {\n  const serializedSignature = base64ToBytes(signatureB64);\n  const deserializer = new Deserializer(serializedSignature);\n  return deserializeSignature(deserializer);\n}\n\nexport function deserializeEd25519SignatureB64(ed25519SignatureB64: string) {\n  const signatureBytes = Hex.fromHexInput(ed25519SignatureB64).toUint8Array();\n  return new Ed25519Signature(signatureBytes);\n}\n\nexport function publicKeyB64FromEd25519PublicKeyB64(ed25519PublicKeyB64: string) {\n  const publicKey = deserializeEd25519PublicKeyB64(ed25519PublicKeyB64);\n  return serializePublicKeyB64(publicKey);\n}\n","class u extends Error {\n  constructor(e, r, n) {\n    super(\n      typeof r == \"object\" ? r.message : r || e,\n      {\n        cause: typeof r == \"object\" ? r.cause : n\n      }\n    ), this.type = e, this.name = \"TypedError\", Object.setPrototypeOf(this, u.prototype);\n  }\n}\nfunction h(t) {\n  return t.replace(/[A-Z]/g, (e) => `_${e.toLowerCase()}`);\n}\nfunction S(t) {\n  return t.replace(/_[a-z]/g, (e) => e[1].toUpperCase());\n}\nconst w = \"ERR_INVALID_VALUE\", D = \"ERR_UNEXPECTED_VALUE\", W = \"ERR_UNEXPECTED_TYPE\", d = \"ERR_PARSE\";\nfunction A(t, e) {\n  const r = {};\n  for (const n in t) {\n    const o = t[n];\n    if (!o)\n      continue;\n    let a, c;\n    typeof o == \"function\" ? (a = n, c = o) : [a, c] = o;\n    try {\n      const s = c(e(a));\n      s !== void 0 && (r[n] = s);\n    } catch (s) {\n      throw new u(\n        d,\n        `Parser for \"${n}\" property failed${a === n ? \"\" : `. Source field: \"${a}\"`}`,\n        s\n      );\n    }\n  }\n  return r;\n}\nfunction P(t) {\n  let e = t;\n  if (typeof e == \"string\")\n    try {\n      e = JSON.parse(e);\n    } catch (r) {\n      throw new u(w, { cause: r });\n    }\n  if (typeof e != \"object\" || !e || Array.isArray(e))\n    throw new u(D);\n  return e;\n}\nfunction i(t, e) {\n  return (r) => {\n    const n = (o) => {\n      if (!(r && o === void 0))\n        try {\n          return e(o);\n        } catch (a) {\n          throw new u(d, {\n            message: `\"${t}\" transformer failed to parse the value`,\n            cause: a\n          });\n        }\n    };\n    return /* @__PURE__ */ Object.assign(\n      n,\n      {\n        isValid(o) {\n          try {\n            return n(o), !0;\n          } catch {\n            return !1;\n          }\n        }\n      }\n    );\n  };\n}\nfunction m(t, e) {\n  return i(e || \"object\", (r) => {\n    const n = P(r);\n    return A(t, (o) => n[o]);\n  });\n}\nfunction p(t) {\n  throw new u(W, `Unexpected value received: ${JSON.stringify(t)}`);\n}\nconst E = i(\"boolean\", (t) => {\n  if (typeof t == \"boolean\")\n    return t;\n  const e = String(t);\n  if (e === \"1\" || e === \"true\")\n    return !0;\n  if (e === \"0\" || e === \"false\")\n    return !1;\n  p(t);\n}), f = i(\"string\", (t) => {\n  if (typeof t == \"string\" || typeof t == \"number\")\n    return t.toString();\n  p(t);\n}), g = i(\"number\", (t) => {\n  if (typeof t == \"number\")\n    return t;\n  if (typeof t == \"string\") {\n    const e = Number(t);\n    if (!Number.isNaN(e))\n      return e;\n  }\n  p(t);\n}), U = i(\"date\", (t) => t instanceof Date ? t : new Date(g()(t) * 1e3));\nfunction R(t, e) {\n  return i(e || \"searchParams\", (r) => {\n    typeof r != \"string\" && !(r instanceof URLSearchParams) && p(r);\n    const n = typeof r == \"string\" ? new URLSearchParams(r) : r;\n    return A(t, (o) => {\n      const a = n.get(o);\n      return a === null ? void 0 : a;\n    });\n  });\n}\nfunction l(t) {\n  for (const e in t)\n    t[e] = [h(e), t[e]];\n  return t;\n}\nconst N = (t) => {\n  const e = g(), r = g(!0), n = f(), o = f(!0), a = E(!0), c = m(l({\n    addedToAttachmentMenu: a,\n    allowsWriteToPm: a,\n    firstName: n,\n    id: e,\n    isBot: a,\n    isPremium: a,\n    languageCode: o,\n    lastName: o,\n    photoUrl: o,\n    username: o\n  }), \"User\")(!0);\n  return R(\n    l({\n      authDate: U(),\n      canSendAfter: r,\n      chat: m(\n        l({\n          id: e,\n          type: n,\n          title: n,\n          photoUrl: o,\n          username: o\n        }),\n        \"Chat\"\n      )(!0),\n      chatInstance: o,\n      chatType: o,\n      hash: n,\n      queryId: o,\n      receiver: c,\n      startParam: o,\n      signature: n,\n      user: c\n    }),\n    \"initData\"\n  )(t);\n};\nfunction O(t) {\n  return /^#[\\da-f]{6}$/i.test(t);\n}\nfunction T(t) {\n  return /^#[\\da-f]{3}$/i.test(t);\n}\nfunction _(t) {\n  const e = t.replace(/\\s/g, \"\").toLowerCase();\n  if (O(e))\n    return e;\n  if (T(e)) {\n    let n = \"#\";\n    for (let o = 0; o < 3; o += 1)\n      n += e[1 + o].repeat(2);\n    return n;\n  }\n  const r = e.match(/^rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/) || e.match(/^rgba\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3}),\\d{1,3}\\)$/);\n  if (!r)\n    throw new Error(`Value \"${t}\" does not satisfy any of known RGB formats.`);\n  return r.slice(1).reduce((n, o) => {\n    const a = parseInt(o, 10).toString(16);\n    return n + (a.length === 1 ? \"0\" : \"\") + a;\n  }, \"#\");\n}\nconst C = i(\"rgb\", (t) => _(f()(t))), b = i(\n  \"themeParams\",\n  (t) => {\n    const e = C(!0);\n    return Object.entries(P(t)).reduce((r, [n, o]) => (r[S(n)] = e(o), r), {});\n  }\n);\n// @__NO_SIDE_EFFECTS__\nfunction y(t) {\n  return JSON.stringify(\n    Object.fromEntries(\n      Object.entries(t).map(([e, r]) => [h(e), r])\n    )\n  );\n}\nconst V = (t) => {\n  const e = f(), r = f(!0), n = E(!0);\n  return R({\n    botInline: [\"tgWebAppBotInline\", n],\n    defaultColors: [\"tgWebAppDefaultColors\", b(!0)],\n    fullscreen: [\"tgWebAppFullscreen\", n],\n    initData: [\"tgWebAppData\", N(!0)],\n    initDataRaw: [\"tgWebAppData\", r],\n    platform: [\"tgWebAppPlatform\", e],\n    showSettings: [\"tgWebAppShowSettings\", n],\n    startParam: [\"tgWebAppStartParam\", r],\n    themeParams: [\"tgWebAppThemeParams\", b()],\n    version: [\"tgWebAppVersion\", e]\n  }, \"launchParams\")(t);\n};\n// @__NO_SIDE_EFFECTS__\nfunction $(t) {\n  const {\n    initDataRaw: e,\n    startParam: r,\n    showSettings: n,\n    botInline: o,\n    fullscreen: a,\n    defaultColors: c\n  } = t, s = new URLSearchParams();\n  return s.set(\"tgWebAppPlatform\", t.platform), s.set(\"tgWebAppThemeParams\", /* @__PURE__ */ y(t.themeParams)), s.set(\"tgWebAppVersion\", t.version), e && s.set(\"tgWebAppData\", e), r && s.set(\"tgWebAppStartParam\", r), typeof n == \"boolean\" && s.set(\"tgWebAppShowSettings\", n ? \"1\" : \"0\"), typeof o == \"boolean\" && s.set(\"tgWebAppBotInline\", o ? \"1\" : \"0\"), typeof a == \"boolean\" && s.set(\"tgWebAppFullscreen\", a ? \"1\" : \"0\"), c && s.set(\"tgWebAppDefaultColors\", /* @__PURE__ */ y(c)), s.toString();\n}\nconst j = m({\n  eventType: f(),\n  eventData: (t) => t\n}, \"miniAppsMessage\");\nfunction L(t, e) {\n  return i(e || \"array\", (r) => {\n    let n;\n    if (Array.isArray(r))\n      n = r;\n    else if (typeof r == \"string\")\n      try {\n        const o = JSON.parse(r);\n        Array.isArray(o) && (n = o);\n      } catch {\n      }\n    return n || p(r), n.map(t);\n  });\n}\nconst I = i(\"fn\", (t) => {\n  if (typeof t == \"function\")\n    return t;\n  p(t);\n});\nfunction B(t) {\n  return !!t && typeof t == \"object\" && !Array.isArray(t);\n}\nexport {\n  w as ERR_INVALID_VALUE,\n  d as ERR_PARSE,\n  W as ERR_UNEXPECTED_TYPE,\n  D as ERR_UNEXPECTED_VALUE,\n  L as array,\n  E as boolean,\n  i as createTransformerGen,\n  U as date,\n  I as fn,\n  N as initData,\n  O as isRGB,\n  T as isRGBShort,\n  B as isRecord,\n  V as launchParams,\n  j as miniAppsMessage,\n  g as number,\n  m as object,\n  C as rgb,\n  R as searchParams,\n  $ as serializeLaunchParams,\n  y as serializeThemeParams,\n  f as string,\n  b as themeParams,\n  _ as toRGB,\n  P as toRecord\n};\n//# sourceMappingURL=index.js.map\n","import { object, fn } from '@telegram-apps/transformers';\n\ninterface WithWebviewProxy {\n  TelegramWebviewProxy: {\n    postEvent: (...args: unknown[]) => unknown;\n  };\n}\n\nconst webViewProxy = object<WithWebviewProxy>({\n  TelegramWebviewProxy: object({ postEvent: fn() })(),\n});\n\n/**\n * Returns true in case, passed value contains path `TelegramWebviewProxy.postEvent` property and\n * `postEvent` is a function.\n * @param value - value to check.\n */\nexport function hasWebviewProxy<T>(value: T): value is T & WithWebviewProxy {\n  return webViewProxy().isValid(value);\n}\n","/**\n * @see https://stackoverflow.com/a/326076\n * @returns True, if current environment is iframe.\n */\nexport function isIframe(): boolean {\n  try {\n    return window.self !== window.top;\n  } catch {\n    return true;\n  }\n}\n","var k = Object.defineProperty;\nvar I = (r, e, t) => e in r ? k(r, e, { enumerable: !0, configurable: !0, writable: !0, value: t }) : r[e] = t;\nvar E = (r, e, t) => I(r, typeof e != \"symbol\" ? e + \"\" : e, t);\nclass d extends Error {\n  constructor(e, t, n) {\n    super(\n      typeof t == \"object\" ? t.message : t || e,\n      {\n        cause: typeof t == \"object\" ? t.cause : n\n      }\n    ), this.type = e, this.name = \"TypedError\", Object.setPrototypeOf(this, d.prototype);\n  }\n}\nfunction x(r, e, t) {\n  return r.addEventListener(e, t), () => r.removeEventListener(e, t);\n}\nfunction _(...r) {\n  const e = r.flat(1);\n  return [\n    e.push.bind(e),\n    () => {\n      e.forEach((t) => {\n        t();\n      });\n    }\n  ];\n}\nfunction F(r, e) {\n  return r instanceof d && r.type === e;\n}\nfunction m(r) {\n  return (e) => F(e, r);\n}\nconst R = \"ERR_ABORTED\", $ = \"ERR_CANCELED\", S = \"ERR_TIMED_OUT\";\nfunction T(r) {\n  return new d(R, { cause: r });\n}\nconst U = m(S), V = m(R), B = m($);\nfunction C(r, e) {\n  return r.reject = e.reject, r;\n}\nclass i extends Promise {\n  constructor(t, n) {\n    let o, s;\n    typeof t == \"function\" ? (o = t, s = n) : s = t;\n    let u, c;\n    super((a, h) => {\n      s || (s = {});\n      const { abortSignal: l } = s;\n      if (l && l.aborted)\n        return h(T(l.reason));\n      const [y, A] = _(), b = (f) => (...L) => (A(), f(...L)), w = new AbortController(), { signal: D } = w;\n      c = b((f) => {\n        w.abort(f), h(f);\n      }), u = b(a), l && y(\n        x(l, \"abort\", () => {\n          c(T(l.reason));\n        })\n      );\n      const { timeout: g } = s;\n      if (g) {\n        const f = setTimeout(() => {\n          c(new d(S, `Timeout reached: ${g}ms`));\n        }, g);\n        y(() => {\n          clearTimeout(f);\n        });\n      }\n      o && o(u, c, D);\n    });\n    /**\n     * Rejects the promise.\n     */\n    E(this, \"reject\");\n    this.reject = c;\n  }\n  /**\n   * Creates a new BetterPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(t, n) {\n    return new i((o, s, u) => {\n      try {\n        const c = t(u);\n        return c instanceof Promise ? c.then(o, s) : o(c);\n      } catch (c) {\n        s(c);\n      }\n    }, n);\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(t) {\n    return new i((n) => {\n      n(t);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new i((n, o) => {\n      o(t);\n    });\n  }\n  /**\n   * Cancels the promise execution.\n   */\n  cancel() {\n    this.reject(new d($));\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return C(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, n) {\n    return C(super.then(t, n), this);\n  }\n}\nfunction v(r, e) {\n  return r.resolve = e.resolve, r;\n}\nclass p extends i {\n  constructor(t, n) {\n    let o, s;\n    typeof t == \"function\" ? (o = t, s = n) : s = t;\n    let u;\n    super((c, a, h) => {\n      u = c, o && o(c, a, h);\n    }, s);\n    /**\n     * Resolves the promise.\n     */\n    E(this, \"resolve\");\n    this.resolve = u;\n  }\n  /**\n   * Creates a new EnhancedPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(t, n) {\n    return new p(\n      (o, s, u) => i.withFn(t, { abortSignal: u }).then(o, s),\n      n\n    );\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(t) {\n    return new p((n) => {\n      n(t);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new p((n, o) => {\n      o(t);\n    });\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return v(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, n) {\n    return v(super.then(t, n), this);\n  }\n}\nfunction Z(r, e) {\n  return new i((t) => {\n    setTimeout(t, r);\n  }, { abortSignal: e });\n}\nfunction j(r) {\n  return `tapps/${r}`;\n}\nfunction J(r, e) {\n  sessionStorage.setItem(j(r), JSON.stringify(e));\n}\nfunction K(r) {\n  const e = sessionStorage.getItem(j(r));\n  try {\n    return e ? JSON.parse(e) : void 0;\n  } catch {\n  }\n}\nfunction M(r) {\n  return r.replace(/[A-Z]/g, (e) => `-${e.toLowerCase()}`);\n}\nfunction z(r) {\n  return r.replace(/[A-Z]/g, (e) => `_${e.toLowerCase()}`);\n}\nfunction G(r) {\n  return r.replace(/_[a-z]/g, (e) => e[1].toUpperCase());\n}\n// @__NO_SIDE_EFFECTS__\nfunction q(r, e) {\n  e || (e = {});\n  const {\n    textColor: t,\n    bgColor: n,\n    shouldLog: o = !0\n  } = e;\n  function s(u, ...c) {\n    if (!o || typeof o == \"function\" && !o())\n      return;\n    const a = \"font-weight:bold;padding:0 5px;border-radius:5px\";\n    console[u](\n      `%c${Intl.DateTimeFormat(\"en-GB\", {\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n        second: \"2-digit\",\n        fractionalSecondDigits: 3,\n        timeZone: \"UTC\"\n      }).format(/* @__PURE__ */ new Date())}%c / %c${r}`,\n      `${a};background-color: lightblue;color:black`,\n      \"\",\n      `${a};${t ? `color:${t};` : \"\"}${n ? `background-color:${n}` : \"\"}`,\n      ...c\n    );\n  }\n  return [\n    function(...c) {\n      s(\"log\", ...c);\n    },\n    function(...c) {\n      s(\"error\", ...c);\n    }\n  ];\n}\nfunction H(r, e) {\n  document.documentElement.style.setProperty(r, e);\n}\nfunction P(r) {\n  document.documentElement.style.removeProperty(r);\n}\nexport {\n  i as CancelablePromise,\n  R as ERR_ABORTED,\n  $ as ERR_CANCELED,\n  S as ERR_TIMED_OUT,\n  p as EnhancedPromise,\n  d as TypedError,\n  x as addEventListener,\n  M as camelToKebab,\n  z as camelToSnake,\n  T as createAbortError,\n  _ as createCbCollector,\n  q as createLogger,\n  m as createTypedErrorPredicate,\n  P as deleteCssVar,\n  K as getStorageValue,\n  V as isAbortError,\n  B as isCanceledError,\n  F as isErrorOfType,\n  U as isTimeoutError,\n  H as setCssVar,\n  J as setStorageValue,\n  Z as sleep,\n  G as snakeToCamel\n};\n//# sourceMappingURL=index.js.map\n","let r;\nfunction y(e, c) {\n  r && r.set(e, c) || c();\n}\nfunction m(e) {\n  if (r)\n    return e();\n  r = /* @__PURE__ */ new Map();\n  try {\n    e();\n  } finally {\n    r.forEach((c) => c()), r = void 0;\n  }\n}\n// @__NO_SIDE_EFFECTS__\nfunction S(e, c) {\n  c || (c = {});\n  const g = c.equals || Object.is;\n  let u = [], s = e;\n  const i = (t) => {\n    if (!g(s, t)) {\n      const l = s;\n      s = t, y(o, () => {\n        [...u].forEach(([f, d]) => {\n          f(t, l), d && n(f, !0);\n        });\n      });\n    }\n  };\n  function a(t) {\n    const l = typeof t != \"object\" ? { once: t } : t;\n    return {\n      once: l.once || !1,\n      signal: l.signal || !1\n    };\n  }\n  const n = (t, l) => {\n    const f = a(l), d = u.findIndex(([h, p]) => h === t && p.once === f.once && p.signal === f.signal);\n    d >= 0 && u.splice(d, 1);\n  }, o = Object.assign(\n    function() {\n      return j(o), s;\n    },\n    {\n      destroy() {\n        u = [];\n      },\n      set: i,\n      reset() {\n        i(e);\n      },\n      sub(t, l) {\n        return u.push([t, a(l)]), () => n(t, l);\n      },\n      unsub: n,\n      unsubAll() {\n        u = u.filter((t) => t[1].signal);\n      }\n    }\n  );\n  return o;\n}\nconst b = [];\nfunction j(e) {\n  b.length && b[b.length - 1].add(e);\n}\n// @__NO_SIDE_EFFECTS__\nfunction x(e, c) {\n  let g = /* @__PURE__ */ new Set(), u;\n  function s() {\n    return u || (u = /* @__PURE__ */ S(a(), c));\n  }\n  function i() {\n    s().set(a());\n  }\n  function a() {\n    g.forEach((t) => {\n      t.unsub(i, { signal: !0 });\n    });\n    const n = /* @__PURE__ */ new Set();\n    let o;\n    b.push(n);\n    try {\n      o = e();\n    } finally {\n      b.pop();\n    }\n    return n.forEach((t) => {\n      t.sub(i, { signal: !0 });\n    }), g = n, o;\n  }\n  return Object.assign(function() {\n    return s()();\n  }, {\n    destroy() {\n      s().destroy();\n    },\n    sub(...n) {\n      return s().sub(...n);\n    },\n    unsub(...n) {\n      s().unsub(...n);\n    },\n    unsubAll(...n) {\n      s().unsubAll(...n);\n    }\n  });\n}\nexport {\n  m as batch,\n  x as computed,\n  S as signal\n};\n//# sourceMappingURL=index.js.map\n","import { signal } from '@telegram-apps/signals';\nimport { createLogger } from '@telegram-apps/toolkit';\n\n/**\n * The package debug mode.\n *\n * Enabling debug mode leads to printing additional messages in the console related to the\n * processes inside the package.\n */\nexport const $debug = signal(false);\n\nexport const [logInfo, logError] = createLogger('Bridge', {\n  bgColor: '#9147ff',\n  textColor: 'white',\n  shouldLog: $debug,\n});\n","import {\n  boolean,\n  createTransformerGen,\n  number,\n  object,\n  string,\n  type TransformerGen,\n} from '@telegram-apps/transformers';\n\nimport type { EventName, EventPayload } from '@/events/types/events.js';\n\n/**\n * Transformers for problematic Mini Apps events.\n */\nexport const transformers: { [E in EventName]?: TransformerGen<EventPayload<E>> } = {\n  clipboard_text_received: object({\n    req_id: string(),\n    data: (value) => (value === null ? value : string(true)(value)),\n  }, 'clipboard_text_received'),\n  custom_method_invoked: object({\n    req_id: string(),\n    result: (value) => value,\n    error: string(true),\n  }, 'custom_method_invoked'),\n  popup_closed: createTransformerGen('popup_closed', value => {\n    return value\n      ? object({\n        button_id: (value) => (\n          value === null || value === undefined ? undefined : string()(value)\n        ),\n      })()(value)\n      : {};\n  }),\n  viewport_changed: object({\n    height: number(),\n    width: (value) => (\n      value === null || value === undefined\n        ? window.innerWidth\n        : number()(value)\n    ),\n    is_state_stable: boolean(),\n    is_expanded: boolean(),\n  }, 'viewport_changed'),\n};","import { signal } from '@telegram-apps/signals';\n\n/**\n * Target origin used by the `postEvent` method.\n *\n * You don't need to override this value until you know what you are doing.\n * @default 'https://web.telegram.org'\n */\nexport const $targetOrigin = signal('https://web.telegram.org');\n","import { fn, object } from '@telegram-apps/transformers';\nimport { TypedError } from '@telegram-apps/toolkit';\n\nimport { logInfo } from '@/debug.js';\nimport { isIframe } from '@/env/isIframe.js';\nimport { hasWebviewProxy } from '@/env/hasWebviewProxy.js';\nimport { ERR_UNKNOWN_ENV } from '@/errors.js';\nimport { $targetOrigin } from '@/methods/$targetOrigin.js';\nimport type {\n  MethodName,\n  MethodNameWithOptionalParams,\n  MethodNameWithoutParams,\n  MethodNameWithRequiredParams,\n  MethodParams,\n} from '@/methods/types/index.js';\n\nexport type PostEventFn = typeof postEvent;\n\n/**\n * Calls Mini Apps methods requiring parameters.\n * @param method - method name.\n * @param params - options along with params.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n */\nexport function postEvent<Method extends MethodNameWithRequiredParams>(\n  method: Method,\n  params: MethodParams<Method>,\n): void;\n\n/**\n * Calls Mini Apps methods accepting no parameters at all.\n * @param method - method name.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n */\nexport function postEvent(method: MethodNameWithoutParams): void;\n\n/**\n * Calls Mini Apps methods accepting optional parameters.\n * @param method - method name.\n * @param params - options along with params.\n * @throws {TypedError} ERR_UNKNOWN_ENV\n */\nexport function postEvent<Method extends MethodNameWithOptionalParams>(\n  method: Method,\n  params?: MethodParams<Method>,\n): void;\n\nexport function postEvent(\n  eventType: MethodName,\n  eventData?: MethodParams<MethodName>,\n): void {\n  logInfo('Posting event:', eventData ? { eventType, eventData } : { eventType });\n\n  const w = window;\n\n  // Telegram for iOS and macOS.\n  if (hasWebviewProxy(w)) {\n    w.TelegramWebviewProxy.postEvent(eventType, JSON.stringify(eventData));\n    return;\n  }\n\n  const message = JSON.stringify({ eventType, eventData });\n\n  // Telegram Web.\n  if (isIframe()) {\n    return w.parent.postMessage(message, $targetOrigin());\n  }\n\n  // Telegram for Windows Phone or Android.\n  const { external } = w;\n  if (object({ notify: fn() })().isValid(external)) {\n    external.notify(message);\n    return;\n  }\n\n  // Otherwise current environment is unknown, and we are not able to send event.\n  throw new TypedError(ERR_UNKNOWN_ENV);\n}\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  ConnectResponse,\n  isTypedMessage,\n  PromptApprovalResponseMessage,\n  PromptConnectionRequestMessage,\n  PromptConnectionResponseMessage,\n  PromptUnauthorizedErrorMessage,\n  SerializedWalletRequest,\n  SerializedWalletResponse,\n} from '@aptos-connect/wallet-api';\n\nconst DEFAULT_PROMPT_SIZE = { height: 695, width: 465 };\nconst PROMPT_POLLER_INTERVAL = 500;\n\nconst dismissalSerializedResponse = ConnectResponse.serialize({ status: 'dismissed' });\n\nexport class PromptUnauthorizedError extends Error {\n  constructor() {\n    super('Unauthorized');\n  }\n}\n\nexport function openPrompt(url: string | URL, size = DEFAULT_PROMPT_SIZE) {\n  const { height, width } = size;\n  const options = {\n    height,\n    left: window.screenLeft + Math.round((window.outerWidth - width) / 2),\n    popup: true,\n    top: window.screenTop + Math.round((window.outerHeight - height) / 2),\n    width,\n  };\n\n  const strOptions = Object.entries(options)\n    .map(([key, value]) => `${key}=${JSON.stringify(value)}`)\n    .reduce((acc, entry) => `${acc}, ${entry}`);\n\n  const href = url instanceof URL ? url.href : url;\n  const promptWindow = window.open(href, undefined, strOptions);\n  if (promptWindow === null) {\n    throw new Error(\"Couldn't open prompt\");\n  }\n\n  return promptWindow;\n}\n\nexport async function waitForPromptResponse(baseUrl: string, promptWindow: Window, request: SerializedWalletRequest) {\n  return new Promise<SerializedWalletResponse>((resolve, reject) => {\n    const listeners = {\n      onMessage: (message: MessageEvent) => {\n        // Ignore messages from untrusted sources\n        if (message.source !== promptWindow || message.origin !== baseUrl) {\n          return;\n        }\n        if (isTypedMessage(PromptUnauthorizedErrorMessage, message.data)) {\n          window.removeEventListener('message', listeners.onMessage);\n          clearTimeout(listeners.promptPollerId);\n          reject(new PromptUnauthorizedError());\n          return;\n        }\n        if (isTypedMessage(PromptConnectionRequestMessage, message.data)) {\n          promptWindow.postMessage(new PromptConnectionResponseMessage(request), baseUrl);\n          return;\n        }\n        if (isTypedMessage(PromptApprovalResponseMessage, message.data)) {\n          window.removeEventListener('message', listeners.onMessage);\n          clearTimeout(listeners.promptPollerId);\n          resolve(message.data.serializedValue);\n        }\n      },\n      promptPollerId: setInterval(() => {\n        if (promptWindow.closed) {\n          window.removeEventListener('message', listeners.onMessage);\n          clearTimeout(listeners.promptPollerId);\n          resolve(dismissalSerializedResponse);\n        }\n      }, PROMPT_POLLER_INTERVAL),\n    };\n\n    window.addEventListener('message', listeners.onMessage);\n  });\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  AccountInfo,\n  base64ToBytes,\n  bytesToBase64,\n  deserializeAccountInfo,\n  serializeAccountInfo,\n} from '@aptos-connect/wallet-api';\nimport { AccountAddress, Deserializer, Serializer } from '@aptos-labs/ts-sdk';\n\nconst localDappStateKey = '@aptos-connect/dapp-local-state';\n\n/**\n * Local dapp state loosely synced with the web wallet's state.\n * Due to browser restrictions (storage partitioning), it's no longer possible\n * to access the web wallet's state.\n */\ninterface DappLocalState {\n  connectedAccounts: AccountInfo[];\n}\n\nfunction serializeLocalDappState(state: DappLocalState): Uint8Array {\n  const serializer = new Serializer();\n  serializer.serializeU32AsUleb128(state.connectedAccounts.length);\n  for (const account of state.connectedAccounts) {\n    serializeAccountInfo(serializer, account);\n  }\n  return serializer.toUint8Array();\n}\n\nfunction deserializeLocalDappState(serializedValue: Uint8Array): DappLocalState {\n  const deserializer = new Deserializer(serializedValue);\n  const connectedAccountsLength = deserializer.deserializeUleb128AsU32();\n  const connectedAccounts: AccountInfo[] = [];\n  for (let i = 0; i < connectedAccountsLength; i += 1) {\n    connectedAccounts.push(deserializeAccountInfo(deserializer));\n  }\n  return { connectedAccounts };\n}\n\nfunction getState(): DappLocalState {\n  const encodedValue = window.localStorage.getItem(localDappStateKey);\n  return encodedValue ? deserializeLocalDappState(base64ToBytes(encodedValue)) : { connectedAccounts: [] };\n}\n\nfunction setState(state: DappLocalState) {\n  const serializedValue = serializeLocalDappState(state);\n  const encodedValue = bytesToBase64(serializedValue);\n  window.localStorage.setItem(localDappStateKey, encodedValue);\n}\n\nexport function getConnectedAccounts() {\n  const state = getState();\n  return state.connectedAccounts;\n}\n\nexport function addConnectedAccount(account: AccountInfo) {\n  const { connectedAccounts, ...state } = getState();\n  connectedAccounts.push(account);\n  setState({ ...state, connectedAccounts });\n}\n\nexport function removeConnectedAccount(address: AccountAddress) {\n  const { connectedAccounts, ...state } = getState();\n  const index = connectedAccounts.findIndex((a) => a.address.equals(address));\n  if (index >= 0) {\n    connectedAccounts.splice(index, 1);\n  }\n  setState({ ...state, connectedAccounts });\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  bytesToBase64,\n  bytesToBase64url,\n  encodeWalletRequestBody,\n  SignedPopupWalletRequest,\n} from '@aptos-connect/wallet-api';\n\nexport async function createWalletRequest(baseUrl: string, request: SignedPopupWalletRequest) {\n  const encodedClientIdentityKey = bytesToBase64url(request.clientIdentityKey.toUint8Array());\n\n  const response = await fetch(`${baseUrl}/v1/dapp/clients/${encodedClientIdentityKey}/requests/`, {\n    body: JSON.stringify({\n      body: encodeWalletRequestBody(request.body),\n      id: request.id,\n      signature: bytesToBase64(request.signature.toUint8Array()),\n      timestamp: request.timestamp,\n    }),\n    headers: { Accept: 'application/json', 'Content-Type': 'application/json' },\n    method: 'post',\n  });\n\n  if (!response.ok) {\n    throw new Error('Failed creating the wallet request');\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Ed25519PrivateKey } from '@aptos-labs/ts-sdk';\n\nconst identityKeyStorageKey = '@aptos-connect/client-identity-key';\n\nexport function getClientIdentityKey() {\n  const serialized = window.localStorage.getItem(identityKeyStorageKey);\n  if (serialized) {\n    return new Ed25519PrivateKey(serialized);\n  }\n  const identityKey = Ed25519PrivateKey.generate();\n  window.localStorage.setItem(identityKeyStorageKey, identityKey.toString());\n  return identityKey;\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\n/* eslint-disable no-await-in-loop */\n\n/**\n * How long to wait after resuming before trying to fetch the resource again.\n * This gives time for the underlying resource to be persisted.\n */\nconst ON_RESUME_DELAY = 300;\n\n/**\n * How often to poll for the resource when the window is in the foreground.\n * This should typically not be needed, but it's a good fallback in case we\n * can't detect whether the window is in the background\n */\nconst FG_RESPONSE_POLLING_INTERVAL = 2000;\n\n/**\n * Polling interval when the window is in the background.\n * This can be arbitrarily long, but it's still good to keep polling as fallback.\n */\nconst BG_RESPONSE_POLLING_INTERVAL = 3000;\n\n/**\n * Given there's no \"cancel\" mechanism for polling, we should time out the polling after\n * an arbitrarily long time to prevent memory leaks.\n */\nconst POLLING_TIMEOUT = 5 * 60000;\n\nexport interface Timer extends Promise<void> {\n  cancel: () => void;\n}\n\nfunction waitFor(milliseconds: number): Timer {\n  let timeoutId: ReturnType<typeof setTimeout>;\n  let cancel = () => {};\n  const timer = new Promise((resolve) => {\n    timeoutId = setTimeout(resolve, milliseconds);\n    cancel = () => {\n      clearTimeout(timeoutId);\n      resolve();\n    };\n  }) as Timer;\n  timer.cancel = cancel;\n  return timer;\n}\n\n/**\n * Smart polling function that tries to reduce as much as possible the number of requests,\n * while still returning quickly after the resource becomes available.\n */\nexport async function smartPolling(callback: () => Promise<Response>): Promise<Response> {\n  let timer: Timer | undefined;\n  let justResumed = false;\n  let pollingInterval = BG_RESPONSE_POLLING_INTERVAL;\n\n  const onWindowFocus = () => {\n    justResumed = true;\n    pollingInterval = FG_RESPONSE_POLLING_INTERVAL;\n    timer?.cancel();\n  };\n\n  const onWindowBlur = () => {\n    pollingInterval = BG_RESPONSE_POLLING_INTERVAL;\n  };\n\n  window.addEventListener('focus', onWindowFocus);\n  window.addEventListener('blur', onWindowBlur);\n\n  try {\n    const startTime = Date.now();\n    while (Date.now() - startTime < POLLING_TIMEOUT) {\n      timer = waitFor(pollingInterval);\n      await timer;\n\n      if (justResumed) {\n        timer = waitFor(ON_RESUME_DELAY);\n        await timer;\n      }\n\n      const response = await callback();\n      if (response.status === 200) {\n        return response;\n      }\n      justResumed = false;\n    }\n    throw new Error('Timeout');\n  } finally {\n    window.removeEventListener('focus', onWindowFocus);\n    window.removeEventListener('blur', onWindowFocus);\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { base64ToBytes, bytesToBase64url, SerializedWalletResponse } from '@aptos-connect/wallet-api';\nimport { Ed25519PublicKey } from '@aptos-labs/ts-sdk';\nimport { smartPolling } from './smartPolling';\n\nexport async function getWalletResponse(\n  baseUrl: string,\n  clientIdentityKey: Ed25519PublicKey,\n  requestId: string,\n): Promise<SerializedWalletResponse> {\n  const encodedClientIdentityKey = bytesToBase64url(clientIdentityKey.toUint8Array());\n  const url = new URL(`${baseUrl}/v1/dapp/clients/${encodedClientIdentityKey}/requests/${requestId}/response/`);\n  const response = await smartPolling(() =>\n    fetch(url, {\n      headers: { Accept: 'application/json' },\n      method: 'get',\n    }),\n  );\n\n  const responseBody = await response.json();\n  const data = base64ToBytes(responseBody.data.body);\n  return { data };\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  encodePopupWalletRequest,\n  makePopupWalletRequestChallenge,\n  SerializedWalletRequest,\n  SignedPopupWalletRequest,\n} from '@aptos-connect/wallet-api';\nimport { postEvent as postTelegramEvent } from '@telegram-apps/bridge';\nimport { v4 as randomUUID } from 'uuid';\nimport { createWalletRequest } from './createWalletRequest';\nimport { getClientIdentityKey } from './getClientIdentityKey';\nimport { getWalletResponse } from './getWalletResponse';\n\nexport async function openTelegramPrompt(args: {\n  baseUrl: string;\n  request: SerializedWalletRequest;\n  tgWebAppUrl?: string;\n}) {\n  const { baseUrl, request: body, tgWebAppUrl = '/AptosConnectBot/AptosConnect' } = args;\n  const identityKey = getClientIdentityKey();\n  const clientIdentityKey = identityKey.publicKey();\n  const requestId = randomUUID();\n  const timestamp = Date.now();\n\n  const challenge = makePopupWalletRequestChallenge({ body, id: requestId, timestamp });\n  const signature = identityKey.sign(challenge);\n\n  const signedWalletRequest: SignedPopupWalletRequest = {\n    body,\n    clientIdentityKey,\n    id: requestId,\n    signature,\n    timestamp,\n  };\n\n  // Telegram only supports start parameters up to 1024 characters\n  // If the encoded request is longer, we send it to the backend and mark\n  // the request as \"deferred\" by omitting the body\n  let encodedRequest = encodePopupWalletRequest(signedWalletRequest);\n  if (encodedRequest.length > 1024) {\n    void createWalletRequest(baseUrl, signedWalletRequest);\n    encodedRequest = encodePopupWalletRequest({\n      clientIdentityKey,\n      id: requestId,\n      signature,\n      timestamp,\n    });\n  }\n\n  postTelegramEvent('web_app_open_tg_link', {\n    path_full: `${tgWebAppUrl}?startapp=${encodedRequest}`,\n  });\n\n  return getWalletResponse(baseUrl, clientIdentityKey, requestId);\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nexport function isTelegramMiniApp() {\n  return (window as any).TelegramWebviewProxy !== undefined;\n}\n\nexport * from './openTelegramPrompt';\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  ConnectRequest,\n  ConnectResponse,\n  DisconnectRequest,\n  DisconnectResponse,\n  GetConnectedAccountsRequest,\n  GetConnectedAccountsResponse,\n  IsConnectedRequest,\n  IsConnectedResponse,\n  SerializedWalletRequest,\n  SignAndSubmitTransactionRequest,\n  SignInRequest,\n  SignInResponse,\n  SignMessageRequest,\n  SignTransactionRequest,\n} from '@aptos-connect/wallet-api';\nimport { openPrompt, waitForPromptResponse } from './prompt';\nimport { addConnectedAccount, getConnectedAccounts, removeConnectedAccount } from './state';\n\nimport { isTelegramMiniApp, openTelegramPrompt } from './telegram';\n\nexport class WebWalletTransport {\n  constructor(\n    private readonly baseUrl: string,\n    private readonly provider: 'google' | 'apple' = 'google',\n    private readonly tgWebAppUrl?: string,\n  ) {\n    this.baseUrl = baseUrl;\n  }\n\n  async sendPromptRequest(request: SerializedWalletRequest) {\n    if (isTelegramMiniApp()) {\n      return openTelegramPrompt({\n        baseUrl: this.baseUrl,\n        request,\n        tgWebAppUrl: this.tgWebAppUrl,\n      });\n    }\n\n    const url = new URL(`${this.baseUrl}/prompt/`);\n    url.searchParams.set('provider', this.provider);\n    const prompt = openPrompt(url);\n\n    return waitForPromptResponse(this.baseUrl, prompt, request);\n  }\n\n  async sendRequest(request: SerializedWalletRequest) {\n    switch (request.name) {\n      case IsConnectedRequest.name: {\n        const connectedAccounts = getConnectedAccounts();\n        return IsConnectedResponse.serialize(connectedAccounts.length > 0);\n      }\n      case GetConnectedAccountsRequest.name: {\n        const connectedAccounts = getConnectedAccounts();\n        return GetConnectedAccountsResponse.serialize(connectedAccounts);\n      }\n      case ConnectRequest.name: {\n        const serializedResponse = await this.sendPromptRequest(request);\n        const response = ConnectResponse.deserialize(serializedResponse);\n        if (response.args.status === 'approved') {\n          const { account, pairing } = response.args.args;\n          if (pairing === undefined) {\n            addConnectedAccount(account);\n          }\n        }\n        return serializedResponse;\n      }\n      case SignInRequest.name: {\n        const serializedResponse = await this.sendPromptRequest(request);\n        const response = SignInResponse.deserialize(serializedResponse);\n        if (response.args.status === 'approved') {\n          const { account } = response.args.args;\n          addConnectedAccount(account);\n        }\n        return serializedResponse;\n      }\n      case DisconnectRequest.name: {\n        const [activeAccount] = getConnectedAccounts();\n        if (activeAccount) {\n          removeConnectedAccount(activeAccount.address);\n        }\n        return DisconnectResponse.serialize({});\n      }\n      case SignMessageRequest.name:\n      case SignTransactionRequest.name:\n      case SignAndSubmitTransactionRequest.name: {\n        return this.sendPromptRequest(request);\n      }\n      default: {\n        throw new Error('Unexpected request');\n      }\n    }\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nexport enum NetworkName {\n  DEVNET = 'devnet',\n  MAINNET = 'mainnet',\n  TESTNET = 'testnet',\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { RegisteredDappDataBase } from './dapp';\n\n// region Duplicated from crypto to prevent dependency cycle\n\nexport type SerializedEncryptionResult = {\n  nonceB64: string;\n  securedB64: string;\n};\n\nexport type SecuredEnvelopeTransport = {\n  encryptedPrivateMessage: SerializedEncryptionResult;\n  messageSignature: string;\n  serializedPublicMessage: string;\n};\n\n// endregion\n\nexport enum SigningRequestTypes {\n  SIGN_AND_SUBMIT_TRANSACTION = 'SIGN_AND_SUBMIT_TRANSACTION',\n  SIGN_MESSAGE = 'SIGN_MESSAGE',\n  SIGN_TRANSACTION = 'SIGN_TRANSACTION',\n}\n\nexport enum SigningRequestStatus {\n  APPROVED = 'APPROVED',\n  CANCELLED = 'CANCELLED',\n  INVALID = 'INVALID',\n  PENDING = 'PENDING',\n  REJECTED = 'REJECTED',\n}\n\nexport interface SigningRequestData {\n  apiVersion: string;\n  createdAt: Date;\n  id: string;\n  networkName: string | null;\n  pairing: {\n    registeredDapp: RegisteredDappDataBase;\n  };\n  pairingId: string;\n  requestEnvelope: SecuredEnvelopeTransport;\n  requestType: SigningRequestTypes;\n  responseEnvelope?: SecuredEnvelopeTransport;\n  status: SigningRequestStatus;\n}\n",null,null,null,null,null,null,null,null,"import nacl from \"tweetnacl\";\nimport { hmac } from \"@noble/hashes/hmac\";\nimport { sha512 } from \"@noble/hashes/sha512\";\nimport { hexToBytes } from \"@noble/hashes/utils\";\n\nexport type Keys = {\n  key: Uint8Array;\n  chainCode: Uint8Array;\n};\n\nconst pathRegex = /^m(\\/[0-9]+')+$/;\n\nconst replaceDerive = (val: string): string => val.replace(\"'\", \"\");\n\nconst HMAC_KEY = \"ed25519 seed\";\nconst HARDENED_OFFSET = 0x80000000;\n\nexport const getMasterKeyFromSeed = (seed: string): Keys => {\n  const h = hmac.create(sha512, HMAC_KEY);\n  const I = h.update(hexToBytes(seed)).digest();\n  const IL = I.slice(0, 32);\n  const IR = I.slice(32);\n  return {\n    key: IL,\n    chainCode: IR,\n  };\n};\n\nexport const CKDPriv = ({ key, chainCode }: Keys, index: number): Keys => {\n  const buffer = new ArrayBuffer(4);\n  new DataView(buffer).setUint32(0, index);\n  const indexBytes = new Uint8Array(buffer);\n  const zero = new Uint8Array([0]);\n  const data = new Uint8Array([...zero, ...key, ...indexBytes]);\n\n  const I = hmac.create(sha512, chainCode).update(data).digest();\n  const IL = I.slice(0, 32);\n  const IR = I.slice(32);\n  return {\n    key: IL,\n    chainCode: IR,\n  };\n};\n\nexport const getPublicKey = (privateKey: Uint8Array, withZeroByte = true): Uint8Array => {\n  const keyPair = nacl.sign.keyPair.fromSeed(privateKey);\n  const signPk = keyPair.secretKey.subarray(32);\n  const zero = new Uint8Array([0]);\n  return withZeroByte ? new Uint8Array([...zero, ...signPk]) : signPk;\n};\n\nexport const isValidPath = (path: string): boolean => {\n  if (!pathRegex.test(path)) {\n    return false;\n  }\n  return !path\n    .split(\"/\")\n    .slice(1)\n    .map(replaceDerive)\n    .some(Number.isNaN as any);\n};\n\nexport const derivePath = (path: string, seed: string, offset = HARDENED_OFFSET): Keys => {\n  if (!isValidPath(path)) {\n    throw new Error(\"Invalid derivation path\");\n  }\n\n  const { key, chainCode } = getMasterKeyFromSeed(seed);\n  const segments = path\n    .split(\"/\")\n    .slice(1)\n    .map(replaceDerive)\n    .map((el) => parseInt(el, 10));\n\n  return segments.reduce((parentKeys, segment) => CKDPriv(parentKeys, segment + offset), { key, chainCode });\n};\n","// hardcoded for now, we would want to have it injected dynamically\nexport const VERSION = \"1.21.0\";\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport { VERSION } from \"../version\";\n\nexport async function sleep(timeMs: number): Promise<null> {\n  return new Promise((resolve) => {\n    setTimeout(resolve, timeMs);\n  });\n}\n\nexport const DEFAULT_VERSION_PATH_BASE = \"/v1\";\n\nexport function fixNodeUrl(nodeUrl: string): string {\n  let out = `${nodeUrl}`;\n  if (out.endsWith(\"/\")) {\n    out = out.substring(0, out.length - 1);\n  }\n  if (!out.endsWith(DEFAULT_VERSION_PATH_BASE)) {\n    out = `${out}${DEFAULT_VERSION_PATH_BASE}`;\n  }\n  return out;\n}\n\nexport const DEFAULT_MAX_GAS_AMOUNT = 200000;\n// Transaction expire timestamp\nexport const DEFAULT_TXN_EXP_SEC_FROM_NOW = 20;\n// How long does SDK wait for txn to finish\nexport const DEFAULT_TXN_TIMEOUT_SEC = 20;\nexport const APTOS_COIN = \"0x1::aptos_coin::AptosCoin\";\n\nexport const CUSTOM_REQUEST_HEADER = { \"x-aptos-client\": `aptos-ts-sdk/${VERSION}` };\n","/**\n * Credits to https://github.com/darrylhodgins/typescript-memoize\n */\n\n/* eslint-disable no-param-reassign */\n/* eslint-disable no-restricted-syntax */\n\ninterface MemoizeArgs {\n  // ttl in milliseconds for cached items. After `ttlMs`, cached items are evicted automatically. If no `ttlMs`\n  // is provided, cached items won't get auto-evicted.\n  ttlMs?: number;\n  // produces the cache key based on `args`.\n  hashFunction?: boolean | ((...args: any[]) => any);\n  // cached items can be taged with `tags`. `tags` can be used to evict cached items\n  tags?: string[];\n}\n\nexport function Memoize(args?: MemoizeArgs | MemoizeArgs[\"hashFunction\"]) {\n  let hashFunction: MemoizeArgs[\"hashFunction\"];\n  let ttlMs: MemoizeArgs[\"ttlMs\"];\n  let tags: MemoizeArgs[\"tags\"];\n\n  if (typeof args === \"object\") {\n    hashFunction = args.hashFunction;\n    ttlMs = args.ttlMs;\n    tags = args.tags;\n  } else {\n    hashFunction = args;\n  }\n\n  return (target: Object, propertyKey: string, descriptor: TypedPropertyDescriptor<any>) => {\n    if (descriptor.value != null) {\n      descriptor.value = getNewFunction(descriptor.value, hashFunction, ttlMs, tags);\n    } else if (descriptor.get != null) {\n      descriptor.get = getNewFunction(descriptor.get, hashFunction, ttlMs, tags);\n    } else {\n      throw new Error(\"Only put a Memoize() decorator on a method or get accessor.\");\n    }\n  };\n}\n\nexport function MemoizeExpiring(ttlMs: number, hashFunction?: MemoizeArgs[\"hashFunction\"]) {\n  return Memoize({\n    ttlMs,\n    hashFunction,\n  });\n}\n\nconst clearCacheTagsMap: Map<string, Map<any, any>[]> = new Map();\n\nexport function clear(tags: string[]): number {\n  const cleared: Set<Map<any, any>> = new Set();\n  for (const tag of tags) {\n    const maps = clearCacheTagsMap.get(tag);\n    if (maps) {\n      for (const mp of maps) {\n        if (!cleared.has(mp)) {\n          mp.clear();\n          cleared.add(mp);\n        }\n      }\n    }\n  }\n  return cleared.size;\n}\n\nfunction getNewFunction(\n  originalMethod: () => void,\n  hashFunction?: MemoizeArgs[\"hashFunction\"],\n  ttlMs: number = 0,\n  tags?: MemoizeArgs[\"tags\"],\n) {\n  const propMapName = Symbol(\"__memoized_map__\");\n\n  // The function returned here gets called instead of originalMethod.\n  // eslint-disable-next-line func-names\n  return function (...args: any[]) {\n    let returnedValue: any;\n\n    // @ts-ignore\n    const that: any = this;\n\n    // Get or create map\n    // eslint-disable-next-line no-prototype-builtins\n    if (!that.hasOwnProperty(propMapName)) {\n      Object.defineProperty(that, propMapName, {\n        configurable: false,\n        enumerable: false,\n        writable: false,\n        value: new Map<any, any>(),\n      });\n    }\n    const myMap: Map<any, any> = that[propMapName];\n\n    if (Array.isArray(tags)) {\n      for (const tag of tags) {\n        if (clearCacheTagsMap.has(tag)) {\n          clearCacheTagsMap.get(tag)!.push(myMap);\n        } else {\n          clearCacheTagsMap.set(tag, [myMap]);\n        }\n      }\n    }\n\n    if (hashFunction || args.length > 0 || ttlMs > 0) {\n      let hashKey: any;\n\n      // If true is passed as first parameter, will automatically use every argument, passed to string\n      if (hashFunction === true) {\n        hashKey = args.map((a) => a.toString()).join(\"!\");\n      } else if (hashFunction) {\n        hashKey = hashFunction.apply(that, args);\n      } else {\n        // eslint-disable-next-line prefer-destructuring\n        hashKey = args[0];\n      }\n\n      const timestampKey = `${hashKey}__timestamp`;\n      let isExpired: boolean = false;\n      if (ttlMs > 0) {\n        if (!myMap.has(timestampKey)) {\n          // \"Expired\" since it was never called before\n          isExpired = true;\n        } else {\n          const timestamp = myMap.get(timestampKey);\n          isExpired = Date.now() - timestamp > ttlMs;\n        }\n      }\n\n      if (myMap.has(hashKey) && !isExpired) {\n        returnedValue = myMap.get(hashKey);\n      } else {\n        returnedValue = originalMethod.apply(that, args as any);\n        myMap.set(hashKey, returnedValue);\n        if (ttlMs > 0) {\n          myMap.set(timestampKey, Date.now());\n        }\n      }\n    } else {\n      const hashKey = that;\n      if (myMap.has(hashKey)) {\n        returnedValue = myMap.get(hashKey);\n      } else {\n        returnedValue = originalMethod.apply(that, args as any);\n        myMap.set(hashKey, returnedValue);\n      }\n    }\n\n    return returnedValue;\n  };\n}\n","import { AnyNumber } from \"../bcs\";\n\n/**\n * A configuration object we can pass with the request to the server.\n *\n * @param TOKEN - an auth token to send with the request\n * @param HEADERS - extra headers we want to send with the request\n * @param WITH_CREDENTIALS - whether to carry cookies. By default, it is set to true and cookies will be sent\n */\nexport type ClientConfig = {\n  TOKEN?: string;\n  HEADERS?: Record<string, string | number | boolean>;\n  WITH_CREDENTIALS?: boolean;\n};\n\n/**\n * The API request type\n *\n * @param url - the url to make the request to, i.e https://fullnode.aptoslabs.devnet.com/v1\n * @param method - the request method \"GET\" | \"POST\"\n * @param endpoint (optional) - the endpoint to make the request to, i.e transactions\n * @param body (optional) - the body of the request\n * @param contentType (optional) - the content type to set the `content-type` header to,\n * by default is set to `application/json`\n * @param params (optional) - query params to add to the request\n * @param originMethod (optional) - the local method the request came from\n * @param overrides (optional) - a `ClientConfig` object type to override request data\n */\nexport type AptosRequest = {\n  url: string;\n  method: \"GET\" | \"POST\";\n  endpoint?: string;\n  body?: any;\n  contentType?: string;\n  params?: Record<string, string | AnyNumber | boolean | undefined>;\n  originMethod?: string;\n  overrides?: ClientConfig;\n};\n\n/**\n * The API response type\n *\n * @param status - the response status. i.e 200\n * @param statusText - the response message\n * @param data the response data\n * @param url the url the request was made to\n * @param headers the response headers\n * @param config (optional) - the request object\n * @param request (optional) - the request object\n */\nexport interface AptosResponse<Req, Res> {\n  status: number;\n  statusText: string;\n  data: Res;\n  url: string;\n  headers: any;\n  config?: any;\n  request?: Req;\n}\n\n/**\n * The type returned from an API error\n *\n * @param name - the error name \"AptosApiError\"\n * @param url the url the request was made to\n * @param status - the response status. i.e 400\n * @param statusText - the response message\n * @param data the response data\n * @param request - the AptosRequest\n */\nexport class AptosApiError extends Error {\n  readonly url: string;\n\n  readonly status: number;\n\n  readonly statusText: string;\n\n  readonly data: any;\n\n  readonly request: AptosRequest;\n\n  constructor(request: AptosRequest, response: AptosResponse<any, any>, message: string) {\n    super(message);\n\n    this.name = \"AptosApiError\";\n    this.url = response.url;\n    this.status = response.status;\n    this.statusText = response.statusText;\n    this.data = response.data;\n    this.request = request;\n  }\n}\n","import aptosClient from \"@aptos-labs/aptos-client\";\nimport { AptosApiError, AptosRequest, AptosResponse, ClientConfig } from \"./types\";\nimport { VERSION } from \"../version\";\n\n/**\n * Meaningful errors map\n */\nconst errors: Record<number, string> = {\n  400: \"Bad Request\",\n  401: \"Unauthorized\",\n  403: \"Forbidden\",\n  404: \"Not Found\",\n  429: \"Too Many Requests\",\n  500: \"Internal Server Error\",\n  502: \"Bad Gateway\",\n  503: \"Service Unavailable\",\n};\n\n/**\n * Given a url and method, sends the request with axios and\n * returns the response.\n */\nasync function request<Req, Res>(\n  url: string,\n  method: \"GET\" | \"POST\",\n  body?: Req,\n  contentType?: string,\n  params?: any,\n  overrides?: ClientConfig,\n): Promise<any> {\n  const headers: Record<string, string | string[] | undefined> = {\n    ...overrides?.HEADERS,\n    \"x-aptos-client\": `aptos-ts-sdk/${VERSION}`,\n    \"content-type\": contentType ?? \"application/json\",\n  };\n\n  if (overrides?.TOKEN) {\n    headers.Authorization = `Bearer ${overrides?.TOKEN}`;\n  }\n\n  /**\n   * make a call using the @aptos-labs/aptos-client package\n   * {@link https://www.npmjs.com/package/@aptos-labs/aptos-client}\n   */\n  const response = await aptosClient<Res>({ url, method, body, params, headers, overrides });\n  return response;\n}\n\n/**\n * The main function to use when doing an API request.\n *\n * @param options AptosRequest\n * @returns the response or AptosApiError\n */\nexport async function aptosRequest<Req, Res>(options: AptosRequest): Promise<AptosResponse<Req, Res>> {\n  const { url, endpoint, method, body, contentType, params, overrides } = options;\n  const fullEndpoint = `${url}/${endpoint ?? \"\"}`;\n  const response = await request<Req, Res>(fullEndpoint, method, body, contentType, params, overrides);\n\n  const result: AptosResponse<Req, Res> = {\n    status: response.status,\n    statusText: response.statusText!,\n    data: response.data,\n    headers: response.headers,\n    config: response.config,\n    url: fullEndpoint,\n  };\n\n  if (result.status >= 200 && result.status < 300) {\n    return result;\n  }\n  const errorMessage = errors[result.status];\n  throw new AptosApiError(options, result, errorMessage ?? \"Generic Error\");\n}\n","import { aptosRequest } from \"./core\";\nimport { AptosRequest, AptosResponse } from \"./types\";\n\nexport type GetRequestOptions = Omit<AptosRequest, \"body\" | \"method\">;\n\n/**\n * Main function to do a Get request\n *\n * @param options GetRequestOptions\n * @returns\n */\nexport async function get<Req, Res>(options: GetRequestOptions): Promise<AptosResponse<Req, Res>> {\n  const response: AptosResponse<Req, Res> = await aptosRequest<Req, Res>({ ...options, method: \"GET\" });\n  return response;\n}\n","import { aptosRequest } from \"./core\";\nimport { AptosRequest, AptosResponse } from \"./types\";\n\nexport type PostRequestOptions = Omit<AptosRequest, \"method\">;\n\n/**\n * Main function to do a Post request\n *\n * @param options PostRequestOptions\n * @returns\n */\nexport async function post<Req, Res>(options: PostRequestOptions): Promise<AptosResponse<Req, Res>> {\n  const response: AptosResponse<Req, Res> = await aptosRequest<Req, Res>({ ...options, method: \"POST\" });\n  return response;\n}\n","import { ClientConfig, get } from \"../client\";\n\n/// This function is a helper for paginating using a function wrapping an API\nexport async function paginateWithCursor<Req extends Record<string, any>, Res extends any[]>(options: {\n  url: string;\n  endpoint?: string;\n  body?: any;\n  params?: Req;\n  originMethod?: string;\n  overrides?: ClientConfig;\n}): Promise<Res> {\n  const out = [];\n  let cursor: string | undefined;\n  const requestParams = options.params as Req & { start?: string };\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    requestParams.start = cursor;\n    // eslint-disable-next-line no-await-in-loop\n    const response = await get<Req, Res>({\n      url: options.url,\n      endpoint: options.endpoint,\n      params: requestParams,\n      originMethod: options.originMethod,\n      overrides: options.overrides,\n    });\n    // eslint-disable-next-line no-underscore-dangle\n    /**\n     * the cursor is a \"state key\" from the API prespective. Client\n     * should not need to \"care\" what it represents but just use it\n     * to query the next chunck of data.\n     */\n    cursor = response.headers[\"x-aptos-cursor\"];\n    // Now that we have the cursor (if any), we remove the headers before\n    // adding these to the output of this function.\n    // eslint-disable-next-line no-underscore-dangle\n    delete (response as any).headers;\n    out.push(...response.data);\n    if (cursor === null || cursor === undefined) {\n      break;\n    }\n  }\n  return out as any;\n}\n","export const NetworkToIndexerAPI: Record<string, string> = {\n  mainnet: \"https://indexer.mainnet.aptoslabs.com/v1/graphql\",\n  testnet: \"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql\",\n  devnet: \"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql\",\n  local: \"http://127.0.0.1:8090/v1/graphql\",\n};\n\nexport const NetworkToNodeAPI: Record<string, string> = {\n  mainnet: \"https://fullnode.mainnet.aptoslabs.com/v1\",\n  testnet: \"https://fullnode.testnet.aptoslabs.com/v1\",\n  devnet: \"https://fullnode.devnet.aptoslabs.com/v1\",\n  local: \"http://127.0.0.1:8080/v1\",\n};\n\nexport const NodeAPIToNetwork: Record<string, string> = {\n  \"https://fullnode.mainnet.aptoslabs.com/v1\": \"mainnet\",\n  \"https://fullnode.testnet.aptoslabs.com/v1\": \"testnet\",\n  \"https://fullnode.devnet.aptoslabs.com/v1\": \"devnet\",\n  \"http://127.0.0.1:8080/v1\": \"local\",\n};\n\nexport enum Network {\n  MAINNET = \"mainnet\",\n  TESTNET = \"testnet\",\n  DEVNET = \"devnet\",\n  LOCAL = \"local\",\n}\n\nexport interface CustomEndpoints {\n  fullnodeUrl: string;\n  indexerUrl?: string;\n}\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport { bytesToHex, hexToBytes } from \"@noble/hashes/utils\";\nimport { HexEncodedBytes } from \"../generated\";\n\n// eslint-disable-next-line no-use-before-define\nexport type MaybeHexString = HexString | string | HexEncodedBytes;\n\n/**\n * A util class for working with hex strings.\n * Hex strings are strings that are prefixed with `0x`\n */\nexport class HexString {\n  /// We want to make sure this hexString has the `0x` hex prefix\n  private readonly hexString: string;\n\n  /**\n   * Creates new hex string from Buffer\n   * @param buffer A buffer to convert\n   * @returns New HexString\n   */\n  static fromBuffer(buffer: Uint8Array): HexString {\n    return HexString.fromUint8Array(buffer);\n  }\n\n  /**\n   * Creates new hex string from Uint8Array\n   * @param arr Uint8Array to convert\n   * @returns New HexString\n   */\n  static fromUint8Array(arr: Uint8Array): HexString {\n    return new HexString(bytesToHex(arr));\n  }\n\n  /**\n   * Ensures `hexString` is instance of `HexString` class\n   * @param hexString String to check\n   * @returns New HexString if `hexString` is regular string or `hexString` if it is HexString instance\n   * @example\n   * ```\n   *  const regularString = \"string\";\n   *  const hexString = new HexString(\"string\"); // \"0xstring\"\n   *  HexString.ensure(regularString); // \"0xstring\"\n   *  HexString.ensure(hexString); // \"0xstring\"\n   * ```\n   */\n  static ensure(hexString: MaybeHexString): HexString {\n    if (typeof hexString === \"string\") {\n      return new HexString(hexString);\n    }\n    return hexString;\n  }\n\n  /**\n   * Creates new HexString instance from regular string. If specified string already starts with \"0x\" prefix,\n   * it will not add another one\n   * @param hexString String to convert\n   * @example\n   * ```\n   *  const string = \"string\";\n   *  new HexString(string); // \"0xstring\"\n   * ```\n   */\n  constructor(hexString: string | HexEncodedBytes) {\n    if (hexString.startsWith(\"0x\")) {\n      this.hexString = hexString;\n    } else {\n      this.hexString = `0x${hexString}`;\n    }\n  }\n\n  /**\n   * Getter for inner hexString\n   * @returns Inner hex string\n   */\n  hex(): string {\n    return this.hexString;\n  }\n\n  /**\n   * Getter for inner hexString without prefix\n   * @returns Inner hex string without prefix\n   * @example\n   * ```\n   *  const hexString = new HexString(\"string\"); // \"0xstring\"\n   *  hexString.noPrefix(); // \"string\"\n   * ```\n   */\n  noPrefix(): string {\n    return this.hexString.slice(2);\n  }\n\n  /**\n   * Overrides default `toString` method\n   * @returns Inner hex string\n   */\n  toString(): string {\n    return this.hex();\n  }\n\n  /**\n   * Trimmes extra zeroes in the begining of a string\n   * @returns Inner hexString without leading zeroes\n   * @example\n   * ```\n   *  new HexString(\"0x000000string\").toShortString(); // result = \"0xstring\"\n   * ```\n   */\n  toShortString(): string {\n    const trimmed = this.hexString.replace(/^0x0*/, \"\");\n    return `0x${trimmed}`;\n  }\n\n  /**\n   * Converts hex string to a Uint8Array\n   * @returns Uint8Array from inner hexString without prefix\n   */\n  toUint8Array(): Uint8Array {\n    return Uint8Array.from(hexToBytes(this.noPrefix()));\n  }\n}\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nexport * from \"./abi\";\nexport * from \"./account_address\";\nexport * from \"./authenticator\";\nexport * from \"./transaction\";\nexport * from \"./type_tag\";\nexport * from \"./identifier\";\nexport * from \"./ed25519\";\nexport * from \"./multi_ed25519\";\nexport * from \"./authentication_key\";\nexport * from \"./rotation_proof_challenge\";\n\nexport type SigningMessage = Uint8Array;\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nexport * from \"./types\";\nexport * from \"./serializer\";\nexport * from \"./deserializer\";\nexport * from \"./helper\";\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Uint128, Uint16, Uint32, Uint64, Uint8, Uint256 } from \"./types\";\n\n// Upper bound values for uint8, uint16, uint64 and uint128\nexport const MAX_U8_NUMBER: Uint8 = 2 ** 8 - 1;\nexport const MAX_U16_NUMBER: Uint16 = 2 ** 16 - 1;\nexport const MAX_U32_NUMBER: Uint32 = 2 ** 32 - 1;\nexport const MAX_U64_BIG_INT: Uint64 = BigInt(2 ** 64) - BigInt(1);\nexport const MAX_U128_BIG_INT: Uint128 = BigInt(2 ** 128) - BigInt(1);\nexport const MAX_U256_BIG_INT: Uint256 = BigInt(2 ** 256) - BigInt(1);\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\n/* eslint-disable no-bitwise */\nimport {\n  MAX_U128_BIG_INT,\n  MAX_U16_NUMBER,\n  MAX_U32_NUMBER,\n  MAX_U64_BIG_INT,\n  MAX_U8_NUMBER,\n  MAX_U256_BIG_INT,\n} from \"./consts\";\nimport { AnyNumber, Bytes, Uint16, Uint32, Uint8 } from \"./types\";\n\nexport class Serializer {\n  private buffer: ArrayBuffer;\n\n  private offset: number;\n\n  constructor() {\n    this.buffer = new ArrayBuffer(64);\n    this.offset = 0;\n  }\n\n  private ensureBufferWillHandleSize(bytes: number) {\n    while (this.buffer.byteLength < this.offset + bytes) {\n      const newBuffer = new ArrayBuffer(this.buffer.byteLength * 2);\n      new Uint8Array(newBuffer).set(new Uint8Array(this.buffer));\n      this.buffer = newBuffer;\n    }\n  }\n\n  protected serialize(values: Bytes) {\n    this.ensureBufferWillHandleSize(values.length);\n    new Uint8Array(this.buffer, this.offset).set(values);\n    this.offset += values.length;\n  }\n\n  private serializeWithFunction(\n    fn: (byteOffset: number, value: number, littleEndian?: boolean) => void,\n    bytesLength: number,\n    value: number,\n  ) {\n    this.ensureBufferWillHandleSize(bytesLength);\n    const dv = new DataView(this.buffer, this.offset);\n    fn.apply(dv, [0, value, true]);\n    this.offset += bytesLength;\n  }\n\n  /**\n   * Serializes a string. UTF8 string is supported. Serializes the string's bytes length \"l\" first,\n   * and then serializes \"l\" bytes of the string content.\n   *\n   * BCS layout for \"string\": string_length | string_content. string_length is the bytes length of\n   * the string that is uleb128 encoded. string_length is a u32 integer.\n   *\n   * @example\n   * ```ts\n   * const serializer = new Serializer();\n   * serializer.serializeStr(\"çå∞≠¢õß∂ƒ∫\");\n   * assert(serializer.getBytes() === new Uint8Array([24, 0xc3, 0xa7, 0xc3, 0xa5, 0xe2, 0x88, 0x9e,\n   * 0xe2, 0x89, 0xa0, 0xc2, 0xa2, 0xc3, 0xb5, 0xc3, 0x9f, 0xe2, 0x88, 0x82, 0xc6, 0x92, 0xe2, 0x88, 0xab]));\n   * ```\n   */\n  serializeStr(value: string): void {\n    const textEncoder = new TextEncoder();\n    this.serializeBytes(textEncoder.encode(value));\n  }\n\n  /**\n   * Serializes an array of bytes.\n   *\n   * BCS layout for \"bytes\": bytes_length | bytes. bytes_length is the length of the bytes array that is\n   * uleb128 encoded. bytes_length is a u32 integer.\n   */\n  serializeBytes(value: Bytes): void {\n    this.serializeU32AsUleb128(value.length);\n    this.serialize(value);\n  }\n\n  /**\n   * Serializes an array of bytes with known length. Therefore length doesn't need to be\n   * serialized to help deserialization.  When deserializing, the number of\n   * bytes to deserialize needs to be passed in.\n   */\n  serializeFixedBytes(value: Bytes): void {\n    this.serialize(value);\n  }\n\n  /**\n   * Serializes a boolean value.\n   *\n   * BCS layout for \"boolean\": One byte. \"0x01\" for True and \"0x00\" for False.\n   */\n  serializeBool(value: boolean): void {\n    if (typeof value !== \"boolean\") {\n      throw new Error(\"Value needs to be a boolean\");\n    }\n    const byteValue = value ? 1 : 0;\n    this.serialize(new Uint8Array([byteValue]));\n  }\n\n  /**\n   * Serializes a uint8 number.\n   *\n   * BCS layout for \"uint8\": One byte. Binary format in little-endian representation.\n   */\n  @checkNumberRange(0, MAX_U8_NUMBER)\n  serializeU8(value: Uint8): void {\n    this.serialize(new Uint8Array([value]));\n  }\n\n  /**\n   * Serializes a uint16 number.\n   *\n   * BCS layout for \"uint16\": Two bytes. Binary format in little-endian representation.\n   * @example\n   * ```ts\n   * const serializer = new Serializer();\n   * serializer.serializeU16(4660);\n   * assert(serializer.getBytes() === new Uint8Array([0x34, 0x12]));\n   * ```\n   */\n  @checkNumberRange(0, MAX_U16_NUMBER)\n  serializeU16(value: Uint16): void {\n    this.serializeWithFunction(DataView.prototype.setUint16, 2, value);\n  }\n\n  /**\n   * Serializes a uint32 number.\n   *\n   * BCS layout for \"uint32\": Four bytes. Binary format in little-endian representation.\n   * @example\n   * ```ts\n   * const serializer = new Serializer();\n   * serializer.serializeU32(305419896);\n   * assert(serializer.getBytes() === new Uint8Array([0x78, 0x56, 0x34, 0x12]));\n   * ```\n   */\n  @checkNumberRange(0, MAX_U32_NUMBER)\n  serializeU32(value: Uint32): void {\n    this.serializeWithFunction(DataView.prototype.setUint32, 4, value);\n  }\n\n  /**\n   * Serializes a uint64 number.\n   *\n   * BCS layout for \"uint64\": Eight bytes. Binary format in little-endian representation.\n   * @example\n   * ```ts\n   * const serializer = new Serializer();\n   * serializer.serializeU64(1311768467750121216);\n   * assert(serializer.getBytes() === new Uint8Array([0x00, 0xEF, 0xCD, 0xAB, 0x78, 0x56, 0x34, 0x12]));\n   * ```\n   */\n  @checkNumberRange(BigInt(0), MAX_U64_BIG_INT)\n  serializeU64(value: AnyNumber): void {\n    const low = BigInt(value.toString()) & BigInt(MAX_U32_NUMBER);\n    const high = BigInt(value.toString()) >> BigInt(32);\n\n    // write little endian number\n    this.serializeU32(Number(low));\n    this.serializeU32(Number(high));\n  }\n\n  /**\n   * Serializes a uint128 number.\n   *\n   * BCS layout for \"uint128\": Sixteen bytes. Binary format in little-endian representation.\n   */\n  @checkNumberRange(BigInt(0), MAX_U128_BIG_INT)\n  serializeU128(value: AnyNumber): void {\n    const low = BigInt(value.toString()) & MAX_U64_BIG_INT;\n    const high = BigInt(value.toString()) >> BigInt(64);\n\n    // write little endian number\n    this.serializeU64(low);\n    this.serializeU64(high);\n  }\n\n  /**\n   * Serializes a uint256 number.\n   *\n   * BCS layout for \"uint256\": Sixteen bytes. Binary format in little-endian representation.\n   */\n  @checkNumberRange(BigInt(0), MAX_U256_BIG_INT)\n  serializeU256(value: AnyNumber): void {\n    const low = BigInt(value.toString()) & MAX_U128_BIG_INT;\n    const high = BigInt(value.toString()) >> BigInt(128);\n\n    // write little endian number\n    this.serializeU128(low);\n    this.serializeU128(high);\n  }\n\n  /**\n   * Serializes a uint32 number with uleb128.\n   *\n   * BCS use uleb128 encoding in two cases: (1) lengths of variable-length sequences and (2) tags of enum values\n   */\n  @checkNumberRange(0, MAX_U32_NUMBER)\n  serializeU32AsUleb128(val: Uint32): void {\n    let value = val;\n    const valueArray = [];\n    while (value >>> 7 !== 0) {\n      valueArray.push((value & 0x7f) | 0x80);\n      value >>>= 7;\n    }\n    valueArray.push(value);\n    this.serialize(new Uint8Array(valueArray));\n  }\n\n  /**\n   * Returns the buffered bytes\n   */\n  getBytes(): Bytes {\n    return new Uint8Array(this.buffer).slice(0, this.offset);\n  }\n}\n\n/**\n * Creates a decorator to make sure the arg value of the decorated function is within a range.\n * @param minValue The arg value of decorated function must >= minValue\n * @param maxValue The arg value of decorated function must <= maxValue\n * @param message Error message\n */\nfunction checkNumberRange<T extends AnyNumber>(minValue: T, maxValue: T, message?: string) {\n  return (target: unknown, propertyKey: string, descriptor: PropertyDescriptor) => {\n    const childFunction = descriptor.value;\n    // eslint-disable-next-line no-param-reassign\n    descriptor.value = function deco(value: AnyNumber) {\n      const valueBigInt = BigInt(value.toString());\n      if (valueBigInt > BigInt(maxValue.toString()) || valueBigInt < BigInt(minValue.toString())) {\n        throw new Error(message || \"Value is out of range\");\n      }\n      childFunction.apply(this, [value]);\n    };\n    return descriptor;\n  };\n}\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\n/* eslint-disable no-bitwise */\nimport { MAX_U32_NUMBER } from \"./consts\";\nimport { Bytes, Uint128, Uint16, Uint256, Uint32, Uint64, Uint8 } from \"./types\";\n\nexport class Deserializer {\n  private buffer: ArrayBuffer;\n\n  private offset: number;\n\n  constructor(data: Bytes) {\n    // copies data to prevent outside mutation of buffer.\n    this.buffer = new ArrayBuffer(data.length);\n    new Uint8Array(this.buffer).set(data, 0);\n    this.offset = 0;\n  }\n\n  private read(length: number): ArrayBuffer {\n    if (this.offset + length > this.buffer.byteLength) {\n      throw new Error(\"Reached to the end of buffer\");\n    }\n\n    const bytes = this.buffer.slice(this.offset, this.offset + length);\n    this.offset += length;\n    return bytes;\n  }\n\n  /**\n   * Deserializes a string. UTF8 string is supported. Reads the string's bytes length \"l\" first,\n   * and then reads \"l\" bytes of content. Decodes the byte array into a string.\n   *\n   * BCS layout for \"string\": string_length | string_content. string_length is the bytes length of\n   * the string that is uleb128 encoded. string_length is a u32 integer.\n   *\n   * @example\n   * ```ts\n   * const deserializer = new Deserializer(new Uint8Array([24, 0xc3, 0xa7, 0xc3, 0xa5, 0xe2, 0x88, 0x9e,\n   * 0xe2, 0x89, 0xa0, 0xc2, 0xa2, 0xc3, 0xb5, 0xc3, 0x9f, 0xe2, 0x88, 0x82, 0xc6, 0x92, 0xe2, 0x88, 0xab]));\n   * assert(deserializer.deserializeStr() === \"çå∞≠¢õß∂ƒ∫\");\n   * ```\n   */\n  deserializeStr(): string {\n    const value = this.deserializeBytes();\n    const textDecoder = new TextDecoder();\n    return textDecoder.decode(value);\n  }\n\n  /**\n   * Deserializes an array of bytes.\n   *\n   * BCS layout for \"bytes\": bytes_length | bytes. bytes_length is the length of the bytes array that is\n   * uleb128 encoded. bytes_length is a u32 integer.\n   */\n  deserializeBytes(): Bytes {\n    const len = this.deserializeUleb128AsU32();\n    return new Uint8Array(this.read(len));\n  }\n\n  /**\n   * Deserializes an array of bytes. The number of bytes to read is already known.\n   *\n   */\n  deserializeFixedBytes(len: number): Bytes {\n    return new Uint8Array(this.read(len));\n  }\n\n  /**\n   * Deserializes a boolean value.\n   *\n   * BCS layout for \"boolean\": One byte. \"0x01\" for True and \"0x00\" for False.\n   */\n  deserializeBool(): boolean {\n    const bool = new Uint8Array(this.read(1))[0];\n    if (bool !== 1 && bool !== 0) {\n      throw new Error(\"Invalid boolean value\");\n    }\n    return bool === 1;\n  }\n\n  /**\n   * Deserializes a uint8 number.\n   *\n   * BCS layout for \"uint8\": One byte. Binary format in little-endian representation.\n   */\n  deserializeU8(): Uint8 {\n    return new DataView(this.read(1)).getUint8(0);\n  }\n\n  /**\n   * Deserializes a uint16 number.\n   *\n   * BCS layout for \"uint16\": Two bytes. Binary format in little-endian representation.\n   * @example\n   * ```ts\n   * const deserializer = new Deserializer(new Uint8Array([0x34, 0x12]));\n   * assert(deserializer.deserializeU16() === 4660);\n   * ```\n   */\n  deserializeU16(): Uint16 {\n    return new DataView(this.read(2)).getUint16(0, true);\n  }\n\n  /**\n   * Deserializes a uint32 number.\n   *\n   * BCS layout for \"uint32\": Four bytes. Binary format in little-endian representation.\n   * @example\n   * ```ts\n   * const deserializer = new Deserializer(new Uint8Array([0x78, 0x56, 0x34, 0x12]));\n   * assert(deserializer.deserializeU32() === 305419896);\n   * ```\n   */\n  deserializeU32(): Uint32 {\n    return new DataView(this.read(4)).getUint32(0, true);\n  }\n\n  /**\n   * Deserializes a uint64 number.\n   *\n   * BCS layout for \"uint64\": Eight bytes. Binary format in little-endian representation.\n   * @example\n   * ```ts\n   * const deserializer = new Deserializer(new Uint8Array([0x00, 0xEF, 0xCD, 0xAB, 0x78, 0x56, 0x34, 0x12]));\n   * assert(deserializer.deserializeU64() === 1311768467750121216);\n   * ```\n   */\n  deserializeU64(): Uint64 {\n    const low = this.deserializeU32();\n    const high = this.deserializeU32();\n\n    // combine the two 32-bit values and return (little endian)\n    return BigInt((BigInt(high) << BigInt(32)) | BigInt(low));\n  }\n\n  /**\n   * Deserializes a uint128 number.\n   *\n   * BCS layout for \"uint128\": Sixteen bytes. Binary format in little-endian representation.\n   */\n  deserializeU128(): Uint128 {\n    const low = this.deserializeU64();\n    const high = this.deserializeU64();\n\n    // combine the two 64-bit values and return (little endian)\n    return BigInt((high << BigInt(64)) | low);\n  }\n\n  /**\n   * Deserializes a uint256 number.\n   *\n   * BCS layout for \"uint256\": Thirty-two bytes. Binary format in little-endian representation.\n   */\n  deserializeU256(): Uint256 {\n    const low = this.deserializeU128();\n    const high = this.deserializeU128();\n\n    // combine the two 128-bit values and return (little endian)\n    return BigInt((high << BigInt(128)) | low);\n  }\n\n  /**\n   * Deserializes a uleb128 encoded uint32 number.\n   *\n   * BCS use uleb128 encoding in two cases: (1) lengths of variable-length sequences and (2) tags of enum values\n   */\n  deserializeUleb128AsU32(): Uint32 {\n    let value: bigint = BigInt(0);\n    let shift = 0;\n\n    while (value < MAX_U32_NUMBER) {\n      const byte = this.deserializeU8();\n      value |= BigInt(byte & 0x7f) << BigInt(shift);\n\n      if ((byte & 0x80) === 0) {\n        break;\n      }\n      shift += 7;\n    }\n\n    if (value > MAX_U32_NUMBER) {\n      throw new Error(\"Overflow while parsing uleb128-encoded uint32 value\");\n    }\n\n    return Number(value);\n  }\n}\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Deserializer } from \"./deserializer\";\nimport { Serializer } from \"./serializer\";\nimport { AnyNumber, Bytes, Seq, Uint16, Uint32, Uint8 } from \"./types\";\n\ninterface Serializable {\n  serialize(serializer: Serializer): void;\n}\n\n/**\n * Serializes a vector values that are \"Serializable\".\n */\nexport function serializeVector<T extends Serializable>(value: Seq<T>, serializer: Serializer): void {\n  serializer.serializeU32AsUleb128(value.length);\n  value.forEach((item: T) => {\n    item.serialize(serializer);\n  });\n}\n\n/**\n * Serializes a vector with specified item serialization function.\n * Very dynamic function and bypasses static typechecking.\n */\nexport function serializeVectorWithFunc(value: any[], func: string): Bytes {\n  const serializer = new Serializer();\n  serializer.serializeU32AsUleb128(value.length);\n  const f = (serializer as any)[func];\n  value.forEach((item) => {\n    f.call(serializer, item);\n  });\n  return serializer.getBytes();\n}\n\n/**\n * Deserializes a vector of values.\n */\nexport function deserializeVector(deserializer: Deserializer, cls: any): any[] {\n  const length = deserializer.deserializeUleb128AsU32();\n  const list: Seq<typeof cls> = [];\n  for (let i = 0; i < length; i += 1) {\n    list.push(cls.deserialize(deserializer));\n  }\n  return list;\n}\n\nexport function bcsToBytes<T extends Serializable>(value: T): Bytes {\n  const serializer = new Serializer();\n  value.serialize(serializer);\n  return serializer.getBytes();\n}\n\nexport function bcsSerializeUint64(value: AnyNumber): Bytes {\n  const serializer = new Serializer();\n  serializer.serializeU64(value);\n  return serializer.getBytes();\n}\n\nexport function bcsSerializeU8(value: Uint8): Bytes {\n  const serializer = new Serializer();\n  serializer.serializeU8(value);\n  return serializer.getBytes();\n}\n\nexport function bcsSerializeU16(value: Uint16): Bytes {\n  const serializer = new Serializer();\n  serializer.serializeU16(value);\n  return serializer.getBytes();\n}\n\nexport function bcsSerializeU32(value: Uint32): Bytes {\n  const serializer = new Serializer();\n  serializer.serializeU32(value);\n  return serializer.getBytes();\n}\n\nexport function bcsSerializeU128(value: AnyNumber): Bytes {\n  const serializer = new Serializer();\n  serializer.serializeU128(value);\n  return serializer.getBytes();\n}\n\nexport function bcsSerializeU256(value: AnyNumber): Bytes {\n  const serializer = new Serializer();\n  serializer.serializeU256(value);\n  return serializer.getBytes();\n}\n\nexport function bcsSerializeBool(value: boolean): Bytes {\n  const serializer = new Serializer();\n  serializer.serializeBool(value);\n  return serializer.getBytes();\n}\n\nexport function bcsSerializeStr(value: string): Bytes {\n  const serializer = new Serializer();\n  serializer.serializeStr(value);\n  return serializer.getBytes();\n}\n\nexport function bcsSerializeBytes(value: Bytes): Bytes {\n  const serializer = new Serializer();\n  serializer.serializeBytes(value);\n  return serializer.getBytes();\n}\n\nexport function bcsSerializeFixedBytes(value: Bytes): Bytes {\n  const serializer = new Serializer();\n  serializer.serializeFixedBytes(value);\n  return serializer.getBytes();\n}\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport { HexString, MaybeHexString } from \"../utils\";\nimport { Serializer, Deserializer, Bytes } from \"../bcs\";\n\n/**\n * Exported as TransactionBuilderTypes.AccountAddress\n */\nexport class AccountAddress {\n  static readonly LENGTH: number = 32;\n\n  readonly address: Bytes;\n\n  static CORE_CODE_ADDRESS: AccountAddress = AccountAddress.fromHex(\"0x1\");\n\n  constructor(address: Bytes) {\n    if (address.length !== AccountAddress.LENGTH) {\n      throw new Error(\"Expected address of length 32\");\n    }\n    this.address = address;\n  }\n\n  /**\n   * Creates AccountAddress from a hex string.\n   * @param addr Hex string can be with a prefix or without a prefix,\n   *   e.g. '0x1aa' or '1aa'. Hex string will be left padded with 0s if too short.\n   */\n  static fromHex(addr: MaybeHexString): AccountAddress {\n    let address = HexString.ensure(addr);\n\n    // If an address hex has odd number of digits, padd the hex string with 0\n    // e.g. '1aa' would become '01aa'.\n    if (address.noPrefix().length % 2 !== 0) {\n      address = new HexString(`0${address.noPrefix()}`);\n    }\n\n    const addressBytes = address.toUint8Array();\n\n    if (addressBytes.length > AccountAddress.LENGTH) {\n      // eslint-disable-next-line quotes\n      throw new Error(\"Hex string is too long. Address's length is 32 bytes.\");\n    } else if (addressBytes.length === AccountAddress.LENGTH) {\n      return new AccountAddress(addressBytes);\n    }\n\n    const res: Bytes = new Uint8Array(AccountAddress.LENGTH);\n    res.set(addressBytes, AccountAddress.LENGTH - addressBytes.length);\n\n    return new AccountAddress(res);\n  }\n\n  /**\n   * Checks if the string is a valid AccountAddress\n   * @param addr Hex string can be with a prefix or without a prefix,\n   *   e.g. '0x1aa' or '1aa'. Hex string will be left padded with 0s if too short.\n   */\n  static isValid(addr: MaybeHexString): boolean {\n    // At least one zero is required\n    if (addr === \"\") {\n      return false;\n    }\n\n    let address = HexString.ensure(addr);\n\n    // If an address hex has odd number of digits, padd the hex string with 0\n    // e.g. '1aa' would become '01aa'.\n    if (address.noPrefix().length % 2 !== 0) {\n      address = new HexString(`0${address.noPrefix()}`);\n    }\n\n    const addressBytes = address.toUint8Array();\n\n    return addressBytes.length <= AccountAddress.LENGTH;\n  }\n\n  /**\n   * Return a hex string from account Address.\n   */\n  toHexString(): MaybeHexString {\n    return HexString.fromUint8Array(this.address).hex();\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeFixedBytes(this.address);\n  }\n\n  static deserialize(deserializer: Deserializer): AccountAddress {\n    return new AccountAddress(deserializer.deserializeFixedBytes(AccountAddress.LENGTH));\n  }\n\n  /**\n   * Standardizes an address to the format \"0x\" followed by 64 lowercase hexadecimal digits.\n   */\n  static standardizeAddress(address: string): string {\n    // Convert the address to lowercase\n    const lowercaseAddress = address.toLowerCase();\n    // Remove the \"0x\" prefix if present\n    const addressWithoutPrefix = lowercaseAddress.startsWith(\"0x\") ? lowercaseAddress.slice(2) : lowercaseAddress;\n    // Pad the address with leading zeros if necessary\n    // to ensure it has exactly 64 characters (excluding the \"0x\" prefix)\n    const addressWithPadding = addressWithoutPrefix.padStart(64, \"0\");\n    // Return the standardized address with the \"0x\" prefix\n    return `0x${addressWithPadding}`;\n  }\n}\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Bytes, Deserializer, Serializer } from \"../bcs\";\n\nexport class Ed25519PublicKey {\n  static readonly LENGTH: number = 32;\n\n  readonly value: Bytes;\n\n  constructor(value: Bytes) {\n    if (value.length !== Ed25519PublicKey.LENGTH) {\n      throw new Error(`Ed25519PublicKey length should be ${Ed25519PublicKey.LENGTH}`);\n    }\n    this.value = value;\n  }\n\n  toBytes(): Bytes {\n    return this.value;\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeBytes(this.value);\n  }\n\n  static deserialize(deserializer: Deserializer): Ed25519PublicKey {\n    const value = deserializer.deserializeBytes();\n    return new Ed25519PublicKey(value);\n  }\n}\n\nexport class Ed25519Signature {\n  static readonly LENGTH = 64;\n\n  constructor(public readonly value: Bytes) {\n    if (value.length !== Ed25519Signature.LENGTH) {\n      throw new Error(`Ed25519Signature length should be ${Ed25519Signature.LENGTH}`);\n    }\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeBytes(this.value);\n  }\n\n  static deserialize(deserializer: Deserializer): Ed25519Signature {\n    const value = deserializer.deserializeBytes();\n    return new Ed25519Signature(value);\n  }\n}\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\n/* eslint-disable no-bitwise */\nimport { Bytes, Deserializer, Seq, Serializer, Uint8 } from \"../bcs\";\nimport { Ed25519PublicKey, Ed25519Signature } from \"./ed25519\";\n\n/**\n * MultiEd25519 currently supports at most 32 signatures.\n */\nconst MAX_SIGNATURES_SUPPORTED = 32;\n\nexport class MultiEd25519PublicKey {\n  /**\n   * Public key for a K-of-N multisig transaction. A K-of-N multisig transaction means that for such a\n   * transaction to be executed, at least K out of the N authorized signers have signed the transaction\n   * and passed the check conducted by the chain.\n   *\n   * @see {@link\n   * https://aptos.dev/guides/creating-a-signed-transaction#multisignature-transactions | Creating a Signed Transaction}\n   *\n   * @param public_keys A list of public keys\n   * @param threshold At least \"threshold\" signatures must be valid\n   */\n  constructor(\n    public readonly public_keys: Seq<Ed25519PublicKey>,\n    public readonly threshold: Uint8,\n  ) {\n    if (threshold > MAX_SIGNATURES_SUPPORTED) {\n      throw new Error(`\"threshold\" cannot be larger than ${MAX_SIGNATURES_SUPPORTED}`);\n    }\n  }\n\n  /**\n   * Converts a MultiEd25519PublicKey into bytes with: bytes = p1_bytes | ... | pn_bytes | threshold\n   */\n  toBytes(): Bytes {\n    const bytes = new Uint8Array(this.public_keys.length * Ed25519PublicKey.LENGTH + 1);\n    this.public_keys.forEach((k: Ed25519PublicKey, i: number) => {\n      bytes.set(k.value, i * Ed25519PublicKey.LENGTH);\n    });\n\n    bytes[this.public_keys.length * Ed25519PublicKey.LENGTH] = this.threshold;\n\n    return bytes;\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeBytes(this.toBytes());\n  }\n\n  static deserialize(deserializer: Deserializer): MultiEd25519PublicKey {\n    const bytes = deserializer.deserializeBytes();\n    const threshold = bytes[bytes.length - 1];\n\n    const keys: Seq<Ed25519PublicKey> = [];\n\n    for (let i = 0; i < bytes.length - 1; i += Ed25519PublicKey.LENGTH) {\n      const begin = i;\n      keys.push(new Ed25519PublicKey(bytes.subarray(begin, begin + Ed25519PublicKey.LENGTH)));\n    }\n    return new MultiEd25519PublicKey(keys, threshold);\n  }\n}\n\nexport class MultiEd25519Signature {\n  static BITMAP_LEN: Uint8 = 4;\n\n  /**\n   * Signature for a K-of-N multisig transaction.\n   *\n   * @see {@link\n   * https://aptos.dev/guides/creating-a-signed-transaction#multisignature-transactions | Creating a Signed Transaction}\n   *\n   * @param signatures A list of ed25519 signatures\n   * @param bitmap 4 bytes, at most 32 signatures are supported. If Nth bit value is `1`, the Nth\n   * signature should be provided in `signatures`. Bits are read from left to right\n   */\n  constructor(\n    public readonly signatures: Seq<Ed25519Signature>,\n    public readonly bitmap: Uint8Array,\n  ) {\n    if (bitmap.length !== MultiEd25519Signature.BITMAP_LEN) {\n      throw new Error(`\"bitmap\" length should be ${MultiEd25519Signature.BITMAP_LEN}`);\n    }\n  }\n\n  /**\n   * Converts a MultiEd25519Signature into bytes with `bytes = s1_bytes | ... | sn_bytes | bitmap`\n   */\n  toBytes(): Bytes {\n    const bytes = new Uint8Array(this.signatures.length * Ed25519Signature.LENGTH + MultiEd25519Signature.BITMAP_LEN);\n    this.signatures.forEach((k: Ed25519Signature, i: number) => {\n      bytes.set(k.value, i * Ed25519Signature.LENGTH);\n    });\n\n    bytes.set(this.bitmap, this.signatures.length * Ed25519Signature.LENGTH);\n\n    return bytes;\n  }\n\n  /**\n   * Helper method to create a bitmap out of the specified bit positions\n   * @param bits The bitmap positions that should be set. A position starts at index 0.\n   * Valid position should range between 0 and 31.\n   * @example\n   * Here's an example of valid `bits`\n   * ```\n   * [0, 2, 31]\n   * ```\n   * `[0, 2, 31]` means the 1st, 3rd and 32nd bits should be set in the bitmap.\n   * The result bitmap should be 0b1010000000000000000000000000001\n   *\n   * @returns bitmap that is 32bit long\n   */\n  static createBitmap(bits: Seq<Uint8>): Uint8Array {\n    // Bits are read from left to right. e.g. 0b10000000 represents the first bit is set in one byte.\n    // The decimal value of 0b10000000 is 128.\n    const firstBitInByte = 128;\n    const bitmap = new Uint8Array([0, 0, 0, 0]);\n\n    // Check if duplicates exist in bits\n    const dupCheckSet = new Set();\n\n    bits.forEach((bit: number) => {\n      if (bit >= MAX_SIGNATURES_SUPPORTED) {\n        throw new Error(`Invalid bit value ${bit}.`);\n      }\n\n      if (dupCheckSet.has(bit)) {\n        throw new Error(\"Duplicated bits detected.\");\n      }\n\n      dupCheckSet.add(bit);\n\n      const byteOffset = Math.floor(bit / 8);\n\n      let byte = bitmap[byteOffset];\n\n      byte |= firstBitInByte >> bit % 8;\n\n      bitmap[byteOffset] = byte;\n    });\n\n    return bitmap;\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeBytes(this.toBytes());\n  }\n\n  static deserialize(deserializer: Deserializer): MultiEd25519Signature {\n    const bytes = deserializer.deserializeBytes();\n    const bitmap = bytes.subarray(bytes.length - 4);\n\n    const sigs: Seq<Ed25519Signature> = [];\n\n    for (let i = 0; i < bytes.length - bitmap.length; i += Ed25519Signature.LENGTH) {\n      const begin = i;\n      sigs.push(new Ed25519Signature(bytes.subarray(begin, begin + Ed25519Signature.LENGTH)));\n    }\n    return new MultiEd25519Signature(sigs, bitmap);\n  }\n}\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\n/* eslint-disable @typescript-eslint/naming-convention */\nimport { AccountAddress } from \"./account_address\";\nimport { Serializer, Deserializer, Seq, deserializeVector, serializeVector } from \"../bcs\";\nimport { Ed25519PublicKey, Ed25519Signature } from \"./ed25519\";\nimport { MultiEd25519PublicKey, MultiEd25519Signature } from \"./multi_ed25519\";\n\nexport abstract class TransactionAuthenticator {\n  abstract serialize(serializer: Serializer): void;\n\n  static deserialize(deserializer: Deserializer): TransactionAuthenticator {\n    const index = deserializer.deserializeUleb128AsU32();\n    switch (index) {\n      case 0:\n        return TransactionAuthenticatorEd25519.load(deserializer);\n      case 1:\n        return TransactionAuthenticatorMultiEd25519.load(deserializer);\n      case 2:\n        return TransactionAuthenticatorMultiAgent.load(deserializer);\n      case 3:\n        return TransactionAuthenticatorFeePayer.load(deserializer);\n      default:\n        throw new Error(`Unknown variant index for TransactionAuthenticator: ${index}`);\n    }\n  }\n}\n\nexport class TransactionAuthenticatorEd25519 extends TransactionAuthenticator {\n  /**\n   * An authenticator for single signature.\n   *\n   * @param public_key Client's public key.\n   * @param signature Signature of a raw transaction.\n   * @see {@link https://aptos.dev/guides/creating-a-signed-transaction/ | Creating a Signed Transaction}\n   * for details about generating a signature.\n   */\n  constructor(\n    public readonly public_key: Ed25519PublicKey,\n    public readonly signature: Ed25519Signature,\n  ) {\n    super();\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(0);\n    this.public_key.serialize(serializer);\n    this.signature.serialize(serializer);\n  }\n\n  static load(deserializer: Deserializer): TransactionAuthenticatorEd25519 {\n    const public_key = Ed25519PublicKey.deserialize(deserializer);\n    const signature = Ed25519Signature.deserialize(deserializer);\n    return new TransactionAuthenticatorEd25519(public_key, signature);\n  }\n}\n\nexport class TransactionAuthenticatorMultiEd25519 extends TransactionAuthenticator {\n  /**\n   * An authenticator for multiple signatures.\n   *\n   * @param public_key\n   * @param signature\n   *\n   */\n  constructor(\n    public readonly public_key: MultiEd25519PublicKey,\n    public readonly signature: MultiEd25519Signature,\n  ) {\n    super();\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(1);\n    this.public_key.serialize(serializer);\n    this.signature.serialize(serializer);\n  }\n\n  static load(deserializer: Deserializer): TransactionAuthenticatorMultiEd25519 {\n    const public_key = MultiEd25519PublicKey.deserialize(deserializer);\n    const signature = MultiEd25519Signature.deserialize(deserializer);\n    return new TransactionAuthenticatorMultiEd25519(public_key, signature);\n  }\n}\n\nexport class TransactionAuthenticatorMultiAgent extends TransactionAuthenticator {\n  constructor(\n    public readonly sender: AccountAuthenticator,\n    public readonly secondary_signer_addresses: Seq<AccountAddress>,\n    public readonly secondary_signers: Seq<AccountAuthenticator>,\n  ) {\n    super();\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(2);\n    this.sender.serialize(serializer);\n    serializeVector<AccountAddress>(this.secondary_signer_addresses, serializer);\n    serializeVector<AccountAuthenticator>(this.secondary_signers, serializer);\n  }\n\n  static load(deserializer: Deserializer): TransactionAuthenticatorMultiAgent {\n    const sender = AccountAuthenticator.deserialize(deserializer);\n    const secondary_signer_addresses = deserializeVector(deserializer, AccountAddress);\n    const secondary_signers = deserializeVector(deserializer, AccountAuthenticator);\n    return new TransactionAuthenticatorMultiAgent(sender, secondary_signer_addresses, secondary_signers);\n  }\n}\n\nexport class TransactionAuthenticatorFeePayer extends TransactionAuthenticator {\n  constructor(\n    public readonly sender: AccountAuthenticator,\n    public readonly secondary_signer_addresses: Seq<AccountAddress>,\n    public readonly secondary_signers: Seq<AccountAuthenticator>,\n    public readonly fee_payer: { address: AccountAddress; authenticator: AccountAuthenticator },\n  ) {\n    super();\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(3);\n    this.sender.serialize(serializer);\n    serializeVector<AccountAddress>(this.secondary_signer_addresses, serializer);\n    serializeVector<AccountAuthenticator>(this.secondary_signers, serializer);\n    this.fee_payer.address.serialize(serializer);\n    this.fee_payer.authenticator.serialize(serializer);\n  }\n\n  static load(deserializer: Deserializer): TransactionAuthenticatorMultiAgent {\n    const sender = AccountAuthenticator.deserialize(deserializer);\n    const secondary_signer_addresses = deserializeVector(deserializer, AccountAddress);\n    const secondary_signers = deserializeVector(deserializer, AccountAuthenticator);\n    const address = AccountAddress.deserialize(deserializer);\n    const authenticator = AccountAuthenticator.deserialize(deserializer);\n    const fee_payer = { address, authenticator };\n    return new TransactionAuthenticatorFeePayer(sender, secondary_signer_addresses, secondary_signers, fee_payer);\n  }\n}\n\nexport abstract class AccountAuthenticator {\n  abstract serialize(serializer: Serializer): void;\n\n  static deserialize(deserializer: Deserializer): AccountAuthenticator {\n    const index = deserializer.deserializeUleb128AsU32();\n    switch (index) {\n      case 0:\n        return AccountAuthenticatorEd25519.load(deserializer);\n      case 1:\n        return AccountAuthenticatorMultiEd25519.load(deserializer);\n      default:\n        throw new Error(`Unknown variant index for AccountAuthenticator: ${index}`);\n    }\n  }\n}\n\nexport class AccountAuthenticatorEd25519 extends AccountAuthenticator {\n  constructor(\n    public readonly public_key: Ed25519PublicKey,\n    public readonly signature: Ed25519Signature,\n  ) {\n    super();\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(0);\n    this.public_key.serialize(serializer);\n    this.signature.serialize(serializer);\n  }\n\n  static load(deserializer: Deserializer): AccountAuthenticatorEd25519 {\n    const public_key = Ed25519PublicKey.deserialize(deserializer);\n    const signature = Ed25519Signature.deserialize(deserializer);\n    return new AccountAuthenticatorEd25519(public_key, signature);\n  }\n}\n\nexport class AccountAuthenticatorMultiEd25519 extends AccountAuthenticator {\n  constructor(\n    public readonly public_key: MultiEd25519PublicKey,\n    public readonly signature: MultiEd25519Signature,\n  ) {\n    super();\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(1);\n    this.public_key.serialize(serializer);\n    this.signature.serialize(serializer);\n  }\n\n  static load(deserializer: Deserializer): AccountAuthenticatorMultiEd25519 {\n    const public_key = MultiEd25519PublicKey.deserialize(deserializer);\n    const signature = MultiEd25519Signature.deserialize(deserializer);\n    return new AccountAuthenticatorMultiEd25519(public_key, signature);\n  }\n}\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Deserializer, Serializer } from \"../bcs\";\n\nexport class Identifier {\n  constructor(public value: string) {}\n\n  public serialize(serializer: Serializer): void {\n    serializer.serializeStr(this.value);\n  }\n\n  static deserialize(deserializer: Deserializer): Identifier {\n    const value = deserializer.deserializeStr();\n    return new Identifier(value);\n  }\n}\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable class-methods-use-this */\n/* eslint-disable max-classes-per-file */\nimport { AccountAddress } from \"./account_address\";\nimport { Deserializer, Seq, Serializer, deserializeVector, serializeVector } from \"../bcs\";\nimport { Identifier } from \"./identifier\";\n\nexport abstract class TypeTag {\n  abstract serialize(serializer: Serializer): void;\n\n  static deserialize(deserializer: Deserializer): TypeTag {\n    const index = deserializer.deserializeUleb128AsU32();\n    switch (index) {\n      case 0:\n        return TypeTagBool.load(deserializer);\n      case 1:\n        return TypeTagU8.load(deserializer);\n      case 2:\n        return TypeTagU64.load(deserializer);\n      case 3:\n        return TypeTagU128.load(deserializer);\n      case 4:\n        return TypeTagAddress.load(deserializer);\n      case 5:\n        return TypeTagSigner.load(deserializer);\n      case 6:\n        return TypeTagVector.load(deserializer);\n      case 7:\n        return TypeTagStruct.load(deserializer);\n      case 8:\n        return TypeTagU16.load(deserializer);\n      case 9:\n        return TypeTagU32.load(deserializer);\n      case 10:\n        return TypeTagU256.load(deserializer);\n      default:\n        throw new Error(`Unknown variant index for TypeTag: ${index}`);\n    }\n  }\n}\n\nexport class TypeTagBool extends TypeTag {\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(0);\n  }\n\n  static load(_deserializer: Deserializer): TypeTagBool {\n    return new TypeTagBool();\n  }\n}\n\nexport class TypeTagU8 extends TypeTag {\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(1);\n  }\n\n  static load(_deserializer: Deserializer): TypeTagU8 {\n    return new TypeTagU8();\n  }\n}\n\nexport class TypeTagU16 extends TypeTag {\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(8);\n  }\n\n  static load(_deserializer: Deserializer): TypeTagU16 {\n    return new TypeTagU16();\n  }\n}\n\nexport class TypeTagU32 extends TypeTag {\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(9);\n  }\n\n  static load(_deserializer: Deserializer): TypeTagU32 {\n    return new TypeTagU32();\n  }\n}\n\nexport class TypeTagU64 extends TypeTag {\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(2);\n  }\n\n  static load(_deserializer: Deserializer): TypeTagU64 {\n    return new TypeTagU64();\n  }\n}\n\nexport class TypeTagU128 extends TypeTag {\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(3);\n  }\n\n  static load(_deserializer: Deserializer): TypeTagU128 {\n    return new TypeTagU128();\n  }\n}\n\nexport class TypeTagU256 extends TypeTag {\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(10);\n  }\n\n  static load(_deserializer: Deserializer): TypeTagU256 {\n    return new TypeTagU256();\n  }\n}\n\nexport class TypeTagAddress extends TypeTag {\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(4);\n  }\n\n  static load(_deserializer: Deserializer): TypeTagAddress {\n    return new TypeTagAddress();\n  }\n}\n\nexport class TypeTagSigner extends TypeTag {\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(5);\n  }\n\n  static load(_deserializer: Deserializer): TypeTagSigner {\n    return new TypeTagSigner();\n  }\n}\n\nexport class TypeTagVector extends TypeTag {\n  constructor(public readonly value: TypeTag) {\n    super();\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(6);\n    this.value.serialize(serializer);\n  }\n\n  static load(deserializer: Deserializer): TypeTagVector {\n    const value = TypeTag.deserialize(deserializer);\n    return new TypeTagVector(value);\n  }\n}\n\nexport class TypeTagStruct extends TypeTag {\n  constructor(public readonly value: StructTag) {\n    super();\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(7);\n    this.value.serialize(serializer);\n  }\n\n  static load(deserializer: Deserializer): TypeTagStruct {\n    const value = StructTag.deserialize(deserializer);\n    return new TypeTagStruct(value);\n  }\n\n  isStringTypeTag(): boolean {\n    if (\n      this.value.module_name.value === \"string\" &&\n      this.value.name.value === \"String\" &&\n      this.value.address.toHexString() === AccountAddress.CORE_CODE_ADDRESS.toHexString()\n    ) {\n      return true;\n    }\n    return false;\n  }\n}\n\nexport class StructTag {\n  constructor(\n    public readonly address: AccountAddress,\n    public readonly module_name: Identifier,\n    public readonly name: Identifier,\n    public readonly type_args: Seq<TypeTag>,\n  ) {}\n\n  /**\n   * Converts a string literal to a StructTag\n   * @param structTag String literal in format \"AcountAddress::module_name::ResourceName\",\n   *   e.g. \"0x1::aptos_coin::AptosCoin\"\n   * @returns\n   */\n  static fromString(structTag: string): StructTag {\n    // Use the TypeTagParser to parse the string literal into a TypeTagStruct\n    const typeTagStruct = new TypeTagParser(structTag).parseTypeTag() as TypeTagStruct;\n\n    // Convert and return as a StructTag\n    return new StructTag(\n      typeTagStruct.value.address,\n      typeTagStruct.value.module_name,\n      typeTagStruct.value.name,\n      typeTagStruct.value.type_args,\n    );\n  }\n\n  serialize(serializer: Serializer): void {\n    this.address.serialize(serializer);\n    this.module_name.serialize(serializer);\n    this.name.serialize(serializer);\n    serializeVector<TypeTag>(this.type_args, serializer);\n  }\n\n  static deserialize(deserializer: Deserializer): StructTag {\n    const address = AccountAddress.deserialize(deserializer);\n    const moduleName = Identifier.deserialize(deserializer);\n    const name = Identifier.deserialize(deserializer);\n    const typeArgs = deserializeVector(deserializer, TypeTag);\n    return new StructTag(address, moduleName, name, typeArgs);\n  }\n}\n\nexport const stringStructTag = new StructTag(\n  AccountAddress.fromHex(\"0x1\"),\n  new Identifier(\"string\"),\n  new Identifier(\"String\"),\n  [],\n);\n\nexport function optionStructTag(typeArg: TypeTag): StructTag {\n  return new StructTag(AccountAddress.fromHex(\"0x1\"), new Identifier(\"option\"), new Identifier(\"Option\"), [typeArg]);\n}\n\nexport function objectStructTag(typeArg: TypeTag): StructTag {\n  return new StructTag(AccountAddress.fromHex(\"0x1\"), new Identifier(\"object\"), new Identifier(\"Object\"), [typeArg]);\n}\n\nfunction bail(message: string) {\n  throw new TypeTagParserError(message);\n}\n\nfunction isWhiteSpace(c: string): boolean {\n  if (c.match(/\\s/)) {\n    return true;\n  }\n  return false;\n}\n\nfunction isValidAlphabetic(c: string): boolean {\n  if (c.match(/[_A-Za-z0-9]/g)) {\n    return true;\n  }\n  return false;\n}\n\n// Generic format is T<digits> - for example T1, T2, T10\nfunction isGeneric(c: string): boolean {\n  if (c.match(/T\\d+/g)) {\n    return true;\n  }\n  return false;\n}\n\ntype TokenType = string;\ntype TokenValue = string;\ntype Token = [TokenType, TokenValue];\n\n// Returns Token and Token byte size\nfunction nextToken(tagStr: string, pos: number): [Token, number] {\n  const c = tagStr[pos];\n  if (c === \":\") {\n    if (tagStr.slice(pos, pos + 2) === \"::\") {\n      return [[\"COLON\", \"::\"], 2];\n    }\n    bail(\"Unrecognized token.\");\n  } else if (c === \"<\") {\n    return [[\"LT\", \"<\"], 1];\n  } else if (c === \">\") {\n    return [[\"GT\", \">\"], 1];\n  } else if (c === \",\") {\n    return [[\"COMMA\", \",\"], 1];\n  } else if (isWhiteSpace(c)) {\n    let res = \"\";\n    for (let i = pos; i < tagStr.length; i += 1) {\n      const char = tagStr[i];\n      if (isWhiteSpace(char)) {\n        res = `${res}${char}`;\n      } else {\n        break;\n      }\n    }\n    return [[\"SPACE\", res], res.length];\n  } else if (isValidAlphabetic(c)) {\n    let res = \"\";\n    for (let i = pos; i < tagStr.length; i += 1) {\n      const char = tagStr[i];\n      if (isValidAlphabetic(char)) {\n        res = `${res}${char}`;\n      } else {\n        break;\n      }\n    }\n    if (isGeneric(res)) {\n      return [[\"GENERIC\", res], res.length];\n    }\n    return [[\"IDENT\", res], res.length];\n  }\n  throw new Error(\"Unrecognized token.\");\n}\n\nfunction tokenize(tagStr: string): Token[] {\n  let pos = 0;\n  const tokens = [];\n  while (pos < tagStr.length) {\n    const [token, size] = nextToken(tagStr, pos);\n    if (token[0] !== \"SPACE\") {\n      tokens.push(token);\n    }\n    pos += size;\n  }\n  return tokens;\n}\n\n/**\n * Parser to parse a type tag string\n */\nexport class TypeTagParser {\n  private readonly tokens: Token[];\n\n  private readonly typeTags: string[] = [];\n\n  constructor(tagStr: string, typeTags?: string[]) {\n    this.tokens = tokenize(tagStr);\n    this.typeTags = typeTags || [];\n  }\n\n  private consume(targetToken: string) {\n    const token = this.tokens.shift();\n    if (!token || token[1] !== targetToken) {\n      bail(\"Invalid type tag.\");\n    }\n  }\n\n  /**\n   * Consumes all of an unused generic field, mostly applicable to object\n   *\n   * Note: This is recursive.  it can be problematic if there's bad input\n   * @private\n   */\n  private consumeWholeGeneric() {\n    this.consume(\"<\");\n    while (this.tokens[0][1] !== \">\") {\n      // If it is nested, we have to consume another nested generic\n      if (this.tokens[0][1] === \"<\") {\n        this.consumeWholeGeneric();\n      } else {\n        this.tokens.shift();\n      }\n    }\n    this.consume(\">\");\n  }\n\n  private parseCommaList(endToken: TokenValue, allowTraillingComma: boolean): TypeTag[] {\n    const res: TypeTag[] = [];\n    if (this.tokens.length <= 0) {\n      bail(\"Invalid type tag.\");\n    }\n\n    while (this.tokens[0][1] !== endToken) {\n      res.push(this.parseTypeTag());\n\n      if (this.tokens.length > 0 && this.tokens[0][1] === endToken) {\n        break;\n      }\n\n      this.consume(\",\");\n      if (this.tokens.length > 0 && this.tokens[0][1] === endToken && allowTraillingComma) {\n        break;\n      }\n\n      if (this.tokens.length <= 0) {\n        bail(\"Invalid type tag.\");\n      }\n    }\n    return res;\n  }\n\n  parseTypeTag(): TypeTag {\n    if (this.tokens.length === 0) {\n      bail(\"Invalid type tag.\");\n    }\n\n    // Pop left most element out\n    const [tokenTy, tokenVal] = this.tokens.shift()!;\n\n    if (tokenVal === \"u8\") {\n      return new TypeTagU8();\n    }\n    if (tokenVal === \"u16\") {\n      return new TypeTagU16();\n    }\n    if (tokenVal === \"u32\") {\n      return new TypeTagU32();\n    }\n    if (tokenVal === \"u64\") {\n      return new TypeTagU64();\n    }\n    if (tokenVal === \"u128\") {\n      return new TypeTagU128();\n    }\n    if (tokenVal === \"u256\") {\n      return new TypeTagU256();\n    }\n    if (tokenVal === \"bool\") {\n      return new TypeTagBool();\n    }\n    if (tokenVal === \"address\") {\n      return new TypeTagAddress();\n    }\n    if (tokenVal === \"vector\") {\n      this.consume(\"<\");\n      const res = this.parseTypeTag();\n      this.consume(\">\");\n      return new TypeTagVector(res);\n    }\n    if (tokenVal === \"string\") {\n      return new TypeTagStruct(stringStructTag);\n    }\n    if (tokenTy === \"IDENT\" && (tokenVal.startsWith(\"0x\") || tokenVal.startsWith(\"0X\"))) {\n      const address = AccountAddress.fromHex(tokenVal);\n      this.consume(\"::\");\n      const [moduleTokenTy, module] = this.tokens.shift()!;\n      if (moduleTokenTy !== \"IDENT\") {\n        bail(\"Invalid type tag.\");\n      }\n      this.consume(\"::\");\n      const [nameTokenTy, name] = this.tokens.shift()!;\n      if (nameTokenTy !== \"IDENT\") {\n        bail(\"Invalid type tag.\");\n      }\n\n      // Objects can contain either concrete types e.g. 0x1::object::ObjectCore or generics e.g. T\n      // Neither matter as we can't do type checks, so just the address applies and we consume the entire generic.\n      // TODO: Support parsing structs that don't come from core code address\n      if (\n        AccountAddress.CORE_CODE_ADDRESS.toHexString() === address.toHexString() &&\n        module === \"object\" &&\n        name === \"Object\"\n      ) {\n        this.consumeWholeGeneric();\n        return new TypeTagAddress();\n      }\n\n      let tyTags: TypeTag[] = [];\n      // Check if the struct has ty args\n      if (this.tokens.length > 0 && this.tokens[0][1] === \"<\") {\n        this.consume(\"<\");\n        tyTags = this.parseCommaList(\">\", true);\n        this.consume(\">\");\n      }\n\n      const structTag = new StructTag(address, new Identifier(module), new Identifier(name), tyTags);\n      return new TypeTagStruct(structTag);\n    }\n    if (tokenTy === \"GENERIC\") {\n      if (this.typeTags.length === 0) {\n        bail(\"Can't convert generic type since no typeTags were specified.\");\n      }\n      // a generic tokenVal has the format of `T<digit>`, for example `T1`.\n      // The digit (i.e 1) indicates the the index of this type in the typeTags array.\n      // For a tokenVal == T1, should be parsed as the type in typeTags[1]\n      const idx = parseInt(tokenVal.substring(1), 10);\n      return new TypeTagParser(this.typeTags[idx]).parseTypeTag();\n    }\n\n    throw new Error(\"Invalid type tag.\");\n  }\n}\n\nexport class TypeTagParserError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = \"TypeTagParserError\";\n  }\n}\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\n/* eslint-disable @typescript-eslint/naming-convention */\n/* eslint-disable class-methods-use-this */\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable max-classes-per-file */\nimport { sha3_256 as sha3Hash } from \"@noble/hashes/sha3\";\nimport { HexString } from \"../utils\";\nimport {\n  Deserializer,\n  Serializer,\n  Uint64,\n  Bytes,\n  Seq,\n  Uint8,\n  Uint128,\n  deserializeVector,\n  serializeVector,\n  bcsToBytes,\n  Uint16,\n  Uint256,\n} from \"../bcs\";\nimport { AccountAuthenticator, TransactionAuthenticator, TransactionAuthenticatorMultiAgent } from \"./authenticator\";\nimport { Identifier } from \"./identifier\";\nimport { TypeTag } from \"./type_tag\";\nimport { AccountAddress } from \"./account_address\";\n\nexport class RawTransaction {\n  /**\n   * RawTransactions contain the metadata and payloads that can be submitted to Aptos chain for execution.\n   * RawTransactions must be signed before Aptos chain can execute them.\n   *\n   * @param sender Account address of the sender.\n   * @param sequence_number Sequence number of this transaction. This must match the sequence number stored in\n   *   the sender's account at the time the transaction executes.\n   * @param payload Instructions for the Aptos Blockchain, including publishing a module,\n   *   execute a entry function or execute a script payload.\n   * @param max_gas_amount Maximum total gas to spend for this transaction. The account must have more\n   *   than this gas or the transaction will be discarded during validation.\n   * @param gas_unit_price Price to be paid per gas unit.\n   * @param expiration_timestamp_secs The blockchain timestamp at which the blockchain would discard this transaction.\n   * @param chain_id The chain ID of the blockchain that this transaction is intended to be run on.\n   */\n  constructor(\n    public readonly sender: AccountAddress,\n    public readonly sequence_number: Uint64,\n    public readonly payload: TransactionPayload,\n    public readonly max_gas_amount: Uint64,\n    public readonly gas_unit_price: Uint64,\n    public readonly expiration_timestamp_secs: Uint64,\n    public readonly chain_id: ChainId,\n  ) {}\n\n  serialize(serializer: Serializer): void {\n    this.sender.serialize(serializer);\n    serializer.serializeU64(this.sequence_number);\n    this.payload.serialize(serializer);\n    serializer.serializeU64(this.max_gas_amount);\n    serializer.serializeU64(this.gas_unit_price);\n    serializer.serializeU64(this.expiration_timestamp_secs);\n    this.chain_id.serialize(serializer);\n  }\n\n  static deserialize(deserializer: Deserializer): RawTransaction {\n    const sender = AccountAddress.deserialize(deserializer);\n    const sequence_number = deserializer.deserializeU64();\n    const payload = TransactionPayload.deserialize(deserializer);\n    const max_gas_amount = deserializer.deserializeU64();\n    const gas_unit_price = deserializer.deserializeU64();\n    const expiration_timestamp_secs = deserializer.deserializeU64();\n    const chain_id = ChainId.deserialize(deserializer);\n    return new RawTransaction(\n      sender,\n      sequence_number,\n      payload,\n      max_gas_amount,\n      gas_unit_price,\n      expiration_timestamp_secs,\n      chain_id,\n    );\n  }\n}\n\nexport class Script {\n  /**\n   * Scripts contain the Move bytecodes payload that can be submitted to Aptos chain for execution.\n   * @param code Move bytecode\n   * @param ty_args Type arguments that bytecode requires.\n   *\n   * @example\n   * A coin transfer function has one type argument \"CoinType\".\n   * ```\n   * public(script) fun transfer<CoinType>(from: &signer, to: address, amount: u64,)\n   * ```\n   * @param args Arugments to bytecode function.\n   *\n   * @example\n   * A coin transfer function has three arugments \"from\", \"to\" and \"amount\".\n   * ```\n   * public(script) fun transfer<CoinType>(from: &signer, to: address, amount: u64,)\n   * ```\n   */\n  constructor(\n    public readonly code: Bytes,\n    public readonly ty_args: Seq<TypeTag>,\n    public readonly args: Seq<TransactionArgument>,\n  ) {}\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeBytes(this.code);\n    serializeVector<TypeTag>(this.ty_args, serializer);\n    serializeVector<TransactionArgument>(this.args, serializer);\n  }\n\n  static deserialize(deserializer: Deserializer): Script {\n    const code = deserializer.deserializeBytes();\n    const ty_args = deserializeVector(deserializer, TypeTag);\n    const args = deserializeVector(deserializer, TransactionArgument);\n    return new Script(code, ty_args, args);\n  }\n}\n\nexport class EntryFunction {\n  /**\n   * Contains the payload to run a function within a module.\n   * @param module_name Fully qualified module name. ModuleId consists of account address and module name.\n   * @param function_name The function to run.\n   * @param ty_args Type arguments that move function requires.\n   *\n   * @example\n   * A coin transfer function has one type argument \"CoinType\".\n   * ```\n   * public(script) fun transfer<CoinType>(from: &signer, to: address, amount: u64,)\n   * ```\n   * @param args Arugments to the move function.\n   *\n   * @example\n   * A coin transfer function has three arugments \"from\", \"to\" and \"amount\".\n   * ```\n   * public(script) fun transfer<CoinType>(from: &signer, to: address, amount: u64,)\n   * ```\n   */\n  constructor(\n    public readonly module_name: ModuleId,\n    public readonly function_name: Identifier,\n    public readonly ty_args: Seq<TypeTag>,\n    public readonly args: Seq<Bytes>,\n  ) {}\n\n  /**\n   *\n   * @param module Fully qualified module name in format \"AccountAddress::module_name\" e.g. \"0x1::coin\"\n   * @param func Function name\n   * @param ty_args Type arguments that move function requires.\n   *\n   * @example\n   * A coin transfer function has one type argument \"CoinType\".\n   * ```\n   * public(script) fun transfer<CoinType>(from: &signer, to: address, amount: u64,)\n   * ```\n   * @param args Arugments to the move function.\n   *\n   * @example\n   * A coin transfer function has three arugments \"from\", \"to\" and \"amount\".\n   * ```\n   * public(script) fun transfer<CoinType>(from: &signer, to: address, amount: u64,)\n   * ```\n   * @returns\n   */\n  static natural(module: string, func: string, ty_args: Seq<TypeTag>, args: Seq<Bytes>): EntryFunction {\n    return new EntryFunction(ModuleId.fromStr(module), new Identifier(func), ty_args, args);\n  }\n\n  /**\n   * `natual` is deprecated, please use `natural`\n   *\n   * @deprecated.\n   */\n  static natual(module: string, func: string, ty_args: Seq<TypeTag>, args: Seq<Bytes>): EntryFunction {\n    return EntryFunction.natural(module, func, ty_args, args);\n  }\n\n  serialize(serializer: Serializer): void {\n    this.module_name.serialize(serializer);\n    this.function_name.serialize(serializer);\n    serializeVector<TypeTag>(this.ty_args, serializer);\n\n    serializer.serializeU32AsUleb128(this.args.length);\n    this.args.forEach((item: Bytes) => {\n      serializer.serializeBytes(item);\n    });\n  }\n\n  static deserialize(deserializer: Deserializer): EntryFunction {\n    const module_name = ModuleId.deserialize(deserializer);\n    const function_name = Identifier.deserialize(deserializer);\n    const ty_args = deserializeVector(deserializer, TypeTag);\n\n    const length = deserializer.deserializeUleb128AsU32();\n    const list: Seq<Bytes> = [];\n    for (let i = 0; i < length; i += 1) {\n      list.push(deserializer.deserializeBytes());\n    }\n\n    const args = list;\n    return new EntryFunction(module_name, function_name, ty_args, args);\n  }\n}\n\nexport class MultiSigTransactionPayload {\n  /**\n   * Contains the payload to run a multisig account transaction.\n   * @param transaction_payload The payload of the multisig transaction. This can only be EntryFunction for now but\n   * Script might be supported in the future.\n   */\n  constructor(public readonly transaction_payload: EntryFunction) {}\n\n  serialize(serializer: Serializer): void {\n    // We can support multiple types of inner transaction payload in the future.\n    // For now it's only EntryFunction but if we support more types, we need to serialize with the right enum values\n    // here\n    serializer.serializeU32AsUleb128(0);\n    this.transaction_payload.serialize(serializer);\n  }\n\n  static deserialize(deserializer: Deserializer): MultiSigTransactionPayload {\n    // TODO: Support other types of payload beside EntryFunction.\n    // This is the enum value indicating which type of payload the multisig tx contains.\n    deserializer.deserializeUleb128AsU32();\n    return new MultiSigTransactionPayload(EntryFunction.deserialize(deserializer));\n  }\n}\n\nexport class MultiSig {\n  /**\n   * Contains the payload to run a multisig account transaction.\n   * @param multisig_address The multisig account address the transaction will be executed as.\n   * @param transaction_payload The payload of the multisig transaction. This is optional when executing a multisig\n   *  transaction whose payload is already stored on chain.\n   */\n  constructor(\n    public readonly multisig_address: AccountAddress,\n    public readonly transaction_payload?: MultiSigTransactionPayload,\n  ) {}\n\n  serialize(serializer: Serializer): void {\n    this.multisig_address.serialize(serializer);\n    // Options are encoded with an extra u8 field before the value - 0x0 is none and 0x1 is present.\n    // We use serializeBool below to create this prefix value.\n    if (this.transaction_payload === undefined) {\n      serializer.serializeBool(false);\n    } else {\n      serializer.serializeBool(true);\n      this.transaction_payload.serialize(serializer);\n    }\n  }\n\n  static deserialize(deserializer: Deserializer): MultiSig {\n    const multisig_address = AccountAddress.deserialize(deserializer);\n    const payloadPresent = deserializer.deserializeBool();\n    let transaction_payload;\n    if (payloadPresent) {\n      transaction_payload = MultiSigTransactionPayload.deserialize(deserializer);\n    }\n    return new MultiSig(multisig_address, transaction_payload);\n  }\n}\n\nexport class Module {\n  /**\n   * Contains the bytecode of a Move module that can be published to the Aptos chain.\n   * @param code Move bytecode of a module.\n   */\n  constructor(public readonly code: Bytes) {}\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeBytes(this.code);\n  }\n\n  static deserialize(deserializer: Deserializer): Module {\n    const code = deserializer.deserializeBytes();\n    return new Module(code);\n  }\n}\n\nexport class ModuleId {\n  /**\n   * Full name of a module.\n   * @param address The account address.\n   * @param name The name of the module under the account at \"address\".\n   */\n  constructor(\n    public readonly address: AccountAddress,\n    public readonly name: Identifier,\n  ) {}\n\n  /**\n   * Converts a string literal to a ModuleId\n   * @param moduleId String literal in format \"AccountAddress::module_name\", e.g. \"0x1::coin\"\n   * @returns\n   */\n  static fromStr(moduleId: string): ModuleId {\n    const parts = moduleId.split(\"::\");\n    if (parts.length !== 2) {\n      throw new Error(\"Invalid module id.\");\n    }\n    return new ModuleId(AccountAddress.fromHex(new HexString(parts[0])), new Identifier(parts[1]));\n  }\n\n  serialize(serializer: Serializer): void {\n    this.address.serialize(serializer);\n    this.name.serialize(serializer);\n  }\n\n  static deserialize(deserializer: Deserializer): ModuleId {\n    const address = AccountAddress.deserialize(deserializer);\n    const name = Identifier.deserialize(deserializer);\n    return new ModuleId(address, name);\n  }\n}\n\nexport class ChangeSet {\n  serialize(serializer: Serializer): void {\n    throw new Error(\"Not implemented.\");\n  }\n\n  static deserialize(deserializer: Deserializer): ChangeSet {\n    throw new Error(\"Not implemented.\");\n  }\n}\n\nexport class WriteSet {\n  serialize(serializer: Serializer): void {\n    throw new Error(\"Not implmented.\");\n  }\n\n  static deserialize(deserializer: Deserializer): WriteSet {\n    throw new Error(\"Not implmented.\");\n  }\n}\n\nexport class SignedTransaction {\n  /**\n   * A SignedTransaction consists of a raw transaction and an authenticator. The authenticator\n   * contains a client's public key and the signature of the raw transaction.\n   *\n   * @see {@link https://aptos.dev/guides/creating-a-signed-transaction/ | Creating a Signed Transaction}\n   *\n   * @param raw_txn\n   * @param authenticator Contains a client's public key and the signature of the raw transaction.\n   *   Authenticator has 3 flavors: single signature, multi-signature and multi-agent.\n   *   @see authenticator.ts for details.\n   */\n  constructor(\n    public readonly raw_txn: RawTransaction,\n    public readonly authenticator: TransactionAuthenticator,\n  ) {}\n\n  serialize(serializer: Serializer): void {\n    this.raw_txn.serialize(serializer);\n    this.authenticator.serialize(serializer);\n  }\n\n  static deserialize(deserializer: Deserializer): SignedTransaction {\n    const raw_txn = RawTransaction.deserialize(deserializer);\n    const authenticator = TransactionAuthenticator.deserialize(deserializer);\n    return new SignedTransaction(raw_txn, authenticator);\n  }\n}\n\nexport abstract class RawTransactionWithData {\n  abstract serialize(serializer: Serializer): void;\n\n  static deserialize(deserializer: Deserializer): RawTransactionWithData {\n    const index = deserializer.deserializeUleb128AsU32();\n    switch (index) {\n      case 0:\n        return MultiAgentRawTransaction.load(deserializer);\n      case 1:\n        return FeePayerRawTransaction.load(deserializer);\n      default:\n        throw new Error(`Unknown variant index for RawTransactionWithData: ${index}`);\n    }\n  }\n}\n\nexport class MultiAgentRawTransaction extends RawTransactionWithData {\n  constructor(\n    public readonly raw_txn: RawTransaction,\n    public readonly secondary_signer_addresses: Seq<AccountAddress>,\n  ) {\n    super();\n  }\n\n  serialize(serializer: Serializer): void {\n    // enum variant index\n    serializer.serializeU32AsUleb128(0);\n    this.raw_txn.serialize(serializer);\n    serializeVector<TransactionArgument>(this.secondary_signer_addresses, serializer);\n  }\n\n  static load(deserializer: Deserializer): MultiAgentRawTransaction {\n    const rawTxn = RawTransaction.deserialize(deserializer);\n    const secondarySignerAddresses = deserializeVector(deserializer, AccountAddress);\n\n    return new MultiAgentRawTransaction(rawTxn, secondarySignerAddresses);\n  }\n}\n\nexport class FeePayerRawTransaction extends RawTransactionWithData {\n  constructor(\n    public readonly raw_txn: RawTransaction,\n    public readonly secondary_signer_addresses: Seq<AccountAddress>,\n    public readonly fee_payer_address: AccountAddress,\n  ) {\n    super();\n  }\n\n  serialize(serializer: Serializer): void {\n    // enum variant index\n    serializer.serializeU32AsUleb128(1);\n    this.raw_txn.serialize(serializer);\n    serializeVector<TransactionArgument>(this.secondary_signer_addresses, serializer);\n    this.fee_payer_address.serialize(serializer);\n  }\n\n  static load(deserializer: Deserializer): FeePayerRawTransaction {\n    const rawTxn = RawTransaction.deserialize(deserializer);\n    const secondarySignerAddresses = deserializeVector(deserializer, AccountAddress);\n    const feePayerAddress = AccountAddress.deserialize(deserializer);\n\n    return new FeePayerRawTransaction(rawTxn, secondarySignerAddresses, feePayerAddress);\n  }\n}\n\nexport abstract class TransactionPayload {\n  abstract serialize(serializer: Serializer): void;\n\n  static deserialize(deserializer: Deserializer): TransactionPayload {\n    const index = deserializer.deserializeUleb128AsU32();\n    switch (index) {\n      case 0:\n        return TransactionPayloadScript.load(deserializer);\n      // TODO: change to 1 once ModuleBundle has been removed from rust\n      case 2:\n        return TransactionPayloadEntryFunction.load(deserializer);\n      case 3:\n        return TransactionPayloadMultisig.load(deserializer);\n      default:\n        throw new Error(`Unknown variant index for TransactionPayload: ${index}`);\n    }\n  }\n}\n\nexport class TransactionPayloadScript extends TransactionPayload {\n  constructor(public readonly value: Script) {\n    super();\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(0);\n    this.value.serialize(serializer);\n  }\n\n  static load(deserializer: Deserializer): TransactionPayloadScript {\n    const value = Script.deserialize(deserializer);\n    return new TransactionPayloadScript(value);\n  }\n}\n\nexport class TransactionPayloadEntryFunction extends TransactionPayload {\n  constructor(public readonly value: EntryFunction) {\n    super();\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(2);\n    this.value.serialize(serializer);\n  }\n\n  static load(deserializer: Deserializer): TransactionPayloadEntryFunction {\n    const value = EntryFunction.deserialize(deserializer);\n    return new TransactionPayloadEntryFunction(value);\n  }\n}\n\nexport class TransactionPayloadMultisig extends TransactionPayload {\n  constructor(public readonly value: MultiSig) {\n    super();\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(3);\n    this.value.serialize(serializer);\n  }\n\n  static load(deserializer: Deserializer): TransactionPayloadMultisig {\n    const value = MultiSig.deserialize(deserializer);\n    return new TransactionPayloadMultisig(value);\n  }\n}\n\nexport class ChainId {\n  constructor(public readonly value: Uint8) {}\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeU8(this.value);\n  }\n\n  static deserialize(deserializer: Deserializer): ChainId {\n    const value = deserializer.deserializeU8();\n    return new ChainId(value);\n  }\n}\n\nexport abstract class TransactionArgument {\n  abstract serialize(serializer: Serializer): void;\n\n  static deserialize(deserializer: Deserializer): TransactionArgument {\n    const index = deserializer.deserializeUleb128AsU32();\n    switch (index) {\n      case 0:\n        return TransactionArgumentU8.load(deserializer);\n      case 1:\n        return TransactionArgumentU64.load(deserializer);\n      case 2:\n        return TransactionArgumentU128.load(deserializer);\n      case 3:\n        return TransactionArgumentAddress.load(deserializer);\n      case 4:\n        return TransactionArgumentU8Vector.load(deserializer);\n      case 5:\n        return TransactionArgumentBool.load(deserializer);\n      case 6:\n        return TransactionArgumentU16.load(deserializer);\n      case 7:\n        return TransactionArgumentU32.load(deserializer);\n      case 8:\n        return TransactionArgumentU256.load(deserializer);\n      default:\n        throw new Error(`Unknown variant index for TransactionArgument: ${index}`);\n    }\n  }\n}\n\nexport class TransactionArgumentU8 extends TransactionArgument {\n  constructor(public readonly value: Uint8) {\n    super();\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(0);\n    serializer.serializeU8(this.value);\n  }\n\n  static load(deserializer: Deserializer): TransactionArgumentU8 {\n    const value = deserializer.deserializeU8();\n    return new TransactionArgumentU8(value);\n  }\n}\n\nexport class TransactionArgumentU16 extends TransactionArgument {\n  constructor(public readonly value: Uint16) {\n    super();\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(6);\n    serializer.serializeU16(this.value);\n  }\n\n  static load(deserializer: Deserializer): TransactionArgumentU16 {\n    const value = deserializer.deserializeU16();\n    return new TransactionArgumentU16(value);\n  }\n}\n\nexport class TransactionArgumentU32 extends TransactionArgument {\n  constructor(public readonly value: Uint16) {\n    super();\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(7);\n    serializer.serializeU32(this.value);\n  }\n\n  static load(deserializer: Deserializer): TransactionArgumentU32 {\n    const value = deserializer.deserializeU32();\n    return new TransactionArgumentU32(value);\n  }\n}\n\nexport class TransactionArgumentU64 extends TransactionArgument {\n  constructor(public readonly value: Uint64) {\n    super();\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(1);\n    serializer.serializeU64(this.value);\n  }\n\n  static load(deserializer: Deserializer): TransactionArgumentU64 {\n    const value = deserializer.deserializeU64();\n    return new TransactionArgumentU64(value);\n  }\n}\n\nexport class TransactionArgumentU128 extends TransactionArgument {\n  constructor(public readonly value: Uint128) {\n    super();\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(2);\n    serializer.serializeU128(this.value);\n  }\n\n  static load(deserializer: Deserializer): TransactionArgumentU128 {\n    const value = deserializer.deserializeU128();\n    return new TransactionArgumentU128(value);\n  }\n}\n\nexport class TransactionArgumentU256 extends TransactionArgument {\n  constructor(public readonly value: Uint256) {\n    super();\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(8);\n    serializer.serializeU256(this.value);\n  }\n\n  static load(deserializer: Deserializer): TransactionArgumentU256 {\n    const value = deserializer.deserializeU256();\n    return new TransactionArgumentU256(value);\n  }\n}\n\nexport class TransactionArgumentAddress extends TransactionArgument {\n  constructor(public readonly value: AccountAddress) {\n    super();\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(3);\n    this.value.serialize(serializer);\n  }\n\n  static load(deserializer: Deserializer): TransactionArgumentAddress {\n    const value = AccountAddress.deserialize(deserializer);\n    return new TransactionArgumentAddress(value);\n  }\n}\n\nexport class TransactionArgumentU8Vector extends TransactionArgument {\n  constructor(public readonly value: Bytes) {\n    super();\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(4);\n    serializer.serializeBytes(this.value);\n  }\n\n  static load(deserializer: Deserializer): TransactionArgumentU8Vector {\n    const value = deserializer.deserializeBytes();\n    return new TransactionArgumentU8Vector(value);\n  }\n}\n\nexport class TransactionArgumentBool extends TransactionArgument {\n  constructor(public readonly value: boolean) {\n    super();\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(5);\n    serializer.serializeBool(this.value);\n  }\n\n  static load(deserializer: Deserializer): TransactionArgumentBool {\n    const value = deserializer.deserializeBool();\n    return new TransactionArgumentBool(value);\n  }\n}\n\nexport abstract class Transaction {\n  abstract serialize(serializer: Serializer): void;\n\n  abstract hash(): Bytes;\n\n  getHashSalt(): Bytes {\n    const hash = sha3Hash.create();\n    hash.update(\"APTOS::Transaction\");\n    return hash.digest();\n  }\n\n  static deserialize(deserializer: Deserializer): Transaction {\n    const index = deserializer.deserializeUleb128AsU32();\n    switch (index) {\n      case 0:\n        return UserTransaction.load(deserializer);\n      default:\n        throw new Error(`Unknown variant index for Transaction: ${index}`);\n    }\n  }\n}\n\nexport class UserTransaction extends Transaction {\n  constructor(public readonly value: SignedTransaction) {\n    super();\n  }\n\n  hash(): Bytes {\n    const hash = sha3Hash.create();\n    hash.update(this.getHashSalt());\n    hash.update(bcsToBytes(this));\n    return hash.digest();\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(0);\n    this.value.serialize(serializer);\n  }\n\n  static load(deserializer: Deserializer): UserTransaction {\n    return new UserTransaction(SignedTransaction.deserialize(deserializer));\n  }\n}\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Deserializer, Serializer, Bytes, Seq, deserializeVector, serializeVector } from \"../bcs\";\n\nimport { ModuleId } from \"./transaction\";\n\nimport { TypeTag } from \"./type_tag\";\n\nexport class TypeArgumentABI {\n  /**\n   * Constructs a TypeArgumentABI instance.\n   * @param name\n   */\n  constructor(public readonly name: string) {}\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeStr(this.name);\n  }\n\n  static deserialize(deserializer: Deserializer): TypeArgumentABI {\n    const name = deserializer.deserializeStr();\n    return new TypeArgumentABI(name);\n  }\n}\n\nexport class ArgumentABI {\n  /**\n   * Constructs an ArgumentABI instance.\n   * @param name\n   * @param type_tag\n   */\n  constructor(\n    public readonly name: string,\n    public readonly type_tag: TypeTag,\n  ) {}\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeStr(this.name);\n    this.type_tag.serialize(serializer);\n  }\n\n  static deserialize(deserializer: Deserializer): ArgumentABI {\n    const name = deserializer.deserializeStr();\n    const typeTag = TypeTag.deserialize(deserializer);\n    return new ArgumentABI(name, typeTag);\n  }\n}\n\nexport abstract class ScriptABI {\n  abstract serialize(serializer: Serializer): void;\n\n  static deserialize(deserializer: Deserializer): ScriptABI {\n    const index = deserializer.deserializeUleb128AsU32();\n    switch (index) {\n      case 0:\n        return TransactionScriptABI.load(deserializer);\n      case 1:\n        return EntryFunctionABI.load(deserializer);\n      default:\n        throw new Error(`Unknown variant index for TransactionPayload: ${index}`);\n    }\n  }\n}\n\nexport class TransactionScriptABI extends ScriptABI {\n  /**\n   * Constructs a TransactionScriptABI instance.\n   * @param name Entry function name\n   * @param doc\n   * @param code\n   * @param ty_args\n   * @param args\n   */\n  constructor(\n    public readonly name: string,\n    public readonly doc: string,\n    public readonly code: Bytes,\n    public readonly ty_args: Seq<TypeArgumentABI>,\n    public readonly args: Seq<ArgumentABI>,\n  ) {\n    super();\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(0);\n    serializer.serializeStr(this.name);\n    serializer.serializeStr(this.doc);\n    serializer.serializeBytes(this.code);\n    serializeVector<TypeArgumentABI>(this.ty_args, serializer);\n    serializeVector<ArgumentABI>(this.args, serializer);\n  }\n\n  static load(deserializer: Deserializer): TransactionScriptABI {\n    const name = deserializer.deserializeStr();\n    const doc = deserializer.deserializeStr();\n    const code = deserializer.deserializeBytes();\n    const tyArgs = deserializeVector(deserializer, TypeArgumentABI);\n    const args = deserializeVector(deserializer, ArgumentABI);\n    return new TransactionScriptABI(name, doc, code, tyArgs, args);\n  }\n}\n\nexport class EntryFunctionABI extends ScriptABI {\n  /**\n   * Constructs a EntryFunctionABI instance\n   * @param name\n   * @param module_name Fully qualified module id\n   * @param doc\n   * @param ty_args\n   * @param args\n   */\n  constructor(\n    public readonly name: string,\n    public readonly module_name: ModuleId,\n    public readonly doc: string,\n    public readonly ty_args: Seq<TypeArgumentABI>,\n    public readonly args: Seq<ArgumentABI>,\n  ) {\n    super();\n  }\n\n  serialize(serializer: Serializer): void {\n    serializer.serializeU32AsUleb128(1);\n    serializer.serializeStr(this.name);\n    this.module_name.serialize(serializer);\n    serializer.serializeStr(this.doc);\n    serializeVector<TypeArgumentABI>(this.ty_args, serializer);\n    serializeVector<ArgumentABI>(this.args, serializer);\n  }\n\n  static load(deserializer: Deserializer): EntryFunctionABI {\n    const name = deserializer.deserializeStr();\n    const moduleName = ModuleId.deserialize(deserializer);\n    const doc = deserializer.deserializeStr();\n    const tyArgs = deserializeVector(deserializer, TypeArgumentABI);\n    const args = deserializeVector(deserializer, ArgumentABI);\n    return new EntryFunctionABI(name, moduleName, doc, tyArgs, args);\n  }\n}\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport { sha3_256 as sha3Hash } from \"@noble/hashes/sha3\";\nimport { HexString } from \"../utils\";\nimport { Bytes } from \"../bcs\";\nimport { MultiEd25519PublicKey } from \"./multi_ed25519\";\nimport { Ed25519PublicKey } from \"./ed25519\";\n\n/**\n * Each account stores an authentication key. Authentication key enables account owners to rotate\n * their private key(s) associated with the account without changing the address that hosts their account.\n * @see {@link * https://aptos.dev/concepts/accounts | Account Basics}\n *\n * Account addresses can be derived from AuthenticationKey\n */\nexport class AuthenticationKey {\n  static readonly LENGTH: number = 32;\n\n  static readonly MULTI_ED25519_SCHEME: number = 1;\n\n  static readonly ED25519_SCHEME: number = 0;\n\n  static readonly DERIVE_RESOURCE_ACCOUNT_SCHEME: number = 255;\n\n  readonly bytes: Bytes;\n\n  constructor(bytes: Bytes) {\n    if (bytes.length !== AuthenticationKey.LENGTH) {\n      throw new Error(\"Expected a byte array of length 32\");\n    }\n    this.bytes = bytes;\n  }\n\n  /**\n   * Converts a K-of-N MultiEd25519PublicKey to AuthenticationKey with:\n   * `auth_key = sha3-256(p_1 | … | p_n | K | 0x01)`. `K` represents the K-of-N required for\n   * authenticating the transaction. `0x01` is the 1-byte scheme for multisig.\n   */\n  static fromMultiEd25519PublicKey(publicKey: MultiEd25519PublicKey): AuthenticationKey {\n    const pubKeyBytes = publicKey.toBytes();\n\n    const bytes = new Uint8Array(pubKeyBytes.length + 1);\n    bytes.set(pubKeyBytes);\n    bytes.set([AuthenticationKey.MULTI_ED25519_SCHEME], pubKeyBytes.length);\n\n    const hash = sha3Hash.create();\n    hash.update(bytes);\n\n    return new AuthenticationKey(hash.digest());\n  }\n\n  static fromEd25519PublicKey(publicKey: Ed25519PublicKey): AuthenticationKey {\n    const pubKeyBytes = publicKey.value;\n\n    const bytes = new Uint8Array(pubKeyBytes.length + 1);\n    bytes.set(pubKeyBytes);\n    bytes.set([AuthenticationKey.ED25519_SCHEME], pubKeyBytes.length);\n\n    const hash = sha3Hash.create();\n    hash.update(bytes);\n\n    return new AuthenticationKey(hash.digest());\n  }\n\n  /**\n   * Derives an account address from AuthenticationKey. Since current AccountAddress is 32 bytes,\n   * AuthenticationKey bytes are directly translated to AccountAddress.\n   */\n  derivedAddress(): HexString {\n    return HexString.fromUint8Array(this.bytes);\n  }\n}\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport { AccountAddress } from \"./account_address\";\nimport { AnyNumber, Serializer } from \"../bcs\";\n\nexport class RotationProofChallenge {\n  constructor(\n    public readonly accountAddress: AccountAddress,\n    public readonly moduleName: string,\n    public readonly structName: string,\n    public readonly sequenceNumber: AnyNumber,\n    public readonly originator: AccountAddress,\n    public readonly currentAuthKey: AccountAddress,\n    public readonly newPublicKey: Uint8Array,\n  ) {}\n\n  serialize(serializer: Serializer): void {\n    this.accountAddress.serialize(serializer);\n    serializer.serializeStr(this.moduleName);\n    serializer.serializeStr(this.structName);\n    serializer.serializeU64(this.sequenceNumber);\n    this.originator.serialize(serializer);\n    this.currentAuthKey.serialize(serializer);\n    serializer.serializeBytes(this.newPublicKey);\n  }\n}\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport nacl from \"tweetnacl\";\nimport * as bip39 from \"@scure/bip39\";\nimport { bytesToHex } from \"@noble/hashes/utils\";\nimport { sha256 } from \"@noble/hashes/sha256\";\nimport { sha3_256 as sha3Hash } from \"@noble/hashes/sha3\";\nimport { derivePath } from \"../utils/hd-key\";\nimport { HexString, MaybeHexString, Memoize } from \"../utils\";\nimport * as Gen from \"../generated/index\";\nimport { AccountAddress, AuthenticationKey, Ed25519PublicKey } from \"../aptos_types\";\nimport { bcsToBytes } from \"../bcs\";\n\nexport interface AptosAccountObject {\n  address?: Gen.HexEncodedBytes;\n  publicKeyHex?: Gen.HexEncodedBytes;\n  privateKeyHex: Gen.HexEncodedBytes;\n}\n\n/**\n * Class for creating and managing Aptos account\n */\nexport class AptosAccount {\n  /**\n   * A private key and public key, associated with the given account\n   */\n  readonly signingKey: nacl.SignKeyPair;\n\n  /**\n   * Address associated with the given account\n   */\n  private readonly accountAddress: HexString;\n\n  static fromAptosAccountObject(obj: AptosAccountObject): AptosAccount {\n    return new AptosAccount(HexString.ensure(obj.privateKeyHex).toUint8Array(), obj.address);\n  }\n\n  /**\n   * Check's if the derive path is valid\n   */\n  static isValidPath(path: string): boolean {\n    return /^m\\/44'\\/637'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$/.test(path);\n  }\n\n  /**\n   * Creates new account with bip44 path and mnemonics,\n   * @param path. (e.g. m/44'/637'/0'/0'/0')\n   * Detailed description: {@link https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki}\n   * @param mnemonics.\n   * @returns AptosAccount\n   */\n  static fromDerivePath(path: string, mnemonics: string): AptosAccount {\n    if (!AptosAccount.isValidPath(path)) {\n      throw new Error(\"Invalid derivation path\");\n    }\n\n    const normalizeMnemonics = mnemonics\n      .trim()\n      .split(/\\s+/)\n      .map((part) => part.toLowerCase())\n      .join(\" \");\n\n    const { key } = derivePath(path, bytesToHex(bip39.mnemonicToSeedSync(normalizeMnemonics)));\n\n    return new AptosAccount(key);\n  }\n\n  /**\n   * Creates new account instance. Constructor allows passing in an address,\n   * to handle account key rotation, where auth_key != public_key\n   * @param privateKeyBytes  Private key from which account key pair will be generated.\n   * If not specified, new key pair is going to be created.\n   * @param address Account address (e.g. 0xe8012714cd17606cee7188a2a365eef3fe760be598750678c8c5954eb548a591).\n   * If not specified, a new one will be generated from public key\n   */\n  constructor(privateKeyBytes?: Uint8Array | undefined, address?: MaybeHexString) {\n    if (privateKeyBytes) {\n      this.signingKey = nacl.sign.keyPair.fromSeed(privateKeyBytes.slice(0, 32));\n    } else {\n      this.signingKey = nacl.sign.keyPair();\n    }\n    this.accountAddress = HexString.ensure(address || this.authKey().hex());\n  }\n\n  /**\n   * This is the key by which Aptos account is referenced.\n   * It is the 32-byte of the SHA-3 256 cryptographic hash\n   * of the public key(s) concatenated with a signature scheme identifier byte\n   * @returns Address associated with the given account\n   */\n  address(): HexString {\n    return this.accountAddress;\n  }\n\n  /**\n   * This key enables account owners to rotate their private key(s)\n   * associated with the account without changing the address that hosts their account.\n   * See here for more info: {@link https://aptos.dev/concepts/accounts#single-signer-authentication}\n   * @returns Authentication key for the associated account\n   */\n  @Memoize()\n  authKey(): HexString {\n    const pubKey = new Ed25519PublicKey(this.signingKey.publicKey);\n    const authKey = AuthenticationKey.fromEd25519PublicKey(pubKey);\n    return authKey.derivedAddress();\n  }\n\n  /**\n   * Takes source address and seeds and returns the resource account address\n   * @param sourceAddress Address used to derive the resource account\n   * @param seed The seed bytes\n   * @returns The resource account address\n   */\n  static getResourceAccountAddress(sourceAddress: MaybeHexString, seed: Uint8Array): HexString {\n    const source = bcsToBytes(AccountAddress.fromHex(sourceAddress));\n\n    const bytes = new Uint8Array([...source, ...seed, AuthenticationKey.DERIVE_RESOURCE_ACCOUNT_SCHEME]);\n\n    const hash = sha3Hash.create();\n    hash.update(bytes);\n\n    return HexString.fromUint8Array(hash.digest());\n  }\n\n  /**\n   * Takes creator address and collection name and returns the collection id hash.\n   * Collection id hash are generated as sha256 hash of (`creator_address::collection_name`)\n   *\n   * @param creatorAddress Collection creator address\n   * @param collectionName The collection name\n   * @returns The collection id hash\n   */\n  static getCollectionID(creatorAddress: MaybeHexString, collectionName: string): HexString {\n    const seed = new TextEncoder().encode(`${creatorAddress}::${collectionName}`);\n    const hash = sha256.create();\n    hash.update(seed);\n    return HexString.fromUint8Array(hash.digest());\n  }\n\n  /**\n   * This key is generated with Ed25519 scheme.\n   * Public key is used to check a signature of transaction, signed by given account\n   * @returns The public key for the associated account\n   */\n  pubKey(): HexString {\n    return HexString.fromUint8Array(this.signingKey.publicKey);\n  }\n\n  /**\n   * Signs specified `buffer` with account's private key\n   * @param buffer A buffer to sign\n   * @returns A signature HexString\n   */\n  signBuffer(buffer: Uint8Array): HexString {\n    const signature = nacl.sign.detached(buffer, this.signingKey.secretKey);\n    return HexString.fromUint8Array(signature);\n  }\n\n  /**\n   * Signs specified `hexString` with account's private key\n   * @param hexString A regular string or HexString to sign\n   * @returns A signature HexString\n   */\n  signHexString(hexString: MaybeHexString): HexString {\n    const toSign = HexString.ensure(hexString).toUint8Array();\n    return this.signBuffer(toSign);\n  }\n\n  /**\n   * Verifies the signature of the message with the public key of the account\n   * @param message a signed message\n   * @param signature the signature of the message\n   */\n  verifySignature(message: MaybeHexString, signature: MaybeHexString): boolean {\n    const rawMessage = HexString.ensure(message).toUint8Array();\n    const rawSignature = HexString.ensure(signature).toUint8Array();\n    return nacl.sign.detached.verify(rawMessage, rawSignature, this.signingKey.publicKey);\n  }\n\n  /**\n   * Derives account address, public key and private key\n   * @returns AptosAccountObject instance.\n   * @example An example of the returned AptosAccountObject object\n   * ```\n   * {\n   *    address: \"0xe8012714cd17606cee7188a2a365eef3fe760be598750678c8c5954eb548a591\",\n   *    publicKeyHex: \"0xf56d8524faf79fbc0f48c13aeed3b0ce5dd376b4db93b8130a107c0a5e04ba04\",\n   *    privateKeyHex: `0x009c9f7c992a06cfafe916f125d8adb7a395fca243e264a8e56a4b3e6accf940\n   *      d2b11e9ece3049ce60e3c7b4a1c58aebfa9298e29a30a58a67f1998646135204`\n   * }\n   * ```\n   */\n  toPrivateKeyObject(): AptosAccountObject {\n    return {\n      address: this.address().hex(),\n      publicKeyHex: this.pubKey().hex(),\n      privateKeyHex: HexString.fromUint8Array(this.signingKey.secretKey.slice(0, 32)).hex(),\n    };\n  }\n}\n\n// Returns an account address as a HexString given either an AptosAccount or a MaybeHexString.\nexport function getAddressFromAccountOrAddress(accountOrAddress: AptosAccount | MaybeHexString): HexString {\n  return accountOrAddress instanceof AptosAccount ? accountOrAddress.address() : HexString.ensure(accountOrAddress);\n}\n","import * as Types from './operations';\n\nimport { GraphQLClient } from 'graphql-request';\nimport { GraphQLClientRequestHeaders } from 'graphql-request/build/cjs/types';\nexport const CurrentTokenOwnershipFieldsFragmentDoc = `\n    fragment CurrentTokenOwnershipFields on current_token_ownerships_v2 {\n  token_standard\n  token_properties_mutated_v1\n  token_data_id\n  table_type_v1\n  storage_id\n  property_version_v1\n  owner_address\n  last_transaction_version\n  last_transaction_timestamp\n  is_soulbound_v2\n  is_fungible_v2\n  amount\n  current_token_data {\n    collection_id\n    description\n    is_fungible_v2\n    largest_property_version_v1\n    last_transaction_timestamp\n    last_transaction_version\n    maximum\n    supply\n    token_data_id\n    token_name\n    token_properties\n    token_standard\n    token_uri\n    current_collection {\n      collection_id\n      collection_name\n      creator_address\n      current_supply\n      description\n      last_transaction_timestamp\n      last_transaction_version\n      max_supply\n      mutable_description\n      mutable_uri\n      table_handle_v1\n      token_standard\n      total_minted_v2\n      uri\n    }\n  }\n}\n    `;\nexport const TokenDataFieldsFragmentDoc = `\n    fragment TokenDataFields on current_token_datas {\n  creator_address\n  collection_name\n  description\n  metadata_uri\n  name\n  token_data_id_hash\n  collection_data_id_hash\n}\n    `;\nexport const CollectionDataFieldsFragmentDoc = `\n    fragment CollectionDataFields on current_collection_datas {\n  metadata_uri\n  supply\n  description\n  collection_name\n  collection_data_id_hash\n  table_handle\n  creator_address\n}\n    `;\nexport const TokenActivitiesFieldsFragmentDoc = `\n    fragment TokenActivitiesFields on token_activities_v2 {\n  after_value\n  before_value\n  entry_function_id_str\n  event_account_address\n  event_index\n  from_address\n  is_fungible_v2\n  property_version_v1\n  to_address\n  token_amount\n  token_data_id\n  token_standard\n  transaction_timestamp\n  transaction_version\n  type\n}\n    `;\nexport const GetAccountCoinsDataCount = `\n    query getAccountCoinsDataCount($address: String) {\n  current_fungible_asset_balances_aggregate(\n    where: {owner_address: {_eq: $address}}\n  ) {\n    aggregate {\n      count\n    }\n  }\n}\n    `;\nexport const GetAccountCoinsData = `\n    query getAccountCoinsData($where_condition: current_fungible_asset_balances_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_fungible_asset_balances_order_by!]) {\n  current_fungible_asset_balances(\n    where: $where_condition\n    offset: $offset\n    limit: $limit\n    order_by: $order_by\n  ) {\n    amount\n    asset_type\n    is_frozen\n    is_primary\n    last_transaction_timestamp\n    last_transaction_version\n    owner_address\n    storage_id\n    token_standard\n    metadata {\n      token_standard\n      symbol\n      supply_aggregator_table_key_v1\n      supply_aggregator_table_handle_v1\n      project_uri\n      name\n      last_transaction_version\n      last_transaction_timestamp\n      icon_uri\n      decimals\n      creator_address\n      asset_type\n    }\n  }\n}\n    `;\nexport const GetAccountCurrentTokens = `\n    query getAccountCurrentTokens($address: String!, $offset: Int, $limit: Int) {\n  current_token_ownerships(\n    where: {owner_address: {_eq: $address}, amount: {_gt: 0}}\n    order_by: [{last_transaction_version: desc}, {creator_address: asc}, {collection_name: asc}, {name: asc}]\n    offset: $offset\n    limit: $limit\n  ) {\n    amount\n    current_token_data {\n      ...TokenDataFields\n    }\n    current_collection_data {\n      ...CollectionDataFields\n    }\n    last_transaction_version\n    property_version\n  }\n}\n    ${TokenDataFieldsFragmentDoc}\n${CollectionDataFieldsFragmentDoc}`;\nexport const GetAccountTokensCount = `\n    query getAccountTokensCount($where_condition: current_token_ownerships_v2_bool_exp, $offset: Int, $limit: Int) {\n  current_token_ownerships_v2_aggregate(\n    where: $where_condition\n    offset: $offset\n    limit: $limit\n  ) {\n    aggregate {\n      count\n    }\n  }\n}\n    `;\nexport const GetAccountTransactionsCount = `\n    query getAccountTransactionsCount($address: String) {\n  account_transactions_aggregate(where: {account_address: {_eq: $address}}) {\n    aggregate {\n      count\n    }\n  }\n}\n    `;\nexport const GetAccountTransactionsData = `\n    query getAccountTransactionsData($where_condition: account_transactions_bool_exp!, $offset: Int, $limit: Int, $order_by: [account_transactions_order_by!]) {\n  account_transactions(\n    where: $where_condition\n    order_by: $order_by\n    limit: $limit\n    offset: $offset\n  ) {\n    token_activities_v2 {\n      ...TokenActivitiesFields\n    }\n    transaction_version\n    account_address\n  }\n}\n    ${TokenActivitiesFieldsFragmentDoc}`;\nexport const GetCollectionData = `\n    query getCollectionData($where_condition: current_collections_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_collections_v2_order_by!]) {\n  current_collections_v2(\n    where: $where_condition\n    offset: $offset\n    limit: $limit\n    order_by: $order_by\n  ) {\n    collection_id\n    collection_name\n    creator_address\n    current_supply\n    description\n    last_transaction_timestamp\n    last_transaction_version\n    max_supply\n    mutable_description\n    mutable_uri\n    table_handle_v1\n    token_standard\n    total_minted_v2\n    uri\n  }\n}\n    `;\nexport const GetCollectionsWithOwnedTokens = `\n    query getCollectionsWithOwnedTokens($where_condition: current_collection_ownership_v2_view_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_collection_ownership_v2_view_order_by!]) {\n  current_collection_ownership_v2_view(\n    where: $where_condition\n    offset: $offset\n    limit: $limit\n    order_by: $order_by\n  ) {\n    current_collection {\n      collection_id\n      collection_name\n      creator_address\n      current_supply\n      description\n      last_transaction_timestamp\n      last_transaction_version\n      mutable_description\n      max_supply\n      mutable_uri\n      table_handle_v1\n      token_standard\n      total_minted_v2\n      uri\n    }\n    collection_id\n    collection_name\n    collection_uri\n    creator_address\n    distinct_tokens\n    last_transaction_version\n    owner_address\n    single_token_uri\n  }\n}\n    `;\nexport const GetCurrentObjects = `\n    query getCurrentObjects($where_condition: current_objects_bool_exp, $offset: Int, $limit: Int, $order_by: [current_objects_order_by!]) {\n  current_objects(\n    where: $where_condition\n    offset: $offset\n    limit: $limit\n    order_by: $order_by\n  ) {\n    allow_ungated_transfer\n    state_key_hash\n    owner_address\n    object_address\n    last_transaction_version\n    last_guid_creation_num\n    is_deleted\n  }\n}\n    `;\nexport const GetDelegatedStakingActivities = `\n    query getDelegatedStakingActivities($delegatorAddress: String, $poolAddress: String) {\n  delegated_staking_activities(\n    where: {delegator_address: {_eq: $delegatorAddress}, pool_address: {_eq: $poolAddress}}\n  ) {\n    amount\n    delegator_address\n    event_index\n    event_type\n    pool_address\n    transaction_version\n  }\n}\n    `;\nexport const GetIndexerLedgerInfo = `\n    query getIndexerLedgerInfo {\n  ledger_infos {\n    chain_id\n  }\n}\n    `;\nexport const GetNumberOfDelegators = `\n    query getNumberOfDelegators($poolAddress: String) {\n  num_active_delegator_per_pool(\n    where: {pool_address: {_eq: $poolAddress}, num_active_delegator: {_gt: \"0\"}}\n    distinct_on: pool_address\n  ) {\n    num_active_delegator\n    pool_address\n  }\n}\n    `;\nexport const GetOwnedTokens = `\n    query getOwnedTokens($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {\n  current_token_ownerships_v2(\n    where: $where_condition\n    offset: $offset\n    limit: $limit\n    order_by: $order_by\n  ) {\n    ...CurrentTokenOwnershipFields\n  }\n}\n    ${CurrentTokenOwnershipFieldsFragmentDoc}`;\nexport const GetOwnedTokensByTokenData = `\n    query getOwnedTokensByTokenData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {\n  current_token_ownerships_v2(\n    where: $where_condition\n    offset: $offset\n    limit: $limit\n    order_by: $order_by\n  ) {\n    ...CurrentTokenOwnershipFields\n  }\n}\n    ${CurrentTokenOwnershipFieldsFragmentDoc}`;\nexport const GetTokenActivities = `\n    query getTokenActivities($where_condition: token_activities_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [token_activities_v2_order_by!]) {\n  token_activities_v2(\n    where: $where_condition\n    order_by: $order_by\n    offset: $offset\n    limit: $limit\n  ) {\n    ...TokenActivitiesFields\n  }\n}\n    ${TokenActivitiesFieldsFragmentDoc}`;\nexport const GetTokenActivitiesCount = `\n    query getTokenActivitiesCount($token_id: String) {\n  token_activities_v2_aggregate(where: {token_data_id: {_eq: $token_id}}) {\n    aggregate {\n      count\n    }\n  }\n}\n    `;\nexport const GetTokenCurrentOwnerData = `\n    query getTokenCurrentOwnerData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {\n  current_token_ownerships_v2(\n    where: $where_condition\n    offset: $offset\n    limit: $limit\n    order_by: $order_by\n  ) {\n    ...CurrentTokenOwnershipFields\n  }\n}\n    ${CurrentTokenOwnershipFieldsFragmentDoc}`;\nexport const GetTokenData = `\n    query getTokenData($where_condition: current_token_datas_v2_bool_exp, $offset: Int, $limit: Int, $order_by: [current_token_datas_v2_order_by!]) {\n  current_token_datas_v2(\n    where: $where_condition\n    offset: $offset\n    limit: $limit\n    order_by: $order_by\n  ) {\n    collection_id\n    description\n    is_fungible_v2\n    largest_property_version_v1\n    last_transaction_timestamp\n    last_transaction_version\n    maximum\n    supply\n    token_data_id\n    token_name\n    token_properties\n    token_standard\n    token_uri\n    current_collection {\n      collection_id\n      collection_name\n      creator_address\n      current_supply\n      description\n      last_transaction_timestamp\n      last_transaction_version\n      max_supply\n      mutable_description\n      mutable_uri\n      table_handle_v1\n      token_standard\n      total_minted_v2\n      uri\n    }\n  }\n}\n    `;\nexport const GetTokenOwnedFromCollection = `\n    query getTokenOwnedFromCollection($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {\n  current_token_ownerships_v2(\n    where: $where_condition\n    offset: $offset\n    limit: $limit\n    order_by: $order_by\n  ) {\n    ...CurrentTokenOwnershipFields\n  }\n}\n    ${CurrentTokenOwnershipFieldsFragmentDoc}`;\nexport const GetTokenOwnersData = `\n    query getTokenOwnersData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {\n  current_token_ownerships_v2(\n    where: $where_condition\n    offset: $offset\n    limit: $limit\n    order_by: $order_by\n  ) {\n    ...CurrentTokenOwnershipFields\n  }\n}\n    ${CurrentTokenOwnershipFieldsFragmentDoc}`;\nexport const GetTopUserTransactions = `\n    query getTopUserTransactions($limit: Int) {\n  user_transactions(limit: $limit, order_by: {version: desc}) {\n    version\n  }\n}\n    `;\nexport const GetUserTransactions = `\n    query getUserTransactions($where_condition: user_transactions_bool_exp!, $offset: Int, $limit: Int, $order_by: [user_transactions_order_by!]) {\n  user_transactions(\n    order_by: $order_by\n    where: $where_condition\n    limit: $limit\n    offset: $offset\n  ) {\n    version\n  }\n}\n    `;\n\nexport type SdkFunctionWrapper = <T>(action: (requestHeaders?:Record<string, string>) => Promise<T>, operationName: string, operationType?: string) => Promise<T>;\n\n\nconst defaultWrapper: SdkFunctionWrapper = (action, _operationName, _operationType) => action();\n\nexport function getSdk(client: GraphQLClient, withWrapper: SdkFunctionWrapper = defaultWrapper) {\n  return {\n    getAccountCoinsDataCount(variables?: Types.GetAccountCoinsDataCountQueryVariables, requestHeaders?: GraphQLClientRequestHeaders): Promise<Types.GetAccountCoinsDataCountQuery> {\n      return withWrapper((wrappedRequestHeaders) => client.request<Types.GetAccountCoinsDataCountQuery>(GetAccountCoinsDataCount, variables, {...requestHeaders, ...wrappedRequestHeaders}), 'getAccountCoinsDataCount', 'query');\n    },\n    getAccountCoinsData(variables: Types.GetAccountCoinsDataQueryVariables, requestHeaders?: GraphQLClientRequestHeaders): Promise<Types.GetAccountCoinsDataQuery> {\n      return withWrapper((wrappedRequestHeaders) => client.request<Types.GetAccountCoinsDataQuery>(GetAccountCoinsData, variables, {...requestHeaders, ...wrappedRequestHeaders}), 'getAccountCoinsData', 'query');\n    },\n    getAccountCurrentTokens(variables: Types.GetAccountCurrentTokensQueryVariables, requestHeaders?: GraphQLClientRequestHeaders): Promise<Types.GetAccountCurrentTokensQuery> {\n      return withWrapper((wrappedRequestHeaders) => client.request<Types.GetAccountCurrentTokensQuery>(GetAccountCurrentTokens, variables, {...requestHeaders, ...wrappedRequestHeaders}), 'getAccountCurrentTokens', 'query');\n    },\n    getAccountTokensCount(variables?: Types.GetAccountTokensCountQueryVariables, requestHeaders?: GraphQLClientRequestHeaders): Promise<Types.GetAccountTokensCountQuery> {\n      return withWrapper((wrappedRequestHeaders) => client.request<Types.GetAccountTokensCountQuery>(GetAccountTokensCount, variables, {...requestHeaders, ...wrappedRequestHeaders}), 'getAccountTokensCount', 'query');\n    },\n    getAccountTransactionsCount(variables?: Types.GetAccountTransactionsCountQueryVariables, requestHeaders?: GraphQLClientRequestHeaders): Promise<Types.GetAccountTransactionsCountQuery> {\n      return withWrapper((wrappedRequestHeaders) => client.request<Types.GetAccountTransactionsCountQuery>(GetAccountTransactionsCount, variables, {...requestHeaders, ...wrappedRequestHeaders}), 'getAccountTransactionsCount', 'query');\n    },\n    getAccountTransactionsData(variables: Types.GetAccountTransactionsDataQueryVariables, requestHeaders?: GraphQLClientRequestHeaders): Promise<Types.GetAccountTransactionsDataQuery> {\n      return withWrapper((wrappedRequestHeaders) => client.request<Types.GetAccountTransactionsDataQuery>(GetAccountTransactionsData, variables, {...requestHeaders, ...wrappedRequestHeaders}), 'getAccountTransactionsData', 'query');\n    },\n    getCollectionData(variables: Types.GetCollectionDataQueryVariables, requestHeaders?: GraphQLClientRequestHeaders): Promise<Types.GetCollectionDataQuery> {\n      return withWrapper((wrappedRequestHeaders) => client.request<Types.GetCollectionDataQuery>(GetCollectionData, variables, {...requestHeaders, ...wrappedRequestHeaders}), 'getCollectionData', 'query');\n    },\n    getCollectionsWithOwnedTokens(variables: Types.GetCollectionsWithOwnedTokensQueryVariables, requestHeaders?: GraphQLClientRequestHeaders): Promise<Types.GetCollectionsWithOwnedTokensQuery> {\n      return withWrapper((wrappedRequestHeaders) => client.request<Types.GetCollectionsWithOwnedTokensQuery>(GetCollectionsWithOwnedTokens, variables, {...requestHeaders, ...wrappedRequestHeaders}), 'getCollectionsWithOwnedTokens', 'query');\n    },\n    getCurrentObjects(variables?: Types.GetCurrentObjectsQueryVariables, requestHeaders?: GraphQLClientRequestHeaders): Promise<Types.GetCurrentObjectsQuery> {\n      return withWrapper((wrappedRequestHeaders) => client.request<Types.GetCurrentObjectsQuery>(GetCurrentObjects, variables, {...requestHeaders, ...wrappedRequestHeaders}), 'getCurrentObjects', 'query');\n    },\n    getDelegatedStakingActivities(variables?: Types.GetDelegatedStakingActivitiesQueryVariables, requestHeaders?: GraphQLClientRequestHeaders): Promise<Types.GetDelegatedStakingActivitiesQuery> {\n      return withWrapper((wrappedRequestHeaders) => client.request<Types.GetDelegatedStakingActivitiesQuery>(GetDelegatedStakingActivities, variables, {...requestHeaders, ...wrappedRequestHeaders}), 'getDelegatedStakingActivities', 'query');\n    },\n    getIndexerLedgerInfo(variables?: Types.GetIndexerLedgerInfoQueryVariables, requestHeaders?: GraphQLClientRequestHeaders): Promise<Types.GetIndexerLedgerInfoQuery> {\n      return withWrapper((wrappedRequestHeaders) => client.request<Types.GetIndexerLedgerInfoQuery>(GetIndexerLedgerInfo, variables, {...requestHeaders, ...wrappedRequestHeaders}), 'getIndexerLedgerInfo', 'query');\n    },\n    getNumberOfDelegators(variables?: Types.GetNumberOfDelegatorsQueryVariables, requestHeaders?: GraphQLClientRequestHeaders): Promise<Types.GetNumberOfDelegatorsQuery> {\n      return withWrapper((wrappedRequestHeaders) => client.request<Types.GetNumberOfDelegatorsQuery>(GetNumberOfDelegators, variables, {...requestHeaders, ...wrappedRequestHeaders}), 'getNumberOfDelegators', 'query');\n    },\n    getOwnedTokens(variables: Types.GetOwnedTokensQueryVariables, requestHeaders?: GraphQLClientRequestHeaders): Promise<Types.GetOwnedTokensQuery> {\n      return withWrapper((wrappedRequestHeaders) => client.request<Types.GetOwnedTokensQuery>(GetOwnedTokens, variables, {...requestHeaders, ...wrappedRequestHeaders}), 'getOwnedTokens', 'query');\n    },\n    getOwnedTokensByTokenData(variables: Types.GetOwnedTokensByTokenDataQueryVariables, requestHeaders?: GraphQLClientRequestHeaders): Promise<Types.GetOwnedTokensByTokenDataQuery> {\n      return withWrapper((wrappedRequestHeaders) => client.request<Types.GetOwnedTokensByTokenDataQuery>(GetOwnedTokensByTokenData, variables, {...requestHeaders, ...wrappedRequestHeaders}), 'getOwnedTokensByTokenData', 'query');\n    },\n    getTokenActivities(variables: Types.GetTokenActivitiesQueryVariables, requestHeaders?: GraphQLClientRequestHeaders): Promise<Types.GetTokenActivitiesQuery> {\n      return withWrapper((wrappedRequestHeaders) => client.request<Types.GetTokenActivitiesQuery>(GetTokenActivities, variables, {...requestHeaders, ...wrappedRequestHeaders}), 'getTokenActivities', 'query');\n    },\n    getTokenActivitiesCount(variables?: Types.GetTokenActivitiesCountQueryVariables, requestHeaders?: GraphQLClientRequestHeaders): Promise<Types.GetTokenActivitiesCountQuery> {\n      return withWrapper((wrappedRequestHeaders) => client.request<Types.GetTokenActivitiesCountQuery>(GetTokenActivitiesCount, variables, {...requestHeaders, ...wrappedRequestHeaders}), 'getTokenActivitiesCount', 'query');\n    },\n    getTokenCurrentOwnerData(variables: Types.GetTokenCurrentOwnerDataQueryVariables, requestHeaders?: GraphQLClientRequestHeaders): Promise<Types.GetTokenCurrentOwnerDataQuery> {\n      return withWrapper((wrappedRequestHeaders) => client.request<Types.GetTokenCurrentOwnerDataQuery>(GetTokenCurrentOwnerData, variables, {...requestHeaders, ...wrappedRequestHeaders}), 'getTokenCurrentOwnerData', 'query');\n    },\n    getTokenData(variables?: Types.GetTokenDataQueryVariables, requestHeaders?: GraphQLClientRequestHeaders): Promise<Types.GetTokenDataQuery> {\n      return withWrapper((wrappedRequestHeaders) => client.request<Types.GetTokenDataQuery>(GetTokenData, variables, {...requestHeaders, ...wrappedRequestHeaders}), 'getTokenData', 'query');\n    },\n    getTokenOwnedFromCollection(variables: Types.GetTokenOwnedFromCollectionQueryVariables, requestHeaders?: GraphQLClientRequestHeaders): Promise<Types.GetTokenOwnedFromCollectionQuery> {\n      return withWrapper((wrappedRequestHeaders) => client.request<Types.GetTokenOwnedFromCollectionQuery>(GetTokenOwnedFromCollection, variables, {...requestHeaders, ...wrappedRequestHeaders}), 'getTokenOwnedFromCollection', 'query');\n    },\n    getTokenOwnersData(variables: Types.GetTokenOwnersDataQueryVariables, requestHeaders?: GraphQLClientRequestHeaders): Promise<Types.GetTokenOwnersDataQuery> {\n      return withWrapper((wrappedRequestHeaders) => client.request<Types.GetTokenOwnersDataQuery>(GetTokenOwnersData, variables, {...requestHeaders, ...wrappedRequestHeaders}), 'getTokenOwnersData', 'query');\n    },\n    getTopUserTransactions(variables?: Types.GetTopUserTransactionsQueryVariables, requestHeaders?: GraphQLClientRequestHeaders): Promise<Types.GetTopUserTransactionsQuery> {\n      return withWrapper((wrappedRequestHeaders) => client.request<Types.GetTopUserTransactionsQuery>(GetTopUserTransactions, variables, {...requestHeaders, ...wrappedRequestHeaders}), 'getTopUserTransactions', 'query');\n    },\n    getUserTransactions(variables: Types.GetUserTransactionsQueryVariables, requestHeaders?: GraphQLClientRequestHeaders): Promise<Types.GetUserTransactionsQuery> {\n      return withWrapper((wrappedRequestHeaders) => client.request<Types.GetUserTransactionsQuery>(GetUserTransactions, variables, {...requestHeaders, ...wrappedRequestHeaders}), 'getUserTransactions', 'query');\n    }\n  };\n}\nexport type Sdk = ReturnType<typeof getSdk>;","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport { HexString } from \"../utils\";\nimport {\n  TypeTag,\n  TypeTagBool,\n  TypeTagU8,\n  TypeTagU16,\n  TypeTagU32,\n  TypeTagU64,\n  TypeTagU128,\n  TypeTagU256,\n  TypeTagAddress,\n  AccountAddress,\n  TypeTagVector,\n  TypeTagStruct,\n  TransactionArgument,\n  TransactionArgumentBool,\n  TransactionArgumentU16,\n  TransactionArgumentU32,\n  TransactionArgumentU64,\n  TransactionArgumentU128,\n  TransactionArgumentU256,\n  TransactionArgumentAddress,\n  TransactionArgumentU8,\n  TransactionArgumentU8Vector,\n} from \"../aptos_types\";\nimport { Serializer } from \"../bcs\";\n\nfunction assertType(val: any, types: string[] | string, message?: string) {\n  if (!types?.includes(typeof val)) {\n    throw new Error(\n      message || `Invalid arg: ${val} type should be ${types instanceof Array ? types.join(\" or \") : types}`,\n    );\n  }\n}\n\nexport function ensureBoolean(val: boolean | string): boolean {\n  assertType(val, [\"boolean\", \"string\"]);\n  if (typeof val === \"boolean\") {\n    return val;\n  }\n\n  if (val === \"true\") {\n    return true;\n  }\n  if (val === \"false\") {\n    return false;\n  }\n\n  throw new Error(\"Invalid boolean string.\");\n}\n\nexport function ensureNumber(val: number | string): number {\n  assertType(val, [\"number\", \"string\"]);\n  if (typeof val === \"number\") {\n    return val;\n  }\n\n  const res = Number.parseInt(val, 10);\n  if (Number.isNaN(res)) {\n    throw new Error(\"Invalid number string.\");\n  }\n\n  return res;\n}\n\nexport function ensureBigInt(val: number | bigint | string): bigint {\n  assertType(val, [\"number\", \"bigint\", \"string\"]);\n  return BigInt(val);\n}\n\nexport function serializeArg(argVal: any, argType: TypeTag, serializer: Serializer) {\n  serializeArgInner(argVal, argType, serializer, 0);\n}\n\nfunction serializeArgInner(argVal: any, argType: TypeTag, serializer: Serializer, depth: number) {\n  if (argType instanceof TypeTagBool) {\n    serializer.serializeBool(ensureBoolean(argVal));\n  } else if (argType instanceof TypeTagU8) {\n    serializer.serializeU8(ensureNumber(argVal));\n  } else if (argType instanceof TypeTagU16) {\n    serializer.serializeU16(ensureNumber(argVal));\n  } else if (argType instanceof TypeTagU32) {\n    serializer.serializeU32(ensureNumber(argVal));\n  } else if (argType instanceof TypeTagU64) {\n    serializer.serializeU64(ensureBigInt(argVal));\n  } else if (argType instanceof TypeTagU128) {\n    serializer.serializeU128(ensureBigInt(argVal));\n  } else if (argType instanceof TypeTagU256) {\n    serializer.serializeU256(ensureBigInt(argVal));\n  } else if (argType instanceof TypeTagAddress) {\n    serializeAddress(argVal, serializer);\n  } else if (argType instanceof TypeTagVector) {\n    serializeVector(argVal, argType, serializer, depth);\n  } else if (argType instanceof TypeTagStruct) {\n    serializeStruct(argVal, argType, serializer, depth);\n  } else {\n    throw new Error(\"Unsupported arg type.\");\n  }\n}\n\nfunction serializeAddress(argVal: any, serializer: Serializer) {\n  let addr: AccountAddress;\n  if (typeof argVal === \"string\" || argVal instanceof HexString) {\n    addr = AccountAddress.fromHex(argVal);\n  } else if (argVal instanceof AccountAddress) {\n    addr = argVal;\n  } else {\n    throw new Error(\"Invalid account address.\");\n  }\n  addr.serialize(serializer);\n}\n\nfunction serializeVector(argVal: any, argType: TypeTagVector, serializer: Serializer, depth: number) {\n  // We are serializing a vector<u8>\n  if (argType.value instanceof TypeTagU8) {\n    if (argVal instanceof Uint8Array) {\n      serializer.serializeBytes(argVal);\n      return;\n    }\n    if (argVal instanceof HexString) {\n      serializer.serializeBytes(argVal.toUint8Array());\n      return;\n    }\n    if (typeof argVal === \"string\") {\n      serializer.serializeStr(argVal);\n      return;\n    }\n    // If it isn't any of those types, then it must just be an actual array of numbers\n  }\n\n  if (!Array.isArray(argVal)) {\n    throw new Error(\"Invalid vector args.\");\n  }\n\n  serializer.serializeU32AsUleb128(argVal.length);\n\n  argVal.forEach((arg) => serializeArgInner(arg, argType.value, serializer, depth + 1));\n}\n\nfunction serializeStruct(argVal: any, argType: TypeTag, serializer: Serializer, depth: number) {\n  const { address, module_name: moduleName, name, type_args: typeArgs } = (argType as TypeTagStruct).value;\n  const structType = `${HexString.fromUint8Array(address.address).toShortString()}::${moduleName.value}::${name.value}`;\n  if (structType === \"0x1::string::String\") {\n    assertType(argVal, [\"string\"]);\n    serializer.serializeStr(argVal);\n  } else if (structType === \"0x1::object::Object\") {\n    serializeAddress(argVal, serializer);\n  } else if (structType === \"0x1::option::Option\") {\n    if (typeArgs.length !== 1) {\n      throw new Error(`Option has the wrong number of type arguments ${typeArgs.length}`);\n    }\n    serializeOption(argVal, typeArgs[0], serializer, depth);\n  } else {\n    throw new Error(\"Unsupported struct type in function argument\");\n  }\n}\n\nfunction serializeOption(argVal: any, argType: TypeTag, serializer: Serializer, depth: number) {\n  // For option, we determine if it's empty or not empty first\n  // empty option is nothing, we specifically check for undefined to prevent fuzzy matching\n  if (argVal === undefined || argVal === null) {\n    serializer.serializeU32AsUleb128(0);\n  } else {\n    // Something means we need an array of 1\n    serializer.serializeU32AsUleb128(1);\n\n    // Serialize the inner type arg, ensuring that depth is tracked\n    serializeArgInner(argVal, argType, serializer, depth + 1);\n  }\n}\n\nexport function argToTransactionArgument(argVal: any, argType: TypeTag): TransactionArgument {\n  if (argType instanceof TypeTagBool) {\n    return new TransactionArgumentBool(ensureBoolean(argVal));\n  }\n  if (argType instanceof TypeTagU8) {\n    return new TransactionArgumentU8(ensureNumber(argVal));\n  }\n  if (argType instanceof TypeTagU16) {\n    return new TransactionArgumentU16(ensureNumber(argVal));\n  }\n  if (argType instanceof TypeTagU32) {\n    return new TransactionArgumentU32(ensureNumber(argVal));\n  }\n  if (argType instanceof TypeTagU64) {\n    return new TransactionArgumentU64(ensureBigInt(argVal));\n  }\n  if (argType instanceof TypeTagU128) {\n    return new TransactionArgumentU128(ensureBigInt(argVal));\n  }\n  if (argType instanceof TypeTagU256) {\n    return new TransactionArgumentU256(ensureBigInt(argVal));\n  }\n  if (argType instanceof TypeTagAddress) {\n    let addr: AccountAddress;\n    if (typeof argVal === \"string\" || argVal instanceof HexString) {\n      addr = AccountAddress.fromHex(argVal);\n    } else if (argVal instanceof AccountAddress) {\n      addr = argVal;\n    } else {\n      throw new Error(\"Invalid account address.\");\n    }\n    return new TransactionArgumentAddress(addr);\n  }\n  if (argType instanceof TypeTagVector && argType.value instanceof TypeTagU8) {\n    if (!(argVal instanceof Uint8Array)) {\n      throw new Error(`${argVal} should be an instance of Uint8Array`);\n    }\n    return new TransactionArgumentU8Vector(argVal);\n  }\n\n  throw new Error(\"Unknown type for TransactionArgument.\");\n}\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport { sha3_256 as sha3Hash } from \"@noble/hashes/sha3\";\nimport {\n  Ed25519PublicKey,\n  Ed25519Signature,\n  MultiEd25519PublicKey,\n  MultiEd25519Signature,\n  RawTransaction,\n  SignedTransaction,\n  TransactionAuthenticatorEd25519,\n  TransactionAuthenticatorMultiEd25519,\n  SigningMessage,\n  MultiAgentRawTransaction,\n  FeePayerRawTransaction,\n  AccountAddress,\n  EntryFunction,\n  Identifier,\n  ChainId,\n  Script,\n  TransactionPayload,\n  TransactionArgument,\n  TransactionPayloadEntryFunction,\n  TransactionPayloadScript,\n  ModuleId,\n  TypeTagParser,\n} from \"../aptos_types\";\nimport { bcsToBytes, Bytes, Deserializer, Serializer, Uint64, Uint8 } from \"../bcs\";\nimport { ArgumentABI, EntryFunctionABI, ScriptABI, TransactionScriptABI, TypeArgumentABI } from \"../aptos_types/abi\";\nimport { argToTransactionArgument, serializeArg } from \"./builder_utils\";\nimport * as Gen from \"../generated/index\";\nimport {\n  DEFAULT_TXN_EXP_SEC_FROM_NOW,\n  DEFAULT_MAX_GAS_AMOUNT,\n  HexString,\n  MaybeHexString,\n  MemoizeExpiring,\n} from \"../utils\";\n\nexport { TypeTagParser } from \"../aptos_types\";\n\nconst RAW_TRANSACTION_SALT = \"APTOS::RawTransaction\";\nconst RAW_TRANSACTION_WITH_DATA_SALT = \"APTOS::RawTransactionWithData\";\n\nexport type AnyRawTransaction = RawTransaction | MultiAgentRawTransaction | FeePayerRawTransaction;\n\n/**\n * Function that takes in a Signing Message (serialized raw transaction)\n *  and returns a signature\n */\nexport type SigningFn = (txn: SigningMessage) => Ed25519Signature | MultiEd25519Signature;\n\nexport class TransactionBuilder<F extends SigningFn> {\n  protected readonly signingFunction: F;\n\n  constructor(\n    signingFunction: F,\n    public readonly rawTxnBuilder?: TransactionBuilderABI,\n  ) {\n    this.signingFunction = signingFunction;\n  }\n\n  /**\n   * Builds a RawTransaction. Relays the call to TransactionBuilderABI.build\n   * @param func\n   * @param ty_tags\n   * @param args\n   */\n  build(func: string, ty_tags: string[], args: any[]): RawTransaction {\n    if (!this.rawTxnBuilder) {\n      throw new Error(\"this.rawTxnBuilder doesn't exist.\");\n    }\n\n    return this.rawTxnBuilder.build(func, ty_tags, args);\n  }\n\n  /** Generates a Signing Message out of a raw transaction. */\n  static getSigningMessage(rawTxn: AnyRawTransaction): SigningMessage {\n    const hash = sha3Hash.create();\n    if (rawTxn instanceof RawTransaction) {\n      hash.update(RAW_TRANSACTION_SALT);\n    } else if (rawTxn instanceof MultiAgentRawTransaction) {\n      hash.update(RAW_TRANSACTION_WITH_DATA_SALT);\n    } else if (rawTxn instanceof FeePayerRawTransaction) {\n      hash.update(RAW_TRANSACTION_WITH_DATA_SALT);\n    } else {\n      throw new Error(\"Unknown transaction type.\");\n    }\n\n    const prefix = hash.digest();\n\n    const body = bcsToBytes(rawTxn);\n\n    const mergedArray = new Uint8Array(prefix.length + body.length);\n    mergedArray.set(prefix);\n    mergedArray.set(body, prefix.length);\n\n    return mergedArray;\n  }\n}\n\n/**\n * Provides signing method for signing a raw transaction with single public key.\n */\nexport class TransactionBuilderEd25519 extends TransactionBuilder<SigningFn> {\n  private readonly publicKey: Uint8Array;\n\n  constructor(signingFunction: SigningFn, publicKey: Uint8Array, rawTxnBuilder?: TransactionBuilderABI) {\n    super(signingFunction, rawTxnBuilder);\n    this.publicKey = publicKey;\n  }\n\n  rawToSigned(rawTxn: RawTransaction): SignedTransaction {\n    const signingMessage = TransactionBuilder.getSigningMessage(rawTxn);\n    const signature = this.signingFunction(signingMessage);\n\n    const authenticator = new TransactionAuthenticatorEd25519(\n      new Ed25519PublicKey(this.publicKey),\n      signature as Ed25519Signature,\n    );\n\n    return new SignedTransaction(rawTxn, authenticator);\n  }\n\n  /** Signs a raw transaction and returns a bcs serialized transaction. */\n  sign(rawTxn: RawTransaction): Bytes {\n    return bcsToBytes(this.rawToSigned(rawTxn));\n  }\n}\n\n/**\n * Provides signing method for signing a raw transaction with multisig public key.\n */\nexport class TransactionBuilderMultiEd25519 extends TransactionBuilder<SigningFn> {\n  private readonly publicKey: MultiEd25519PublicKey;\n\n  constructor(signingFunction: SigningFn, publicKey: MultiEd25519PublicKey) {\n    super(signingFunction);\n    this.publicKey = publicKey;\n  }\n\n  rawToSigned(rawTxn: RawTransaction): SignedTransaction {\n    const signingMessage = TransactionBuilder.getSigningMessage(rawTxn);\n    const signature = this.signingFunction(signingMessage);\n\n    const authenticator = new TransactionAuthenticatorMultiEd25519(this.publicKey, signature as MultiEd25519Signature);\n\n    return new SignedTransaction(rawTxn, authenticator);\n  }\n\n  /** Signs a raw transaction and returns a bcs serialized transaction. */\n  sign(rawTxn: RawTransaction): Bytes {\n    return bcsToBytes(this.rawToSigned(rawTxn));\n  }\n}\n\n/**\n * Config for creating raw transactions.\n */\nexport interface ABIBuilderConfig {\n  sender: MaybeHexString | AccountAddress;\n  sequenceNumber: Uint64 | string;\n  gasUnitPrice: Uint64 | string;\n  maxGasAmount?: Uint64 | string;\n  expSecFromNow?: number | string;\n  chainId: Uint8 | string;\n}\n\n/**\n * Builds raw transactions based on ABI\n */\nexport class TransactionBuilderABI {\n  private readonly abiMap: Map<string, ScriptABI>;\n\n  private readonly builderConfig: Partial<ABIBuilderConfig>;\n\n  /**\n   * Constructs a TransactionBuilderABI instance\n   * @param abis List of binary ABIs.\n   * @param builderConfig Configs for creating a raw transaction.\n   */\n  constructor(abis: Bytes[], builderConfig?: ABIBuilderConfig) {\n    this.abiMap = new Map<string, ScriptABI>();\n\n    abis.forEach((abi) => {\n      const deserializer = new Deserializer(abi);\n      const scriptABI = ScriptABI.deserialize(deserializer);\n      let k: string;\n      if (scriptABI instanceof EntryFunctionABI) {\n        const funcABI = scriptABI as EntryFunctionABI;\n        const { address: addr, name: moduleName } = funcABI.module_name;\n        k = `${HexString.fromUint8Array(addr.address).toShortString()}::${moduleName.value}::${funcABI.name}`;\n      } else {\n        const funcABI = scriptABI as TransactionScriptABI;\n        k = funcABI.name;\n      }\n\n      if (this.abiMap.has(k)) {\n        throw new Error(\"Found conflicting ABI interfaces\");\n      }\n\n      this.abiMap.set(k, scriptABI);\n    });\n\n    this.builderConfig = {\n      maxGasAmount: BigInt(DEFAULT_MAX_GAS_AMOUNT),\n      expSecFromNow: DEFAULT_TXN_EXP_SEC_FROM_NOW,\n      ...builderConfig,\n    };\n  }\n\n  private static toBCSArgs(abiArgs: any[], args: any[]): Bytes[] {\n    if (abiArgs.length !== args.length) {\n      throw new Error(\"Wrong number of args provided.\");\n    }\n\n    return args.map((arg, i) => {\n      const serializer = new Serializer();\n      serializeArg(arg, abiArgs[i].type_tag, serializer);\n      return serializer.getBytes();\n    });\n  }\n\n  private static toTransactionArguments(abiArgs: any[], args: any[]): TransactionArgument[] {\n    if (abiArgs.length !== args.length) {\n      throw new Error(\"Wrong number of args provided.\");\n    }\n\n    return args.map((arg, i) => argToTransactionArgument(arg, abiArgs[i].type_tag));\n  }\n\n  setSequenceNumber(seqNumber: Uint64 | string) {\n    this.builderConfig.sequenceNumber = BigInt(seqNumber);\n  }\n\n  /**\n   * Builds a TransactionPayload. For dApps, chain ID and account sequence numbers are only known to the wallet.\n   * Instead of building a RawTransaction (requires chainID and sequenceNumber), dApps can build a TransactionPayload\n   * and pass the payload to the wallet for signing and sending.\n   * @param func Fully qualified func names, e.g. 0x1::aptos_account::transfer\n   * @param ty_tags TypeTag strings\n   * @param args Function arguments\n   * @returns TransactionPayload\n   */\n  buildTransactionPayload(func: string, ty_tags: string[], args: any[]): TransactionPayload {\n    const typeTags = ty_tags.map((ty_arg) => new TypeTagParser(ty_arg).parseTypeTag());\n\n    let payload: TransactionPayload;\n\n    if (!this.abiMap.has(func)) {\n      throw new Error(`Cannot find function: ${func}`);\n    }\n\n    const scriptABI = this.abiMap.get(func);\n\n    if (scriptABI instanceof EntryFunctionABI) {\n      const funcABI = scriptABI as EntryFunctionABI;\n      const bcsArgs = TransactionBuilderABI.toBCSArgs(funcABI.args, args);\n      payload = new TransactionPayloadEntryFunction(\n        new EntryFunction(funcABI.module_name, new Identifier(funcABI.name), typeTags, bcsArgs),\n      );\n    } else if (scriptABI instanceof TransactionScriptABI) {\n      const funcABI = scriptABI as TransactionScriptABI;\n      const scriptArgs = TransactionBuilderABI.toTransactionArguments(funcABI.args, args);\n\n      payload = new TransactionPayloadScript(new Script(funcABI.code, typeTags, scriptArgs));\n    } else {\n      /* istanbul ignore next */\n      throw new Error(\"Unknown ABI format.\");\n    }\n\n    return payload;\n  }\n\n  /**\n   * Builds a RawTransaction\n   * @param func Fully qualified func names, e.g. 0x1::aptos_account::transfer\n   * @param ty_tags TypeTag strings.\n   * @example Below are valid value examples\n   * ```\n   * // Structs are in format `AccountAddress::ModuleName::StructName`\n   * 0x1::aptos_coin::AptosCoin\n   * // Vectors are in format `vector<other_tag_string>`\n   * vector<0x1::aptos_coin::AptosCoin>\n   * bool\n   * u8\n   * u16\n   * u32\n   * u64\n   * u128\n   * u256\n   * address\n   * ```\n   * @param args Function arguments\n   * @returns RawTransaction\n   */\n  build(func: string, ty_tags: string[], args: any[]): RawTransaction {\n    const { sender, sequenceNumber, gasUnitPrice, maxGasAmount, expSecFromNow, chainId } = this.builderConfig;\n\n    if (!gasUnitPrice) {\n      throw new Error(\"No gasUnitPrice provided.\");\n    }\n\n    const senderAccount = sender instanceof AccountAddress ? sender : AccountAddress.fromHex(sender!);\n    const expTimestampSec = BigInt(Math.floor(Date.now() / 1000) + Number(expSecFromNow));\n    const payload = this.buildTransactionPayload(func, ty_tags, args);\n\n    if (payload) {\n      return new RawTransaction(\n        senderAccount,\n        BigInt(sequenceNumber!),\n        payload,\n        BigInt(maxGasAmount!),\n        BigInt(gasUnitPrice!),\n        expTimestampSec,\n        new ChainId(Number(chainId)),\n      );\n    }\n\n    throw new Error(\"Invalid ABI.\");\n  }\n}\n\nexport type RemoteABIBuilderConfig = Partial<Omit<ABIBuilderConfig, \"sender\">> & {\n  sender: MaybeHexString | AccountAddress;\n};\n\nexport interface AptosClientInterface {\n  getAccountModules: (accountAddress: MaybeHexString) => Promise<Gen.MoveModuleBytecode[]>;\n  getAccount: (accountAddress: MaybeHexString) => Promise<Gen.AccountData>;\n  getChainId: () => Promise<number>;\n  estimateGasPrice: () => Promise<Gen.GasEstimation>;\n}\n\n/**\n * This transaction builder downloads JSON ABIs from the fullnodes.\n * It then translates the JSON ABIs to the format that is accepted by TransactionBuilderABI\n */\nexport class TransactionBuilderRemoteABI {\n  // We don't want the builder to depend on the actual AptosClient. There might be circular dependencies.\n  constructor(\n    private readonly aptosClient: AptosClientInterface,\n    private readonly builderConfig: RemoteABIBuilderConfig,\n  ) {}\n\n  // Cache for 10 minutes\n  @MemoizeExpiring(10 * 60 * 1000)\n  async fetchABI(addr: string) {\n    const modules = await this.aptosClient.getAccountModules(addr);\n    const abis = modules\n      .map((module) => module.abi)\n      .flatMap((abi) =>\n        abi!.exposed_functions\n          .filter((ef) => ef.is_entry)\n          .map(\n            (ef) =>\n              ({\n                fullName: `${abi!.address}::${abi!.name}::${ef.name}`,\n                ...ef,\n              }) as Gen.MoveFunction & { fullName: string },\n          ),\n      );\n\n    const abiMap = new Map<string, Gen.MoveFunction & { fullName: string }>();\n    abis.forEach((abi) => {\n      abiMap.set(abi.fullName, abi);\n    });\n\n    return abiMap;\n  }\n\n  /**\n   * Builds a raw transaction. Only support script function a.k.a entry function payloads\n   *\n   * @param func fully qualified function name in format <address>::<module>::<function>, e.g. 0x1::coin::transfer\n   * @param ty_tags\n   * @param args\n   * @returns RawTransaction\n   */\n  async build(func: Gen.EntryFunctionId, ty_tags: Gen.MoveType[], args: any[]): Promise<RawTransaction> {\n    /* eslint no-param-reassign: [\"off\"] */\n    const normlize = (s: string) => s.replace(/^0[xX]0*/g, \"0x\");\n    func = normlize(func);\n    const funcNameParts = func.split(\"::\");\n    if (funcNameParts.length !== 3) {\n      throw new Error(\n        // eslint-disable-next-line max-len\n        \"'func' needs to be a fully qualified function name in format <address>::<module>::<function>, e.g. 0x1::coin::transfer\",\n      );\n    }\n\n    const [addr, module] = func.split(\"::\");\n\n    // Downloads the JSON abi\n    const abiMap = await this.fetchABI(addr);\n    if (!abiMap.has(func)) {\n      throw new Error(`${func} doesn't exist.`);\n    }\n\n    const funcAbi = abiMap.get(func);\n\n    // Remove all `signer` and `&signer` from argument list because the Move VM injects those arguments. Clients do not\n    // need to care about those args. `signer` and `&signer` are required be in the front of the argument list. But we\n    // just loop through all arguments and filter out `signer` and `&signer`.\n    const abiArgs = funcAbi!.params.filter((param) => param !== \"signer\" && param !== \"&signer\");\n\n    // Convert abi string arguments to TypeArgumentABI\n    const typeArgABIs = abiArgs.map(\n      (abiArg, i) => new ArgumentABI(`var${i}`, new TypeTagParser(abiArg, ty_tags).parseTypeTag()),\n    );\n\n    const entryFunctionABI = new EntryFunctionABI(\n      funcAbi!.name,\n      ModuleId.fromStr(`${addr}::${module}`),\n      \"\", // Doc string\n      funcAbi!.generic_type_params.map((_, i) => new TypeArgumentABI(`${i}`)),\n      typeArgABIs,\n    );\n\n    const { sender, ...rest } = this.builderConfig;\n\n    const senderAddress = sender instanceof AccountAddress ? HexString.fromUint8Array(sender.address) : sender;\n\n    const [{ sequence_number: sequenceNumber }, chainId, { gas_estimate: gasUnitPrice }] = await Promise.all([\n      rest?.sequenceNumber\n        ? Promise.resolve({ sequence_number: rest?.sequenceNumber })\n        : this.aptosClient.getAccount(senderAddress),\n      rest?.chainId ? Promise.resolve(rest?.chainId) : this.aptosClient.getChainId(),\n      rest?.gasUnitPrice ? Promise.resolve({ gas_estimate: rest?.gasUnitPrice }) : this.aptosClient.estimateGasPrice(),\n    ]);\n\n    const builderABI = new TransactionBuilderABI([bcsToBytes(entryFunctionABI)], {\n      sender,\n      sequenceNumber,\n      chainId,\n      gasUnitPrice: BigInt(gasUnitPrice),\n      ...rest,\n    });\n\n    return builderABI.build(func, ty_tags, args);\n  }\n}\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  clear,\n  DEFAULT_TXN_EXP_SEC_FROM_NOW,\n  DEFAULT_MAX_GAS_AMOUNT,\n  DEFAULT_TXN_TIMEOUT_SEC,\n  fixNodeUrl,\n  HexString,\n  paginateWithCursor,\n  MaybeHexString,\n  Memoize,\n  sleep,\n  APTOS_COIN,\n  MemoizeExpiring,\n} from \"../utils\";\nimport { AptosAccount } from \"../account/aptos_account\";\nimport * as Gen from \"../generated/index\";\nimport {\n  TxnBuilderTypes,\n  TransactionBuilderEd25519,\n  TransactionBuilderRemoteABI,\n  RemoteABIBuilderConfig,\n  TransactionBuilderMultiEd25519,\n  TransactionBuilder,\n} from \"../transaction_builder\";\nimport {\n  bcsSerializeBytes,\n  bcsSerializeU8,\n  bcsToBytes,\n  Bytes,\n  Seq,\n  Serializer,\n  serializeVector,\n  Uint64,\n  AnyNumber,\n} from \"../bcs\";\nimport {\n  AccountAddress,\n  Ed25519PublicKey,\n  FeePayerRawTransaction,\n  MultiAgentRawTransaction,\n  MultiEd25519PublicKey,\n  RawTransaction,\n} from \"../aptos_types\";\nimport { get, post, ClientConfig, AptosApiError } from \"../client\";\n\nexport interface OptionalTransactionArgs {\n  maxGasAmount?: Uint64;\n  gasUnitPrice?: Uint64;\n  expireTimestamp?: Uint64;\n  providedSequenceNumber?: string | bigint;\n}\n\nexport interface PaginationArgs {\n  start?: AnyNumber;\n  limit?: number;\n}\n\n/**\n * Provides methods for retrieving data from Aptos node.\n * For more detailed API specification see {@link https://fullnode.devnet.aptoslabs.com/v1/spec}\n */\nexport class AptosClient {\n  readonly nodeUrl: string;\n\n  readonly config: ClientConfig | undefined;\n\n  /**\n   * Build a client configured to connect to an Aptos node at the given URL.\n   *\n   * Note: If you forget to append `/v1` to the URL, the client constructor\n   * will automatically append it. If you don't want this URL processing to\n   * take place, set doNotFixNodeUrl to true.\n   *\n   * @param nodeUrl URL of the Aptos Node API endpoint.\n   * @param config Additional configuration options for the generated Axios client.\n   */\n  constructor(nodeUrl: string, config?: ClientConfig, doNotFixNodeUrl: boolean = false) {\n    if (!nodeUrl) {\n      throw new Error(\"Node URL cannot be empty.\");\n    }\n    if (doNotFixNodeUrl) {\n      this.nodeUrl = nodeUrl;\n    } else {\n      this.nodeUrl = fixNodeUrl(nodeUrl);\n    }\n    this.config = config === undefined || config === null ? {} : { ...config };\n  }\n\n  /**\n   * Queries an Aptos account by address\n   * @param accountAddress Hex-encoded 32 byte Aptos account address\n   * @returns Core account resource, used for identifying account and transaction execution\n   * @example An example of the returned account\n   * ```\n   * {\n   *    sequence_number: \"1\",\n   *    authentication_key: \"0x5307b5f4bc67829097a8ba9b43dba3b88261eeccd1f709d9bde240fc100fbb69\"\n   * }\n   * ```\n   */\n  @parseApiError\n  async getAccount(accountAddress: MaybeHexString): Promise<Gen.AccountData> {\n    const { data } = await get<{}, Gen.AccountData>({\n      url: this.nodeUrl,\n      endpoint: `accounts/${HexString.ensure(accountAddress).hex()}`,\n      originMethod: \"getAccount\",\n      overrides: { ...this.config },\n    });\n    return data;\n  }\n\n  /**\n   * Queries transactions sent by given account\n   * @param accountAddress Hex-encoded 32 byte Aptos account address\n   * @param query Optional pagination object\n   * @param query.start The sequence number of the start transaction of the page. Default is 0.\n   * @param query.limit The max number of transactions should be returned for the page. Default is 25.\n   * @returns An array of on-chain transactions, sent by account\n   */\n  @parseApiError\n  async getAccountTransactions(accountAddress: MaybeHexString, query?: PaginationArgs): Promise<Gen.Transaction[]> {\n    const { data } = await get<{}, Gen.Transaction[]>({\n      url: this.nodeUrl,\n      endpoint: `accounts/${HexString.ensure(accountAddress).hex()}/transactions`,\n      originMethod: \"getAccountTransactions\",\n      params: { start: query?.start, limit: query?.limit },\n      overrides: { ...this.config },\n    });\n    return data;\n  }\n\n  /**\n   * Queries modules associated with given account\n   *\n   * Note: In order to get all account modules, this function may call the API\n   * multiple times as it paginates.\n   *\n   * @param accountAddress Hex-encoded 32 byte Aptos account address\n   * @param query.ledgerVersion Specifies ledger version of transactions. By default latest version will be used\n   * @returns Account modules array for a specific ledger version.\n   * Module is represented by MoveModule interface. It contains module `bytecode` and `abi`,\n   * which is JSON representation of a module. Account modules are cached by account address for 10 minutes\n   * to prevent unnecessary API calls when fetching the same account modules\n   */\n  @parseApiError\n  @MemoizeExpiring(10 * 60 * 1000)\n  async getAccountModules(\n    accountAddress: MaybeHexString,\n    query?: { ledgerVersion?: AnyNumber },\n  ): Promise<Gen.MoveModuleBytecode[]> {\n    // Note: This function does not expose a `limit` parameter because it might\n    // be ambiguous how this is being used. Is it being passed to getAccountModules\n    // to limit the number of items per response, or does it limit the total output\n    // of this function? We avoid this confusion by not exposing the parameter at all.\n    const out = await paginateWithCursor<{}, Gen.MoveModuleBytecode[]>({\n      url: this.nodeUrl,\n      endpoint: `accounts/${accountAddress}/modules`,\n      params: { ledger_version: query?.ledgerVersion, limit: 1000 },\n      originMethod: \"getAccountModules\",\n      overrides: { ...this.config },\n    });\n    return out;\n  }\n\n  /**\n   * Queries module associated with given account by module name\n   *\n   * Note: In order to get all account resources, this function may call the API\n   * multiple times as it paginates.\n   *\n   * @param accountAddress Hex-encoded 32 byte Aptos account address\n   * @param moduleName The name of the module\n   * @param query.ledgerVersion Specifies ledger version of transactions. By default latest version will be used\n   * @returns Specified module.\n   * Module is represented by MoveModule interface. It contains module `bytecode` and `abi`,\n   * which JSON representation of a module\n   */\n  @parseApiError\n  async getAccountModule(\n    accountAddress: MaybeHexString,\n    moduleName: string,\n    query?: { ledgerVersion?: AnyNumber },\n  ): Promise<Gen.MoveModuleBytecode> {\n    const { data } = await get<{}, Gen.MoveModuleBytecode>({\n      url: this.nodeUrl,\n      endpoint: `accounts/${HexString.ensure(accountAddress).hex()}/module/${moduleName}`,\n      originMethod: \"getAccountModule\",\n      params: { ledger_version: query?.ledgerVersion },\n      overrides: { ...this.config },\n    });\n    return data;\n  }\n\n  /**\n   * Queries all resources associated with given account\n   * @param accountAddress Hex-encoded 32 byte Aptos account address\n   * @param query.ledgerVersion Specifies ledger version of transactions. By default latest version will be used\n   * @returns Account resources for a specific ledger version\n   */\n  @parseApiError\n  async getAccountResources(\n    accountAddress: MaybeHexString,\n    query?: { ledgerVersion?: AnyNumber },\n  ): Promise<Gen.MoveResource[]> {\n    const out = await paginateWithCursor<{}, Gen.MoveResource[]>({\n      url: this.nodeUrl,\n      endpoint: `accounts/${accountAddress}/resources`,\n      params: { ledger_version: query?.ledgerVersion, limit: 9999 },\n      originMethod: \"getAccountResources\",\n      overrides: { ...this.config },\n    });\n    return out;\n  }\n\n  /**\n   * Queries resource associated with given account by resource type\n   * @param accountAddress Hex-encoded 32 byte Aptos account address\n   * @param resourceType String representation of an on-chain Move struct type\n   * @param query.ledgerVersion Specifies ledger version of transactions. By default latest version will be used\n   * @returns Account resource of specified type and ledger version\n   * @example An example of an account resource\n   * ```\n   * {\n   *    type: \"0x1::aptos_coin::AptosCoin\",\n   *    data: { value: 6 }\n   * }\n   * ```\n   */\n  @parseApiError\n  async getAccountResource(\n    accountAddress: MaybeHexString,\n    resourceType: Gen.MoveStructTag,\n    query?: { ledgerVersion?: AnyNumber },\n  ): Promise<Gen.MoveResource> {\n    const { data } = await get<{}, Gen.MoveResource>({\n      url: this.nodeUrl,\n      endpoint: `accounts/${HexString.ensure(accountAddress).hex()}/resource/${resourceType}`,\n      originMethod: \"getAccountResource\",\n      params: { ledger_version: query?.ledgerVersion },\n      overrides: { ...this.config },\n    });\n    return data;\n  }\n\n  /** Generates a signed transaction that can be submitted to the chain for execution. */\n  static generateBCSTransaction(accountFrom: AptosAccount, rawTxn: TxnBuilderTypes.RawTransaction): Uint8Array {\n    const txnBuilder = new TransactionBuilderEd25519((signingMessage: TxnBuilderTypes.SigningMessage) => {\n      // @ts-ignore\n      const sigHexStr = accountFrom.signBuffer(signingMessage);\n      return new TxnBuilderTypes.Ed25519Signature(sigHexStr.toUint8Array());\n    }, accountFrom.pubKey().toUint8Array());\n\n    return txnBuilder.sign(rawTxn);\n  }\n\n  /**\n   * Note: Unless you have a specific reason for using this, it'll probably be simpler\n   * to use `simulateTransaction`.\n   *\n   * Generates a BCS transaction that can be submitted to the chain for simulation.\n   *\n   * @param accountFrom The account that will be used to send the transaction\n   * for simulation.\n   * @param rawTxn The raw transaction to be simulated, likely created by calling\n   * the `generateTransaction` function.\n   * @returns The BCS encoded signed transaction, which you should then pass into\n   * the `submitBCSSimulation` function.\n   */\n  static generateBCSSimulation(accountFrom: AptosAccount, rawTxn: TxnBuilderTypes.RawTransaction): Uint8Array {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const txnBuilder = new TransactionBuilderEd25519((_signingMessage: TxnBuilderTypes.SigningMessage) => {\n      // @ts-ignore\n      const invalidSigBytes = new Uint8Array(64);\n      return new TxnBuilderTypes.Ed25519Signature(invalidSigBytes);\n    }, accountFrom.pubKey().toUint8Array());\n\n    return txnBuilder.sign(rawTxn);\n  }\n\n  /** Generates an entry function transaction request that can be submitted to produce a raw transaction that\n   * can be signed, which upon being signed can be submitted to the blockchain\n   * This function fetches the remote ABI and uses it to serialized the data, therefore\n   * users don't need to handle serialization by themselves.\n   * @param sender Hex-encoded 32 byte Aptos account address of transaction sender\n   * @param payload Entry function transaction payload type\n   * @param options Options allow to overwrite default transaction options.\n   * @returns A raw transaction object\n   */\n  async generateTransaction(\n    sender: MaybeHexString,\n    payload: Gen.EntryFunctionPayload,\n    options?: Partial<Gen.SubmitTransactionRequest>,\n  ): Promise<TxnBuilderTypes.RawTransaction> {\n    const config: RemoteABIBuilderConfig = { sender };\n    if (options?.sequence_number) {\n      config.sequenceNumber = options.sequence_number;\n    }\n\n    if (options?.gas_unit_price) {\n      config.gasUnitPrice = options.gas_unit_price;\n    }\n\n    if (options?.max_gas_amount) {\n      config.maxGasAmount = options.max_gas_amount;\n    }\n\n    if (options?.expiration_timestamp_secs) {\n      const timestamp = Number.parseInt(options.expiration_timestamp_secs, 10);\n      config.expSecFromNow = timestamp - Math.floor(Date.now() / 1000);\n    }\n\n    const builder = new TransactionBuilderRemoteABI(this, config);\n    return builder.build(payload.function, payload.type_arguments, payload.arguments);\n  }\n\n  /**\n   * Generates a fee payer transaction that can be signed and submitted to chain\n   *\n   * @param sender the sender's account address\n   * @param payload the transaction payload\n   * @param fee_payer the fee payer account\n   * @param secondarySignerAccounts an optional array of the secondary signers accounts\n   * @returns a fee payer raw transaction that can be signed and submitted to chain\n   */\n  async generateFeePayerTransaction(\n    sender: MaybeHexString,\n    payload: Gen.EntryFunctionPayload,\n    feePayer: MaybeHexString,\n    secondarySignerAccounts: Array<MaybeHexString> = [],\n    options?: Partial<Gen.SubmitTransactionRequest>,\n  ): Promise<TxnBuilderTypes.FeePayerRawTransaction> {\n    const rawTxn = await this.generateTransaction(sender, payload, options);\n\n    const signers: Array<AccountAddress> = secondarySignerAccounts.map((signer) => AccountAddress.fromHex(signer));\n\n    const feePayerTxn = new TxnBuilderTypes.FeePayerRawTransaction(rawTxn, signers, AccountAddress.fromHex(feePayer));\n    return feePayerTxn;\n  }\n\n  /**\n   * Submits fee payer transaction to chain\n   *\n   * @param feePayerTransaction the raw transaction to be submitted, of type FeePayerRawTransaction\n   * @param senderAuthenticator the sender account authenticator (can get from signMultiTransaction() method)\n   * @param feePayerAuthenticator the feepayer account authenticator (can get from signMultiTransaction() method)\n   * @param signersAuthenticators an optional array of the signer account authenticators\n   * @returns The pending transaction\n   */\n  async submitFeePayerTransaction(\n    feePayerTransaction: TxnBuilderTypes.FeePayerRawTransaction,\n    senderAuthenticator: TxnBuilderTypes.AccountAuthenticatorEd25519,\n    feePayerAuthenticator: TxnBuilderTypes.AccountAuthenticatorEd25519,\n    additionalSignersAuthenticators: Array<TxnBuilderTypes.AccountAuthenticatorEd25519> = [],\n  ): Promise<Gen.PendingTransaction> {\n    const txAuthenticatorFeePayer = new TxnBuilderTypes.TransactionAuthenticatorFeePayer(\n      senderAuthenticator,\n      feePayerTransaction.secondary_signer_addresses,\n      additionalSignersAuthenticators,\n      { address: feePayerTransaction.fee_payer_address, authenticator: feePayerAuthenticator },\n    );\n\n    const bcsTxn = bcsToBytes(\n      new TxnBuilderTypes.SignedTransaction(feePayerTransaction.raw_txn, txAuthenticatorFeePayer),\n    );\n    const transactionRes = await this.submitSignedBCSTransaction(bcsTxn);\n\n    return transactionRes;\n  }\n\n  /**\n   * Signs a multi transaction type (multi agent / fee payer) and returns the\n   * signer authenticator to be used to submit the transaction.\n   *\n   * @param signer the account to sign on the transaction\n   * @param rawTxn a MultiAgentRawTransaction or FeePayerRawTransaction\n   * @returns signer authenticator\n   */\n  // eslint-disable-next-line class-methods-use-this\n  async signMultiTransaction(\n    signer: AptosAccount,\n    rawTxn: MultiAgentRawTransaction | FeePayerRawTransaction,\n  ): Promise<TxnBuilderTypes.AccountAuthenticatorEd25519> {\n    const signerSignature = new TxnBuilderTypes.Ed25519Signature(\n      signer.signBuffer(TransactionBuilder.getSigningMessage(rawTxn)).toUint8Array(),\n    );\n\n    const signerAuthenticator = new TxnBuilderTypes.AccountAuthenticatorEd25519(\n      new TxnBuilderTypes.Ed25519PublicKey(signer.signingKey.publicKey),\n      signerSignature,\n    );\n\n    return Promise.resolve(signerAuthenticator);\n  }\n\n  /** Converts a transaction request produced by `generateTransaction` into a properly\n   * signed transaction, which can then be submitted to the blockchain\n   * @param accountFrom AptosAccount of transaction sender\n   * @param rawTransaction A raw transaction generated by `generateTransaction` method\n   * @returns A transaction, signed with sender account\n   */\n  // eslint-disable-next-line class-methods-use-this\n  async signTransaction(\n    accountFrom: AptosAccount,\n    rawTransaction: TxnBuilderTypes.RawTransaction,\n  ): Promise<Uint8Array> {\n    return Promise.resolve(AptosClient.generateBCSTransaction(accountFrom, rawTransaction));\n  }\n\n  /**\n   * Event types are globally identifiable by an account `address` and\n   * monotonically increasing `creation_number`, one per event type emitted\n   * to the given account. This API returns events corresponding to that\n   * that event type.\n   * @param address Hex-encoded 32 byte Aptos account, with or without a `0x` prefix,\n   * for which events are queried. This refers to the account that events were emitted\n   * to, not the account hosting the move module that emits that event type.\n   * @param creationNumber Creation number corresponding to the event type.\n   * @returns Array of events assotiated with the given account and creation number.\n   */\n  @parseApiError\n  async getEventsByCreationNumber(\n    address: MaybeHexString,\n    creationNumber: AnyNumber | string,\n    query?: PaginationArgs,\n  ): Promise<Gen.Event[]> {\n    const { data } = await get<{}, Gen.Event[]>({\n      url: this.nodeUrl,\n      endpoint: `accounts/${HexString.ensure(address).hex()}/events/${creationNumber}`,\n      originMethod: \"getEventsByCreationNumber\",\n      params: { start: query?.start, limit: query?.limit },\n      overrides: { ...this.config },\n    });\n    return data;\n  }\n\n  /**\n   * This API uses the given account `address`, `eventHandle`, and `fieldName`\n   * to build a key that can globally identify an event types. It then uses this\n   * key to return events emitted to the given account matching that event type.\n   * @param address Hex-encoded 32 byte Aptos account, with or without a `0x` prefix,\n   * for which events are queried. This refers to the account that events were emitted\n   * to, not the account hosting the move module that emits that event type.\n   * @param eventHandleStruct String representation of an on-chain Move struct type.\n   * (e.g. `0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>`)\n   * @param fieldName The field name of the EventHandle in the struct\n   * @param query Optional query object\n   * @param query.start The start sequence number in the EVENT STREAM, defaulting to the latest event.\n   * The events are returned in the reverse order of sequence number\n   * @param query.limit The number of events to be returned. The default is 25.\n   * @returns Array of events\n   */\n  @parseApiError\n  async getEventsByEventHandle(\n    address: MaybeHexString,\n    eventHandleStruct: Gen.MoveStructTag,\n    fieldName: string,\n    query?: PaginationArgs,\n  ): Promise<Gen.Event[]> {\n    const { data } = await get<{}, Gen.Event[]>({\n      url: this.nodeUrl,\n      endpoint: `accounts/${HexString.ensure(address).hex()}/events/${eventHandleStruct}/${fieldName}`,\n      originMethod: \"getEventsByEventHandle\",\n      params: { start: query?.start, limit: query?.limit },\n      overrides: { ...this.config },\n    });\n    return data;\n  }\n\n  /**\n   * Submits a signed transaction to the transaction endpoint.\n   * @param signedTxn A transaction, signed by `signTransaction` method\n   * @returns Transaction that is accepted and submitted to mempool\n   */\n  async submitTransaction(signedTxn: Uint8Array): Promise<Gen.PendingTransaction> {\n    return this.submitSignedBCSTransaction(signedTxn);\n  }\n\n  /**\n   * Generates and submits a transaction to the transaction simulation\n   * endpoint. For this we generate a transaction with a fake signature.\n   *\n   * @param accountOrPubkey The sender or sender's public key. When private key is available, `AptosAccount` instance\n   * can be used to send the transaction for simulation. If private key is not available, sender's public key can be\n   * used to send the transaction for simulation.\n   * @param rawTransaction The raw transaction to be simulated, likely created\n   * by calling the `generateTransaction` function.\n   * @param query.estimateGasUnitPrice If set to true, the gas unit price in the\n   * transaction will be ignored and the estimated value will be used.\n   * @param query.estimateMaxGasAmount If set to true, the max gas value in the\n   * transaction will be ignored and the maximum possible gas will be used.\n   * @param query.estimatePrioritizedGasUnitPrice If set to true, the transaction will use a higher price than the\n   * original estimate.\n   * @returns The BCS encoded signed transaction, which you should then provide\n   *\n   */\n  async simulateTransaction(\n    accountOrPubkey: AptosAccount | Ed25519PublicKey | MultiEd25519PublicKey,\n    rawTransaction: TxnBuilderTypes.RawTransaction,\n    query?: {\n      estimateGasUnitPrice?: boolean;\n      estimateMaxGasAmount?: boolean;\n      estimatePrioritizedGasUnitPrice: boolean;\n    },\n  ): Promise<Gen.UserTransaction[]> {\n    let signedTxn: Uint8Array;\n\n    if (accountOrPubkey instanceof AptosAccount) {\n      signedTxn = AptosClient.generateBCSSimulation(accountOrPubkey, rawTransaction);\n    } else if (accountOrPubkey instanceof MultiEd25519PublicKey) {\n      const txnBuilder = new TransactionBuilderMultiEd25519(() => {\n        const { threshold } = accountOrPubkey;\n        const bits: Seq<number> = [];\n        const signatures: TxnBuilderTypes.Ed25519Signature[] = [];\n        for (let i = 0; i < threshold; i += 1) {\n          bits.push(i);\n          signatures.push(new TxnBuilderTypes.Ed25519Signature(new Uint8Array(64)));\n        }\n        const bitmap = TxnBuilderTypes.MultiEd25519Signature.createBitmap(bits);\n        return new TxnBuilderTypes.MultiEd25519Signature(signatures, bitmap);\n      }, accountOrPubkey);\n\n      signedTxn = txnBuilder.sign(rawTransaction);\n    } else {\n      const txnBuilder = new TransactionBuilderEd25519(() => {\n        const invalidSigBytes = new Uint8Array(64);\n        return new TxnBuilderTypes.Ed25519Signature(invalidSigBytes);\n      }, accountOrPubkey.toBytes());\n\n      signedTxn = txnBuilder.sign(rawTransaction);\n    }\n    return this.submitBCSSimulation(signedTxn, query);\n  }\n\n  /**\n   * Submits a signed transaction to the endpoint that takes BCS payload\n   *\n   * @param signedTxn A BCS transaction representation\n   * @returns Transaction that is accepted and submitted to mempool\n   */\n  @parseApiError\n  async submitSignedBCSTransaction(signedTxn: Uint8Array): Promise<Gen.PendingTransaction> {\n    // Need to construct a customized post request for transactions in BCS payload\n    const { data } = await post<Uint8Array, Gen.PendingTransaction>({\n      url: this.nodeUrl,\n      body: signedTxn,\n      endpoint: \"transactions\",\n      originMethod: \"submitSignedBCSTransaction\",\n      contentType: \"application/x.aptos.signed_transaction+bcs\",\n      overrides: { ...this.config },\n    });\n    return data;\n  }\n\n  /**\n   * Submits the BCS serialization of a signed transaction to the simulation endpoint.\n   *\n   * @param bcsBody The output of `generateBCSSimulation`.\n   * @param query?.estimateGasUnitPrice If set to true, the gas unit price in the\n   * transaction will be ignored and the estimated value will be used.\n   * @param query?.estimateMaxGasAmount If set to true, the max gas value in the\n   * transaction will be ignored and the maximum possible gas will be used.\n   * @param query?.estimatePrioritizedGasUnitPrice If set to true, the transaction will use a higher price than the\n   * original estimate.\n   * @returns Simulation result in the form of UserTransaction.\n   */\n  @parseApiError\n  async submitBCSSimulation(\n    bcsBody: Uint8Array,\n    query?: {\n      estimateGasUnitPrice?: boolean;\n      estimateMaxGasAmount?: boolean;\n      estimatePrioritizedGasUnitPrice?: boolean;\n    },\n  ): Promise<Gen.UserTransaction[]> {\n    // Need to construct a customized post request for transactions in BCS payload.\n    const queryParams = {\n      estimate_gas_unit_price: query?.estimateGasUnitPrice ?? false,\n      estimate_max_gas_amount: query?.estimateMaxGasAmount ?? false,\n      estimate_prioritized_gas_unit_price: query?.estimatePrioritizedGasUnitPrice ?? false,\n    };\n    const { data } = await post<Uint8Array, Gen.UserTransaction[]>({\n      url: this.nodeUrl,\n      body: bcsBody,\n      endpoint: \"transactions/simulate\",\n      params: queryParams,\n      originMethod: \"submitBCSSimulation\",\n      contentType: \"application/x.aptos.signed_transaction+bcs\",\n      overrides: { ...this.config },\n    });\n    return data;\n  }\n\n  /**\n   * Queries on-chain transactions. This function will not return pending\n   * transactions. For that, use `getTransactionsByHash`.\n   *\n   * @param query Optional pagination object\n   * @param query.start The start transaction version of the page. Default is the latest ledger version\n   * @param query.limit The max number of transactions should be returned for the page. Default is 25\n   * @returns Array of on-chain transactions\n   */\n  @parseApiError\n  async getTransactions(query?: PaginationArgs): Promise<Gen.Transaction[]> {\n    const { data } = await get<{}, Gen.Transaction[]>({\n      url: this.nodeUrl,\n      endpoint: \"transactions\",\n      originMethod: \"getTransactions\",\n      params: { start: query?.start?.toString(), limit: query?.limit },\n      overrides: { ...this.config },\n    });\n    return data;\n  }\n\n  /**\n   * @param txnHash - Transaction hash should be hex-encoded bytes string with 0x prefix.\n   * @returns Transaction from mempool (pending) or on-chain (committed) transaction\n   */\n  @parseApiError\n  async getTransactionByHash(txnHash: string): Promise<Gen.Transaction> {\n    const { data } = await get<{}, Gen.Transaction>({\n      url: this.nodeUrl,\n      endpoint: `transactions/by_hash/${txnHash}`,\n      originMethod: \"getTransactionByHash\",\n      overrides: { ...this.config },\n    });\n\n    return data;\n  }\n\n  /**\n   * @param txnVersion - Transaction version is an uint64 number.\n   * @returns On-chain transaction. Only on-chain transactions have versions, so this\n   * function cannot be used to query pending transactions.\n   */\n  @parseApiError\n  async getTransactionByVersion(txnVersion: AnyNumber): Promise<Gen.Transaction> {\n    const { data } = await get<{}, Gen.Transaction>({\n      url: this.nodeUrl,\n      endpoint: `transactions/by_version/${txnVersion}`,\n      originMethod: \"getTransactionByVersion\",\n      overrides: { ...this.config },\n    });\n    return data;\n  }\n\n  /**\n   * Defines if specified transaction is currently in pending state\n   * @param txnHash A hash of transaction\n   *\n   * To create a transaction hash:\n   *\n   * 1. Create hash message bytes: \"Aptos::Transaction\" bytes + BCS bytes of Transaction.\n   * 2. Apply hash algorithm SHA3-256 to the hash message bytes.\n   * 3. Hex-encode the hash bytes with 0x prefix.\n   *\n   * @returns `true` if transaction is in pending state and `false` otherwise\n   */\n  async transactionPending(txnHash: string): Promise<boolean> {\n    try {\n      const response = await this.getTransactionByHash(txnHash);\n      return response.type === \"pending_transaction\";\n    } catch (e: any) {\n      if (e?.status === 404) {\n        return true;\n      }\n      throw e;\n    }\n  }\n\n  /**\n   * Wait for a transaction to move past pending state.\n   *\n   * There are 4 possible outcomes:\n   * 1. Transaction is processed and successfully committed to the blockchain.\n   * 2. Transaction is rejected for some reason, and is therefore not committed\n   *    to the blockchain.\n   * 3. Transaction is committed but execution failed, meaning no changes were\n   *    written to the blockchain state.\n   * 4. Transaction is not processed within the specified timeout.\n   *\n   * In case 1, this function resolves with the transaction response returned\n   * by the API.\n   *\n   * In case 2, the function will throw an ApiError, likely with an HTTP status\n   * code indicating some problem with the request (e.g. 400).\n   *\n   * In case 3, if `checkSuccess` is false (the default), this function returns\n   * the transaction response just like in case 1, in which the `success` field\n   * will be false. If `checkSuccess` is true, it will instead throw a\n   * FailedTransactionError.\n   *\n   * In case 4, this function throws a WaitForTransactionError.\n   *\n   * @param txnHash The hash of a transaction previously submitted to the blockchain.\n   * @param extraArgs.timeoutSecs Timeout in seconds. Defaults to 20 seconds.\n   * @param extraArgs.checkSuccess See above. Defaults to false.\n   * @returns See above.\n   *\n   * @example\n   * ```\n   * const rawTransaction = await this.generateRawTransaction(sender.address(), payload, extraArgs);\n   * const bcsTxn = AptosClient.generateBCSTransaction(sender, rawTransaction);\n   * const pendingTransaction = await this.submitSignedBCSTransaction(bcsTxn);\n   * const transasction = await this.aptosClient.waitForTransactionWithResult(pendingTransaction.hash);\n   * ```\n   */\n  async waitForTransactionWithResult(\n    txnHash: string,\n    extraArgs?: { timeoutSecs?: number; checkSuccess?: boolean },\n  ): Promise<Gen.Transaction> {\n    const timeoutSecs = extraArgs?.timeoutSecs ?? DEFAULT_TXN_TIMEOUT_SEC;\n    const checkSuccess = extraArgs?.checkSuccess ?? false;\n\n    let isPending = true;\n    let count = 0;\n    let lastTxn: Gen.Transaction | undefined;\n\n    while (isPending) {\n      if (count >= timeoutSecs) {\n        break;\n      }\n      try {\n        // eslint-disable-next-line no-await-in-loop\n        lastTxn = await this.getTransactionByHash(txnHash);\n\n        isPending = lastTxn.type === \"pending_transaction\";\n        if (!isPending) {\n          break;\n        }\n      } catch (e) {\n        // In short, this means we will retry if it was an ApiError and the code was 404 or 5xx.\n        const isApiError = e instanceof ApiError;\n        const isRequestError = isApiError && e.status !== 404 && e.status >= 400 && e.status < 500;\n        if (!isApiError || isRequestError) {\n          throw e;\n        }\n      }\n      // eslint-disable-next-line no-await-in-loop\n      await sleep(1000);\n      count += 1;\n    }\n\n    // There is a chance that lastTxn is still undefined. Let's throw some error here\n    if (lastTxn === undefined) {\n      throw new Error(`Waiting for transaction ${txnHash} failed`);\n    }\n\n    if (isPending) {\n      throw new WaitForTransactionError(\n        `Waiting for transaction ${txnHash} timed out after ${timeoutSecs} seconds`,\n        lastTxn,\n      );\n    }\n    if (!checkSuccess) {\n      return lastTxn;\n    }\n    if (!(lastTxn as any)?.success) {\n      throw new FailedTransactionError(\n        `Transaction ${txnHash} failed with an error: ${(lastTxn as any).vm_status}`,\n        lastTxn,\n      );\n    }\n    return lastTxn;\n  }\n\n  /**\n   * This function works the same as `waitForTransactionWithResult` except it\n   * doesn't return the transaction in those cases, it returns nothing. For\n   * more information, see the documentation for `waitForTransactionWithResult`.\n   */\n  async waitForTransaction(\n    txnHash: string,\n    extraArgs?: { timeoutSecs?: number; checkSuccess?: boolean },\n  ): Promise<void> {\n    await this.waitForTransactionWithResult(txnHash, extraArgs);\n  }\n\n  /**\n   * Queries the latest ledger information\n   * @returns Latest ledger information\n   * @example Example of returned data\n   * ```\n   * {\n   *   chain_id: 15,\n   *   epoch: 6,\n   *   ledgerVersion: \"2235883\",\n   *   ledger_timestamp:\"1654580922321826\"\n   * }\n   * ```\n   */\n  @parseApiError\n  async getLedgerInfo(): Promise<Gen.IndexResponse> {\n    const { data } = await get<{}, Gen.IndexResponse>({\n      url: this.nodeUrl,\n      originMethod: \"getLedgerInfo\",\n      overrides: { ...this.config },\n    });\n    return data;\n  }\n\n  /**\n   * @returns Current chain id\n   */\n  @Memoize()\n  async getChainId(): Promise<number> {\n    const result = await this.getLedgerInfo();\n    return result.chain_id;\n  }\n\n  /**\n   * Gets a table item for a table identified by the handle and the key for the item.\n   * Key and value types need to be passed in to help with key serialization and value deserialization.\n   * @param handle A pointer to where that table is stored\n   * @param data Object, that describes table item\n   * @param data.key_type Move type of table key (e.g. `vector<u8>`)\n   * @param data.value_type Move type of table value (e.g. `u64`)\n   * @param data.key Value of table key\n   * @returns Table item value rendered in JSON\n   */\n  @parseApiError\n  async getTableItem(handle: string, data: Gen.TableItemRequest, query?: { ledgerVersion?: AnyNumber }): Promise<any> {\n    const response = await post<Gen.TableItemRequest, any>({\n      url: this.nodeUrl,\n      body: data,\n      endpoint: `tables/${handle}/item`,\n      originMethod: \"getTableItem\",\n      params: { ledger_version: query?.ledgerVersion?.toString() },\n      overrides: { ...this.config },\n    });\n    return response.data;\n  }\n\n  /**\n   * Generates a raw transaction out of a transaction payload\n   * @param accountFrom\n   * @param payload\n   * @param extraArgs\n   * @returns A raw transaction object\n   */\n  async generateRawTransaction(\n    accountFrom: HexString,\n    payload: TxnBuilderTypes.TransactionPayload,\n    extraArgs?: OptionalTransactionArgs,\n  ): Promise<TxnBuilderTypes.RawTransaction> {\n    const [{ sequence_number: sequenceNumber }, chainId, { gas_estimate: gasEstimate }] = await Promise.all([\n      extraArgs?.providedSequenceNumber\n        ? Promise.resolve({ sequence_number: extraArgs.providedSequenceNumber })\n        : this.getAccount(accountFrom),\n      this.getChainId(),\n      extraArgs?.gasUnitPrice ? Promise.resolve({ gas_estimate: extraArgs.gasUnitPrice }) : this.estimateGasPrice(),\n    ]);\n\n    const { maxGasAmount, gasUnitPrice, expireTimestamp } = {\n      maxGasAmount: BigInt(DEFAULT_MAX_GAS_AMOUNT),\n      gasUnitPrice: BigInt(gasEstimate),\n      expireTimestamp: BigInt(Math.floor(Date.now() / 1000) + DEFAULT_TXN_EXP_SEC_FROM_NOW),\n      ...extraArgs,\n    };\n\n    return new TxnBuilderTypes.RawTransaction(\n      TxnBuilderTypes.AccountAddress.fromHex(accountFrom),\n      BigInt(sequenceNumber),\n      payload,\n      maxGasAmount,\n      gasUnitPrice,\n      expireTimestamp,\n      new TxnBuilderTypes.ChainId(chainId),\n    );\n  }\n\n  /**\n   * Helper for generating, signing, and submitting a transaction.\n   *\n   * @param sender AptosAccount of transaction sender.\n   * @param payload Transaction payload.\n   * @param extraArgs Extra args for building the transaction payload.\n   * @returns The transaction response from the API.\n   */\n  async generateSignSubmitTransaction(\n    sender: AptosAccount,\n    payload: TxnBuilderTypes.TransactionPayload,\n    extraArgs?: OptionalTransactionArgs,\n  ): Promise<string> {\n    // :!:>generateSignSubmitTransactionInner\n    const rawTransaction = await this.generateRawTransaction(sender.address(), payload, extraArgs);\n    const bcsTxn = AptosClient.generateBCSTransaction(sender, rawTransaction);\n    const pendingTransaction = await this.submitSignedBCSTransaction(bcsTxn);\n    return pendingTransaction.hash;\n    // <:!:generateSignSubmitTransactionInner\n  }\n\n  /**\n   * Helper for signing and submitting a transaction.\n   *\n   * @param sender AptosAccount of transaction sender.\n   * @param transaction A generated Raw transaction payload.\n   * @returns The transaction response from the API.\n   */\n  async signAndSubmitTransaction(sender: AptosAccount, transaction: RawTransaction): Promise<string> {\n    const bcsTxn = AptosClient.generateBCSTransaction(sender, transaction);\n    const pendingTransaction = await this.submitSignedBCSTransaction(bcsTxn);\n    return pendingTransaction.hash;\n  }\n\n  /**\n   * Publishes a move package. `packageMetadata` and `modules` can be generated with command\n   * `aptos move compile --save-metadata [ --included-artifacts=<...> ]`.\n   * @param sender\n   * @param packageMetadata package metadata bytes\n   * @param modules bytecodes of modules\n   * @param extraArgs\n   * @returns Transaction hash\n   */\n  async publishPackage(\n    sender: AptosAccount,\n    packageMetadata: Bytes,\n    modules: Seq<TxnBuilderTypes.Module>,\n    extraArgs?: OptionalTransactionArgs,\n  ): Promise<string> {\n    const codeSerializer = new Serializer();\n    serializeVector(modules, codeSerializer);\n\n    const payload = new TxnBuilderTypes.TransactionPayloadEntryFunction(\n      TxnBuilderTypes.EntryFunction.natural(\n        \"0x1::code\",\n        \"publish_package_txn\",\n        [],\n        [bcsSerializeBytes(packageMetadata), codeSerializer.getBytes()],\n      ),\n    );\n\n    return this.generateSignSubmitTransaction(sender, payload, extraArgs);\n  }\n\n  /**\n   * Publishes a move packages by creating a resource account.\n   * The package cannot be upgraded since it is deployed by resource account\n   * `packageMetadata` and `modules` can be generated with command\n   * `aptos move compile --save-metadata [ --included-artifacts=<...> ]`.\n   * @param sender\n   * @param seed seeds for creation of resource address\n   * @param packageMetadata package metadata bytes\n   * @param modules bytecodes of modules\n   * @param extraArgs\n   * @returns Transaction hash\n   */\n  async createResourceAccountAndPublishPackage(\n    sender: AptosAccount,\n    seed: Bytes,\n    packageMetadata: Bytes,\n    modules: Seq<TxnBuilderTypes.Module>,\n    extraArgs?: OptionalTransactionArgs,\n  ): Promise<string> {\n    const codeSerializer = new Serializer();\n    serializeVector(modules, codeSerializer);\n\n    const payload = new TxnBuilderTypes.TransactionPayloadEntryFunction(\n      TxnBuilderTypes.EntryFunction.natural(\n        \"0x1::resource_account\",\n        \"create_resource_account_and_publish_package\",\n        [],\n        [bcsSerializeBytes(seed), bcsSerializeBytes(packageMetadata), codeSerializer.getBytes()],\n      ),\n    );\n\n    return this.generateSignSubmitTransaction(sender, payload, extraArgs);\n  }\n\n  /**\n   * Helper for generating, submitting, and waiting for a transaction, and then\n   * checking whether it was committed successfully. Under the hood this is just\n   * `generateSignSubmitTransaction` and then `waitForTransactionWithResult`, see\n   * those for information about the return / error semantics of this function.\n   */\n  async generateSignSubmitWaitForTransaction(\n    sender: AptosAccount,\n    payload: TxnBuilderTypes.TransactionPayload,\n    extraArgs?: OptionalTransactionArgs & {\n      checkSuccess?: boolean;\n      timeoutSecs?: number;\n    },\n  ): Promise<Gen.Transaction> {\n    const txnHash = await this.generateSignSubmitTransaction(sender, payload, extraArgs);\n    return this.waitForTransactionWithResult(txnHash, extraArgs);\n  }\n\n  @parseApiError\n  @Memoize({\n    ttlMs: 5 * 60 * 1000, // cache result for 5min\n    tags: [\"gas_estimates\"],\n  })\n  async estimateGasPrice(): Promise<Gen.GasEstimation> {\n    const { data } = await get<{}, Gen.GasEstimation>({\n      url: this.nodeUrl,\n      endpoint: \"estimate_gas_price\",\n      originMethod: \"estimateGasPrice\",\n      overrides: { ...this.config },\n    });\n    return data;\n  }\n\n  @parseApiError\n  async estimateMaxGasAmount(forAccount: MaybeHexString): Promise<Uint64> {\n    // Only Aptos utility coin is accepted as gas\n    const typeTag = `0x1::coin::CoinStore<${APTOS_COIN}>`;\n\n    const [{ gas_estimate: gasUnitPrice }, resources] = await Promise.all([\n      this.estimateGasPrice(),\n      this.getAccountResources(forAccount),\n    ]);\n\n    const accountResource = resources.find((r) => r.type === typeTag);\n    const balance = BigInt((accountResource!.data as any).coin.value);\n    return balance / BigInt(gasUnitPrice);\n  }\n\n  /**\n   * Rotate an account's auth key. After rotation, only the new private key can be used to sign txns for\n   * the account.\n   * WARNING: You must create a new instance of AptosAccount after using this function.\n   * @param forAccount Account of which the auth key will be rotated\n   * @param toPrivateKeyBytes New private key\n   * @param extraArgs Extra args for building the transaction payload.\n   * @returns PendingTransaction\n   */\n  async rotateAuthKeyEd25519(\n    forAccount: AptosAccount,\n    toPrivateKeyBytes: Uint8Array,\n    extraArgs?: OptionalTransactionArgs,\n  ): Promise<Gen.PendingTransaction> {\n    const { sequence_number: sequenceNumber, authentication_key: authKey } = await this.getAccount(\n      forAccount.address(),\n    );\n\n    const helperAccount = new AptosAccount(toPrivateKeyBytes);\n\n    const challenge = new TxnBuilderTypes.RotationProofChallenge(\n      TxnBuilderTypes.AccountAddress.CORE_CODE_ADDRESS,\n      \"account\",\n      \"RotationProofChallenge\",\n      BigInt(sequenceNumber),\n      TxnBuilderTypes.AccountAddress.fromHex(forAccount.address()),\n      new TxnBuilderTypes.AccountAddress(new HexString(authKey).toUint8Array()),\n      helperAccount.pubKey().toUint8Array(),\n    );\n\n    const challengeHex = HexString.fromUint8Array(bcsToBytes(challenge));\n\n    const proofSignedByCurrentPrivateKey = forAccount.signHexString(challengeHex);\n\n    const proofSignedByNewPrivateKey = helperAccount.signHexString(challengeHex);\n\n    const payload = new TxnBuilderTypes.TransactionPayloadEntryFunction(\n      TxnBuilderTypes.EntryFunction.natural(\n        \"0x1::account\",\n        \"rotate_authentication_key\",\n        [],\n        [\n          bcsSerializeU8(0), // ed25519 scheme\n          bcsSerializeBytes(forAccount.pubKey().toUint8Array()),\n          bcsSerializeU8(0), // ed25519 scheme\n          bcsSerializeBytes(helperAccount.pubKey().toUint8Array()),\n          bcsSerializeBytes(proofSignedByCurrentPrivateKey.toUint8Array()),\n          bcsSerializeBytes(proofSignedByNewPrivateKey.toUint8Array()),\n        ],\n      ),\n    );\n\n    const rawTransaction = await this.generateRawTransaction(forAccount.address(), payload, extraArgs);\n    const bcsTxn = AptosClient.generateBCSTransaction(forAccount, rawTransaction);\n    return this.submitSignedBCSTransaction(bcsTxn);\n  }\n\n  /**\n   * Lookup the original address by the current derived address\n   * @param addressOrAuthKey\n   * @returns original address\n   */\n  async lookupOriginalAddress(addressOrAuthKey: MaybeHexString): Promise<HexString> {\n    const resource = await this.getAccountResource(\"0x1\", \"0x1::account::OriginatingAddress\");\n\n    const {\n      address_map: { handle },\n    } = resource.data as any;\n\n    const origAddress = await this.getTableItem(handle, {\n      key_type: \"address\",\n      value_type: \"address\",\n      key: HexString.ensure(addressOrAuthKey).hex(),\n    });\n\n    return new HexString(origAddress);\n  }\n\n  /**\n   * Get block by height\n   *\n   * @param blockHeight Block height to lookup.  Starts at 0\n   * @param withTransactions If set to true, include all transactions in the block\n   *\n   * @returns Block\n   */\n  @parseApiError\n  async getBlockByHeight(blockHeight: number, withTransactions?: boolean): Promise<Gen.Block> {\n    const { data } = await get<{}, Gen.Block>({\n      url: this.nodeUrl,\n      endpoint: `blocks/by_height/${blockHeight}`,\n      originMethod: \"getBlockByHeight\",\n      params: { with_transactions: withTransactions },\n      overrides: { ...this.config },\n    });\n    return data;\n  }\n\n  /**\n   * Get block by block transaction version\n   *\n   * @param version Ledger version to lookup block information for\n   * @param withTransactions If set to true, include all transactions in the block\n   *\n   * @returns Block\n   */\n  @parseApiError\n  async getBlockByVersion(version: number, withTransactions?: boolean): Promise<Gen.Block> {\n    const { data } = await get<{}, Gen.Block>({\n      url: this.nodeUrl,\n      endpoint: `blocks/by_version/${version}`,\n      originMethod: \"getBlockByVersion\",\n      params: { with_transactions: withTransactions },\n      overrides: { ...this.config },\n    });\n    return data;\n  }\n\n  /**\n   * Call for a move view function\n   *\n   * @param payload Transaction payload\n   * @param version (optional) Ledger version to lookup block information for\n   *\n   * @returns MoveValue[]\n   */\n  @parseApiError\n  async view(payload: Gen.ViewRequest, ledger_version?: string): Promise<Gen.MoveValue[]> {\n    const { data } = await post<Gen.ViewRequest, Gen.MoveValue[]>({\n      url: this.nodeUrl,\n      body: payload,\n      endpoint: \"view\",\n      originMethod: \"getTableItem\",\n      params: { ledger_version },\n      overrides: { ...this.config },\n    });\n    return data;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  clearCache(tags: string[]) {\n    clear(tags);\n  }\n}\n/**\n * This error is used by `waitForTransactionWithResult` when waiting for a\n * transaction times out.\n */\nexport class WaitForTransactionError extends Error {\n  public readonly lastSubmittedTransaction: Gen.Transaction | undefined;\n\n  constructor(message: string, lastSubmittedTransaction: Gen.Transaction | undefined) {\n    super(message);\n    this.lastSubmittedTransaction = lastSubmittedTransaction;\n  }\n}\n\n/**\n * This error is used by `waitForTransactionWithResult` if `checkSuccess` is true.\n * See that function for more information.\n */\nexport class FailedTransactionError extends Error {\n  public readonly transaction: Gen.Transaction;\n\n  constructor(message: string, transaction: Gen.Transaction) {\n    super(message);\n    this.transaction = transaction;\n  }\n}\n\nexport class ApiError extends Error {\n  constructor(\n    public readonly status: number,\n    public readonly message: string,\n    public readonly errorCode?: string,\n    public readonly vmErrorCode?: string,\n  ) {\n    super(message);\n  }\n}\n\nfunction parseApiError(target: unknown, propertyKey: string, descriptor: PropertyDescriptor) {\n  const childFunction = descriptor.value;\n  // eslint-disable-next-line no-param-reassign\n  descriptor.value = async function wrapper(...args: any[]) {\n    try {\n      // We need to explicitly await here so that the function is called and\n      // potentially throws an error. If we just return without awaiting, the\n      // promise is returned directly and the catch block cannot trigger.\n      const res = await childFunction.apply(this, [...args]);\n      return res;\n    } catch (e) {\n      if (e instanceof AptosApiError) {\n        throw new ApiError(\n          e.status,\n          JSON.stringify({ message: e.message, ...e.data }),\n          e.data?.error_code,\n          e.data?.vm_error_code,\n        );\n      }\n      throw e;\n    }\n  };\n  return descriptor;\n}\n","import { AnyNumber } from \"../bcs/types\";\nimport { HexString, MaybeHexString } from \"../utils\";\nimport {\n  GetAccountTokensCountQuery,\n  GetAccountCoinsDataQuery,\n  GetAccountCurrentTokensQuery,\n  GetAccountTransactionsCountQuery,\n  GetAccountTransactionsDataQuery,\n  GetNumberOfDelegatorsQuery,\n  GetDelegatedStakingActivitiesQuery,\n  GetIndexerLedgerInfoQuery,\n  GetTokenActivitiesCountQuery,\n  GetTokenActivitiesQuery,\n  GetTokenDataQuery,\n  GetTokenOwnersDataQuery,\n  GetTopUserTransactionsQuery,\n  GetUserTransactionsQuery,\n  GetOwnedTokensQuery,\n  GetTokenOwnedFromCollectionQuery,\n  GetCollectionDataQuery,\n  GetCollectionsWithOwnedTokensQuery,\n  GetTokenCurrentOwnerDataQuery,\n  GetOwnedTokensByTokenDataQuery,\n  GetAccountCoinsDataCountQuery,\n  GetCurrentObjectsQuery,\n} from \"../indexer/generated/operations\";\nimport {\n  GetAccountTokensCount,\n  GetAccountCoinsData,\n  GetAccountCurrentTokens,\n  GetAccountTransactionsCount,\n  GetAccountTransactionsData,\n  GetNumberOfDelegators,\n  GetDelegatedStakingActivities,\n  GetIndexerLedgerInfo,\n  GetTokenActivities,\n  GetTokenActivitiesCount,\n  GetTokenData,\n  GetTokenOwnersData,\n  GetTopUserTransactions,\n  GetUserTransactions,\n  GetOwnedTokens,\n  GetTokenOwnedFromCollection,\n  GetCollectionData,\n  GetCollectionsWithOwnedTokens,\n  GetTokenCurrentOwnerData,\n  GetOwnedTokensByTokenData,\n  GetAccountCoinsDataCount,\n  GetCurrentObjects,\n} from \"../indexer/generated/queries\";\nimport { ClientConfig, post } from \"../client\";\nimport { ApiError } from \"./aptos_client\";\nimport {\n  Account_Transactions_Order_By,\n  Current_Collections_V2_Order_By,\n  Current_Collection_Ownership_V2_View_Order_By,\n  Current_Fungible_Asset_Balances_Order_By,\n  Current_Token_Datas_V2_Order_By,\n  Current_Token_Ownerships_V2_Order_By,\n  InputMaybe,\n  Token_Activities_V2_Order_By,\n  User_Transactions_Order_By,\n  Current_Objects_Order_By,\n} from \"../indexer/generated/types\";\n\n/**\n * Controls the number of results that are returned and the starting position of those results.\n * limit specifies the maximum number of items or records to return in a query result.\n * offset parameter specifies the starting position of the query result within the set of data.\n * For example, if you want to retrieve records 11-20,\n * you would set the offset parameter to 10 (i.e., the index of the first record to retrieve is 10)\n * and the limit parameter to 10 (i.e., the number of records to retrieve is 10))\n */\nexport interface IndexerPaginationArgs {\n  offset?: AnyNumber;\n  limit?: number;\n}\n\n/**\n * Holds a generic type that being passed by each function and holds an\n * array of properties we can sort the query by\n */\nexport type IndexerSortBy<T> = IndexerSortingOptions<T>;\n\nexport type IndexerSortingOptions<T> = {\n  [K in keyof T]?: T[K] extends InputMaybe<infer U>\n    ? IndexerSortingOptions<U> | U | IndexerOrderBy\n    : T[K] | IndexerOrderBy;\n};\n\nexport type IndexerOrderBy = \"asc\" | \"desc\";\n\n/**\n * Refers to the token standard we want to query for\n */\nexport type TokenStandard = \"v1\" | \"v2\";\n\n/**\n * The graphql query type to pass into the `queryIndexer` function\n */\nexport type GraphqlQuery = {\n  query: string;\n  variables?: {};\n};\n\n/**\n * Provides methods for retrieving data from Aptos Indexer.\n * For more detailed Queries specification see\n * {@link https://cloud.hasura.io/public/graphiql?endpoint=https://indexer.mainnet.aptoslabs.com/v1/graphql}\n *\n * Some methods support optional extra arguments, such as - TokenStandard, IndexerSortBy, IndexerPaginationArgs\n *\n * @param TokenStandard is of type `v1` or `v2` and it refers to the token standard we want to query for.\n * @example An example of how to pass a specific token standard\n * ```\n * {\n *    tokenStandard:\"v2\"\n * }\n * ```\n *\n * @param IndexerSortBy has a generic type that being passed by each function and holds an\n * array of properties we can sort the query by\n * @example An example of how to sort by a specific field\n * ```\n * {\n *  orderBy: [{ token_standard: \"desc\" }]\n * }\n * ```\n *\n * @param IndexerPaginationArgs Controls the number of results that are returned and the starting position\n * of those results.\n * limit specifies the maximum number of items or records to return in a query result.\n * offset parameter specifies the starting position of the query result within the set of data.\n * For example, if you want to retrieve records 11-20,\n * you would set the offset parameter to 10 (i.e., the index of the first record to retrieve is 10)\n * and the limit parameter to 10 (i.e., the number of records to retrieve is 10))\n *\n * @example An example of how to set the `limit` and `offset`\n * ```\n * {\n *  { offset: 2, limit: 4 }\n * }\n * ```\n */\nexport class IndexerClient {\n  readonly endpoint: string;\n\n  readonly config: ClientConfig | undefined;\n\n  /**\n   * @param endpoint URL of the Aptos Indexer API endpoint.\n   */\n  constructor(endpoint: string, config?: ClientConfig) {\n    this.endpoint = endpoint;\n    this.config = config;\n  }\n\n  /**\n   * Indexer only accepts address in the long format, i.e a 66 chars long -> 0x<64 chars>\n   * This method makes sure address is 66 chars long.\n   * @param address\n   */\n  static validateAddress(address: string): void {\n    if (address.length < 66) {\n      throw new Error(`${address} is less than 66 chars long.`);\n    }\n  }\n\n  /**\n   * Makes axios client call to fetch data from Aptos Indexer.\n   *\n   * @param graphqlQuery A GraphQL query to pass in the `data` axios call.\n   */\n  async queryIndexer<T>(graphqlQuery: GraphqlQuery): Promise<T> {\n    const response = await post<GraphqlQuery, any>({\n      url: this.endpoint,\n      body: graphqlQuery,\n      overrides: { WITH_CREDENTIALS: false, ...this.config },\n    });\n    if (response.data.errors) {\n      throw new ApiError(\n        response.data.errors[0].extensions.code,\n        JSON.stringify({\n          message: response.data.errors[0].message,\n          error_code: response.data.errors[0].extensions.code,\n        }),\n      );\n    }\n    return response.data.data;\n  }\n\n  /**\n   * Queries Indexer Ledger Info\n   *\n   * @returns GetLedgerInfoQuery response type\n   */\n  async getIndexerLedgerInfo(): Promise<GetIndexerLedgerInfoQuery> {\n    const graphqlQuery = {\n      query: GetIndexerLedgerInfo,\n    };\n    return this.queryIndexer(graphqlQuery);\n  }\n\n  // TOKENS //\n\n  /**\n   * @deprecated please use `getOwnedTokens` query\n   *\n   * Queries an Aptos account's NFTs by owner address\n   *\n   * @param ownerAddress Hex-encoded 32 byte Aptos account address\n   * @returns GetAccountCurrentTokensQuery response type\n   */\n  async getAccountNFTs(\n    ownerAddress: MaybeHexString,\n    options?: IndexerPaginationArgs,\n  ): Promise<GetAccountCurrentTokensQuery> {\n    const address = HexString.ensure(ownerAddress).hex();\n    IndexerClient.validateAddress(address);\n    const graphqlQuery = {\n      query: GetAccountCurrentTokens,\n      variables: { address, offset: options?.offset, limit: options?.limit },\n    };\n\n    return this.queryIndexer<GetAccountCurrentTokensQuery>(graphqlQuery);\n  }\n\n  /**\n   * Queries a token activities by token address (v2) or token data id (v1)\n   *\n   * @param idHash token address (v2) or token data id (v1)\n   * @returns GetTokenActivitiesQuery response type\n   */\n  async getTokenActivities(\n    token: MaybeHexString,\n    extraArgs?: {\n      tokenStandard?: TokenStandard;\n      options?: IndexerPaginationArgs;\n      orderBy?: IndexerSortBy<Token_Activities_V2_Order_By>[];\n    },\n  ): Promise<GetTokenActivitiesQuery> {\n    const tokenAddress = HexString.ensure(token).hex();\n    IndexerClient.validateAddress(tokenAddress);\n\n    const whereCondition: any = {\n      token_data_id: { _eq: tokenAddress },\n    };\n\n    if (extraArgs?.tokenStandard) {\n      whereCondition.token_standard = { _eq: extraArgs?.tokenStandard };\n    }\n    const graphqlQuery = {\n      query: GetTokenActivities,\n      variables: {\n        where_condition: whereCondition,\n        offset: extraArgs?.options?.offset,\n        limit: extraArgs?.options?.limit,\n        order_by: extraArgs?.orderBy,\n      },\n    };\n\n    return this.queryIndexer(graphqlQuery);\n  }\n\n  /**\n   * Gets the count of token's activities by token address (v2) or token data id (v1)\n   *\n   * @param token token address (v2) or token data id (v1)\n   * @returns GetTokenActivitiesCountQuery response type\n   */\n  async getTokenActivitiesCount(token: string): Promise<GetTokenActivitiesCountQuery> {\n    const graphqlQuery = {\n      query: GetTokenActivitiesCount,\n      variables: { token_id: token },\n    };\n    return this.queryIndexer(graphqlQuery);\n  }\n\n  /**\n   * Gets the count of tokens owned by an account\n   *\n   * @param ownerAddress Owner address\n   * @returns AccountTokensCountQuery response type\n   */\n  async getAccountTokensCount(\n    ownerAddress: MaybeHexString,\n    extraArgs?: {\n      tokenStandard?: TokenStandard;\n      options?: IndexerPaginationArgs;\n    },\n  ): Promise<GetAccountTokensCountQuery> {\n    const whereCondition: any = {\n      owner_address: { _eq: ownerAddress },\n      amount: { _gt: \"0\" },\n    };\n\n    if (extraArgs?.tokenStandard) {\n      whereCondition.token_standard = { _eq: extraArgs?.tokenStandard };\n    }\n\n    const address = HexString.ensure(ownerAddress).hex();\n    IndexerClient.validateAddress(address);\n    const graphqlQuery = {\n      query: GetAccountTokensCount,\n      variables: {\n        where_condition: whereCondition,\n        offset: extraArgs?.options?.offset,\n        limit: extraArgs?.options?.limit,\n      },\n    };\n    return this.queryIndexer(graphqlQuery);\n  }\n\n  /**\n   * Queries token data by token address (v2) or token data id (v1)\n   *\n   * @param token token address (v2) or token data id (v1)\n   * @returns GetTokenDataQuery response type\n   */\n  // :!:>getTokenData\n  async getTokenData(\n    token: string,\n    extraArgs?: {\n      tokenStandard?: TokenStandard;\n      options?: IndexerPaginationArgs;\n      orderBy?: IndexerSortBy<Current_Token_Datas_V2_Order_By>[];\n    },\n  ): Promise<GetTokenDataQuery> {\n    const tokenAddress = HexString.ensure(token).hex();\n    IndexerClient.validateAddress(tokenAddress);\n\n    const whereCondition: any = {\n      token_data_id: { _eq: tokenAddress },\n    };\n\n    if (extraArgs?.tokenStandard) {\n      whereCondition.token_standard = { _eq: extraArgs?.tokenStandard };\n    }\n    const graphqlQuery = {\n      query: GetTokenData,\n      variables: {\n        where_condition: whereCondition,\n        offset: extraArgs?.options?.offset,\n        limit: extraArgs?.options?.limit,\n        order_by: extraArgs?.orderBy,\n      },\n    };\n    return this.queryIndexer(graphqlQuery);\n  } // <:!:getTokenData\n\n  /**\n   * Queries token owners data by token address (v2) or token data id (v1).\n   * This query returns historical owners data.\n   *\n   * To fetch token v2 standard, pass in the optional `tokenStandard` parameter and\n   * dont pass `propertyVersion` parameter (as propertyVersion only compatible with v1 standard)\n   *\n   * @param token token address (v2) or token data id (v1)\n   * @param propertyVersion Property version (optional) - only compatible with token v1 standard\n   * @returns GetTokenOwnersDataQuery response type\n   */\n  async getTokenOwnersData(\n    token: string,\n    propertyVersion?: number,\n    extraArgs?: {\n      tokenStandard?: TokenStandard;\n      options?: IndexerPaginationArgs;\n      orderBy?: IndexerSortBy<Current_Token_Ownerships_V2_Order_By>[];\n    },\n  ): Promise<GetTokenOwnersDataQuery> {\n    const tokenAddress = HexString.ensure(token).hex();\n    IndexerClient.validateAddress(tokenAddress);\n\n    const whereCondition: any = {\n      token_data_id: { _eq: tokenAddress },\n      amount: { _gt: \"0\" },\n    };\n\n    if (propertyVersion) {\n      whereCondition.property_version_v1 = { _eq: propertyVersion };\n    }\n\n    if (extraArgs?.tokenStandard) {\n      whereCondition.token_standard = { _eq: extraArgs?.tokenStandard };\n    }\n\n    const graphqlQuery = {\n      query: GetTokenOwnersData,\n      variables: {\n        where_condition: whereCondition,\n        offset: extraArgs?.options?.offset,\n        limit: extraArgs?.options?.limit,\n        order_by: extraArgs?.orderBy,\n      },\n    };\n    return this.queryIndexer(graphqlQuery);\n  }\n\n  /**\n   * Queries current token owner data by token address (v2) or token data id (v1).\n   * This query returns the current token owner data.\n   *\n   * To fetch token v2 standard, pass in the optional `tokenStandard` parameter and\n   * dont pass `propertyVersion` parameter (as propertyVersion only compatible with v1 standard)\n   *\n   * @param token token address (v2) or token data id (v1)\n   * @param propertyVersion Property version (optional) - only compatible with token v1 standard\n   * @returns GetTokenCurrentOwnerDataQuery response type\n   */\n  async getTokenCurrentOwnerData(\n    token: string,\n    propertyVersion?: number,\n    extraArgs?: {\n      tokenStandard?: TokenStandard;\n      options?: IndexerPaginationArgs;\n      orderBy?: IndexerSortBy<Current_Token_Ownerships_V2_Order_By>[];\n    },\n  ): Promise<GetTokenCurrentOwnerDataQuery> {\n    const tokenAddress = HexString.ensure(token).hex();\n    IndexerClient.validateAddress(tokenAddress);\n\n    const whereCondition: any = {\n      token_data_id: { _eq: tokenAddress },\n      amount: { _gt: \"0\" },\n    };\n\n    if (propertyVersion) {\n      whereCondition.property_version_v1 = { _eq: propertyVersion };\n    }\n\n    if (extraArgs?.tokenStandard) {\n      whereCondition.token_standard = { _eq: extraArgs?.tokenStandard };\n    }\n\n    const graphqlQuery = {\n      query: GetTokenCurrentOwnerData,\n      variables: {\n        where_condition: whereCondition,\n        offset: extraArgs?.options?.offset,\n        limit: extraArgs?.options?.limit,\n        order_by: extraArgs?.orderBy,\n      },\n    };\n    return this.queryIndexer(graphqlQuery);\n  }\n\n  /**\n   * Queries account's current owned tokens.\n   * This query returns all tokens (v1 and v2 standards) an account owns, including NFTs, fungible, soulbound, etc.\n   * If you want to get only the token from a specific standrd, you can pass an optional tokenStandard param\n   *\n   * @param ownerAddress The token owner address we want to get the tokens for\n   * @returns GetOwnedTokensQuery response type\n   */\n  async getOwnedTokens(\n    ownerAddress: MaybeHexString,\n    extraArgs?: {\n      tokenStandard?: TokenStandard;\n      options?: IndexerPaginationArgs;\n      orderBy?: IndexerSortBy<Current_Token_Ownerships_V2_Order_By>[];\n    },\n  ): Promise<GetOwnedTokensQuery> {\n    const address = HexString.ensure(ownerAddress).hex();\n    IndexerClient.validateAddress(address);\n\n    const whereCondition: any = {\n      owner_address: { _eq: address },\n      amount: { _gt: 0 },\n    };\n\n    if (extraArgs?.tokenStandard) {\n      whereCondition.token_standard = { _eq: extraArgs?.tokenStandard };\n    }\n\n    const graphqlQuery = {\n      query: GetOwnedTokens,\n      variables: {\n        where_condition: whereCondition,\n        offset: extraArgs?.options?.offset,\n        limit: extraArgs?.options?.limit,\n        order_by: extraArgs?.orderBy,\n      },\n    };\n    return this.queryIndexer(graphqlQuery);\n  }\n\n  /**\n   * Queries account's current owned tokens by token address (v2) or token data id (v1).\n   *\n   * @param token token address (v2) or token data id (v1)\n   * @returns GetOwnedTokensByTokenDataQuery response type\n   */\n  async getOwnedTokensByTokenData(\n    token: MaybeHexString,\n    extraArgs?: {\n      tokenStandard?: TokenStandard;\n      options?: IndexerPaginationArgs;\n      orderBy?: IndexerSortBy<Current_Token_Ownerships_V2_Order_By>[];\n    },\n  ): Promise<GetOwnedTokensByTokenDataQuery> {\n    const address = HexString.ensure(token).hex();\n    IndexerClient.validateAddress(address);\n\n    const whereCondition: any = {\n      token_data_id: { _eq: address },\n      amount: { _gt: 0 },\n    };\n\n    if (extraArgs?.tokenStandard) {\n      whereCondition.token_standard = { _eq: extraArgs?.tokenStandard };\n    }\n\n    const graphqlQuery = {\n      query: GetOwnedTokensByTokenData,\n      variables: {\n        where_condition: whereCondition,\n        offset: extraArgs?.options?.offset,\n        limit: extraArgs?.options?.limit,\n        order_by: extraArgs?.orderBy,\n      },\n    };\n    return this.queryIndexer(graphqlQuery);\n  }\n\n  /**\n   * Queries all tokens of a specific collection that an account owns by the collection address\n   *\n   * @param ownerAddress owner address that owns the tokens\n   * @param collectionAddress the collection address\n   * @returns GetTokenOwnedFromCollectionQuery response type\n   */\n  async getTokenOwnedFromCollectionAddress(\n    ownerAddress: MaybeHexString,\n    collectionAddress: string,\n    extraArgs?: {\n      tokenStandard?: TokenStandard;\n      options?: IndexerPaginationArgs;\n      orderBy?: IndexerSortBy<Current_Token_Ownerships_V2_Order_By>[];\n    },\n  ): Promise<GetTokenOwnedFromCollectionQuery> {\n    const ownerHexAddress = HexString.ensure(ownerAddress).hex();\n    IndexerClient.validateAddress(ownerHexAddress);\n\n    const collectionHexAddress = HexString.ensure(collectionAddress).hex();\n    IndexerClient.validateAddress(collectionHexAddress);\n\n    const whereCondition: any = {\n      owner_address: { _eq: ownerHexAddress },\n      current_token_data: { collection_id: { _eq: collectionHexAddress } },\n      amount: { _gt: 0 },\n    };\n\n    if (extraArgs?.tokenStandard) {\n      whereCondition.token_standard = { _eq: extraArgs?.tokenStandard };\n    }\n\n    const graphqlQuery = {\n      query: GetTokenOwnedFromCollection,\n      variables: {\n        where_condition: whereCondition,\n        offset: extraArgs?.options?.offset,\n        limit: extraArgs?.options?.limit,\n        order_by: extraArgs?.orderBy,\n      },\n    };\n    return this.queryIndexer(graphqlQuery);\n  }\n\n  /**\n   * Queries all tokens of a specific collection that an account owns by the collection name and collection\n   * creator address\n   *\n   * @param ownerAddress owner address that owns the tokens\n   * @param collectionName the collection name\n   * @param creatorAddress the collection creator address\n   * @returns GetTokenOwnedFromCollectionQuery response type\n   */\n  async getTokenOwnedFromCollectionNameAndCreatorAddress(\n    ownerAddress: MaybeHexString,\n    collectionName: string,\n    creatorAddress: MaybeHexString,\n    extraArgs?: {\n      tokenStandard?: TokenStandard;\n      options?: IndexerPaginationArgs;\n    },\n  ): Promise<GetTokenOwnedFromCollectionQuery> {\n    const collectionAddress = await this.getCollectionAddress(creatorAddress, collectionName, extraArgs);\n    const tokens = await this.getTokenOwnedFromCollectionAddress(ownerAddress, collectionAddress, extraArgs);\n    return tokens;\n  }\n\n  /**\n   * Queries data of a specific collection by the collection creator address and the collection name.\n   *\n   * if, for some reason, a creator account has 2 collections with the same name in v1 and v2,\n   * can pass an optional `tokenStandard` parameter to query a specific standard\n   *\n   * @param creatorAddress the collection creator address\n   * @param collectionName the collection name\n   * @returns GetCollectionDataQuery response type\n   */\n  async getCollectionData(\n    creatorAddress: MaybeHexString,\n    collectionName: string,\n    extraArgs?: {\n      tokenStandard?: TokenStandard;\n      options?: IndexerPaginationArgs;\n      orderBy?: IndexerSortBy<Current_Collections_V2_Order_By>[];\n    },\n  ): Promise<GetCollectionDataQuery> {\n    const address = HexString.ensure(creatorAddress).hex();\n    IndexerClient.validateAddress(address);\n\n    const whereCondition: any = {\n      collection_name: { _eq: collectionName },\n      creator_address: { _eq: address },\n    };\n\n    if (extraArgs?.tokenStandard) {\n      whereCondition.token_standard = { _eq: extraArgs?.tokenStandard };\n    }\n\n    const graphqlQuery = {\n      query: GetCollectionData,\n      variables: {\n        where_condition: whereCondition,\n        offset: extraArgs?.options?.offset,\n        limit: extraArgs?.options?.limit,\n        order_by: extraArgs?.orderBy,\n      },\n    };\n    return this.queryIndexer(graphqlQuery);\n  }\n\n  /**\n   * Queries a collection address.\n   *\n   * @param creatorAddress the collection creator address\n   * @param collectionName the collection name\n   * @returns the collection address\n   */\n  async getCollectionAddress(\n    creatorAddress: MaybeHexString,\n    collectionName: string,\n    extraArgs?: {\n      tokenStandard?: TokenStandard;\n      orderBy?: IndexerSortBy<Current_Collections_V2_Order_By>[];\n    },\n  ): Promise<string> {\n    return (await this.getCollectionData(creatorAddress, collectionName, extraArgs)).current_collections_v2[0]\n      .collection_id;\n  }\n\n  /**\n   * Queries for all collections that an account has tokens for.\n   *\n   * @param ownerAddress the account address that owns the tokens\n   * @returns GetCollectionsWithOwnedTokensQuery response type\n   */\n  async getCollectionsWithOwnedTokens(\n    ownerAddress: MaybeHexString,\n    extraArgs?: {\n      tokenStandard?: TokenStandard;\n      options?: IndexerPaginationArgs;\n      orderBy?: IndexerSortBy<Current_Collection_Ownership_V2_View_Order_By>[];\n    },\n  ): Promise<GetCollectionsWithOwnedTokensQuery> {\n    const ownerHexAddress = HexString.ensure(ownerAddress).hex();\n    IndexerClient.validateAddress(ownerHexAddress);\n\n    const whereCondition: any = {\n      owner_address: { _eq: ownerHexAddress },\n    };\n\n    if (extraArgs?.tokenStandard) {\n      whereCondition.current_collection = { token_standard: { _eq: extraArgs?.tokenStandard } };\n    }\n\n    const graphqlQuery = {\n      query: GetCollectionsWithOwnedTokens,\n      variables: {\n        where_condition: whereCondition,\n        offset: extraArgs?.options?.offset,\n        limit: extraArgs?.options?.limit,\n        order_by: extraArgs?.orderBy,\n      },\n    };\n    return this.queryIndexer(graphqlQuery);\n  }\n\n  // TRANSACTIONS //\n\n  /**\n   * Gets the count of transactions submitted by an account\n   *\n   * @param address Account address\n   * @returns GetAccountTransactionsCountQuery response type\n   */\n  async getAccountTransactionsCount(accountAddress: MaybeHexString): Promise<GetAccountTransactionsCountQuery> {\n    const address = HexString.ensure(accountAddress).hex();\n    IndexerClient.validateAddress(address);\n    const graphqlQuery = {\n      query: GetAccountTransactionsCount,\n      variables: { address },\n    };\n    return this.queryIndexer(graphqlQuery);\n  }\n\n  /**\n   * Queries an account transactions data\n   *\n   * @param address Account address\n   * @returns GetAccountTransactionsDataQuery response type\n   */\n  async getAccountTransactionsData(\n    accountAddress: MaybeHexString,\n    extraArgs?: {\n      options?: IndexerPaginationArgs;\n      orderBy?: IndexerSortBy<Account_Transactions_Order_By>[];\n    },\n  ): Promise<GetAccountTransactionsDataQuery> {\n    const address = HexString.ensure(accountAddress).hex();\n    IndexerClient.validateAddress(address);\n\n    const whereCondition: any = {\n      account_address: { _eq: address },\n    };\n\n    const graphqlQuery = {\n      query: GetAccountTransactionsData,\n      variables: {\n        where_condition: whereCondition,\n        offset: extraArgs?.options?.offset,\n        limit: extraArgs?.options?.limit,\n        order_by: extraArgs?.orderBy,\n      },\n    };\n    return this.queryIndexer(graphqlQuery);\n  }\n\n  /**\n   * Queries top user transactions\n   *\n   * @param limit\n   * @returns GetTopUserTransactionsQuery response type\n   */\n  async getTopUserTransactions(limit: number): Promise<GetTopUserTransactionsQuery> {\n    const graphqlQuery = {\n      query: GetTopUserTransactions,\n      variables: { limit },\n    };\n    return this.queryIndexer(graphqlQuery);\n  }\n\n  /**\n   * Queries top user transactions\n   *\n   * @param startVersion optional - can be set to tell indexer what version to start from\n   * @returns GetUserTransactionsQuery response type\n   */\n  async getUserTransactions(extraArgs?: {\n    startVersion?: number;\n    options?: IndexerPaginationArgs;\n    orderBy?: IndexerSortBy<User_Transactions_Order_By>[];\n  }): Promise<GetUserTransactionsQuery> {\n    const whereCondition: any = {\n      version: { _lte: extraArgs?.startVersion },\n    };\n\n    const graphqlQuery = {\n      query: GetUserTransactions,\n      variables: {\n        where_condition: whereCondition,\n        offset: extraArgs?.options?.offset,\n        limit: extraArgs?.options?.limit,\n        order_by: extraArgs?.orderBy,\n      },\n    };\n    return this.queryIndexer(graphqlQuery);\n  }\n\n  // STAKING //\n\n  /**\n   * Queries delegated staking activities\n   *\n   * @param delegatorAddress Delegator address\n   * @param poolAddress Pool address\n   * @returns GetDelegatedStakingActivitiesQuery response type\n   */\n  async getDelegatedStakingActivities(\n    delegatorAddress: MaybeHexString,\n    poolAddress: MaybeHexString,\n  ): Promise<GetDelegatedStakingActivitiesQuery> {\n    const delegator = HexString.ensure(delegatorAddress).hex();\n    const pool = HexString.ensure(poolAddress).hex();\n    IndexerClient.validateAddress(delegator);\n    IndexerClient.validateAddress(pool);\n    const graphqlQuery = {\n      query: GetDelegatedStakingActivities,\n      variables: {\n        delegatorAddress: delegator,\n        poolAddress: pool,\n      },\n    };\n    return this.queryIndexer(graphqlQuery);\n  }\n\n  /**\n   * Queries current number of delegators in a pool\n   *\n   * @returns GetNumberOfDelegatorsQuery response type\n   */\n  async getNumberOfDelegators(poolAddress: MaybeHexString): Promise<GetNumberOfDelegatorsQuery> {\n    const address = HexString.ensure(poolAddress).hex();\n    IndexerClient.validateAddress(address);\n    const graphqlQuery = {\n      query: GetNumberOfDelegators,\n      variables: { poolAddress: address },\n    };\n    return this.queryIndexer(graphqlQuery);\n  }\n\n  // ACCOUNT //\n\n  /**\n   * Queries an account coin data\n   *\n   * @param ownerAddress Owner address\n   * @returns GetAccountCoinsDataQuery response type\n   */\n  async getAccountCoinsData(\n    ownerAddress: MaybeHexString,\n    extraArgs?: {\n      options?: IndexerPaginationArgs;\n      orderBy?: IndexerSortBy<Current_Fungible_Asset_Balances_Order_By>[];\n    },\n  ): Promise<GetAccountCoinsDataQuery> {\n    const address = HexString.ensure(ownerAddress).hex();\n    IndexerClient.validateAddress(address);\n\n    const whereCondition: any = {\n      owner_address: { _eq: address },\n    };\n\n    const graphqlQuery = {\n      query: GetAccountCoinsData,\n      variables: {\n        where_condition: whereCondition,\n        offset: extraArgs?.options?.offset,\n        limit: extraArgs?.options?.limit,\n        order_by: extraArgs?.orderBy,\n      },\n    };\n\n    return this.queryIndexer(graphqlQuery);\n  }\n\n  /**\n   * Queries an account coin data count\n   *\n   * @param ownerAddress Owner address\n   * @returns GetAccountCoinsDataCountQuery response type\n   */\n  async getAccountCoinsDataCount(ownerAddress: MaybeHexString): Promise<GetAccountCoinsDataCountQuery> {\n    const address = HexString.ensure(ownerAddress).hex();\n    IndexerClient.validateAddress(address);\n\n    const graphqlQuery = {\n      query: GetAccountCoinsDataCount,\n      variables: {\n        address,\n      },\n    };\n\n    return this.queryIndexer(graphqlQuery);\n  }\n\n  /**\n   * Queries an account owned objects\n   *\n   * @param ownerAddress Owner address\n   * @returns GetCurrentObjectsQuery response type\n   */\n  async getAccountOwnedObjects(\n    ownerAddress: MaybeHexString,\n    extraArgs?: {\n      options?: IndexerPaginationArgs;\n      orderBy?: IndexerSortBy<Current_Objects_Order_By>[];\n    },\n  ): Promise<GetCurrentObjectsQuery> {\n    const address = HexString.ensure(ownerAddress).hex();\n    IndexerClient.validateAddress(address);\n\n    const whereCondition: any = {\n      owner_address: { _eq: address },\n    };\n\n    const graphqlQuery = {\n      query: GetCurrentObjects,\n      variables: {\n        where_condition: whereCondition,\n        offset: extraArgs?.options?.offset,\n        limit: extraArgs?.options?.limit,\n        order_by: extraArgs?.orderBy,\n      },\n    };\n    return this.queryIndexer(graphqlQuery);\n  }\n}\n","import { AptosClient } from \"./aptos_client\";\nimport { IndexerClient } from \"./indexer\";\n\nimport { CustomEndpoints, Network, NetworkToIndexerAPI, NetworkToNodeAPI } from \"../utils\";\nimport { ClientConfig } from \"../client\";\n\ntype NetworkWithCustom = Network | \"CUSTOM\";\n/**\n * Builds a Provider class with an aptos client configured to connect to an Aptos node\n * and indexer client configured to connect to Aptos Indexer.\n *\n * It creates AptosClient and IndexerClient instances based on the network or custom endpoints provided.\n *\n * This class holds both AptosClient and IndexerClient classes's methods and properties so we\n * can instantiate the Provider class and use it to query full node and/or Indexer.\n *\n * NOTE: Indexer client can be undefined/not set when we use Network.LOCAL (since Indexer\n * does not support local environment) or when we use a CUSTOM network to support applications\n * that only use custom fullnode and not Indexer\n *\n * @example An example of how to use this class with a live network\n * ```\n * const provider = new Provider(Network.DEVNET)\n * const account = await provider.getAccount(\"0x123\");\n * const accountTokens = await provider.getOwnedTokens(\"0x123\");\n * ```\n *\n * @example An example of how to use this class with a local network. Indexer\n * doesn't support local network.\n * ```\n * const provider = new Provider(Network.LOCAL)\n * const account = await provider.getAccount(\"0x123\");\n * ```\n *\n * @example An example of how to use this class with a custom network.\n * ```\n * const provider = new Provider({fullnodeUrl:\"my-fullnode-url\",indexerUrl:\"my-indexer-url\"})\n * const account = await provider.getAccount(\"0x123\");\n * const accountTokens = await provider.getOwnedTokens(\"0x123\");\n * ```\n *\n * @param network enum of type Network - MAINNET | TESTNET | DEVNET | LOCAL or custom endpoints of type CustomEndpoints\n * @param config optional ClientConfig config arg - additional configuration we can pass with the request to the server.\n */\nexport class Provider {\n  aptosClient: AptosClient;\n\n  indexerClient?: IndexerClient;\n\n  network: NetworkWithCustom;\n\n  constructor(network: Network | CustomEndpoints, config?: ClientConfig, doNotFixNodeUrl: boolean = false) {\n    let fullNodeUrl = null;\n    let indexerUrl = null;\n\n    if (typeof network === \"object\" && isCustomEndpoints(network)) {\n      fullNodeUrl = network.fullnodeUrl;\n      indexerUrl = network.indexerUrl;\n      this.network = \"CUSTOM\";\n    } else {\n      fullNodeUrl = NetworkToNodeAPI[network];\n      indexerUrl = NetworkToIndexerAPI[network];\n      this.network = network;\n    }\n\n    if (this.network === \"CUSTOM\" && !fullNodeUrl) {\n      throw new Error(\"fullnode url is not provided\");\n    }\n\n    if (indexerUrl) {\n      this.indexerClient = new IndexerClient(indexerUrl, config);\n    }\n    this.aptosClient = new AptosClient(fullNodeUrl, config, doNotFixNodeUrl);\n  }\n}\n\nexport interface Provider extends AptosClient, IndexerClient {}\n\n/**\nIn TypeScript, we can’t inherit or extend from more than one class,\nMixins helps us to get around that by creating a partial classes \nthat we can combine to form a single class that contains all the methods and properties from the partial classes.\n{@link https://www.typescriptlang.org/docs/handbook/mixins.html#alternative-pattern}\n\nHere, we combine AptosClient and IndexerClient classes into one Provider class that holds all \nmethods and properties from both classes.\n*/\nfunction applyMixin(targetClass: any, baseClass: any, baseClassProp: string) {\n  // Mixin instance methods\n  Object.getOwnPropertyNames(baseClass.prototype).forEach((propertyName) => {\n    const propertyDescriptor = Object.getOwnPropertyDescriptor(baseClass.prototype, propertyName);\n    if (!propertyDescriptor) return;\n    // eslint-disable-next-line func-names\n    propertyDescriptor.value = function (...args: any) {\n      return (this as any)[baseClassProp][propertyName](...args);\n    };\n    Object.defineProperty(targetClass.prototype, propertyName, propertyDescriptor);\n  });\n  // Mixin static methods\n  Object.getOwnPropertyNames(baseClass).forEach((propertyName) => {\n    const propertyDescriptor = Object.getOwnPropertyDescriptor(baseClass, propertyName);\n    if (!propertyDescriptor) return;\n    // eslint-disable-next-line func-names\n    propertyDescriptor.value = function (...args: any) {\n      return (this as any)[baseClassProp][propertyName](...args);\n    };\n    if (targetClass.hasOwnProperty.call(targetClass, propertyName)) {\n      // The mixin has already been applied, so skip applying it again\n      return;\n    }\n    Object.defineProperty(targetClass, propertyName, propertyDescriptor);\n  });\n}\n\napplyMixin(Provider, AptosClient, \"aptosClient\");\napplyMixin(Provider, IndexerClient, \"indexerClient\");\n\n// use exhaustive type predicates\nfunction isCustomEndpoints(network: CustomEndpoints): network is CustomEndpoints {\n  return network.fullnodeUrl !== undefined && typeof network.fullnodeUrl === \"string\";\n}\n","import { Bytes, Deserializer, Serializer } from \"../bcs\";\nimport { serializeArg } from \"../transaction_builder/builder_utils\";\nimport {\n  stringStructTag,\n  TypeTag,\n  TypeTagAddress,\n  TypeTagBool,\n  TypeTagParser,\n  TypeTagStruct,\n  TypeTagU128,\n  TypeTagU64,\n  TypeTagU8,\n} from \"../aptos_types\";\nimport { HexString } from \"./hex_string\";\n\nexport class PropertyValue {\n  type: string;\n\n  value: any;\n\n  constructor(type: string, value: string) {\n    this.type = type;\n    this.value = value;\n  }\n}\n\nexport class PropertyMap {\n  data: { [key: string]: PropertyValue };\n\n  constructor() {\n    this.data = {};\n  }\n\n  setProperty(key: string, value: PropertyValue) {\n    this.data[key] = value;\n  }\n}\n\nexport function getPropertyType(typ: string): TypeTag {\n  let typeTag: TypeTag;\n  if (typ === \"string\" || typ === \"String\") {\n    typeTag = new TypeTagStruct(stringStructTag);\n  } else {\n    typeTag = new TypeTagParser(typ).parseTypeTag();\n  }\n  return typeTag;\n}\n\nexport function getPropertyValueRaw(values: Array<string>, types: Array<string>): Array<Bytes> {\n  if (values.length !== types.length) {\n    throw new Error(\"Length of property values and types not match\");\n  }\n\n  const results = new Array<Bytes>();\n  types.forEach((typ, index) => {\n    try {\n      const typeTag = getPropertyType(typ);\n      const serializer = new Serializer();\n      serializeArg(values[index], typeTag, serializer);\n      results.push(serializer.getBytes());\n    } catch (error) {\n      // if not support type, just use the raw string bytes\n      results.push(new TextEncoder().encode(values[index]));\n    }\n  });\n  return results;\n}\n\nexport function getSinglePropertyValueRaw(value: string, type: string): Uint8Array {\n  if (!value || !type) {\n    throw new Error(\"value or type can not be empty\");\n  }\n\n  try {\n    const typeTag = getPropertyType(type);\n    const serializer = new Serializer();\n    serializeArg(value, typeTag, serializer);\n    return serializer.getBytes();\n  } catch (error) {\n    // if not support type, just use the raw string bytes\n    return new TextEncoder().encode(value);\n  }\n}\n\nexport function deserializePropertyMap(rawPropertyMap: any): PropertyMap {\n  const entries = rawPropertyMap.map.data;\n  const pm = new PropertyMap();\n  entries.forEach((prop: any) => {\n    const { key } = prop;\n    const val: string = prop.value.value;\n    const typ: string = prop.value.type;\n    const typeTag = getPropertyType(typ);\n    const newValue = deserializeValueBasedOnTypeTag(typeTag, val);\n    const pv = new PropertyValue(typ, newValue);\n    pm.setProperty(key, pv);\n  });\n  return pm;\n}\n\nexport function deserializeValueBasedOnTypeTag(tag: TypeTag, val: string): string {\n  const de = new Deserializer(new HexString(val).toUint8Array());\n  let res: string = \"\";\n  if (tag instanceof TypeTagU8) {\n    res = de.deserializeU8().toString();\n  } else if (tag instanceof TypeTagU64) {\n    res = de.deserializeU64().toString();\n  } else if (tag instanceof TypeTagU128) {\n    res = de.deserializeU128().toString();\n  } else if (tag instanceof TypeTagBool) {\n    res = de.deserializeBool() ? \"true\" : \"false\";\n  } else if (tag instanceof TypeTagAddress) {\n    res = HexString.fromUint8Array(de.deserializeFixedBytes(32)).hex();\n  } else if (tag instanceof TypeTagStruct && (tag as TypeTagStruct).isStringTypeTag()) {\n    res = de.deserializeStr();\n  } else {\n    res = val;\n  }\n  return res;\n}\n","// Copyright © Aptos Foundation\n// SPDX-License-Identifier: Apache-2.0\n\nimport { deserializePropertyMap, PropertyMap, PropertyValue } from \"../utils/property_map_serde\";\n\nexport { PropertyMap, PropertyValue };\nexport class TokenData {\n  /** Unique name within this creator's account for this Token's collection */\n  collection: string;\n\n  /** Description of Token */\n  description: string;\n\n  /** Name of Token */\n  name: string;\n\n  /** Optional maximum number of this Token */\n  maximum?: number;\n\n  /** Total number of this type of Token */\n  supply: number;\n\n  /** URL for additional information / media */\n  uri: string;\n\n  /** default properties of token data */\n  default_properties: PropertyMap;\n\n  /** mutability config of tokendata fields */\n  mutability_config: boolean[];\n\n  constructor(\n    collection: string,\n    description: string,\n    name: string,\n    maximum: number,\n    supply: number,\n    uri: string,\n    default_properties: any,\n    mutability_config: boolean[],\n  ) {\n    this.collection = collection;\n    this.description = description;\n    this.name = name;\n    this.maximum = maximum;\n    this.supply = supply;\n    this.uri = uri;\n    this.default_properties = deserializePropertyMap(default_properties);\n    this.mutability_config = mutability_config;\n  }\n}\n\nexport interface TokenDataId {\n  /** Token creator address */\n  creator: string;\n\n  /** Unique name within this creator's account for this Token's collection */\n  collection: string;\n\n  /** Name of Token */\n  name: string;\n}\n\nexport interface TokenId {\n  token_data_id: TokenDataId;\n\n  /** version number of the property map */\n  property_version: string;\n}\n\n/** server will return string for u64 */\ntype U64 = string;\n\nexport class Token {\n  id: TokenId;\n\n  /** server will return string for u64 */\n  amount: U64;\n\n  /** the property map of the token */\n  token_properties: PropertyMap;\n\n  constructor(id: TokenId, amount: U64, token_properties: any) {\n    this.id = id;\n    this.amount = amount;\n    this.token_properties = deserializePropertyMap(token_properties);\n  }\n}\n","/**\n * A wrapper that handles and manages an account sequence number.\n *\n * Submit up to `maximumInFlight` transactions per account in parallel with a timeout of `sleepTime`\n * If local assumes `maximumInFlight` are in flight, determine the actual committed state from the network\n * If there are less than `maximumInFlight` due to some being committed, adjust the window\n * If `maximumInFlight` are in flight, wait `sleepTime` seconds before re-evaluating\n * If ever waiting more than `maxWaitTime` restart the sequence number to the current on-chain state\n *\n * Assumptions:\n * Accounts are expected to be managed by a single AccountSequenceNumber and not used otherwise.\n * They are initialized to the current on-chain state, so if there are already transactions in\n * flight, they may take some time to reset.\n * Accounts are automatically initialized if not explicitly\n *\n * Notes:\n * This is co-routine safe, that is many async tasks can be reading from this concurrently.\n * The state of an account cannot be used across multiple AccountSequenceNumber services.\n * The synchronize method will create a barrier that prevents additional nextSequenceNumber\n * calls until it is complete.\n * This only manages the distribution of sequence numbers it does not help handle transaction\n * failures.\n * If a transaction fails, you should call synchronize and wait for timeouts.\n */\n\nimport { AptosAccount } from \"../account\";\nimport { Provider } from \"../providers\";\nimport { sleep } from \"../utils\";\n\n// returns `now` time in seconds\nconst now = () => Math.floor(Date.now() / 1000);\n\nexport class AccountSequenceNumber {\n  readonly provider: Provider;\n\n  readonly account: AptosAccount;\n\n  // sequence number on chain\n  lastUncommintedNumber: bigint | null = null;\n\n  // local sequence number\n  currentNumber: bigint | null = null;\n\n  /**\n   * We want to guarantee that we preserve ordering of workers to requests.\n   *\n   * `lock` is used to try to prevent multiple coroutines from accessing a shared resource at the same time,\n   * which can result in race conditions and data inconsistency.\n   * This code actually doesn't do it though, since we aren't giving out a slot, it is still somewhat a race condition.\n   *\n   * The ideal solution is likely that each thread grabs the next number from a incremental integer.\n   * When they complete, they increment that number and that entity is able to enter the `lock`.\n   * That would guarantee ordering.\n   */\n  lock = false;\n\n  maxWaitTime: number;\n\n  maximumInFlight: number;\n\n  sleepTime: number;\n\n  constructor(\n    provider: Provider,\n    account: AptosAccount,\n    maxWaitTime: number,\n    maximumInFlight: number,\n    sleepTime: number,\n  ) {\n    this.provider = provider;\n    this.account = account;\n    this.maxWaitTime = maxWaitTime;\n    this.maximumInFlight = maximumInFlight;\n    this.sleepTime = sleepTime;\n  }\n\n  /**\n   * Returns the next available sequence number for this account\n   *\n   * @returns next available sequence number\n   */\n  async nextSequenceNumber(): Promise<bigint | null> {\n    /* eslint-disable no-await-in-loop */\n    while (this.lock) {\n      await sleep(this.sleepTime);\n    }\n\n    this.lock = true;\n    let nextNumber = BigInt(0);\n    try {\n      if (this.lastUncommintedNumber === null || this.currentNumber === null) {\n        await this.initialize();\n      }\n\n      if (this.currentNumber! - this.lastUncommintedNumber! >= this.maximumInFlight) {\n        await this.update();\n\n        const startTime = now();\n        while (this.currentNumber! - this.lastUncommintedNumber! >= this.maximumInFlight) {\n          await sleep(this.sleepTime);\n          if (now() - startTime > this.maxWaitTime) {\n            /* eslint-disable no-console */\n            console.warn(`Waited over 30 seconds for a transaction to commit, resyncing ${this.account.address()}`);\n            await this.initialize();\n          } else {\n            await this.update();\n          }\n        }\n      }\n      nextNumber = this.currentNumber!;\n      this.currentNumber! += BigInt(1);\n    } catch (e) {\n      console.error(\"error in getting next sequence number for this account\", e);\n    } finally {\n      this.lock = false;\n    }\n    return nextNumber;\n  }\n\n  /**\n   * Initializes this account with the sequence number on chain\n   */\n  async initialize(): Promise<void> {\n    const { sequence_number: sequenceNumber } = await this.provider.getAccount(this.account.address());\n    this.currentNumber = BigInt(sequenceNumber);\n    this.lastUncommintedNumber = BigInt(sequenceNumber);\n  }\n\n  /**\n   * Updates this account sequence number with the one on-chain\n   *\n   * @returns on-chain sequence number for this account\n   */\n  async update(): Promise<bigint> {\n    const { sequence_number: sequenceNumber } = await this.provider.getAccount(this.account.address());\n    this.lastUncommintedNumber = BigInt(sequenceNumber);\n    return this.lastUncommintedNumber;\n  }\n\n  /**\n   * Synchronizes local sequence number with the seqeunce number on chain for this account.\n   *\n   * Poll the network until all submitted transactions have either been committed or until\n   * the maximum wait time has elapsed\n   */\n  async synchronize(): Promise<void> {\n    if (this.lastUncommintedNumber === this.currentNumber) return;\n\n    /* eslint-disable no-await-in-loop */\n    while (this.lock) {\n      await sleep(this.sleepTime);\n    }\n\n    this.lock = true;\n\n    try {\n      await this.update();\n      const startTime = now();\n      while (this.lastUncommintedNumber !== this.currentNumber) {\n        if (now() - startTime > this.maxWaitTime) {\n          /* eslint-disable no-console */\n          console.warn(`Waited over 30 seconds for a transaction to commit, resyncing ${this.account.address()}`);\n          await this.initialize();\n        } else {\n          await sleep(this.sleepTime);\n          await this.update();\n        }\n      }\n    } catch (e) {\n      console.error(\"error in synchronizing this account sequence number with the one on chain\", e);\n    } finally {\n      this.lock = false;\n    }\n  }\n}\n","/**\n * The AsyncQueue class is an async-aware data structure that provides a queue-like\n * behavior for managing asynchronous tasks or operations.\n * It allows to enqueue items and dequeue them asynchronously.\n * This is not thread-safe but it is async concurrency safe and\n * it does not guarantee ordering for those that call into and await on enqueue.\n */\n\ninterface PendingDequeue<T> {\n  resolve: (value: T) => void;\n  reject: (reason?: AsyncQueueCancelledError) => void;\n}\n\nexport class AsyncQueue<T> {\n  readonly queue: T[] = [];\n\n  // The pendingDequeue is used to handle the resolution of promises when items are enqueued and dequeued.\n  private pendingDequeue: PendingDequeue<T>[] = [];\n\n  private cancelled: boolean = false;\n\n  /**\n   * The enqueue method adds an item to the queue. If there are pending dequeued promises,\n   * in the pendingDequeue, it resolves the oldest promise with the enqueued item immediately.\n   * Otherwise, it adds the item to the queue.\n   *\n   * @param item T\n   */\n  enqueue(item: T): void {\n    this.cancelled = false;\n\n    if (this.pendingDequeue.length > 0) {\n      const promise = this.pendingDequeue.shift();\n\n      promise?.resolve(item);\n\n      return;\n    }\n\n    this.queue.push(item);\n  }\n\n  /**\n   * The dequeue method returns a promise that resolves to the next item in the queue.\n   * If the queue is not empty, it resolves the promise immediately with the next item.\n   * Otherwise, it creates a new promise. The promise's resolve function is stored\n   * in the pendingDequeue with a unique counter value as the key.\n   * The newly created promise is then returned, and it will be resolved later when an item is enqueued.\n   *\n   * @returns Promise<T>\n   */\n  async dequeue(): Promise<T> {\n    if (this.queue.length > 0) {\n      return Promise.resolve(this.queue.shift()!);\n    }\n\n    return new Promise<T>((resolve, reject) => {\n      this.pendingDequeue.push({ resolve, reject });\n    });\n  }\n\n  /**\n   * The isEmpty method returns whether the queue is empty or not.\n   *\n   * @returns boolean\n   */\n  isEmpty(): boolean {\n    return this.queue.length === 0;\n  }\n\n  /**\n   * The cancel method cancels all pending promises in the queue.\n   * It rejects the promises with a AsyncQueueCancelledError error,\n   * ensuring that any awaiting code can handle the cancellation appropriately.\n   */\n  cancel(): void {\n    this.cancelled = true;\n\n    this.pendingDequeue.forEach(async ({ reject }) => {\n      reject(new AsyncQueueCancelledError(\"Task cancelled\"));\n    });\n\n    this.pendingDequeue = [];\n\n    this.queue.length = 0;\n  }\n\n  /**\n   * The isCancelled method returns whether the queue is cancelled or not.\n   *\n   * @returns boolean\n   */\n  isCancelled(): boolean {\n    return this.cancelled;\n  }\n\n  /**\n   * The pendingDequeueLength method returns the length of the pendingDequeue.\n   *\n   * @returns number\n   */\n  pendingDequeueLength(): number {\n    return this.pendingDequeue.length;\n  }\n}\n\nexport class AsyncQueueCancelledError extends Error {}\n","/* eslint-disable no-await-in-loop */\n\n/**\n * TransactionWorker provides a simple framework for receiving payloads to be processed.\n *\n * Once one `start()` the process and pushes a new transaction, the worker acquires\n * the current account's next sequence number (by using the AccountSequenceNumber class),\n * generates a signed transaction and pushes an async submission process into the `outstandingTransactions` queue.\n * At the same time, the worker processes transactions by reading the `outstandingTransactions` queue\n * and submits the next transaction to chain, it\n * 1) waits for resolution of the submission process or get pre-execution validation error\n * and 2) waits for the resolution of the execution process or get an execution error.\n * The worker fires events for any submission and/or execution success and/or failure.\n */\n\nimport EventEmitter from \"eventemitter3\";\nimport { AptosAccount } from \"../account\";\nimport { PendingTransaction, Transaction } from \"../generated\";\nimport { AptosClient, Provider } from \"../providers\";\nimport { TxnBuilderTypes } from \"../transaction_builder\";\nimport { AccountSequenceNumber } from \"./account_sequence_number\";\nimport { AsyncQueue, AsyncQueueCancelledError } from \"./async_queue\";\n\nconst promiseFulfilledStatus = \"fulfilled\";\n\nexport enum TransactionWorkerEvents {\n  TransactionSent = \"transactionSent\",\n  TransactionSendFailed = \"transactionsendFailed\",\n  TransactionExecuted = \"transactionExecuted\",\n  TransactionExecutionFailed = \"transactionexecutionFailed\",\n}\n\nexport class TransactionWorker extends EventEmitter<TransactionWorkerEvents> {\n  readonly provider: Provider;\n\n  readonly account: AptosAccount;\n\n  // current account sequence number\n  readonly accountSequnceNumber: AccountSequenceNumber;\n\n  readonly taskQueue: AsyncQueue<() => Promise<void>> = new AsyncQueue<() => Promise<void>>();\n\n  // process has started\n  started: boolean;\n\n  /**\n   * transactions payloads waiting to be generated and signed\n   *\n   * TODO support entry function payload from ABI builder\n   */\n  transactionsQueue = new AsyncQueue<TxnBuilderTypes.TransactionPayload>();\n\n  /**\n   * signed transactions waiting to be submitted\n   */\n  outstandingTransactions = new AsyncQueue<[Promise<PendingTransaction>, bigint]>();\n\n  /**\n   * transactions that have been submitted to chain\n   */\n  sentTransactions: Array<[string, bigint, any]> = [];\n\n  /**\n   * transactions that have been committed to chain\n   */\n  executedTransactions: Array<[string, bigint, any]> = [];\n\n  /**\n   * Provides a simple framework for receiving payloads to be processed.\n   *\n   * @param provider - a client provider\n   * @param sender - a sender as AptosAccount\n   * @param maxWaitTime - the max wait time to wait before resyncing the sequence number\n   * to the current on-chain state, default to 30\n   * @param maximumInFlight - submit up to `maximumInFlight` transactions per account.\n   * Mempool limits the number of transactions per account to 100, hence why we default to 100.\n   * @param sleepTime - If `maximumInFlight` are in flight, wait `sleepTime` seconds before re-evaluating, default to 10\n   */\n  constructor(\n    provider: Provider,\n    account: AptosAccount,\n    maxWaitTime: number = 30,\n    maximumInFlight: number = 100,\n    sleepTime: number = 10,\n  ) {\n    super();\n    this.provider = provider;\n    this.account = account;\n    this.started = false;\n    this.accountSequnceNumber = new AccountSequenceNumber(provider, account, maxWaitTime, maximumInFlight, sleepTime);\n  }\n\n  /**\n   * Gets the current account sequence number,\n   * generates the transaction with the account sequence number,\n   * adds the transaction to the outstanding transaction queue\n   * to be processed later.\n   */\n  async submitNextTransaction() {\n    try {\n      /* eslint-disable no-constant-condition */\n      while (true) {\n        if (this.transactionsQueue.isEmpty()) return;\n        const sequenceNumber = await this.accountSequnceNumber.nextSequenceNumber();\n        if (sequenceNumber === null) return;\n        const transaction = await this.generateNextTransaction(this.account, sequenceNumber);\n        if (!transaction) return;\n        const pendingTransaction = this.provider.submitSignedBCSTransaction(transaction);\n        await this.outstandingTransactions.enqueue([pendingTransaction, sequenceNumber]);\n      }\n    } catch (error: any) {\n      if (error instanceof AsyncQueueCancelledError) {\n        return;\n      }\n      // TODO use future log service\n      /* eslint-disable no-console */\n      console.log(error);\n    }\n  }\n\n  /**\n   * Reads the outstanding transaction queue and submits the transaction to chain.\n   *\n   * If the transaction has fulfilled, it pushes the transaction to the processed\n   * transactions queue and fires a transactionsFulfilled event.\n   *\n   * If the transaction has failed, it pushes the transaction to the processed\n   * transactions queue with the failure reason and fires a transactionsFailed event.\n   */\n  async processTransactions() {\n    try {\n      /* eslint-disable no-constant-condition */\n      while (true) {\n        const awaitingTransactions = [];\n        const sequenceNumbers = [];\n        let [pendingTransaction, sequenceNumber] = await this.outstandingTransactions.dequeue();\n\n        awaitingTransactions.push(pendingTransaction);\n        sequenceNumbers.push(sequenceNumber);\n\n        while (!this.outstandingTransactions.isEmpty()) {\n          [pendingTransaction, sequenceNumber] = await this.outstandingTransactions.dequeue();\n\n          awaitingTransactions.push(pendingTransaction);\n          sequenceNumbers.push(sequenceNumber);\n        }\n        // send awaiting transactions to chain\n        const sentTransactions = await Promise.allSettled(awaitingTransactions);\n        for (let i = 0; i < sentTransactions.length && i < sequenceNumbers.length; i += 1) {\n          // check sent transaction status\n          const sentTransaction = sentTransactions[i];\n          sequenceNumber = sequenceNumbers[i];\n          if (sentTransaction.status === promiseFulfilledStatus) {\n            // transaction sent to chain\n            this.sentTransactions.push([sentTransaction.value.hash, sequenceNumber, null]);\n            this.emit(TransactionWorkerEvents.TransactionSent, [\n              this.sentTransactions.length,\n              sentTransaction.value.hash,\n            ]);\n            // check sent transaction execution\n            await this.checkTransaction(sentTransaction, sequenceNumber);\n          } else {\n            // send transaction failed\n            this.sentTransactions.push([sentTransaction.status, sequenceNumber, sentTransaction.reason]);\n            this.emit(TransactionWorkerEvents.TransactionSendFailed, [\n              this.sentTransactions.length,\n              sentTransaction.reason,\n            ]);\n          }\n        }\n      }\n    } catch (error: any) {\n      if (error instanceof AsyncQueueCancelledError) {\n        return;\n      }\n      // TODO use future log service\n      /* eslint-disable no-console */\n      console.log(error);\n    }\n  }\n\n  /**\n   * Once transaction has been sent to chain, we check for its execution status.\n   * @param sentTransaction transactions that were sent to chain and are now waiting to be executed\n   * @param sequenceNumber the account's sequence number that was sent with the transaction\n   */\n  async checkTransaction(sentTransaction: PromiseFulfilledResult<PendingTransaction>, sequenceNumber: bigint) {\n    const waitFor: Array<Promise<Transaction>> = [];\n    waitFor.push(this.provider.waitForTransactionWithResult(sentTransaction.value.hash, { checkSuccess: true }));\n    const sentTransactions = await Promise.allSettled(waitFor);\n\n    for (let i = 0; i < sentTransactions.length; i += 1) {\n      const executedTransaction = sentTransactions[i];\n      if (executedTransaction.status === promiseFulfilledStatus) {\n        // transaction executed to chain\n        this.executedTransactions.push([executedTransaction.value.hash, sequenceNumber, null]);\n        this.emit(TransactionWorkerEvents.TransactionExecuted, [\n          this.executedTransactions.length,\n          executedTransaction.value.hash,\n        ]);\n      } else {\n        // transaction execution failed\n        this.executedTransactions.push([executedTransaction.status, sequenceNumber, executedTransaction.reason]);\n        this.emit(TransactionWorkerEvents.TransactionExecutionFailed, [\n          this.executedTransactions.length,\n          executedTransaction.reason,\n        ]);\n      }\n    }\n  }\n\n  /**\n   * Push transaction to the transactions queue\n   * @param payload Transaction payload\n   */\n  async push(payload: TxnBuilderTypes.TransactionPayload): Promise<void> {\n    await this.transactionsQueue.enqueue(payload);\n  }\n\n  /**\n   * Generates a signed transaction that can be submitted to chain\n   * @param account an Aptos account\n   * @param sequenceNumber a sequence number the transaction will be generated with\n   * @returns\n   */\n  async generateNextTransaction(account: AptosAccount, sequenceNumber: bigint): Promise<Uint8Array | undefined> {\n    if (this.transactionsQueue.isEmpty()) return undefined;\n    const payload = await this.transactionsQueue.dequeue();\n    const rawTransaction = await this.provider.generateRawTransaction(account.address(), payload, {\n      providedSequenceNumber: sequenceNumber,\n    });\n    const signedTransaction = AptosClient.generateBCSTransaction(account, rawTransaction);\n    return signedTransaction;\n  }\n\n  /**\n   * Starts transaction submission and transaction processing.\n   */\n  async run() {\n    try {\n      while (!this.taskQueue.isCancelled()) {\n        const task = await this.taskQueue.dequeue();\n        await task();\n      }\n    } catch (error: any) {\n      throw new Error(error);\n    }\n  }\n\n  /**\n   * Starts the transaction management process.\n   */\n  start() {\n    if (this.started) {\n      throw new Error(\"worker has already started\");\n    }\n    this.started = true;\n    this.taskQueue.enqueue(() => this.submitNextTransaction());\n    this.taskQueue.enqueue(() => this.processTransactions());\n    this.run();\n  }\n\n  /**\n   * Stops the the transaction management process.\n   */\n  stop() {\n    if (this.taskQueue.isCancelled()) {\n      throw new Error(\"worker has already stopped\");\n    }\n    this.started = false;\n    this.taskQueue.cancel();\n  }\n}\n","/* istanbul ignore file */\n/* tslint:disable */\n/* eslint-disable */\n\nexport type { AccountData } from './models/AccountData';\nexport type { AccountSignature } from './models/AccountSignature';\nexport type { AccountSignature_Ed25519Signature } from './models/AccountSignature_Ed25519Signature';\nexport type { AccountSignature_MultiEd25519Signature } from './models/AccountSignature_MultiEd25519Signature';\nexport type { AccountSignature_MultiKeySignature } from './models/AccountSignature_MultiKeySignature';\nexport type { AccountSignature_SingleKeySignature } from './models/AccountSignature_SingleKeySignature';\nexport type { Address } from './models/Address';\nexport type { AptosError } from './models/AptosError';\nexport { AptosErrorCode } from './models/AptosErrorCode';\nexport type { Block } from './models/Block';\nexport type { BlockMetadataTransaction } from './models/BlockMetadataTransaction';\nexport type { DecodedTableData } from './models/DecodedTableData';\nexport type { DeletedTableData } from './models/DeletedTableData';\nexport type { DeleteModule } from './models/DeleteModule';\nexport type { DeleteResource } from './models/DeleteResource';\nexport type { DeleteTableItem } from './models/DeleteTableItem';\nexport type { DirectWriteSet } from './models/DirectWriteSet';\nexport type { Ed25519Signature } from './models/Ed25519Signature';\nexport type { EncodeSubmissionRequest } from './models/EncodeSubmissionRequest';\nexport type { EntryFunctionId } from './models/EntryFunctionId';\nexport type { EntryFunctionPayload } from './models/EntryFunctionPayload';\nexport type { Event } from './models/Event';\nexport type { EventGuid } from './models/EventGuid';\nexport type { FeePayerSignature } from './models/FeePayerSignature';\nexport type { GasEstimation } from './models/GasEstimation';\nexport type { GenesisPayload } from './models/GenesisPayload';\nexport type { GenesisPayload_WriteSetPayload } from './models/GenesisPayload_WriteSetPayload';\nexport type { GenesisTransaction } from './models/GenesisTransaction';\nexport type { HashValue } from './models/HashValue';\nexport type { HealthCheckSuccess } from './models/HealthCheckSuccess';\nexport type { HexEncodedBytes } from './models/HexEncodedBytes';\nexport type { IdentifierWrapper } from './models/IdentifierWrapper';\nexport type { IndexedSignature } from './models/IndexedSignature';\nexport type { IndexResponse } from './models/IndexResponse';\nexport type { ModuleBundlePayload } from './models/ModuleBundlePayload';\nexport type { MoveAbility } from './models/MoveAbility';\nexport type { MoveFunction } from './models/MoveFunction';\nexport type { MoveFunctionGenericTypeParam } from './models/MoveFunctionGenericTypeParam';\nexport { MoveFunctionVisibility } from './models/MoveFunctionVisibility';\nexport type { MoveModule } from './models/MoveModule';\nexport type { MoveModuleBytecode } from './models/MoveModuleBytecode';\nexport type { MoveModuleId } from './models/MoveModuleId';\nexport type { MoveResource } from './models/MoveResource';\nexport type { MoveScriptBytecode } from './models/MoveScriptBytecode';\nexport type { MoveStruct } from './models/MoveStruct';\nexport type { MoveStructField } from './models/MoveStructField';\nexport type { MoveStructGenericTypeParam } from './models/MoveStructGenericTypeParam';\nexport type { MoveStructTag } from './models/MoveStructTag';\nexport type { MoveStructValue } from './models/MoveStructValue';\nexport type { MoveType } from './models/MoveType';\nexport type { MoveValue } from './models/MoveValue';\nexport type { MultiAgentSignature } from './models/MultiAgentSignature';\nexport type { MultiEd25519Signature } from './models/MultiEd25519Signature';\nexport type { MultiKeySignature } from './models/MultiKeySignature';\nexport type { MultisigPayload } from './models/MultisigPayload';\nexport type { MultisigTransactionPayload } from './models/MultisigTransactionPayload';\nexport type { PendingTransaction } from './models/PendingTransaction';\nexport type { PublicKey } from './models/PublicKey';\nexport type { PublicKey_string_HexEncodedBytes_ } from './models/PublicKey_string_HexEncodedBytes_';\nexport type { RawTableItemRequest } from './models/RawTableItemRequest';\nexport { RoleType } from './models/RoleType';\nexport type { ScriptPayload } from './models/ScriptPayload';\nexport type { ScriptWriteSet } from './models/ScriptWriteSet';\nexport type { Signature } from './models/Signature';\nexport type { Signature_string_HexEncodedBytes_ } from './models/Signature_string_HexEncodedBytes_';\nexport type { SingleKeySignature } from './models/SingleKeySignature';\nexport type { StateCheckpointTransaction } from './models/StateCheckpointTransaction';\nexport type { StateKeyWrapper } from './models/StateKeyWrapper';\nexport type { SubmitTransactionRequest } from './models/SubmitTransactionRequest';\nexport type { TableItemRequest } from './models/TableItemRequest';\nexport type { Transaction } from './models/Transaction';\nexport type { Transaction_BlockMetadataTransaction } from './models/Transaction_BlockMetadataTransaction';\nexport type { Transaction_GenesisTransaction } from './models/Transaction_GenesisTransaction';\nexport type { Transaction_PendingTransaction } from './models/Transaction_PendingTransaction';\nexport type { Transaction_StateCheckpointTransaction } from './models/Transaction_StateCheckpointTransaction';\nexport type { Transaction_UserTransaction } from './models/Transaction_UserTransaction';\nexport type { TransactionPayload } from './models/TransactionPayload';\nexport type { TransactionPayload_EntryFunctionPayload } from './models/TransactionPayload_EntryFunctionPayload';\nexport type { TransactionPayload_ModuleBundlePayload } from './models/TransactionPayload_ModuleBundlePayload';\nexport type { TransactionPayload_MultisigPayload } from './models/TransactionPayload_MultisigPayload';\nexport type { TransactionPayload_ScriptPayload } from './models/TransactionPayload_ScriptPayload';\nexport type { TransactionsBatchSingleSubmissionFailure } from './models/TransactionsBatchSingleSubmissionFailure';\nexport type { TransactionsBatchSubmissionResult } from './models/TransactionsBatchSubmissionResult';\nexport type { TransactionSignature } from './models/TransactionSignature';\nexport type { TransactionSignature_AccountSignature } from './models/TransactionSignature_AccountSignature';\nexport type { TransactionSignature_Ed25519Signature } from './models/TransactionSignature_Ed25519Signature';\nexport type { TransactionSignature_FeePayerSignature } from './models/TransactionSignature_FeePayerSignature';\nexport type { TransactionSignature_MultiAgentSignature } from './models/TransactionSignature_MultiAgentSignature';\nexport type { TransactionSignature_MultiEd25519Signature } from './models/TransactionSignature_MultiEd25519Signature';\nexport type { U128 } from './models/U128';\nexport type { U256 } from './models/U256';\nexport type { U64 } from './models/U64';\nexport type { UserTransaction } from './models/UserTransaction';\nexport type { VersionedEvent } from './models/VersionedEvent';\nexport type { ViewRequest } from './models/ViewRequest';\nexport type { WriteModule } from './models/WriteModule';\nexport type { WriteResource } from './models/WriteResource';\nexport type { WriteSet } from './models/WriteSet';\nexport type { WriteSet_DirectWriteSet } from './models/WriteSet_DirectWriteSet';\nexport type { WriteSet_ScriptWriteSet } from './models/WriteSet_ScriptWriteSet';\nexport type { WriteSetChange } from './models/WriteSetChange';\nexport type { WriteSetChange_DeleteModule } from './models/WriteSetChange_DeleteModule';\nexport type { WriteSetChange_DeleteResource } from './models/WriteSetChange_DeleteResource';\nexport type { WriteSetChange_DeleteTableItem } from './models/WriteSetChange_DeleteTableItem';\nexport type { WriteSetChange_WriteModule } from './models/WriteSetChange_WriteModule';\nexport type { WriteSetChange_WriteResource } from './models/WriteSetChange_WriteResource';\nexport type { WriteSetChange_WriteTableItem } from './models/WriteSetChange_WriteTableItem';\nexport type { WriteSetPayload } from './models/WriteSetPayload';\nexport type { WriteTableItem } from './models/WriteTableItem';\n","/* istanbul ignore file */\n/* tslint:disable */\n/* eslint-disable */\n\n/**\n * These codes provide more granular error information beyond just the HTTP\n * status code of the response.\n */\nexport enum AptosErrorCode {\n    ACCOUNT_NOT_FOUND = 'account_not_found',\n    RESOURCE_NOT_FOUND = 'resource_not_found',\n    MODULE_NOT_FOUND = 'module_not_found',\n    STRUCT_FIELD_NOT_FOUND = 'struct_field_not_found',\n    VERSION_NOT_FOUND = 'version_not_found',\n    TRANSACTION_NOT_FOUND = 'transaction_not_found',\n    TABLE_ITEM_NOT_FOUND = 'table_item_not_found',\n    BLOCK_NOT_FOUND = 'block_not_found',\n    STATE_VALUE_NOT_FOUND = 'state_value_not_found',\n    VERSION_PRUNED = 'version_pruned',\n    BLOCK_PRUNED = 'block_pruned',\n    INVALID_INPUT = 'invalid_input',\n    INVALID_TRANSACTION_UPDATE = 'invalid_transaction_update',\n    SEQUENCE_NUMBER_TOO_OLD = 'sequence_number_too_old',\n    VM_ERROR = 'vm_error',\n    HEALTH_CHECK_FAILED = 'health_check_failed',\n    MEMPOOL_IS_FULL = 'mempool_is_full',\n    INTERNAL_ERROR = 'internal_error',\n    WEB_FRAMEWORK_ERROR = 'web_framework_error',\n    BCS_NOT_SUPPORTED = 'bcs_not_supported',\n    API_DISABLED = 'api_disabled',\n}\n","/* istanbul ignore file */\n/* tslint:disable */\n/* eslint-disable */\n\n/**\n * Move function visibility\n */\nexport enum MoveFunctionVisibility {\n    PRIVATE = 'private',\n    PUBLIC = 'public',\n    FRIEND = 'friend',\n}\n","/* istanbul ignore file */\n/* tslint:disable */\n/* eslint-disable */\n\nexport enum RoleType {\n    VALIDATOR = 'validator',\n    FULL_NODE = 'full_node',\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Deserializer, Hex, Serializable as BcsSerializableV2 } from '@aptos-labs/ts-sdk';\nimport { BCS } from 'aptos';\n\nexport type BcsSerializableV1 = { serialize(serializer: BCS.Serializer): void };\nexport type BcsDeserializableV1Class<T extends BcsSerializableV1> = {\n  deserialize(deserializer: BCS.Deserializer): T;\n};\nexport type BcsDeserializableV2Class<T extends BcsSerializableV2> = {\n  deserialize(deserializer: Deserializer): T;\n};\n\nfunction isBcsSerializableV1(value: any): value is BcsSerializableV1 {\n  return (value as BcsSerializableV1)?.serialize !== undefined;\n}\n\nfunction isBcsSerializableV2(value: any): value is BcsSerializableV2 {\n  return (\n    (value as BcsSerializableV2)?.serialize !== undefined &&\n    (value as BcsSerializableV2)?.bcsToBytes !== undefined &&\n    (value as BcsSerializableV2)?.bcsToHex !== undefined\n  );\n}\n\n/**\n * Check if a value is BCS serializable\n */\nexport function isBcsSerializable(value: any): value is BcsSerializableV1 | BcsSerializableV2 {\n  return isBcsSerializableV1(value) || isBcsSerializableV2(value);\n}\n\nexport function bcsSerialize(serializable: BcsSerializableV1 | BcsSerializableV2) {\n  if (isBcsSerializableV2(serializable)) {\n    return serializable.bcsToHex().toString();\n  }\n  const serializedValueBytes = BCS.bcsToBytes(serializable);\n  return Hex.fromHexInput(serializedValueBytes).toString();\n}\n\nexport function bcsDeserialize<T extends BcsSerializableV2>(\n  deserializableClass: BcsDeserializableV2Class<T>,\n  serializedValue: string,\n) {\n  const serializedValueBytes = Hex.fromHexString(serializedValue).toUint8Array();\n  const deserializer = new Deserializer(serializedValueBytes);\n  return deserializableClass.deserialize(deserializer);\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nexport class UnexpectedValueError extends Error {\n  constructor(message?: string) {\n    super(message);\n    this.name = 'UnexpectedValueError';\n    Object.setPrototypeOf(this, UnexpectedValueError.prototype);\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { Hex } from '@aptos-labs/ts-sdk';\nimport type { EntryFunctionPayloadResponse } from '@aptos-labs/ts-sdk';\nimport type { EntryFunctionJsonTransactionPayload, JsonTransactionPayload } from '../types';\nimport { UnexpectedValueError } from './error';\n\ninterface SerializedUint8ArrayArg {\n  type: 'Uint8Array';\n  value: string;\n}\n\nfunction isSerializedUint8Array(arg: any): arg is SerializedUint8ArrayArg {\n  return arg?.type === 'Uint8Array' && typeof arg?.value === 'string';\n}\n\nfunction serializeEntryFunctionArg(arg: any): any {\n  if (arg instanceof Uint8Array) {\n    return {\n      type: 'Uint8Array',\n      value: Hex.fromHexInput(arg).toString(),\n    };\n  }\n  if (Array.isArray(arg)) {\n    return arg.map(serializeEntryFunctionArg);\n  }\n  return arg;\n}\n\nfunction deserializeEntryFunctionArg(arg: any): any {\n  if (isSerializedUint8Array(arg)) {\n    return Hex.fromHexInput(arg.value).toUint8Array();\n  }\n  if (Array.isArray(arg)) {\n    return arg.map(deserializeEntryFunctionArg);\n  }\n  return arg;\n}\n\nfunction serializeEntryFunctionPayload(payload: EntryFunctionPayloadResponse): EntryFunctionJsonTransactionPayload {\n  const normalizedArgs = payload.arguments.map(serializeEntryFunctionArg);\n  return {\n    ...payload,\n    arguments: normalizedArgs,\n    type: 'entry_function_payload',\n  };\n}\n\nfunction deserializeEntryFunctionPayload(payload: EntryFunctionPayloadResponse): EntryFunctionJsonTransactionPayload {\n  const deserializedArgs = payload.arguments.map(deserializeEntryFunctionArg);\n  return {\n    ...payload,\n    arguments: deserializedArgs,\n    type: 'entry_function_payload',\n  };\n}\n\nexport function serializeJsonTransactionPayload(payload: JsonTransactionPayload): JsonTransactionPayload {\n  if (payload.type === 'entry_function_payload' || payload.type === undefined) {\n    return serializeEntryFunctionPayload(payload);\n  }\n  if (payload.type === 'multisig_payload') {\n    const innerPayload =\n      payload.transaction_payload !== undefined\n        ? serializeEntryFunctionPayload(payload.transaction_payload)\n        : undefined;\n    return { ...payload, transaction_payload: innerPayload };\n  }\n  throw new UnexpectedValueError();\n}\n\nexport function deserializeJsonTransactionPayload(payload: JsonTransactionPayload): JsonTransactionPayload {\n  if (payload.type === 'entry_function_payload' || payload.type === undefined) {\n    return deserializeEntryFunctionPayload(payload);\n  }\n  if (payload.type === 'multisig_payload') {\n    const innerPayload =\n      payload.transaction_payload !== undefined\n        ? deserializeEntryFunctionPayload(payload.transaction_payload)\n        : undefined;\n    return { ...payload, transaction_payload: innerPayload };\n  }\n  throw new UnexpectedValueError();\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  FeePayerRawTransaction,\n  MultiAgentRawTransaction,\n  RawTransaction,\n  RawTransactionWithData,\n} from '@aptos-labs/ts-sdk';\nimport { TxnBuilderTypes } from 'aptos';\nimport { bcsDeserialize, bcsSerialize } from './bcsSerialization';\nimport { UnexpectedValueError } from './error';\n\nexport type SerializableRawTransaction = RawTransaction | FeePayerRawTransaction | MultiAgentRawTransaction;\n\nexport type SerializableRawTransactionV1 =\n  | TxnBuilderTypes.RawTransaction\n  | TxnBuilderTypes.FeePayerRawTransaction\n  | TxnBuilderTypes.MultiAgentRawTransaction;\n\nexport interface SerializedSimpleRawTransaction {\n  type: 'raw_txn';\n  value: string;\n}\n\nexport interface SerializedFeePayerRawTransaction {\n  type: 'fee_payer_raw_txn';\n  value: string;\n}\n\nexport interface SerializedMultiAgentRawTransaction {\n  type: 'multi_agent_raw_txn';\n  value: string;\n}\n\nexport type SerializedRawTransaction =\n  | SerializedSimpleRawTransaction\n  | SerializedFeePayerRawTransaction\n  | SerializedMultiAgentRawTransaction;\n\nexport function serializeRawTransaction(\n  rawTxn: RawTransaction | TxnBuilderTypes.RawTransaction,\n): SerializedSimpleRawTransaction;\nexport function serializeRawTransaction(\n  rawTxn: FeePayerRawTransaction | TxnBuilderTypes.FeePayerRawTransaction,\n): SerializedFeePayerRawTransaction;\nexport function serializeRawTransaction(\n  rawTxn: MultiAgentRawTransaction | TxnBuilderTypes.MultiAgentRawTransaction,\n): SerializedMultiAgentRawTransaction;\nexport function serializeRawTransaction(\n  rawTxn: SerializableRawTransaction | SerializableRawTransactionV1,\n): SerializedRawTransaction;\n\nexport function serializeRawTransaction(\n  rawTxn: SerializableRawTransaction | SerializableRawTransactionV1,\n): SerializedRawTransaction {\n  const value = bcsSerialize(rawTxn);\n  if ('fee_payer_address' in rawTxn) {\n    return { type: 'fee_payer_raw_txn', value };\n  }\n  if ('secondary_signer_addresses' in rawTxn) {\n    return { type: 'multi_agent_raw_txn', value };\n  }\n  if ('chain_id' in rawTxn) {\n    return { type: 'raw_txn', value };\n  }\n  throw new UnexpectedValueError('Invalid raw transaction type');\n}\n\nexport function deserializeRawTransaction(serialized: SerializedSimpleRawTransaction): RawTransaction;\nexport function deserializeRawTransaction(serialized: SerializedFeePayerRawTransaction): FeePayerRawTransaction;\nexport function deserializeRawTransaction(serialized: SerializedMultiAgentRawTransaction): MultiAgentRawTransaction;\nexport function deserializeRawTransaction(serialized: SerializedRawTransaction): SerializableRawTransaction;\n\nexport function deserializeRawTransaction(serialized: SerializedRawTransaction): SerializableRawTransaction {\n  switch (serialized.type) {\n    case 'raw_txn':\n      return bcsDeserialize(RawTransaction, serialized.value);\n    case 'fee_payer_raw_txn':\n      return bcsDeserialize(RawTransactionWithData, serialized.value) as FeePayerRawTransaction;\n    case 'multi_agent_raw_txn':\n      return bcsDeserialize(RawTransactionWithData, serialized.value) as MultiAgentRawTransaction;\n    default:\n      throw new UnexpectedValueError('Invalid raw transaction type');\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { AccountAuthenticator, TransactionPayload } from '@aptos-labs/ts-sdk';\nimport type {\n  SignAndSubmitTransactionRequestArgs,\n  SignAndSubmitTransactionRequestV1Args,\n  SignAndSubmitTransactionWithFeePayerRawTxnRequestArgs,\n  SignAndSubmitTransactionWithPayloadRequestArgs,\n  SignAndSubmitTransactionWithRawTxnRequestArgs,\n} from '../types';\nimport { JsonTransactionPayload, TransactionOptions } from '../types';\nimport { bcsDeserialize, bcsSerialize, isBcsSerializable } from './bcsSerialization';\n\nimport { UnexpectedValueError } from './error';\nimport { deserializeJsonTransactionPayload, serializeJsonTransactionPayload } from './jsonPayload';\nimport {\n  deserializeRawTransaction,\n  type SerializedFeePayerRawTransaction,\n  type SerializedSimpleRawTransaction,\n  serializeRawTransaction,\n} from './rawTxn';\n\nexport interface SerializedSignAndSubmitTransactionWithPayloadRequestArgs {\n  options?: TransactionOptions;\n  payload: JsonTransactionPayload | string;\n}\n\nexport interface SerializedSignAndSubmitTransactionWithRawTxnRequestArgs {\n  rawTxn: SerializedSimpleRawTransaction;\n}\n\nexport interface SerializedSignAndSubmitTransactionWithFeePayerRawTxnRequestArgs {\n  feePayerAuthenticator: string;\n  rawTxn: SerializedFeePayerRawTransaction;\n}\n\nexport type SerializedSignAndSubmitTransactionRequestArgs =\n  | SerializedSignAndSubmitTransactionWithPayloadRequestArgs\n  | SerializedSignAndSubmitTransactionWithRawTxnRequestArgs\n  | SerializedSignAndSubmitTransactionWithFeePayerRawTxnRequestArgs;\n\nexport function serializeSignAndSubmitTransactionRequestArgs(\n  args: SignAndSubmitTransactionRequestArgs | SignAndSubmitTransactionRequestV1Args,\n): SerializedSignAndSubmitTransactionRequestArgs {\n  if ('payload' in args) {\n    const serializedPayload = isBcsSerializable(args.payload)\n      ? bcsSerialize(args.payload)\n      : serializeJsonTransactionPayload(args.payload);\n    return { options: args.options, payload: serializedPayload };\n  }\n  if ('feePayerAuthenticator' in args) {\n    return {\n      feePayerAuthenticator: bcsSerialize(args.feePayerAuthenticator),\n      rawTxn: serializeRawTransaction(args.rawTxn),\n    };\n  }\n  if ('rawTxn' in args) {\n    return { rawTxn: serializeRawTransaction(args.rawTxn) };\n  }\n  throw new UnexpectedValueError();\n}\n\nexport function deserializeSignAndSubmitTransactionRequestArgs(\n  args: SerializedSignAndSubmitTransactionWithPayloadRequestArgs,\n): SignAndSubmitTransactionWithPayloadRequestArgs;\nexport function deserializeSignAndSubmitTransactionRequestArgs(\n  args: SerializedSignAndSubmitTransactionWithRawTxnRequestArgs,\n): SignAndSubmitTransactionWithRawTxnRequestArgs;\nexport function deserializeSignAndSubmitTransactionRequestArgs(\n  args: SerializedSignAndSubmitTransactionWithFeePayerRawTxnRequestArgs,\n): SignAndSubmitTransactionWithFeePayerRawTxnRequestArgs;\nexport function deserializeSignAndSubmitTransactionRequestArgs(\n  args: SerializedSignAndSubmitTransactionRequestArgs,\n): SignAndSubmitTransactionRequestArgs;\n\nexport function deserializeSignAndSubmitTransactionRequestArgs(\n  args: SerializedSignAndSubmitTransactionRequestArgs,\n): SignAndSubmitTransactionRequestArgs {\n  if ('payload' in args) {\n    const payload =\n      typeof args.payload === 'string'\n        ? bcsDeserialize(TransactionPayload, args.payload)\n        : deserializeJsonTransactionPayload(args.payload);\n    return { options: args.options, payload };\n  }\n  if ('feePayerAuthenticator' in args) {\n    const deserializedRawTxn = deserializeRawTransaction(args.rawTxn);\n    const feePayerAuthenticator = bcsDeserialize(AccountAuthenticator, args.feePayerAuthenticator);\n    return { feePayerAuthenticator, rawTxn: deserializedRawTxn };\n  }\n  if ('rawTxn' in args) {\n    const deserializedRawTxn = deserializeRawTransaction(args.rawTxn);\n    return { rawTxn: deserializedRawTxn };\n  }\n  throw new UnexpectedValueError();\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { TransactionPayload } from '@aptos-labs/ts-sdk';\nimport type {\n  JsonTransactionPayload,\n  SignTransactionRequestArgs,\n  SignTransactionRequestV1Args,\n  SignTransactionWithPayloadRequestArgs,\n  SignTransactionWithRawTxnRequestArgs,\n  TransactionOptions,\n} from '../types';\nimport { bcsDeserialize, bcsSerialize, isBcsSerializable } from './bcsSerialization';\nimport { UnexpectedValueError } from './error';\nimport { deserializeJsonTransactionPayload, serializeJsonTransactionPayload } from './jsonPayload';\nimport type { SerializedRawTransaction } from './rawTxn';\nimport { deserializeRawTransaction, serializeRawTransaction } from './rawTxn';\n\nexport interface SerializedSignTransactionWithPayloadRequestArgs {\n  options?: TransactionOptions;\n  payload: JsonTransactionPayload | string;\n}\n\nexport interface SerializedSignTransactionWithRawTxnRequestArgs {\n  rawTxn: SerializedRawTransaction;\n}\n\nexport type SerializedSignTransactionRequestArgs =\n  | SerializedSignTransactionWithPayloadRequestArgs\n  | SerializedSignTransactionWithRawTxnRequestArgs;\n\nexport function serializeSignTransactionRequestArgs(\n  args: SignTransactionRequestArgs | SignTransactionRequestV1Args,\n): SerializedSignTransactionRequestArgs {\n  if ('payload' in args) {\n    const serializedPayload = isBcsSerializable(args.payload)\n      ? bcsSerialize(args.payload)\n      : serializeJsonTransactionPayload(args.payload);\n    return { options: args.options, payload: serializedPayload };\n  }\n  if ('rawTxn' in args) {\n    const serializedRawTxn = serializeRawTransaction(args.rawTxn);\n    return { rawTxn: serializedRawTxn };\n  }\n  throw new UnexpectedValueError();\n}\n\nexport function deserializeSignTransactionRequestArgs(\n  args: SerializedSignTransactionWithPayloadRequestArgs,\n): SignTransactionWithPayloadRequestArgs;\nexport function deserializeSignTransactionRequestArgs(\n  args: SerializedSignTransactionWithRawTxnRequestArgs,\n): SignTransactionWithRawTxnRequestArgs;\nexport function deserializeSignTransactionRequestArgs(\n  args: SerializedSignTransactionRequestArgs,\n): SignTransactionRequestArgs;\n\nexport function deserializeSignTransactionRequestArgs(\n  args: SerializedSignTransactionRequestArgs,\n): SignTransactionRequestArgs {\n  if ('payload' in args) {\n    const payload =\n      typeof args.payload === 'string'\n        ? bcsDeserialize(TransactionPayload, args.payload)\n        : deserializeJsonTransactionPayload(args.payload);\n    return { options: args.options, payload };\n  }\n  if ('rawTxn' in args) {\n    const deserializedRawTxn = deserializeRawTransaction(args.rawTxn);\n    return { rawTxn: deserializedRawTxn };\n  }\n  throw new UnexpectedValueError();\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { AccountAuthenticator, RawTransaction } from '@aptos-labs/ts-sdk';\nimport type { SignTransactionResponseArgs } from '../types';\nimport { bcsDeserialize, bcsSerialize } from './bcsSerialization';\n\nexport interface SerializedSignTransactionWithPayloadResponseArgs {\n  accountAuthenticator: string;\n  rawTxn: string;\n}\n\nexport interface SerializedSignTransactionWithRawTxnResponseArgs {\n  accountAuthenticator: string;\n}\n\nexport type SerializedSignTransactionResponseArgs =\n  | SerializedSignTransactionWithPayloadResponseArgs\n  | SerializedSignTransactionWithRawTxnResponseArgs;\n\nexport function serializeSignTransactionResponseArgs(\n  args: SignTransactionResponseArgs,\n): SerializedSignTransactionResponseArgs {\n  const accountAuthenticator = bcsSerialize(args.accountAuthenticator);\n  if ('rawTxn' in args) {\n    const rawTxn = bcsSerialize(args.rawTxn);\n    return { accountAuthenticator, rawTxn };\n  }\n  return { accountAuthenticator };\n}\n\nexport function deserializeSignTransactionResponseArgs(\n  args: SerializedSignTransactionResponseArgs,\n): SignTransactionResponseArgs {\n  const accountAuthenticator = bcsDeserialize(AccountAuthenticator, args.accountAuthenticator);\n  if ('rawTxn' in args) {\n    const rawTxn = bcsDeserialize(RawTransaction, args.rawTxn);\n    return { accountAuthenticator, rawTxn };\n  }\n  return { accountAuthenticator };\n}\n","'use strict';\n\nexport default function bind(fn, thisArg) {\n  return function wrap() {\n    return fn.apply(thisArg, arguments);\n  };\n}\n","'use strict';\n\nimport bind from './helpers/bind.js';\n\n// utils is a library of generic helper functions non-specific to axios\n\nconst {toString} = Object.prototype;\nconst {getPrototypeOf} = Object;\nconst {iterator, toStringTag} = Symbol;\n\nconst kindOf = (cache => thing => {\n    const str = toString.call(thing);\n    return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());\n})(Object.create(null));\n\nconst kindOfTest = (type) => {\n  type = type.toLowerCase();\n  return (thing) => kindOf(thing) === type\n}\n\nconst typeOfTest = type => thing => typeof thing === type;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n *\n * @returns {boolean} True if value is an Array, otherwise false\n */\nconst {isArray} = Array;\n\n/**\n * Determine if a value is undefined\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nconst isUndefined = typeOfTest('undefined');\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && isFunction(val.constructor.isBuffer) && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nconst isArrayBuffer = kindOfTest('ArrayBuffer');\n\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  let result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (isArrayBuffer(val.buffer));\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a String, otherwise false\n */\nconst isString = typeOfTest('string');\n\n/**\n * Determine if a value is a Function\n *\n * @param {*} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nconst isFunction = typeOfTest('function');\n\n/**\n * Determine if a value is a Number\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Number, otherwise false\n */\nconst isNumber = typeOfTest('number');\n\n/**\n * Determine if a value is an Object\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an Object, otherwise false\n */\nconst isObject = (thing) => thing !== null && typeof thing === 'object';\n\n/**\n * Determine if a value is a Boolean\n *\n * @param {*} thing The value to test\n * @returns {boolean} True if value is a Boolean, otherwise false\n */\nconst isBoolean = thing => thing === true || thing === false;\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a plain Object, otherwise false\n */\nconst isPlainObject = (val) => {\n  if (kindOf(val) !== 'object') {\n    return false;\n  }\n\n  const prototype = getPrototypeOf(val);\n  return (prototype === null || prototype === Object.prototype || Object.getPrototypeOf(prototype) === null) && !(toStringTag in val) && !(iterator in val);\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Date, otherwise false\n */\nconst isDate = kindOfTest('Date');\n\n/**\n * Determine if a value is a File\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFile = kindOfTest('File');\n\n/**\n * Determine if a value is a Blob\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nconst isBlob = kindOfTest('Blob');\n\n/**\n * Determine if a value is a FileList\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFileList = kindOfTest('FileList');\n\n/**\n * Determine if a value is a Stream\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nconst isStream = (val) => isObject(val) && isFunction(val.pipe);\n\n/**\n * Determine if a value is a FormData\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nconst isFormData = (thing) => {\n  let kind;\n  return thing && (\n    (typeof FormData === 'function' && thing instanceof FormData) || (\n      isFunction(thing.append) && (\n        (kind = kindOf(thing)) === 'formdata' ||\n        // detect form-data instance\n        (kind === 'object' && isFunction(thing.toString) && thing.toString() === '[object FormData]')\n      )\n    )\n  )\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nconst isURLSearchParams = kindOfTest('URLSearchParams');\n\nconst [isReadableStream, isRequest, isResponse, isHeaders] = ['ReadableStream', 'Request', 'Response', 'Headers'].map(kindOfTest);\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n *\n * @returns {String} The String freed of excess whitespace\n */\nconst trim = (str) => str.trim ?\n  str.trim() : str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n *\n * @param {Boolean} [allOwnKeys = false]\n * @returns {any}\n */\nfunction forEach(obj, fn, {allOwnKeys = false} = {}) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  let i;\n  let l;\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    const keys = allOwnKeys ? Object.getOwnPropertyNames(obj) : Object.keys(obj);\n    const len = keys.length;\n    let key;\n\n    for (i = 0; i < len; i++) {\n      key = keys[i];\n      fn.call(null, obj[key], key, obj);\n    }\n  }\n}\n\nfunction findKey(obj, key) {\n  key = key.toLowerCase();\n  const keys = Object.keys(obj);\n  let i = keys.length;\n  let _key;\n  while (i-- > 0) {\n    _key = keys[i];\n    if (key === _key.toLowerCase()) {\n      return _key;\n    }\n  }\n  return null;\n}\n\nconst _global = (() => {\n  /*eslint no-undef:0*/\n  if (typeof globalThis !== \"undefined\") return globalThis;\n  return typeof self !== \"undefined\" ? self : (typeof window !== 'undefined' ? window : global)\n})();\n\nconst isContextDefined = (context) => !isUndefined(context) && context !== _global;\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n *\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  const {caseless} = isContextDefined(this) && this || {};\n  const result = {};\n  const assignValue = (val, key) => {\n    const targetKey = caseless && findKey(result, key) || key;\n    if (isPlainObject(result[targetKey]) && isPlainObject(val)) {\n      result[targetKey] = merge(result[targetKey], val);\n    } else if (isPlainObject(val)) {\n      result[targetKey] = merge({}, val);\n    } else if (isArray(val)) {\n      result[targetKey] = val.slice();\n    } else {\n      result[targetKey] = val;\n    }\n  }\n\n  for (let i = 0, l = arguments.length; i < l; i++) {\n    arguments[i] && forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n *\n * @param {Boolean} [allOwnKeys]\n * @returns {Object} The resulting value of object a\n */\nconst extend = (a, b, thisArg, {allOwnKeys}= {}) => {\n  forEach(b, (val, key) => {\n    if (thisArg && isFunction(val)) {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  }, {allOwnKeys});\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n *\n * @returns {string} content value without BOM\n */\nconst stripBOM = (content) => {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\n/**\n * Inherit the prototype methods from one constructor into another\n * @param {function} constructor\n * @param {function} superConstructor\n * @param {object} [props]\n * @param {object} [descriptors]\n *\n * @returns {void}\n */\nconst inherits = (constructor, superConstructor, props, descriptors) => {\n  constructor.prototype = Object.create(superConstructor.prototype, descriptors);\n  constructor.prototype.constructor = constructor;\n  Object.defineProperty(constructor, 'super', {\n    value: superConstructor.prototype\n  });\n  props && Object.assign(constructor.prototype, props);\n}\n\n/**\n * Resolve object with deep prototype chain to a flat object\n * @param {Object} sourceObj source object\n * @param {Object} [destObj]\n * @param {Function|Boolean} [filter]\n * @param {Function} [propFilter]\n *\n * @returns {Object}\n */\nconst toFlatObject = (sourceObj, destObj, filter, propFilter) => {\n  let props;\n  let i;\n  let prop;\n  const merged = {};\n\n  destObj = destObj || {};\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  if (sourceObj == null) return destObj;\n\n  do {\n    props = Object.getOwnPropertyNames(sourceObj);\n    i = props.length;\n    while (i-- > 0) {\n      prop = props[i];\n      if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {\n        destObj[prop] = sourceObj[prop];\n        merged[prop] = true;\n      }\n    }\n    sourceObj = filter !== false && getPrototypeOf(sourceObj);\n  } while (sourceObj && (!filter || filter(sourceObj, destObj)) && sourceObj !== Object.prototype);\n\n  return destObj;\n}\n\n/**\n * Determines whether a string ends with the characters of a specified string\n *\n * @param {String} str\n * @param {String} searchString\n * @param {Number} [position= 0]\n *\n * @returns {boolean}\n */\nconst endsWith = (str, searchString, position) => {\n  str = String(str);\n  if (position === undefined || position > str.length) {\n    position = str.length;\n  }\n  position -= searchString.length;\n  const lastIndex = str.indexOf(searchString, position);\n  return lastIndex !== -1 && lastIndex === position;\n}\n\n\n/**\n * Returns new array from array like object or null if failed\n *\n * @param {*} [thing]\n *\n * @returns {?Array}\n */\nconst toArray = (thing) => {\n  if (!thing) return null;\n  if (isArray(thing)) return thing;\n  let i = thing.length;\n  if (!isNumber(i)) return null;\n  const arr = new Array(i);\n  while (i-- > 0) {\n    arr[i] = thing[i];\n  }\n  return arr;\n}\n\n/**\n * Checking if the Uint8Array exists and if it does, it returns a function that checks if the\n * thing passed in is an instance of Uint8Array\n *\n * @param {TypedArray}\n *\n * @returns {Array}\n */\n// eslint-disable-next-line func-names\nconst isTypedArray = (TypedArray => {\n  // eslint-disable-next-line func-names\n  return thing => {\n    return TypedArray && thing instanceof TypedArray;\n  };\n})(typeof Uint8Array !== 'undefined' && getPrototypeOf(Uint8Array));\n\n/**\n * For each entry in the object, call the function with the key and value.\n *\n * @param {Object<any, any>} obj - The object to iterate over.\n * @param {Function} fn - The function to call for each entry.\n *\n * @returns {void}\n */\nconst forEachEntry = (obj, fn) => {\n  const generator = obj && obj[iterator];\n\n  const _iterator = generator.call(obj);\n\n  let result;\n\n  while ((result = _iterator.next()) && !result.done) {\n    const pair = result.value;\n    fn.call(obj, pair[0], pair[1]);\n  }\n}\n\n/**\n * It takes a regular expression and a string, and returns an array of all the matches\n *\n * @param {string} regExp - The regular expression to match against.\n * @param {string} str - The string to search.\n *\n * @returns {Array<boolean>}\n */\nconst matchAll = (regExp, str) => {\n  let matches;\n  const arr = [];\n\n  while ((matches = regExp.exec(str)) !== null) {\n    arr.push(matches);\n  }\n\n  return arr;\n}\n\n/* Checking if the kindOfTest function returns true when passed an HTMLFormElement. */\nconst isHTMLForm = kindOfTest('HTMLFormElement');\n\nconst toCamelCase = str => {\n  return str.toLowerCase().replace(/[-_\\s]([a-z\\d])(\\w*)/g,\n    function replacer(m, p1, p2) {\n      return p1.toUpperCase() + p2;\n    }\n  );\n};\n\n/* Creating a function that will check if an object has a property. */\nconst hasOwnProperty = (({hasOwnProperty}) => (obj, prop) => hasOwnProperty.call(obj, prop))(Object.prototype);\n\n/**\n * Determine if a value is a RegExp object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a RegExp object, otherwise false\n */\nconst isRegExp = kindOfTest('RegExp');\n\nconst reduceDescriptors = (obj, reducer) => {\n  const descriptors = Object.getOwnPropertyDescriptors(obj);\n  const reducedDescriptors = {};\n\n  forEach(descriptors, (descriptor, name) => {\n    let ret;\n    if ((ret = reducer(descriptor, name, obj)) !== false) {\n      reducedDescriptors[name] = ret || descriptor;\n    }\n  });\n\n  Object.defineProperties(obj, reducedDescriptors);\n}\n\n/**\n * Makes all methods read-only\n * @param {Object} obj\n */\n\nconst freezeMethods = (obj) => {\n  reduceDescriptors(obj, (descriptor, name) => {\n    // skip restricted props in strict mode\n    if (isFunction(obj) && ['arguments', 'caller', 'callee'].indexOf(name) !== -1) {\n      return false;\n    }\n\n    const value = obj[name];\n\n    if (!isFunction(value)) return;\n\n    descriptor.enumerable = false;\n\n    if ('writable' in descriptor) {\n      descriptor.writable = false;\n      return;\n    }\n\n    if (!descriptor.set) {\n      descriptor.set = () => {\n        throw Error('Can not rewrite read-only method \\'' + name + '\\'');\n      };\n    }\n  });\n}\n\nconst toObjectSet = (arrayOrString, delimiter) => {\n  const obj = {};\n\n  const define = (arr) => {\n    arr.forEach(value => {\n      obj[value] = true;\n    });\n  }\n\n  isArray(arrayOrString) ? define(arrayOrString) : define(String(arrayOrString).split(delimiter));\n\n  return obj;\n}\n\nconst noop = () => {}\n\nconst toFiniteNumber = (value, defaultValue) => {\n  return value != null && Number.isFinite(value = +value) ? value : defaultValue;\n}\n\n/**\n * If the thing is a FormData object, return true, otherwise return false.\n *\n * @param {unknown} thing - The thing to check.\n *\n * @returns {boolean}\n */\nfunction isSpecCompliantForm(thing) {\n  return !!(thing && isFunction(thing.append) && thing[toStringTag] === 'FormData' && thing[iterator]);\n}\n\nconst toJSONObject = (obj) => {\n  const stack = new Array(10);\n\n  const visit = (source, i) => {\n\n    if (isObject(source)) {\n      if (stack.indexOf(source) >= 0) {\n        return;\n      }\n\n      if(!('toJSON' in source)) {\n        stack[i] = source;\n        const target = isArray(source) ? [] : {};\n\n        forEach(source, (value, key) => {\n          const reducedValue = visit(value, i + 1);\n          !isUndefined(reducedValue) && (target[key] = reducedValue);\n        });\n\n        stack[i] = undefined;\n\n        return target;\n      }\n    }\n\n    return source;\n  }\n\n  return visit(obj, 0);\n}\n\nconst isAsyncFn = kindOfTest('AsyncFunction');\n\nconst isThenable = (thing) =>\n  thing && (isObject(thing) || isFunction(thing)) && isFunction(thing.then) && isFunction(thing.catch);\n\n// original code\n// https://github.com/DigitalBrainJS/AxiosPromise/blob/16deab13710ec09779922131f3fa5954320f83ab/lib/utils.js#L11-L34\n\nconst _setImmediate = ((setImmediateSupported, postMessageSupported) => {\n  if (setImmediateSupported) {\n    return setImmediate;\n  }\n\n  return postMessageSupported ? ((token, callbacks) => {\n    _global.addEventListener(\"message\", ({source, data}) => {\n      if (source === _global && data === token) {\n        callbacks.length && callbacks.shift()();\n      }\n    }, false);\n\n    return (cb) => {\n      callbacks.push(cb);\n      _global.postMessage(token, \"*\");\n    }\n  })(`axios@${Math.random()}`, []) : (cb) => setTimeout(cb);\n})(\n  typeof setImmediate === 'function',\n  isFunction(_global.postMessage)\n);\n\nconst asap = typeof queueMicrotask !== 'undefined' ?\n  queueMicrotask.bind(_global) : ( typeof process !== 'undefined' && process.nextTick || _setImmediate);\n\n// *********************\n\n\nconst isIterable = (thing) => thing != null && isFunction(thing[iterator]);\n\n\nexport default {\n  isArray,\n  isArrayBuffer,\n  isBuffer,\n  isFormData,\n  isArrayBufferView,\n  isString,\n  isNumber,\n  isBoolean,\n  isObject,\n  isPlainObject,\n  isReadableStream,\n  isRequest,\n  isResponse,\n  isHeaders,\n  isUndefined,\n  isDate,\n  isFile,\n  isBlob,\n  isRegExp,\n  isFunction,\n  isStream,\n  isURLSearchParams,\n  isTypedArray,\n  isFileList,\n  forEach,\n  merge,\n  extend,\n  trim,\n  stripBOM,\n  inherits,\n  toFlatObject,\n  kindOf,\n  kindOfTest,\n  endsWith,\n  toArray,\n  forEachEntry,\n  matchAll,\n  isHTMLForm,\n  hasOwnProperty,\n  hasOwnProp: hasOwnProperty, // an alias to avoid ESLint no-prototype-builtins detection\n  reduceDescriptors,\n  freezeMethods,\n  toObjectSet,\n  toCamelCase,\n  noop,\n  toFiniteNumber,\n  findKey,\n  global: _global,\n  isContextDefined,\n  isSpecCompliantForm,\n  toJSONObject,\n  isAsyncFn,\n  isThenable,\n  setImmediate: _setImmediate,\n  asap,\n  isIterable\n};\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [config] The config.\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n *\n * @returns {Error} The created error.\n */\nfunction AxiosError(message, code, config, request, response) {\n  Error.call(this);\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    this.stack = (new Error()).stack;\n  }\n\n  this.message = message;\n  this.name = 'AxiosError';\n  code && (this.code = code);\n  config && (this.config = config);\n  request && (this.request = request);\n  if (response) {\n    this.response = response;\n    this.status = response.status ? response.status : null;\n  }\n}\n\nutils.inherits(AxiosError, Error, {\n  toJSON: function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: utils.toJSONObject(this.config),\n      code: this.code,\n      status: this.status\n    };\n  }\n});\n\nconst prototype = AxiosError.prototype;\nconst descriptors = {};\n\n[\n  'ERR_BAD_OPTION_VALUE',\n  'ERR_BAD_OPTION',\n  'ECONNABORTED',\n  'ETIMEDOUT',\n  'ERR_NETWORK',\n  'ERR_FR_TOO_MANY_REDIRECTS',\n  'ERR_DEPRECATED',\n  'ERR_BAD_RESPONSE',\n  'ERR_BAD_REQUEST',\n  'ERR_CANCELED',\n  'ERR_NOT_SUPPORT',\n  'ERR_INVALID_URL'\n// eslint-disable-next-line func-names\n].forEach(code => {\n  descriptors[code] = {value: code};\n});\n\nObject.defineProperties(AxiosError, descriptors);\nObject.defineProperty(prototype, 'isAxiosError', {value: true});\n\n// eslint-disable-next-line func-names\nAxiosError.from = (error, code, config, request, response, customProps) => {\n  const axiosError = Object.create(prototype);\n\n  utils.toFlatObject(error, axiosError, function filter(obj) {\n    return obj !== Error.prototype;\n  }, prop => {\n    return prop !== 'isAxiosError';\n  });\n\n  AxiosError.call(axiosError, error.message, code, config, request, response);\n\n  axiosError.cause = error;\n\n  axiosError.name = error.name;\n\n  customProps && Object.assign(axiosError, customProps);\n\n  return axiosError;\n};\n\nexport default AxiosError;\n","// eslint-disable-next-line strict\nexport default null;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\n// temporary hotfix to avoid circular references until AxiosURLSearchParams is refactored\nimport PlatformFormData from '../platform/node/classes/FormData.js';\n\n/**\n * Determines if the given thing is a array or js object.\n *\n * @param {string} thing - The object or array to be visited.\n *\n * @returns {boolean}\n */\nfunction isVisitable(thing) {\n  return utils.isPlainObject(thing) || utils.isArray(thing);\n}\n\n/**\n * It removes the brackets from the end of a string\n *\n * @param {string} key - The key of the parameter.\n *\n * @returns {string} the key without the brackets.\n */\nfunction removeBrackets(key) {\n  return utils.endsWith(key, '[]') ? key.slice(0, -2) : key;\n}\n\n/**\n * It takes a path, a key, and a boolean, and returns a string\n *\n * @param {string} path - The path to the current key.\n * @param {string} key - The key of the current object being iterated over.\n * @param {string} dots - If true, the key will be rendered with dots instead of brackets.\n *\n * @returns {string} The path to the current key.\n */\nfunction renderKey(path, key, dots) {\n  if (!path) return key;\n  return path.concat(key).map(function each(token, i) {\n    // eslint-disable-next-line no-param-reassign\n    token = removeBrackets(token);\n    return !dots && i ? '[' + token + ']' : token;\n  }).join(dots ? '.' : '');\n}\n\n/**\n * If the array is an array and none of its elements are visitable, then it's a flat array.\n *\n * @param {Array<any>} arr - The array to check\n *\n * @returns {boolean}\n */\nfunction isFlatArray(arr) {\n  return utils.isArray(arr) && !arr.some(isVisitable);\n}\n\nconst predicates = utils.toFlatObject(utils, {}, null, function filter(prop) {\n  return /^is[A-Z]/.test(prop);\n});\n\n/**\n * Convert a data object to FormData\n *\n * @param {Object} obj\n * @param {?Object} [formData]\n * @param {?Object} [options]\n * @param {Function} [options.visitor]\n * @param {Boolean} [options.metaTokens = true]\n * @param {Boolean} [options.dots = false]\n * @param {?Boolean} [options.indexes = false]\n *\n * @returns {Object}\n **/\n\n/**\n * It converts an object into a FormData object\n *\n * @param {Object<any, any>} obj - The object to convert to form data.\n * @param {string} formData - The FormData object to append to.\n * @param {Object<string, any>} options\n *\n * @returns\n */\nfunction toFormData(obj, formData, options) {\n  if (!utils.isObject(obj)) {\n    throw new TypeError('target must be an object');\n  }\n\n  // eslint-disable-next-line no-param-reassign\n  formData = formData || new (PlatformFormData || FormData)();\n\n  // eslint-disable-next-line no-param-reassign\n  options = utils.toFlatObject(options, {\n    metaTokens: true,\n    dots: false,\n    indexes: false\n  }, false, function defined(option, source) {\n    // eslint-disable-next-line no-eq-null,eqeqeq\n    return !utils.isUndefined(source[option]);\n  });\n\n  const metaTokens = options.metaTokens;\n  // eslint-disable-next-line no-use-before-define\n  const visitor = options.visitor || defaultVisitor;\n  const dots = options.dots;\n  const indexes = options.indexes;\n  const _Blob = options.Blob || typeof Blob !== 'undefined' && Blob;\n  const useBlob = _Blob && utils.isSpecCompliantForm(formData);\n\n  if (!utils.isFunction(visitor)) {\n    throw new TypeError('visitor must be a function');\n  }\n\n  function convertValue(value) {\n    if (value === null) return '';\n\n    if (utils.isDate(value)) {\n      return value.toISOString();\n    }\n\n    if (!useBlob && utils.isBlob(value)) {\n      throw new AxiosError('Blob is not supported. Use a Buffer instead.');\n    }\n\n    if (utils.isArrayBuffer(value) || utils.isTypedArray(value)) {\n      return useBlob && typeof Blob === 'function' ? new Blob([value]) : Buffer.from(value);\n    }\n\n    return value;\n  }\n\n  /**\n   * Default visitor.\n   *\n   * @param {*} value\n   * @param {String|Number} key\n   * @param {Array<String|Number>} path\n   * @this {FormData}\n   *\n   * @returns {boolean} return true to visit the each prop of the value recursively\n   */\n  function defaultVisitor(value, key, path) {\n    let arr = value;\n\n    if (value && !path && typeof value === 'object') {\n      if (utils.endsWith(key, '{}')) {\n        // eslint-disable-next-line no-param-reassign\n        key = metaTokens ? key : key.slice(0, -2);\n        // eslint-disable-next-line no-param-reassign\n        value = JSON.stringify(value);\n      } else if (\n        (utils.isArray(value) && isFlatArray(value)) ||\n        ((utils.isFileList(value) || utils.endsWith(key, '[]')) && (arr = utils.toArray(value))\n        )) {\n        // eslint-disable-next-line no-param-reassign\n        key = removeBrackets(key);\n\n        arr.forEach(function each(el, index) {\n          !(utils.isUndefined(el) || el === null) && formData.append(\n            // eslint-disable-next-line no-nested-ternary\n            indexes === true ? renderKey([key], index, dots) : (indexes === null ? key : key + '[]'),\n            convertValue(el)\n          );\n        });\n        return false;\n      }\n    }\n\n    if (isVisitable(value)) {\n      return true;\n    }\n\n    formData.append(renderKey(path, key, dots), convertValue(value));\n\n    return false;\n  }\n\n  const stack = [];\n\n  const exposedHelpers = Object.assign(predicates, {\n    defaultVisitor,\n    convertValue,\n    isVisitable\n  });\n\n  function build(value, path) {\n    if (utils.isUndefined(value)) return;\n\n    if (stack.indexOf(value) !== -1) {\n      throw Error('Circular reference detected in ' + path.join('.'));\n    }\n\n    stack.push(value);\n\n    utils.forEach(value, function each(el, key) {\n      const result = !(utils.isUndefined(el) || el === null) && visitor.call(\n        formData, el, utils.isString(key) ? key.trim() : key, path, exposedHelpers\n      );\n\n      if (result === true) {\n        build(el, path ? path.concat(key) : [key]);\n      }\n    });\n\n    stack.pop();\n  }\n\n  if (!utils.isObject(obj)) {\n    throw new TypeError('data must be an object');\n  }\n\n  build(obj);\n\n  return formData;\n}\n\nexport default toFormData;\n","'use strict';\n\nimport toFormData from './toFormData.js';\n\n/**\n * It encodes a string by replacing all characters that are not in the unreserved set with\n * their percent-encoded equivalents\n *\n * @param {string} str - The string to encode.\n *\n * @returns {string} The encoded string.\n */\nfunction encode(str) {\n  const charMap = {\n    '!': '%21',\n    \"'\": '%27',\n    '(': '%28',\n    ')': '%29',\n    '~': '%7E',\n    '%20': '+',\n    '%00': '\\x00'\n  };\n  return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g, function replacer(match) {\n    return charMap[match];\n  });\n}\n\n/**\n * It takes a params object and converts it to a FormData object\n *\n * @param {Object<string, any>} params - The parameters to be converted to a FormData object.\n * @param {Object<string, any>} options - The options object passed to the Axios constructor.\n *\n * @returns {void}\n */\nfunction AxiosURLSearchParams(params, options) {\n  this._pairs = [];\n\n  params && toFormData(params, this, options);\n}\n\nconst prototype = AxiosURLSearchParams.prototype;\n\nprototype.append = function append(name, value) {\n  this._pairs.push([name, value]);\n};\n\nprototype.toString = function toString(encoder) {\n  const _encode = encoder ? function(value) {\n    return encoder.call(this, value, encode);\n  } : encode;\n\n  return this._pairs.map(function each(pair) {\n    return _encode(pair[0]) + '=' + _encode(pair[1]);\n  }, '').join('&');\n};\n\nexport default AxiosURLSearchParams;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosURLSearchParams from '../helpers/AxiosURLSearchParams.js';\n\n/**\n * It replaces all instances of the characters `:`, `$`, `,`, `+`, `[`, and `]` with their\n * URI encoded counterparts\n *\n * @param {string} val The value to be encoded.\n *\n * @returns {string} The encoded value.\n */\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @param {?(object|Function)} options\n *\n * @returns {string} The formatted url\n */\nexport default function buildURL(url, params, options) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n  \n  const _encode = options && options.encode || encode;\n\n  if (utils.isFunction(options)) {\n    options = {\n      serialize: options\n    };\n  } \n\n  const serializeFn = options && options.serialize;\n\n  let serializedParams;\n\n  if (serializeFn) {\n    serializedParams = serializeFn(params, options);\n  } else {\n    serializedParams = utils.isURLSearchParams(params) ?\n      params.toString() :\n      new AxiosURLSearchParams(params, options).toString(_encode);\n  }\n\n  if (serializedParams) {\n    const hashmarkIndex = url.indexOf(\"#\");\n\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\nclass InterceptorManager {\n  constructor() {\n    this.handlers = [];\n  }\n\n  /**\n   * Add a new interceptor to the stack\n   *\n   * @param {Function} fulfilled The function to handle `then` for a `Promise`\n   * @param {Function} rejected The function to handle `reject` for a `Promise`\n   *\n   * @return {Number} An ID used to remove interceptor later\n   */\n  use(fulfilled, rejected, options) {\n    this.handlers.push({\n      fulfilled,\n      rejected,\n      synchronous: options ? options.synchronous : false,\n      runWhen: options ? options.runWhen : null\n    });\n    return this.handlers.length - 1;\n  }\n\n  /**\n   * Remove an interceptor from the stack\n   *\n   * @param {Number} id The ID that was returned by `use`\n   *\n   * @returns {Boolean} `true` if the interceptor was removed, `false` otherwise\n   */\n  eject(id) {\n    if (this.handlers[id]) {\n      this.handlers[id] = null;\n    }\n  }\n\n  /**\n   * Clear all interceptors from the stack\n   *\n   * @returns {void}\n   */\n  clear() {\n    if (this.handlers) {\n      this.handlers = [];\n    }\n  }\n\n  /**\n   * Iterate over all the registered interceptors\n   *\n   * This method is particularly useful for skipping over any\n   * interceptors that may have become `null` calling `eject`.\n   *\n   * @param {Function} fn The function to call for each interceptor\n   *\n   * @returns {void}\n   */\n  forEach(fn) {\n    utils.forEach(this.handlers, function forEachHandler(h) {\n      if (h !== null) {\n        fn(h);\n      }\n    });\n  }\n}\n\nexport default InterceptorManager;\n","'use strict';\n\nexport default {\n  silentJSONParsing: true,\n  forcedJSONParsing: true,\n  clarifyTimeoutError: false\n};\n","'use strict';\n\nimport AxiosURLSearchParams from '../../../helpers/AxiosURLSearchParams.js';\nexport default typeof URLSearchParams !== 'undefined' ? URLSearchParams : AxiosURLSearchParams;\n","'use strict';\n\nexport default typeof FormData !== 'undefined' ? FormData : null;\n","'use strict'\n\nexport default typeof Blob !== 'undefined' ? Blob : null\n","import URLSearchParams from './classes/URLSearchParams.js'\nimport FormData from './classes/FormData.js'\nimport Blob from './classes/Blob.js'\n\nexport default {\n  isBrowser: true,\n  classes: {\n    URLSearchParams,\n    FormData,\n    Blob\n  },\n  protocols: ['http', 'https', 'file', 'blob', 'url', 'data']\n};\n","const hasBrowserEnv = typeof window !== 'undefined' && typeof document !== 'undefined';\n\nconst _navigator = typeof navigator === 'object' && navigator || undefined;\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n *\n * @returns {boolean}\n */\nconst hasStandardBrowserEnv = hasBrowserEnv &&\n  (!_navigator || ['ReactNative', 'NativeScript', 'NS'].indexOf(_navigator.product) < 0);\n\n/**\n * Determine if we're running in a standard browser webWorker environment\n *\n * Although the `isStandardBrowserEnv` method indicates that\n * `allows axios to run in a web worker`, the WebWorker will still be\n * filtered out due to its judgment standard\n * `typeof window !== 'undefined' && typeof document !== 'undefined'`.\n * This leads to a problem when axios post `FormData` in webWorker\n */\nconst hasStandardBrowserWebWorkerEnv = (() => {\n  return (\n    typeof WorkerGlobalScope !== 'undefined' &&\n    // eslint-disable-next-line no-undef\n    self instanceof WorkerGlobalScope &&\n    typeof self.importScripts === 'function'\n  );\n})();\n\nconst origin = hasBrowserEnv && window.location.href || 'http://localhost';\n\nexport {\n  hasBrowserEnv,\n  hasStandardBrowserWebWorkerEnv,\n  hasStandardBrowserEnv,\n  _navigator as navigator,\n  origin\n}\n","import platform from './node/index.js';\nimport * as utils from './common/utils.js';\n\nexport default {\n  ...utils,\n  ...platform\n}\n","'use strict';\n\nimport utils from '../utils.js';\nimport toFormData from './toFormData.js';\nimport platform from '../platform/index.js';\n\nexport default function toURLEncodedForm(data, options) {\n  return toFormData(data, new platform.classes.URLSearchParams(), Object.assign({\n    visitor: function(value, key, path, helpers) {\n      if (platform.isNode && utils.isBuffer(value)) {\n        this.append(key, value.toString('base64'));\n        return false;\n      }\n\n      return helpers.defaultVisitor.apply(this, arguments);\n    }\n  }, options));\n}\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * It takes a string like `foo[x][y][z]` and returns an array like `['foo', 'x', 'y', 'z']\n *\n * @param {string} name - The name of the property to get.\n *\n * @returns An array of strings.\n */\nfunction parsePropPath(name) {\n  // foo[x][y][z]\n  // foo.x.y.z\n  // foo-x-y-z\n  // foo x y z\n  return utils.matchAll(/\\w+|\\[(\\w*)]/g, name).map(match => {\n    return match[0] === '[]' ? '' : match[1] || match[0];\n  });\n}\n\n/**\n * Convert an array to an object.\n *\n * @param {Array<any>} arr - The array to convert to an object.\n *\n * @returns An object with the same keys and values as the array.\n */\nfunction arrayToObject(arr) {\n  const obj = {};\n  const keys = Object.keys(arr);\n  let i;\n  const len = keys.length;\n  let key;\n  for (i = 0; i < len; i++) {\n    key = keys[i];\n    obj[key] = arr[key];\n  }\n  return obj;\n}\n\n/**\n * It takes a FormData object and returns a JavaScript object\n *\n * @param {string} formData The FormData object to convert to JSON.\n *\n * @returns {Object<string, any> | null} The converted object.\n */\nfunction formDataToJSON(formData) {\n  function buildPath(path, value, target, index) {\n    let name = path[index++];\n\n    if (name === '__proto__') return true;\n\n    const isNumericKey = Number.isFinite(+name);\n    const isLast = index >= path.length;\n    name = !name && utils.isArray(target) ? target.length : name;\n\n    if (isLast) {\n      if (utils.hasOwnProp(target, name)) {\n        target[name] = [target[name], value];\n      } else {\n        target[name] = value;\n      }\n\n      return !isNumericKey;\n    }\n\n    if (!target[name] || !utils.isObject(target[name])) {\n      target[name] = [];\n    }\n\n    const result = buildPath(path, value, target[name], index);\n\n    if (result && utils.isArray(target[name])) {\n      target[name] = arrayToObject(target[name]);\n    }\n\n    return !isNumericKey;\n  }\n\n  if (utils.isFormData(formData) && utils.isFunction(formData.entries)) {\n    const obj = {};\n\n    utils.forEachEntry(formData, (name, value) => {\n      buildPath(parsePropPath(name), value, obj, 0);\n    });\n\n    return obj;\n  }\n\n  return null;\n}\n\nexport default formDataToJSON;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\nimport transitionalDefaults from './transitional.js';\nimport toFormData from '../helpers/toFormData.js';\nimport toURLEncodedForm from '../helpers/toURLEncodedForm.js';\nimport platform from '../platform/index.js';\nimport formDataToJSON from '../helpers/formDataToJSON.js';\n\n/**\n * It takes a string, tries to parse it, and if it fails, it returns the stringified version\n * of the input\n *\n * @param {any} rawValue - The value to be stringified.\n * @param {Function} parser - A function that parses a string into a JavaScript object.\n * @param {Function} encoder - A function that takes a value and returns a string.\n *\n * @returns {string} A stringified version of the rawValue.\n */\nfunction stringifySafely(rawValue, parser, encoder) {\n  if (utils.isString(rawValue)) {\n    try {\n      (parser || JSON.parse)(rawValue);\n      return utils.trim(rawValue);\n    } catch (e) {\n      if (e.name !== 'SyntaxError') {\n        throw e;\n      }\n    }\n  }\n\n  return (encoder || JSON.stringify)(rawValue);\n}\n\nconst defaults = {\n\n  transitional: transitionalDefaults,\n\n  adapter: ['xhr', 'http', 'fetch'],\n\n  transformRequest: [function transformRequest(data, headers) {\n    const contentType = headers.getContentType() || '';\n    const hasJSONContentType = contentType.indexOf('application/json') > -1;\n    const isObjectPayload = utils.isObject(data);\n\n    if (isObjectPayload && utils.isHTMLForm(data)) {\n      data = new FormData(data);\n    }\n\n    const isFormData = utils.isFormData(data);\n\n    if (isFormData) {\n      return hasJSONContentType ? JSON.stringify(formDataToJSON(data)) : data;\n    }\n\n    if (utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data) ||\n      utils.isReadableStream(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      headers.setContentType('application/x-www-form-urlencoded;charset=utf-8', false);\n      return data.toString();\n    }\n\n    let isFileList;\n\n    if (isObjectPayload) {\n      if (contentType.indexOf('application/x-www-form-urlencoded') > -1) {\n        return toURLEncodedForm(data, this.formSerializer).toString();\n      }\n\n      if ((isFileList = utils.isFileList(data)) || contentType.indexOf('multipart/form-data') > -1) {\n        const _FormData = this.env && this.env.FormData;\n\n        return toFormData(\n          isFileList ? {'files[]': data} : data,\n          _FormData && new _FormData(),\n          this.formSerializer\n        );\n      }\n    }\n\n    if (isObjectPayload || hasJSONContentType ) {\n      headers.setContentType('application/json', false);\n      return stringifySafely(data);\n    }\n\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    const transitional = this.transitional || defaults.transitional;\n    const forcedJSONParsing = transitional && transitional.forcedJSONParsing;\n    const JSONRequested = this.responseType === 'json';\n\n    if (utils.isResponse(data) || utils.isReadableStream(data)) {\n      return data;\n    }\n\n    if (data && utils.isString(data) && ((forcedJSONParsing && !this.responseType) || JSONRequested)) {\n      const silentJSONParsing = transitional && transitional.silentJSONParsing;\n      const strictJSONParsing = !silentJSONParsing && JSONRequested;\n\n      try {\n        return JSON.parse(data);\n      } catch (e) {\n        if (strictJSONParsing) {\n          if (e.name === 'SyntaxError') {\n            throw AxiosError.from(e, AxiosError.ERR_BAD_RESPONSE, this, null, this.response);\n          }\n          throw e;\n        }\n      }\n    }\n\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  env: {\n    FormData: platform.classes.FormData,\n    Blob: platform.classes.Blob\n  },\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  },\n\n  headers: {\n    common: {\n      'Accept': 'application/json, text/plain, */*',\n      'Content-Type': undefined\n    }\n  }\n};\n\nutils.forEach(['delete', 'get', 'head', 'post', 'put', 'patch'], (method) => {\n  defaults.headers[method] = {};\n});\n\nexport default defaults;\n","'use strict';\n\nimport utils from './../utils.js';\n\n// RawAxiosHeaders whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nconst ignoreDuplicateOf = utils.toObjectSet([\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n]);\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} rawHeaders Headers needing to be parsed\n *\n * @returns {Object} Headers parsed into an object\n */\nexport default rawHeaders => {\n  const parsed = {};\n  let key;\n  let val;\n  let i;\n\n  rawHeaders && rawHeaders.split('\\n').forEach(function parser(line) {\n    i = line.indexOf(':');\n    key = line.substring(0, i).trim().toLowerCase();\n    val = line.substring(i + 1).trim();\n\n    if (!key || (parsed[key] && ignoreDuplicateOf[key])) {\n      return;\n    }\n\n    if (key === 'set-cookie') {\n      if (parsed[key]) {\n        parsed[key].push(val);\n      } else {\n        parsed[key] = [val];\n      }\n    } else {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nimport utils from '../utils.js';\nimport parseHeaders from '../helpers/parseHeaders.js';\n\nconst $internals = Symbol('internals');\n\nfunction normalizeHeader(header) {\n  return header && String(header).trim().toLowerCase();\n}\n\nfunction normalizeValue(value) {\n  if (value === false || value == null) {\n    return value;\n  }\n\n  return utils.isArray(value) ? value.map(normalizeValue) : String(value);\n}\n\nfunction parseTokens(str) {\n  const tokens = Object.create(null);\n  const tokensRE = /([^\\s,;=]+)\\s*(?:=\\s*([^,;]+))?/g;\n  let match;\n\n  while ((match = tokensRE.exec(str))) {\n    tokens[match[1]] = match[2];\n  }\n\n  return tokens;\n}\n\nconst isValidHeaderName = (str) => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(str.trim());\n\nfunction matchHeaderValue(context, value, header, filter, isHeaderNameFilter) {\n  if (utils.isFunction(filter)) {\n    return filter.call(this, value, header);\n  }\n\n  if (isHeaderNameFilter) {\n    value = header;\n  }\n\n  if (!utils.isString(value)) return;\n\n  if (utils.isString(filter)) {\n    return value.indexOf(filter) !== -1;\n  }\n\n  if (utils.isRegExp(filter)) {\n    return filter.test(value);\n  }\n}\n\nfunction formatHeader(header) {\n  return header.trim()\n    .toLowerCase().replace(/([a-z\\d])(\\w*)/g, (w, char, str) => {\n      return char.toUpperCase() + str;\n    });\n}\n\nfunction buildAccessors(obj, header) {\n  const accessorName = utils.toCamelCase(' ' + header);\n\n  ['get', 'set', 'has'].forEach(methodName => {\n    Object.defineProperty(obj, methodName + accessorName, {\n      value: function(arg1, arg2, arg3) {\n        return this[methodName].call(this, header, arg1, arg2, arg3);\n      },\n      configurable: true\n    });\n  });\n}\n\nclass AxiosHeaders {\n  constructor(headers) {\n    headers && this.set(headers);\n  }\n\n  set(header, valueOrRewrite, rewrite) {\n    const self = this;\n\n    function setHeader(_value, _header, _rewrite) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!lHeader) {\n        throw new Error('header name must be a non-empty string');\n      }\n\n      const key = utils.findKey(self, lHeader);\n\n      if(!key || self[key] === undefined || _rewrite === true || (_rewrite === undefined && self[key] !== false)) {\n        self[key || _header] = normalizeValue(_value);\n      }\n    }\n\n    const setHeaders = (headers, _rewrite) =>\n      utils.forEach(headers, (_value, _header) => setHeader(_value, _header, _rewrite));\n\n    if (utils.isPlainObject(header) || header instanceof this.constructor) {\n      setHeaders(header, valueOrRewrite)\n    } else if(utils.isString(header) && (header = header.trim()) && !isValidHeaderName(header)) {\n      setHeaders(parseHeaders(header), valueOrRewrite);\n    } else if (utils.isObject(header) && utils.isIterable(header)) {\n      let obj = {}, dest, key;\n      for (const entry of header) {\n        if (!utils.isArray(entry)) {\n          throw TypeError('Object iterator must return a key-value pair');\n        }\n\n        obj[key = entry[0]] = (dest = obj[key]) ?\n          (utils.isArray(dest) ? [...dest, entry[1]] : [dest, entry[1]]) : entry[1];\n      }\n\n      setHeaders(obj, valueOrRewrite)\n    } else {\n      header != null && setHeader(valueOrRewrite, header, rewrite);\n    }\n\n    return this;\n  }\n\n  get(header, parser) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      if (key) {\n        const value = this[key];\n\n        if (!parser) {\n          return value;\n        }\n\n        if (parser === true) {\n          return parseTokens(value);\n        }\n\n        if (utils.isFunction(parser)) {\n          return parser.call(this, value, key);\n        }\n\n        if (utils.isRegExp(parser)) {\n          return parser.exec(value);\n        }\n\n        throw new TypeError('parser must be boolean|regexp|function');\n      }\n    }\n  }\n\n  has(header, matcher) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      return !!(key && this[key] !== undefined && (!matcher || matchHeaderValue(this, this[key], key, matcher)));\n    }\n\n    return false;\n  }\n\n  delete(header, matcher) {\n    const self = this;\n    let deleted = false;\n\n    function deleteHeader(_header) {\n      _header = normalizeHeader(_header);\n\n      if (_header) {\n        const key = utils.findKey(self, _header);\n\n        if (key && (!matcher || matchHeaderValue(self, self[key], key, matcher))) {\n          delete self[key];\n\n          deleted = true;\n        }\n      }\n    }\n\n    if (utils.isArray(header)) {\n      header.forEach(deleteHeader);\n    } else {\n      deleteHeader(header);\n    }\n\n    return deleted;\n  }\n\n  clear(matcher) {\n    const keys = Object.keys(this);\n    let i = keys.length;\n    let deleted = false;\n\n    while (i--) {\n      const key = keys[i];\n      if(!matcher || matchHeaderValue(this, this[key], key, matcher, true)) {\n        delete this[key];\n        deleted = true;\n      }\n    }\n\n    return deleted;\n  }\n\n  normalize(format) {\n    const self = this;\n    const headers = {};\n\n    utils.forEach(this, (value, header) => {\n      const key = utils.findKey(headers, header);\n\n      if (key) {\n        self[key] = normalizeValue(value);\n        delete self[header];\n        return;\n      }\n\n      const normalized = format ? formatHeader(header) : String(header).trim();\n\n      if (normalized !== header) {\n        delete self[header];\n      }\n\n      self[normalized] = normalizeValue(value);\n\n      headers[normalized] = true;\n    });\n\n    return this;\n  }\n\n  concat(...targets) {\n    return this.constructor.concat(this, ...targets);\n  }\n\n  toJSON(asStrings) {\n    const obj = Object.create(null);\n\n    utils.forEach(this, (value, header) => {\n      value != null && value !== false && (obj[header] = asStrings && utils.isArray(value) ? value.join(', ') : value);\n    });\n\n    return obj;\n  }\n\n  [Symbol.iterator]() {\n    return Object.entries(this.toJSON())[Symbol.iterator]();\n  }\n\n  toString() {\n    return Object.entries(this.toJSON()).map(([header, value]) => header + ': ' + value).join('\\n');\n  }\n\n  getSetCookie() {\n    return this.get(\"set-cookie\") || [];\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'AxiosHeaders';\n  }\n\n  static from(thing) {\n    return thing instanceof this ? thing : new this(thing);\n  }\n\n  static concat(first, ...targets) {\n    const computed = new this(first);\n\n    targets.forEach((target) => computed.set(target));\n\n    return computed;\n  }\n\n  static accessor(header) {\n    const internals = this[$internals] = (this[$internals] = {\n      accessors: {}\n    });\n\n    const accessors = internals.accessors;\n    const prototype = this.prototype;\n\n    function defineAccessor(_header) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!accessors[lHeader]) {\n        buildAccessors(prototype, _header);\n        accessors[lHeader] = true;\n      }\n    }\n\n    utils.isArray(header) ? header.forEach(defineAccessor) : defineAccessor(header);\n\n    return this;\n  }\n}\n\nAxiosHeaders.accessor(['Content-Type', 'Content-Length', 'Accept', 'Accept-Encoding', 'User-Agent', 'Authorization']);\n\n// reserved names hotfix\nutils.reduceDescriptors(AxiosHeaders.prototype, ({value}, key) => {\n  let mapped = key[0].toUpperCase() + key.slice(1); // map `set` => `Set`\n  return {\n    get: () => value,\n    set(headerValue) {\n      this[mapped] = headerValue;\n    }\n  }\n});\n\nutils.freezeMethods(AxiosHeaders);\n\nexport default AxiosHeaders;\n","'use strict';\n\nimport utils from './../utils.js';\nimport defaults from '../defaults/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Array|Function} fns A single function or Array of functions\n * @param {?Object} response The response object\n *\n * @returns {*} The resulting transformed data\n */\nexport default function transformData(fns, response) {\n  const config = this || defaults;\n  const context = response || config;\n  const headers = AxiosHeaders.from(context.headers);\n  let data = context.data;\n\n  utils.forEach(fns, function transform(fn) {\n    data = fn.call(config, data, headers.normalize(), response ? response.status : undefined);\n  });\n\n  headers.normalize();\n\n  return data;\n}\n","'use strict';\n\nexport default function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n}\n","'use strict';\n\nimport AxiosError from '../core/AxiosError.js';\nimport utils from '../utils.js';\n\n/**\n * A `CanceledError` is an object that is thrown when an operation is canceled.\n *\n * @param {string=} message The message.\n * @param {Object=} config The config.\n * @param {Object=} request The request.\n *\n * @returns {CanceledError} The created error.\n */\nfunction CanceledError(message, config, request) {\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  AxiosError.call(this, message == null ? 'canceled' : message, AxiosError.ERR_CANCELED, config, request);\n  this.name = 'CanceledError';\n}\n\nutils.inherits(CanceledError, AxiosError, {\n  __CANCEL__: true\n});\n\nexport default CanceledError;\n","'use strict';\n\nimport AxiosError from './AxiosError.js';\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n *\n * @returns {object} The response.\n */\nexport default function settle(resolve, reject, response) {\n  const validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(new AxiosError(\n      'Request failed with status code ' + response.status,\n      [AxiosError.ERR_BAD_REQUEST, AxiosError.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4],\n      response.config,\n      response.request,\n      response\n    ));\n  }\n}\n","'use strict';\n\nexport default function parseProtocol(url) {\n  const match = /^([-+\\w]{1,25})(:?\\/\\/|:)/.exec(url);\n  return match && match[1] || '';\n}\n","'use strict';\n\n/**\n * Calculate data maxRate\n * @param {Number} [samplesCount= 10]\n * @param {Number} [min= 1000]\n * @returns {Function}\n */\nfunction speedometer(samplesCount, min) {\n  samplesCount = samplesCount || 10;\n  const bytes = new Array(samplesCount);\n  const timestamps = new Array(samplesCount);\n  let head = 0;\n  let tail = 0;\n  let firstSampleTS;\n\n  min = min !== undefined ? min : 1000;\n\n  return function push(chunkLength) {\n    const now = Date.now();\n\n    const startedAt = timestamps[tail];\n\n    if (!firstSampleTS) {\n      firstSampleTS = now;\n    }\n\n    bytes[head] = chunkLength;\n    timestamps[head] = now;\n\n    let i = tail;\n    let bytesCount = 0;\n\n    while (i !== head) {\n      bytesCount += bytes[i++];\n      i = i % samplesCount;\n    }\n\n    head = (head + 1) % samplesCount;\n\n    if (head === tail) {\n      tail = (tail + 1) % samplesCount;\n    }\n\n    if (now - firstSampleTS < min) {\n      return;\n    }\n\n    const passed = startedAt && now - startedAt;\n\n    return passed ? Math.round(bytesCount * 1000 / passed) : undefined;\n  };\n}\n\nexport default speedometer;\n","/**\n * Throttle decorator\n * @param {Function} fn\n * @param {Number} freq\n * @return {Function}\n */\nfunction throttle(fn, freq) {\n  let timestamp = 0;\n  let threshold = 1000 / freq;\n  let lastArgs;\n  let timer;\n\n  const invoke = (args, now = Date.now()) => {\n    timestamp = now;\n    lastArgs = null;\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n    fn.apply(null, args);\n  }\n\n  const throttled = (...args) => {\n    const now = Date.now();\n    const passed = now - timestamp;\n    if ( passed >= threshold) {\n      invoke(args, now);\n    } else {\n      lastArgs = args;\n      if (!timer) {\n        timer = setTimeout(() => {\n          timer = null;\n          invoke(lastArgs)\n        }, threshold - passed);\n      }\n    }\n  }\n\n  const flush = () => lastArgs && invoke(lastArgs);\n\n  return [throttled, flush];\n}\n\nexport default throttle;\n","import speedometer from \"./speedometer.js\";\nimport throttle from \"./throttle.js\";\nimport utils from \"../utils.js\";\n\nexport const progressEventReducer = (listener, isDownloadStream, freq = 3) => {\n  let bytesNotified = 0;\n  const _speedometer = speedometer(50, 250);\n\n  return throttle(e => {\n    const loaded = e.loaded;\n    const total = e.lengthComputable ? e.total : undefined;\n    const progressBytes = loaded - bytesNotified;\n    const rate = _speedometer(progressBytes);\n    const inRange = loaded <= total;\n\n    bytesNotified = loaded;\n\n    const data = {\n      loaded,\n      total,\n      progress: total ? (loaded / total) : undefined,\n      bytes: progressBytes,\n      rate: rate ? rate : undefined,\n      estimated: rate && total && inRange ? (total - loaded) / rate : undefined,\n      event: e,\n      lengthComputable: total != null,\n      [isDownloadStream ? 'download' : 'upload']: true\n    };\n\n    listener(data);\n  }, freq);\n}\n\nexport const progressEventDecorator = (total, throttled) => {\n  const lengthComputable = total != null;\n\n  return [(loaded) => throttled[0]({\n    lengthComputable,\n    total,\n    loaded\n  }), throttled[1]];\n}\n\nexport const asyncDecorator = (fn) => (...args) => utils.asap(() => fn(...args));\n","import platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ? ((origin, isMSIE) => (url) => {\n  url = new URL(url, platform.origin);\n\n  return (\n    origin.protocol === url.protocol &&\n    origin.host === url.host &&\n    (isMSIE || origin.port === url.port)\n  );\n})(\n  new URL(platform.origin),\n  platform.navigator && /(msie|trident)/i.test(platform.navigator.userAgent)\n) : () => true;\n","import utils from './../utils.js';\nimport platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ?\n\n  // Standard browser envs support document.cookie\n  {\n    write(name, value, expires, path, domain, secure) {\n      const cookie = [name + '=' + encodeURIComponent(value)];\n\n      utils.isNumber(expires) && cookie.push('expires=' + new Date(expires).toGMTString());\n\n      utils.isString(path) && cookie.push('path=' + path);\n\n      utils.isString(domain) && cookie.push('domain=' + domain);\n\n      secure === true && cookie.push('secure');\n\n      document.cookie = cookie.join('; ');\n    },\n\n    read(name) {\n      const match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n      return (match ? decodeURIComponent(match[3]) : null);\n    },\n\n    remove(name) {\n      this.write(name, '', Date.now() - 86400000);\n    }\n  }\n\n  :\n\n  // Non-standard browser env (web workers, react-native) lack needed support.\n  {\n    write() {},\n    read() {\n      return null;\n    },\n    remove() {}\n  };\n\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n *\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nexport default function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d+\\-.]*:)?\\/\\//i.test(url);\n}\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n *\n * @returns {string} The combined URL\n */\nexport default function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/?\\/$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n}\n","'use strict';\n\nimport isAbsoluteURL from '../helpers/isAbsoluteURL.js';\nimport combineURLs from '../helpers/combineURLs.js';\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n *\n * @returns {string} The combined full path\n */\nexport default function buildFullPath(baseURL, requestedURL, allowAbsoluteUrls) {\n  let isRelativeUrl = !isAbsoluteURL(requestedURL);\n  if (baseURL && (isRelativeUrl || allowAbsoluteUrls == false)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n}\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosHeaders from \"./AxiosHeaders.js\";\n\nconst headersToObject = (thing) => thing instanceof AxiosHeaders ? { ...thing } : thing;\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n *\n * @returns {Object} New object resulting from merging config2 to config1\n */\nexport default function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  const config = {};\n\n  function getMergedValue(target, source, prop, caseless) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge.call({caseless}, target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDeepProperties(a, b, prop , caseless) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(a, b, prop , caseless);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a, prop , caseless);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function valueFromConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function defaultToConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDirectKeys(a, b, prop) {\n    if (prop in config2) {\n      return getMergedValue(a, b);\n    } else if (prop in config1) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  const mergeMap = {\n    url: valueFromConfig2,\n    method: valueFromConfig2,\n    data: valueFromConfig2,\n    baseURL: defaultToConfig2,\n    transformRequest: defaultToConfig2,\n    transformResponse: defaultToConfig2,\n    paramsSerializer: defaultToConfig2,\n    timeout: defaultToConfig2,\n    timeoutMessage: defaultToConfig2,\n    withCredentials: defaultToConfig2,\n    withXSRFToken: defaultToConfig2,\n    adapter: defaultToConfig2,\n    responseType: defaultToConfig2,\n    xsrfCookieName: defaultToConfig2,\n    xsrfHeaderName: defaultToConfig2,\n    onUploadProgress: defaultToConfig2,\n    onDownloadProgress: defaultToConfig2,\n    decompress: defaultToConfig2,\n    maxContentLength: defaultToConfig2,\n    maxBodyLength: defaultToConfig2,\n    beforeRedirect: defaultToConfig2,\n    transport: defaultToConfig2,\n    httpAgent: defaultToConfig2,\n    httpsAgent: defaultToConfig2,\n    cancelToken: defaultToConfig2,\n    socketPath: defaultToConfig2,\n    responseEncoding: defaultToConfig2,\n    validateStatus: mergeDirectKeys,\n    headers: (a, b , prop) => mergeDeepProperties(headersToObject(a), headersToObject(b),prop, true)\n  };\n\n  utils.forEach(Object.keys(Object.assign({}, config1, config2)), function computeConfigValue(prop) {\n    const merge = mergeMap[prop] || mergeDeepProperties;\n    const configValue = merge(config1[prop], config2[prop], prop);\n    (utils.isUndefined(configValue) && merge !== mergeDirectKeys) || (config[prop] = configValue);\n  });\n\n  return config;\n}\n","import platform from \"../platform/index.js\";\nimport utils from \"../utils.js\";\nimport isURLSameOrigin from \"./isURLSameOrigin.js\";\nimport cookies from \"./cookies.js\";\nimport buildFullPath from \"../core/buildFullPath.js\";\nimport mergeConfig from \"../core/mergeConfig.js\";\nimport AxiosHeaders from \"../core/AxiosHeaders.js\";\nimport buildURL from \"./buildURL.js\";\n\nexport default (config) => {\n  const newConfig = mergeConfig({}, config);\n\n  let {data, withXSRFToken, xsrfHeaderName, xsrfCookieName, headers, auth} = newConfig;\n\n  newConfig.headers = headers = AxiosHeaders.from(headers);\n\n  newConfig.url = buildURL(buildFullPath(newConfig.baseURL, newConfig.url, newConfig.allowAbsoluteUrls), config.params, config.paramsSerializer);\n\n  // HTTP basic authentication\n  if (auth) {\n    headers.set('Authorization', 'Basic ' +\n      btoa((auth.username || '') + ':' + (auth.password ? unescape(encodeURIComponent(auth.password)) : ''))\n    );\n  }\n\n  let contentType;\n\n  if (utils.isFormData(data)) {\n    if (platform.hasStandardBrowserEnv || platform.hasStandardBrowserWebWorkerEnv) {\n      headers.setContentType(undefined); // Let the browser set it\n    } else if ((contentType = headers.getContentType()) !== false) {\n      // fix semicolon duplication issue for ReactNative FormData implementation\n      const [type, ...tokens] = contentType ? contentType.split(';').map(token => token.trim()).filter(Boolean) : [];\n      headers.setContentType([type || 'multipart/form-data', ...tokens].join('; '));\n    }\n  }\n\n  // Add xsrf header\n  // This is only done if running in a standard browser environment.\n  // Specifically not if we're in a web worker, or react-native.\n\n  if (platform.hasStandardBrowserEnv) {\n    withXSRFToken && utils.isFunction(withXSRFToken) && (withXSRFToken = withXSRFToken(newConfig));\n\n    if (withXSRFToken || (withXSRFToken !== false && isURLSameOrigin(newConfig.url))) {\n      // Add xsrf header\n      const xsrfValue = xsrfHeaderName && xsrfCookieName && cookies.read(xsrfCookieName);\n\n      if (xsrfValue) {\n        headers.set(xsrfHeaderName, xsrfValue);\n      }\n    }\n  }\n\n  return newConfig;\n}\n\n","import utils from './../utils.js';\nimport settle from './../core/settle.js';\nimport transitionalDefaults from '../defaults/transitional.js';\nimport AxiosError from '../core/AxiosError.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport parseProtocol from '../helpers/parseProtocol.js';\nimport platform from '../platform/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport {progressEventReducer} from '../helpers/progressEventReducer.js';\nimport resolveConfig from \"../helpers/resolveConfig.js\";\n\nconst isXHRAdapterSupported = typeof XMLHttpRequest !== 'undefined';\n\nexport default isXHRAdapterSupported && function (config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    const _config = resolveConfig(config);\n    let requestData = _config.data;\n    const requestHeaders = AxiosHeaders.from(_config.headers).normalize();\n    let {responseType, onUploadProgress, onDownloadProgress} = _config;\n    let onCanceled;\n    let uploadThrottled, downloadThrottled;\n    let flushUpload, flushDownload;\n\n    function done() {\n      flushUpload && flushUpload(); // flush events\n      flushDownload && flushDownload(); // flush events\n\n      _config.cancelToken && _config.cancelToken.unsubscribe(onCanceled);\n\n      _config.signal && _config.signal.removeEventListener('abort', onCanceled);\n    }\n\n    let request = new XMLHttpRequest();\n\n    request.open(_config.method.toUpperCase(), _config.url, true);\n\n    // Set the request timeout in MS\n    request.timeout = _config.timeout;\n\n    function onloadend() {\n      if (!request) {\n        return;\n      }\n      // Prepare the response\n      const responseHeaders = AxiosHeaders.from(\n        'getAllResponseHeaders' in request && request.getAllResponseHeaders()\n      );\n      const responseData = !responseType || responseType === 'text' || responseType === 'json' ?\n        request.responseText : request.response;\n      const response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config,\n        request\n      };\n\n      settle(function _resolve(value) {\n        resolve(value);\n        done();\n      }, function _reject(err) {\n        reject(err);\n        done();\n      }, response);\n\n      // Clean up request\n      request = null;\n    }\n\n    if ('onloadend' in request) {\n      // Use onloadend if available\n      request.onloadend = onloadend;\n    } else {\n      // Listen for ready state to emulate onloadend\n      request.onreadystatechange = function handleLoad() {\n        if (!request || request.readyState !== 4) {\n          return;\n        }\n\n        // The request errored out and we didn't get a response, this will be\n        // handled by onerror instead\n        // With one exception: request that using file: protocol, most browsers\n        // will return status as 0 even though it's a successful request\n        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n          return;\n        }\n        // readystate handler is calling before onerror or ontimeout handlers,\n        // so we should call onloadend on the next 'tick'\n        setTimeout(onloadend);\n      };\n    }\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(new AxiosError('Request aborted', AxiosError.ECONNABORTED, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(new AxiosError('Network Error', AxiosError.ERR_NETWORK, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      let timeoutErrorMessage = _config.timeout ? 'timeout of ' + _config.timeout + 'ms exceeded' : 'timeout exceeded';\n      const transitional = _config.transitional || transitionalDefaults;\n      if (_config.timeoutErrorMessage) {\n        timeoutErrorMessage = _config.timeoutErrorMessage;\n      }\n      reject(new AxiosError(\n        timeoutErrorMessage,\n        transitional.clarifyTimeoutError ? AxiosError.ETIMEDOUT : AxiosError.ECONNABORTED,\n        config,\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Remove Content-Type if data is undefined\n    requestData === undefined && requestHeaders.setContentType(null);\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders.toJSON(), function setRequestHeader(val, key) {\n        request.setRequestHeader(key, val);\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(_config.withCredentials)) {\n      request.withCredentials = !!_config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (responseType && responseType !== 'json') {\n      request.responseType = _config.responseType;\n    }\n\n    // Handle progress if needed\n    if (onDownloadProgress) {\n      ([downloadThrottled, flushDownload] = progressEventReducer(onDownloadProgress, true));\n      request.addEventListener('progress', downloadThrottled);\n    }\n\n    // Not all browsers support upload events\n    if (onUploadProgress && request.upload) {\n      ([uploadThrottled, flushUpload] = progressEventReducer(onUploadProgress));\n\n      request.upload.addEventListener('progress', uploadThrottled);\n\n      request.upload.addEventListener('loadend', flushUpload);\n    }\n\n    if (_config.cancelToken || _config.signal) {\n      // Handle cancellation\n      // eslint-disable-next-line func-names\n      onCanceled = cancel => {\n        if (!request) {\n          return;\n        }\n        reject(!cancel || cancel.type ? new CanceledError(null, config, request) : cancel);\n        request.abort();\n        request = null;\n      };\n\n      _config.cancelToken && _config.cancelToken.subscribe(onCanceled);\n      if (_config.signal) {\n        _config.signal.aborted ? onCanceled() : _config.signal.addEventListener('abort', onCanceled);\n      }\n    }\n\n    const protocol = parseProtocol(_config.url);\n\n    if (protocol && platform.protocols.indexOf(protocol) === -1) {\n      reject(new AxiosError('Unsupported protocol ' + protocol + ':', AxiosError.ERR_BAD_REQUEST, config));\n      return;\n    }\n\n\n    // Send the request\n    request.send(requestData || null);\n  });\n}\n","import CanceledError from \"../cancel/CanceledError.js\";\nimport AxiosError from \"../core/AxiosError.js\";\nimport utils from '../utils.js';\n\nconst composeSignals = (signals, timeout) => {\n  const {length} = (signals = signals ? signals.filter(Boolean) : []);\n\n  if (timeout || length) {\n    let controller = new AbortController();\n\n    let aborted;\n\n    const onabort = function (reason) {\n      if (!aborted) {\n        aborted = true;\n        unsubscribe();\n        const err = reason instanceof Error ? reason : this.reason;\n        controller.abort(err instanceof AxiosError ? err : new CanceledError(err instanceof Error ? err.message : err));\n      }\n    }\n\n    let timer = timeout && setTimeout(() => {\n      timer = null;\n      onabort(new AxiosError(`timeout ${timeout} of ms exceeded`, AxiosError.ETIMEDOUT))\n    }, timeout)\n\n    const unsubscribe = () => {\n      if (signals) {\n        timer && clearTimeout(timer);\n        timer = null;\n        signals.forEach(signal => {\n          signal.unsubscribe ? signal.unsubscribe(onabort) : signal.removeEventListener('abort', onabort);\n        });\n        signals = null;\n      }\n    }\n\n    signals.forEach((signal) => signal.addEventListener('abort', onabort));\n\n    const {signal} = controller;\n\n    signal.unsubscribe = () => utils.asap(unsubscribe);\n\n    return signal;\n  }\n}\n\nexport default composeSignals;\n","\nexport const streamChunk = function* (chunk, chunkSize) {\n  let len = chunk.byteLength;\n\n  if (!chunkSize || len < chunkSize) {\n    yield chunk;\n    return;\n  }\n\n  let pos = 0;\n  let end;\n\n  while (pos < len) {\n    end = pos + chunkSize;\n    yield chunk.slice(pos, end);\n    pos = end;\n  }\n}\n\nexport const readBytes = async function* (iterable, chunkSize) {\n  for await (const chunk of readStream(iterable)) {\n    yield* streamChunk(chunk, chunkSize);\n  }\n}\n\nconst readStream = async function* (stream) {\n  if (stream[Symbol.asyncIterator]) {\n    yield* stream;\n    return;\n  }\n\n  const reader = stream.getReader();\n  try {\n    for (;;) {\n      const {done, value} = await reader.read();\n      if (done) {\n        break;\n      }\n      yield value;\n    }\n  } finally {\n    await reader.cancel();\n  }\n}\n\nexport const trackStream = (stream, chunkSize, onProgress, onFinish) => {\n  const iterator = readBytes(stream, chunkSize);\n\n  let bytes = 0;\n  let done;\n  let _onFinish = (e) => {\n    if (!done) {\n      done = true;\n      onFinish && onFinish(e);\n    }\n  }\n\n  return new ReadableStream({\n    async pull(controller) {\n      try {\n        const {done, value} = await iterator.next();\n\n        if (done) {\n         _onFinish();\n          controller.close();\n          return;\n        }\n\n        let len = value.byteLength;\n        if (onProgress) {\n          let loadedBytes = bytes += len;\n          onProgress(loadedBytes);\n        }\n        controller.enqueue(new Uint8Array(value));\n      } catch (err) {\n        _onFinish(err);\n        throw err;\n      }\n    },\n    cancel(reason) {\n      _onFinish(reason);\n      return iterator.return();\n    }\n  }, {\n    highWaterMark: 2\n  })\n}\n","import platform from \"../platform/index.js\";\nimport utils from \"../utils.js\";\nimport AxiosError from \"../core/AxiosError.js\";\nimport composeSignals from \"../helpers/composeSignals.js\";\nimport {trackStream} from \"../helpers/trackStream.js\";\nimport AxiosHeaders from \"../core/AxiosHeaders.js\";\nimport {progressEventReducer, progressEventDecorator, asyncDecorator} from \"../helpers/progressEventReducer.js\";\nimport resolveConfig from \"../helpers/resolveConfig.js\";\nimport settle from \"../core/settle.js\";\n\nconst isFetchSupported = typeof fetch === 'function' && typeof Request === 'function' && typeof Response === 'function';\nconst isReadableStreamSupported = isFetchSupported && typeof ReadableStream === 'function';\n\n// used only inside the fetch adapter\nconst encodeText = isFetchSupported && (typeof TextEncoder === 'function' ?\n    ((encoder) => (str) => encoder.encode(str))(new TextEncoder()) :\n    async (str) => new Uint8Array(await new Response(str).arrayBuffer())\n);\n\nconst test = (fn, ...args) => {\n  try {\n    return !!fn(...args);\n  } catch (e) {\n    return false\n  }\n}\n\nconst supportsRequestStream = isReadableStreamSupported && test(() => {\n  let duplexAccessed = false;\n\n  const hasContentType = new Request(platform.origin, {\n    body: new ReadableStream(),\n    method: 'POST',\n    get duplex() {\n      duplexAccessed = true;\n      return 'half';\n    },\n  }).headers.has('Content-Type');\n\n  return duplexAccessed && !hasContentType;\n});\n\nconst DEFAULT_CHUNK_SIZE = 64 * 1024;\n\nconst supportsResponseStream = isReadableStreamSupported &&\n  test(() => utils.isReadableStream(new Response('').body));\n\n\nconst resolvers = {\n  stream: supportsResponseStream && ((res) => res.body)\n};\n\nisFetchSupported && (((res) => {\n  ['text', 'arrayBuffer', 'blob', 'formData', 'stream'].forEach(type => {\n    !resolvers[type] && (resolvers[type] = utils.isFunction(res[type]) ? (res) => res[type]() :\n      (_, config) => {\n        throw new AxiosError(`Response type '${type}' is not supported`, AxiosError.ERR_NOT_SUPPORT, config);\n      })\n  });\n})(new Response));\n\nconst getBodyLength = async (body) => {\n  if (body == null) {\n    return 0;\n  }\n\n  if(utils.isBlob(body)) {\n    return body.size;\n  }\n\n  if(utils.isSpecCompliantForm(body)) {\n    const _request = new Request(platform.origin, {\n      method: 'POST',\n      body,\n    });\n    return (await _request.arrayBuffer()).byteLength;\n  }\n\n  if(utils.isArrayBufferView(body) || utils.isArrayBuffer(body)) {\n    return body.byteLength;\n  }\n\n  if(utils.isURLSearchParams(body)) {\n    body = body + '';\n  }\n\n  if(utils.isString(body)) {\n    return (await encodeText(body)).byteLength;\n  }\n}\n\nconst resolveBodyLength = async (headers, body) => {\n  const length = utils.toFiniteNumber(headers.getContentLength());\n\n  return length == null ? getBodyLength(body) : length;\n}\n\nexport default isFetchSupported && (async (config) => {\n  let {\n    url,\n    method,\n    data,\n    signal,\n    cancelToken,\n    timeout,\n    onDownloadProgress,\n    onUploadProgress,\n    responseType,\n    headers,\n    withCredentials = 'same-origin',\n    fetchOptions\n  } = resolveConfig(config);\n\n  responseType = responseType ? (responseType + '').toLowerCase() : 'text';\n\n  let composedSignal = composeSignals([signal, cancelToken && cancelToken.toAbortSignal()], timeout);\n\n  let request;\n\n  const unsubscribe = composedSignal && composedSignal.unsubscribe && (() => {\n      composedSignal.unsubscribe();\n  });\n\n  let requestContentLength;\n\n  try {\n    if (\n      onUploadProgress && supportsRequestStream && method !== 'get' && method !== 'head' &&\n      (requestContentLength = await resolveBodyLength(headers, data)) !== 0\n    ) {\n      let _request = new Request(url, {\n        method: 'POST',\n        body: data,\n        duplex: \"half\"\n      });\n\n      let contentTypeHeader;\n\n      if (utils.isFormData(data) && (contentTypeHeader = _request.headers.get('content-type'))) {\n        headers.setContentType(contentTypeHeader)\n      }\n\n      if (_request.body) {\n        const [onProgress, flush] = progressEventDecorator(\n          requestContentLength,\n          progressEventReducer(asyncDecorator(onUploadProgress))\n        );\n\n        data = trackStream(_request.body, DEFAULT_CHUNK_SIZE, onProgress, flush);\n      }\n    }\n\n    if (!utils.isString(withCredentials)) {\n      withCredentials = withCredentials ? 'include' : 'omit';\n    }\n\n    // Cloudflare Workers throws when credentials are defined\n    // see https://github.com/cloudflare/workerd/issues/902\n    const isCredentialsSupported = \"credentials\" in Request.prototype;\n    request = new Request(url, {\n      ...fetchOptions,\n      signal: composedSignal,\n      method: method.toUpperCase(),\n      headers: headers.normalize().toJSON(),\n      body: data,\n      duplex: \"half\",\n      credentials: isCredentialsSupported ? withCredentials : undefined\n    });\n\n    let response = await fetch(request);\n\n    const isStreamResponse = supportsResponseStream && (responseType === 'stream' || responseType === 'response');\n\n    if (supportsResponseStream && (onDownloadProgress || (isStreamResponse && unsubscribe))) {\n      const options = {};\n\n      ['status', 'statusText', 'headers'].forEach(prop => {\n        options[prop] = response[prop];\n      });\n\n      const responseContentLength = utils.toFiniteNumber(response.headers.get('content-length'));\n\n      const [onProgress, flush] = onDownloadProgress && progressEventDecorator(\n        responseContentLength,\n        progressEventReducer(asyncDecorator(onDownloadProgress), true)\n      ) || [];\n\n      response = new Response(\n        trackStream(response.body, DEFAULT_CHUNK_SIZE, onProgress, () => {\n          flush && flush();\n          unsubscribe && unsubscribe();\n        }),\n        options\n      );\n    }\n\n    responseType = responseType || 'text';\n\n    let responseData = await resolvers[utils.findKey(resolvers, responseType) || 'text'](response, config);\n\n    !isStreamResponse && unsubscribe && unsubscribe();\n\n    return await new Promise((resolve, reject) => {\n      settle(resolve, reject, {\n        data: responseData,\n        headers: AxiosHeaders.from(response.headers),\n        status: response.status,\n        statusText: response.statusText,\n        config,\n        request\n      })\n    })\n  } catch (err) {\n    unsubscribe && unsubscribe();\n\n    if (err && err.name === 'TypeError' && /Load failed|fetch/i.test(err.message)) {\n      throw Object.assign(\n        new AxiosError('Network Error', AxiosError.ERR_NETWORK, config, request),\n        {\n          cause: err.cause || err\n        }\n      )\n    }\n\n    throw AxiosError.from(err, err && err.code, config, request);\n  }\n});\n\n\n","import utils from '../utils.js';\nimport httpAdapter from './http.js';\nimport xhrAdapter from './xhr.js';\nimport fetchAdapter from './fetch.js';\nimport AxiosError from \"../core/AxiosError.js\";\n\nconst knownAdapters = {\n  http: httpAdapter,\n  xhr: xhrAdapter,\n  fetch: fetchAdapter\n}\n\nutils.forEach(knownAdapters, (fn, value) => {\n  if (fn) {\n    try {\n      Object.defineProperty(fn, 'name', {value});\n    } catch (e) {\n      // eslint-disable-next-line no-empty\n    }\n    Object.defineProperty(fn, 'adapterName', {value});\n  }\n});\n\nconst renderReason = (reason) => `- ${reason}`;\n\nconst isResolvedHandle = (adapter) => utils.isFunction(adapter) || adapter === null || adapter === false;\n\nexport default {\n  getAdapter: (adapters) => {\n    adapters = utils.isArray(adapters) ? adapters : [adapters];\n\n    const {length} = adapters;\n    let nameOrAdapter;\n    let adapter;\n\n    const rejectedReasons = {};\n\n    for (let i = 0; i < length; i++) {\n      nameOrAdapter = adapters[i];\n      let id;\n\n      adapter = nameOrAdapter;\n\n      if (!isResolvedHandle(nameOrAdapter)) {\n        adapter = knownAdapters[(id = String(nameOrAdapter)).toLowerCase()];\n\n        if (adapter === undefined) {\n          throw new AxiosError(`Unknown adapter '${id}'`);\n        }\n      }\n\n      if (adapter) {\n        break;\n      }\n\n      rejectedReasons[id || '#' + i] = adapter;\n    }\n\n    if (!adapter) {\n\n      const reasons = Object.entries(rejectedReasons)\n        .map(([id, state]) => `adapter ${id} ` +\n          (state === false ? 'is not supported by the environment' : 'is not available in the build')\n        );\n\n      let s = length ?\n        (reasons.length > 1 ? 'since :\\n' + reasons.map(renderReason).join('\\n') : ' ' + renderReason(reasons[0])) :\n        'as no adapter specified';\n\n      throw new AxiosError(\n        `There is no suitable adapter to dispatch the request ` + s,\n        'ERR_NOT_SUPPORT'\n      );\n    }\n\n    return adapter;\n  },\n  adapters: knownAdapters\n}\n","'use strict';\n\nimport transformData from './transformData.js';\nimport isCancel from '../cancel/isCancel.js';\nimport defaults from '../defaults/index.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport adapters from \"../adapters/adapters.js\";\n\n/**\n * Throws a `CanceledError` if cancellation has been requested.\n *\n * @param {Object} config The config that is to be used for the request\n *\n * @returns {void}\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n\n  if (config.signal && config.signal.aborted) {\n    throw new CanceledError(null, config);\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n *\n * @returns {Promise} The Promise to be fulfilled\n */\nexport default function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  config.headers = AxiosHeaders.from(config.headers);\n\n  // Transform request data\n  config.data = transformData.call(\n    config,\n    config.transformRequest\n  );\n\n  if (['post', 'put', 'patch'].indexOf(config.method) !== -1) {\n    config.headers.setContentType('application/x-www-form-urlencoded', false);\n  }\n\n  const adapter = adapters.getAdapter(config.adapter || defaults.adapter);\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData.call(\n      config,\n      config.transformResponse,\n      response\n    );\n\n    response.headers = AxiosHeaders.from(response.headers);\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData.call(\n          config,\n          config.transformResponse,\n          reason.response\n        );\n        reason.response.headers = AxiosHeaders.from(reason.response.headers);\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n}\n","export const VERSION = \"1.9.0\";","'use strict';\n\nimport {VERSION} from '../env/data.js';\nimport AxiosError from '../core/AxiosError.js';\n\nconst validators = {};\n\n// eslint-disable-next-line func-names\n['object', 'boolean', 'number', 'function', 'string', 'symbol'].forEach((type, i) => {\n  validators[type] = function validator(thing) {\n    return typeof thing === type || 'a' + (i < 1 ? 'n ' : ' ') + type;\n  };\n});\n\nconst deprecatedWarnings = {};\n\n/**\n * Transitional option validator\n *\n * @param {function|boolean?} validator - set to false if the transitional option has been removed\n * @param {string?} version - deprecated version / removed since version\n * @param {string?} message - some message with additional info\n *\n * @returns {function}\n */\nvalidators.transitional = function transitional(validator, version, message) {\n  function formatMessage(opt, desc) {\n    return '[Axios v' + VERSION + '] Transitional option \\'' + opt + '\\'' + desc + (message ? '. ' + message : '');\n  }\n\n  // eslint-disable-next-line func-names\n  return (value, opt, opts) => {\n    if (validator === false) {\n      throw new AxiosError(\n        formatMessage(opt, ' has been removed' + (version ? ' in ' + version : '')),\n        AxiosError.ERR_DEPRECATED\n      );\n    }\n\n    if (version && !deprecatedWarnings[opt]) {\n      deprecatedWarnings[opt] = true;\n      // eslint-disable-next-line no-console\n      console.warn(\n        formatMessage(\n          opt,\n          ' has been deprecated since v' + version + ' and will be removed in the near future'\n        )\n      );\n    }\n\n    return validator ? validator(value, opt, opts) : true;\n  };\n};\n\nvalidators.spelling = function spelling(correctSpelling) {\n  return (value, opt) => {\n    // eslint-disable-next-line no-console\n    console.warn(`${opt} is likely a misspelling of ${correctSpelling}`);\n    return true;\n  }\n};\n\n/**\n * Assert object's properties type\n *\n * @param {object} options\n * @param {object} schema\n * @param {boolean?} allowUnknown\n *\n * @returns {object}\n */\n\nfunction assertOptions(options, schema, allowUnknown) {\n  if (typeof options !== 'object') {\n    throw new AxiosError('options must be an object', AxiosError.ERR_BAD_OPTION_VALUE);\n  }\n  const keys = Object.keys(options);\n  let i = keys.length;\n  while (i-- > 0) {\n    const opt = keys[i];\n    const validator = schema[opt];\n    if (validator) {\n      const value = options[opt];\n      const result = value === undefined || validator(value, opt, options);\n      if (result !== true) {\n        throw new AxiosError('option ' + opt + ' must be ' + result, AxiosError.ERR_BAD_OPTION_VALUE);\n      }\n      continue;\n    }\n    if (allowUnknown !== true) {\n      throw new AxiosError('Unknown option ' + opt, AxiosError.ERR_BAD_OPTION);\n    }\n  }\n}\n\nexport default {\n  assertOptions,\n  validators\n};\n","'use strict';\n\nimport utils from './../utils.js';\nimport buildURL from '../helpers/buildURL.js';\nimport InterceptorManager from './InterceptorManager.js';\nimport dispatchRequest from './dispatchRequest.js';\nimport mergeConfig from './mergeConfig.js';\nimport buildFullPath from './buildFullPath.js';\nimport validator from '../helpers/validator.js';\nimport AxiosHeaders from './AxiosHeaders.js';\n\nconst validators = validator.validators;\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n *\n * @return {Axios} A new instance of Axios\n */\nclass Axios {\n  constructor(instanceConfig) {\n    this.defaults = instanceConfig || {};\n    this.interceptors = {\n      request: new InterceptorManager(),\n      response: new InterceptorManager()\n    };\n  }\n\n  /**\n   * Dispatch a request\n   *\n   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)\n   * @param {?Object} config\n   *\n   * @returns {Promise} The Promise to be fulfilled\n   */\n  async request(configOrUrl, config) {\n    try {\n      return await this._request(configOrUrl, config);\n    } catch (err) {\n      if (err instanceof Error) {\n        let dummy = {};\n\n        Error.captureStackTrace ? Error.captureStackTrace(dummy) : (dummy = new Error());\n\n        // slice off the Error: ... line\n        const stack = dummy.stack ? dummy.stack.replace(/^.+\\n/, '') : '';\n        try {\n          if (!err.stack) {\n            err.stack = stack;\n            // match without the 2 top stack lines\n          } else if (stack && !String(err.stack).endsWith(stack.replace(/^.+\\n.+\\n/, ''))) {\n            err.stack += '\\n' + stack\n          }\n        } catch (e) {\n          // ignore the case where \"stack\" is an un-writable property\n        }\n      }\n\n      throw err;\n    }\n  }\n\n  _request(configOrUrl, config) {\n    /*eslint no-param-reassign:0*/\n    // Allow for axios('example/url'[, config]) a la fetch API\n    if (typeof configOrUrl === 'string') {\n      config = config || {};\n      config.url = configOrUrl;\n    } else {\n      config = configOrUrl || {};\n    }\n\n    config = mergeConfig(this.defaults, config);\n\n    const {transitional, paramsSerializer, headers} = config;\n\n    if (transitional !== undefined) {\n      validator.assertOptions(transitional, {\n        silentJSONParsing: validators.transitional(validators.boolean),\n        forcedJSONParsing: validators.transitional(validators.boolean),\n        clarifyTimeoutError: validators.transitional(validators.boolean)\n      }, false);\n    }\n\n    if (paramsSerializer != null) {\n      if (utils.isFunction(paramsSerializer)) {\n        config.paramsSerializer = {\n          serialize: paramsSerializer\n        }\n      } else {\n        validator.assertOptions(paramsSerializer, {\n          encode: validators.function,\n          serialize: validators.function\n        }, true);\n      }\n    }\n\n    // Set config.allowAbsoluteUrls\n    if (config.allowAbsoluteUrls !== undefined) {\n      // do nothing\n    } else if (this.defaults.allowAbsoluteUrls !== undefined) {\n      config.allowAbsoluteUrls = this.defaults.allowAbsoluteUrls;\n    } else {\n      config.allowAbsoluteUrls = true;\n    }\n\n    validator.assertOptions(config, {\n      baseUrl: validators.spelling('baseURL'),\n      withXsrfToken: validators.spelling('withXSRFToken')\n    }, true);\n\n    // Set config.method\n    config.method = (config.method || this.defaults.method || 'get').toLowerCase();\n\n    // Flatten headers\n    let contextHeaders = headers && utils.merge(\n      headers.common,\n      headers[config.method]\n    );\n\n    headers && utils.forEach(\n      ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n      (method) => {\n        delete headers[method];\n      }\n    );\n\n    config.headers = AxiosHeaders.concat(contextHeaders, headers);\n\n    // filter out skipped interceptors\n    const requestInterceptorChain = [];\n    let synchronousRequestInterceptors = true;\n    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n      if (typeof interceptor.runWhen === 'function' && interceptor.runWhen(config) === false) {\n        return;\n      }\n\n      synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;\n\n      requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    const responseInterceptorChain = [];\n    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n      responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    let promise;\n    let i = 0;\n    let len;\n\n    if (!synchronousRequestInterceptors) {\n      const chain = [dispatchRequest.bind(this), undefined];\n      chain.unshift.apply(chain, requestInterceptorChain);\n      chain.push.apply(chain, responseInterceptorChain);\n      len = chain.length;\n\n      promise = Promise.resolve(config);\n\n      while (i < len) {\n        promise = promise.then(chain[i++], chain[i++]);\n      }\n\n      return promise;\n    }\n\n    len = requestInterceptorChain.length;\n\n    let newConfig = config;\n\n    i = 0;\n\n    while (i < len) {\n      const onFulfilled = requestInterceptorChain[i++];\n      const onRejected = requestInterceptorChain[i++];\n      try {\n        newConfig = onFulfilled(newConfig);\n      } catch (error) {\n        onRejected.call(this, error);\n        break;\n      }\n    }\n\n    try {\n      promise = dispatchRequest.call(this, newConfig);\n    } catch (error) {\n      return Promise.reject(error);\n    }\n\n    i = 0;\n    len = responseInterceptorChain.length;\n\n    while (i < len) {\n      promise = promise.then(responseInterceptorChain[i++], responseInterceptorChain[i++]);\n    }\n\n    return promise;\n  }\n\n  getUri(config) {\n    config = mergeConfig(this.defaults, config);\n    const fullPath = buildFullPath(config.baseURL, config.url, config.allowAbsoluteUrls);\n    return buildURL(fullPath, config.params, config.paramsSerializer);\n  }\n}\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method,\n      url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n\n  function generateHTTPMethod(isForm) {\n    return function httpMethod(url, data, config) {\n      return this.request(mergeConfig(config || {}, {\n        method,\n        headers: isForm ? {\n          'Content-Type': 'multipart/form-data'\n        } : {},\n        url,\n        data\n      }));\n    };\n  }\n\n  Axios.prototype[method] = generateHTTPMethod();\n\n  Axios.prototype[method + 'Form'] = generateHTTPMethod(true);\n});\n\nexport default Axios;\n","'use strict';\n\nimport CanceledError from './CanceledError.js';\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @param {Function} executor The executor function.\n *\n * @returns {CancelToken}\n */\nclass CancelToken {\n  constructor(executor) {\n    if (typeof executor !== 'function') {\n      throw new TypeError('executor must be a function.');\n    }\n\n    let resolvePromise;\n\n    this.promise = new Promise(function promiseExecutor(resolve) {\n      resolvePromise = resolve;\n    });\n\n    const token = this;\n\n    // eslint-disable-next-line func-names\n    this.promise.then(cancel => {\n      if (!token._listeners) return;\n\n      let i = token._listeners.length;\n\n      while (i-- > 0) {\n        token._listeners[i](cancel);\n      }\n      token._listeners = null;\n    });\n\n    // eslint-disable-next-line func-names\n    this.promise.then = onfulfilled => {\n      let _resolve;\n      // eslint-disable-next-line func-names\n      const promise = new Promise(resolve => {\n        token.subscribe(resolve);\n        _resolve = resolve;\n      }).then(onfulfilled);\n\n      promise.cancel = function reject() {\n        token.unsubscribe(_resolve);\n      };\n\n      return promise;\n    };\n\n    executor(function cancel(message, config, request) {\n      if (token.reason) {\n        // Cancellation has already been requested\n        return;\n      }\n\n      token.reason = new CanceledError(message, config, request);\n      resolvePromise(token.reason);\n    });\n  }\n\n  /**\n   * Throws a `CanceledError` if cancellation has been requested.\n   */\n  throwIfRequested() {\n    if (this.reason) {\n      throw this.reason;\n    }\n  }\n\n  /**\n   * Subscribe to the cancel signal\n   */\n\n  subscribe(listener) {\n    if (this.reason) {\n      listener(this.reason);\n      return;\n    }\n\n    if (this._listeners) {\n      this._listeners.push(listener);\n    } else {\n      this._listeners = [listener];\n    }\n  }\n\n  /**\n   * Unsubscribe from the cancel signal\n   */\n\n  unsubscribe(listener) {\n    if (!this._listeners) {\n      return;\n    }\n    const index = this._listeners.indexOf(listener);\n    if (index !== -1) {\n      this._listeners.splice(index, 1);\n    }\n  }\n\n  toAbortSignal() {\n    const controller = new AbortController();\n\n    const abort = (err) => {\n      controller.abort(err);\n    };\n\n    this.subscribe(abort);\n\n    controller.signal.unsubscribe = () => this.unsubscribe(abort);\n\n    return controller.signal;\n  }\n\n  /**\n   * Returns an object that contains a new `CancelToken` and a function that, when called,\n   * cancels the `CancelToken`.\n   */\n  static source() {\n    let cancel;\n    const token = new CancelToken(function executor(c) {\n      cancel = c;\n    });\n    return {\n      token,\n      cancel\n    };\n  }\n}\n\nexport default CancelToken;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n *\n * @returns {Function}\n */\nexport default function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n *\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nexport default function isAxiosError(payload) {\n  return utils.isObject(payload) && (payload.isAxiosError === true);\n}\n","const HttpStatusCode = {\n  Continue: 100,\n  SwitchingProtocols: 101,\n  Processing: 102,\n  EarlyHints: 103,\n  Ok: 200,\n  Created: 201,\n  Accepted: 202,\n  NonAuthoritativeInformation: 203,\n  NoContent: 204,\n  ResetContent: 205,\n  PartialContent: 206,\n  MultiStatus: 207,\n  AlreadyReported: 208,\n  ImUsed: 226,\n  MultipleChoices: 300,\n  MovedPermanently: 301,\n  Found: 302,\n  SeeOther: 303,\n  NotModified: 304,\n  UseProxy: 305,\n  Unused: 306,\n  TemporaryRedirect: 307,\n  PermanentRedirect: 308,\n  BadRequest: 400,\n  Unauthorized: 401,\n  PaymentRequired: 402,\n  Forbidden: 403,\n  NotFound: 404,\n  MethodNotAllowed: 405,\n  NotAcceptable: 406,\n  ProxyAuthenticationRequired: 407,\n  RequestTimeout: 408,\n  Conflict: 409,\n  Gone: 410,\n  LengthRequired: 411,\n  PreconditionFailed: 412,\n  PayloadTooLarge: 413,\n  UriTooLong: 414,\n  UnsupportedMediaType: 415,\n  RangeNotSatisfiable: 416,\n  ExpectationFailed: 417,\n  ImATeapot: 418,\n  MisdirectedRequest: 421,\n  UnprocessableEntity: 422,\n  Locked: 423,\n  FailedDependency: 424,\n  TooEarly: 425,\n  UpgradeRequired: 426,\n  PreconditionRequired: 428,\n  TooManyRequests: 429,\n  RequestHeaderFieldsTooLarge: 431,\n  UnavailableForLegalReasons: 451,\n  InternalServerError: 500,\n  NotImplemented: 501,\n  BadGateway: 502,\n  ServiceUnavailable: 503,\n  GatewayTimeout: 504,\n  HttpVersionNotSupported: 505,\n  VariantAlsoNegotiates: 506,\n  InsufficientStorage: 507,\n  LoopDetected: 508,\n  NotExtended: 510,\n  NetworkAuthenticationRequired: 511,\n};\n\nObject.entries(HttpStatusCode).forEach(([key, value]) => {\n  HttpStatusCode[value] = key;\n});\n\nexport default HttpStatusCode;\n","'use strict';\n\nimport utils from './utils.js';\nimport bind from './helpers/bind.js';\nimport Axios from './core/Axios.js';\nimport mergeConfig from './core/mergeConfig.js';\nimport defaults from './defaults/index.js';\nimport formDataToJSON from './helpers/formDataToJSON.js';\nimport CanceledError from './cancel/CanceledError.js';\nimport CancelToken from './cancel/CancelToken.js';\nimport isCancel from './cancel/isCancel.js';\nimport {VERSION} from './env/data.js';\nimport toFormData from './helpers/toFormData.js';\nimport AxiosError from './core/AxiosError.js';\nimport spread from './helpers/spread.js';\nimport isAxiosError from './helpers/isAxiosError.js';\nimport AxiosHeaders from \"./core/AxiosHeaders.js\";\nimport adapters from './adapters/adapters.js';\nimport HttpStatusCode from './helpers/HttpStatusCode.js';\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n *\n * @returns {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  const context = new Axios(defaultConfig);\n  const instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context, {allOwnKeys: true});\n\n  // Copy context to instance\n  utils.extend(instance, context, null, {allOwnKeys: true});\n\n  // Factory for creating new instances\n  instance.create = function create(instanceConfig) {\n    return createInstance(mergeConfig(defaultConfig, instanceConfig));\n  };\n\n  return instance;\n}\n\n// Create the default instance to be exported\nconst axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Expose Cancel & CancelToken\naxios.CanceledError = CanceledError;\naxios.CancelToken = CancelToken;\naxios.isCancel = isCancel;\naxios.VERSION = VERSION;\naxios.toFormData = toFormData;\n\n// Expose AxiosError class\naxios.AxiosError = AxiosError;\n\n// alias for CanceledError for backward compatibility\naxios.Cancel = axios.CanceledError;\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\n\naxios.spread = spread;\n\n// Expose isAxiosError\naxios.isAxiosError = isAxiosError;\n\n// Expose mergeConfig\naxios.mergeConfig = mergeConfig;\n\naxios.AxiosHeaders = AxiosHeaders;\n\naxios.formToJSON = thing => formDataToJSON(utils.isHTMLForm(thing) ? new FormData(thing) : thing);\n\naxios.getAdapter = adapters.getAdapter;\n\naxios.HttpStatusCode = HttpStatusCode;\n\naxios.default = axios;\n\n// this module should only have a default export\nexport default axios\n","import axios from './lib/axios.js';\n\n// This module is intended to unwrap Axios default export as named.\n// Keep top-level export same with static properties\n// so that it can keep same with es module or cjs\nconst {\n  Axios,\n  AxiosError,\n  CanceledError,\n  isCancel,\n  CancelToken,\n  VERSION,\n  all,\n  Cancel,\n  isAxiosError,\n  spread,\n  toFormData,\n  AxiosHeaders,\n  HttpStatusCode,\n  formToJSON,\n  getAdapter,\n  mergeConfig\n} = axios;\n\nexport {\n  axios as default,\n  Axios,\n  AxiosError,\n  CanceledError,\n  isCancel,\n  CancelToken,\n  VERSION,\n  all,\n  Cancel,\n  isAxiosError,\n  spread,\n  toFormData,\n  AxiosHeaders,\n  HttpStatusCode,\n  formToJSON,\n  getAdapter,\n  mergeConfig\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nexport const DEFAULT_BACKEND_URL = 'https://identityconnect.com';\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  AccountAddress,\n  AnyTransactionPayloadInstance,\n  AptosConfig,\n  EntryFunctionArgumentTypes,\n  generateTransactionPayload,\n  generateTransactionPayloadWithABI,\n  InputGenerateTransactionPayloadData,\n  SimpleEntryFunctionArgumentTypes,\n  TransactionPayload,\n} from '@aptos-labs/ts-sdk';\nimport { JsonTransactionPayload } from '@identity-connect/wallet-api';\n\ntype EntryFunctionArgument = SimpleEntryFunctionArgumentTypes | EntryFunctionArgumentTypes;\ntype SerializableArgument = undefined | null | number | string | boolean | Uint8Array | SerializableArgument[];\n\n/**\n * Return an equivalent argument value that can be safely serialized.\n */\nfunction convertToSerializableArgument(argument: EntryFunctionArgument): SerializableArgument {\n  if (argument === undefined || argument === null) {\n    return argument;\n  }\n\n  if (Array.isArray(argument)) {\n    return argument.map((subArgument) => convertToSerializableArgument(subArgument));\n  }\n\n  if (\n    typeof argument === 'string' ||\n    typeof argument === 'number' ||\n    typeof argument === 'boolean' ||\n    argument instanceof Uint8Array\n  ) {\n    return argument;\n  }\n\n  if (typeof argument === 'bigint') {\n    return argument.toString();\n  }\n\n  // ArrayBuffer\n  if (argument instanceof ArrayBuffer) {\n    return new Uint8Array(argument);\n  }\n\n  // MoveVector\n  if ('values' in argument) {\n    return argument.values.map((subArgument) => convertToSerializableArgument(subArgument));\n  }\n\n  // AccountAddress\n  if ('data' in argument) {\n    return AccountAddress.from(argument.data).toString();\n  }\n\n  // MoveOption\n  if (argument.value === undefined) {\n    return undefined;\n  }\n\n  if (\n    typeof argument.value === 'string' ||\n    typeof argument.value === 'number' ||\n    typeof argument.value === 'boolean' ||\n    argument.value instanceof Uint8Array\n  ) {\n    return argument.value;\n  }\n\n  if (typeof argument.value === 'bigint') {\n    return argument.value.toString();\n  }\n\n  throw new Error('Unexpected argument');\n}\n\n/**\n * Normalize payload input so that it's compatible with IC requests.\n * This variant is sync and will convert a payload generation input into a\n * `JsonTransactionPayload` when the ABI is not available\n */\nexport function normalizePayloadForIC(\n  payload: TransactionPayload | InputGenerateTransactionPayloadData,\n): AnyTransactionPayloadInstance | JsonTransactionPayload;\n/**\n * Normalize payload input so that it's compatible with IC requests.\n * This variant is async and will generate a payload instance when an input is provided\n */\nexport async function normalizePayloadForIC(\n  payload: TransactionPayload | InputGenerateTransactionPayloadData,\n  aptosConfig: AptosConfig,\n): Promise<AnyTransactionPayloadInstance>;\n\nexport function normalizePayloadForIC(\n  payload: TransactionPayload | InputGenerateTransactionPayloadData,\n  aptosConfig?: AptosConfig,\n): AnyTransactionPayloadInstance | JsonTransactionPayload | Promise<AnyTransactionPayloadInstance> {\n  if ('bcsToBytes' in payload) {\n    return payload as AnyTransactionPayloadInstance;\n  }\n  if ('bytecode' in payload) {\n    // The signature of this function returns a promise, but it's actually sync code\n    return generateTransactionPayload(payload);\n  }\n  if (aptosConfig) {\n    return payload.abi !== undefined\n      ? generateTransactionPayloadWithABI({ ...payload, abi: payload.abi })\n      : generateTransactionPayload({ aptosConfig, ...payload });\n  }\n\n  const entryFunctionPayload = {\n    arguments: payload.functionArguments.map(convertToSerializableArgument),\n    function: payload.function,\n    type: 'entry_function_payload' as const,\n    type_arguments: (payload.typeArguments ?? []).map((ta) => ta.toString()),\n  };\n\n  return 'multisigAddress' in payload\n    ? {\n        multisig_address: AccountAddress.from(payload.multisigAddress).toString(),\n        transaction_payload: entryFunctionPayload,\n        type: 'multisig_payload' as const,\n      }\n    : entryFunctionPayload;\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\n/* eslint-disable no-await-in-loop */\n\nimport { AccountInfo } from '@aptos-connect/wallet-api';\nimport { AccountAddress } from '@aptos-labs/ts-sdk';\nimport {\n  CancelSigningRequestSerializedResponse,\n  CreateSigningRequestSerializedResponse,\n  FinalizedPairingData,\n  GetPairingSerializedResponse,\n  GetSigningRequestSerializedResponse,\n  NetworkName,\n  SerializedDate,\n  SigningRequestData,\n  SigningRequestStatus,\n  SigningRequestTypes,\n} from '@identity-connect/api';\nimport {\n  decodeBase64,\n  decryptEnvelope,\n  deserializeEd25519PublicKeyB64,\n  deserializePublicKeyB64,\n  Ed25519KeyPair,\n  Ed25519PublicKey,\n  Ed25519SecretKey,\n  encodeBase64,\n  encryptAndSignEnvelope,\n  KeyTypes,\n  toKey,\n} from '@identity-connect/crypto';\nimport {\n  deserializeSignTransactionResponseArgs,\n  type SerializedSignAndSubmitTransactionRequestArgs,\n  type SerializedSignTransactionRequestArgs,\n  type SerializedSignTransactionResponseArgs,\n  serializeSignAndSubmitTransactionRequestArgs,\n  serializeSignTransactionRequestArgs,\n  type SignAndSubmitTransactionRequestArgs,\n  type SignAndSubmitTransactionResponseArgs,\n  SignMessageRequestArgs,\n  SignMessageResponseArgs,\n  type SignTransactionRequestArgs,\n  type SignTransactionResponseArgs,\n  type SignTransactionWithPayloadRequestArgs,\n  type SignTransactionWithPayloadResponseArgs,\n  type SignTransactionWithRawTxnRequestArgs,\n  type SignTransactionWithRawTxnResponseArgs,\n} from '@identity-connect/wallet-api';\nimport axios, { AxiosError, AxiosInstance, CreateAxiosDefaults, isAxiosError } from 'axios';\nimport { DEFAULT_FRONTEND_URL } from './constants';\nimport { PairingExpiredError, SignatureRequestError } from './errors';\nimport { DappPairingData, DappStateAccessors, windowStateAccessors } from './state';\nimport { CancelToken } from './types';\nimport { validateSignAndSubmitTransactionResponse, validateSignMessageResponse } from './utils';\n\nconst API_VERSION = '0.2.0' as const;\nconst SIGNING_REQUEST_POLLING_INTERVAL = 2500;\nconst SEQUENCE_NUMBER_MISMATCH_PATTERN = /^Sequence number mismatch, expected (?:\\S+ to be )?(\\d+)/;\n\nasync function waitFor(milliseconds: number) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, milliseconds);\n  });\n}\n\nasync function withRetries<Response>(\n  requestFn: () => Promise<Response>,\n  onError: (err: any) => void,\n  retries: number = 1,\n) {\n  for (let i = 0; i < retries; i += 1) {\n    try {\n      return await requestFn();\n    } catch (err) {\n      onError(err);\n    }\n  }\n  return requestFn();\n}\n\nexport interface SignRequestOptions {\n  cancelToken?: CancelToken;\n  networkName?: NetworkName;\n}\n\nexport type OnDisconnectListener = (address: string) => void;\nexport type OnDisconnectListenerCleanup = () => void;\n\nexport interface ACPairingClientConfig {\n  accessors?: DappStateAccessors;\n  axiosConfig?: CreateAxiosDefaults;\n  defaultNetworkName?: NetworkName;\n}\n\nexport class ACPairingClient {\n  protected readonly accessors: DappStateAccessors;\n  private readonly defaultNetworkName: NetworkName;\n  protected readonly axiosInstance: AxiosInstance;\n  private readonly initPromise?: Promise<void>;\n\n  constructor({\n    accessors = windowStateAccessors,\n    axiosConfig,\n    defaultNetworkName = NetworkName.MAINNET,\n  }: ACPairingClientConfig = {}) {\n    this.accessors = accessors;\n    this.defaultNetworkName = defaultNetworkName;\n    this.axiosInstance = axios.create({\n      baseURL: DEFAULT_FRONTEND_URL,\n      ...axiosConfig,\n    });\n\n    const isClientSideRendering = typeof window !== 'undefined';\n    this.initPromise = isClientSideRendering ? this.syncFirstPairing() : undefined;\n  }\n\n  private async getPairing(id: string) {\n    const response = await this.axiosInstance.get<GetPairingSerializedResponse>(`v1/pairing/${id}/`);\n    return response.data.data.pairing;\n  }\n\n  private async syncFirstPairing() {\n    const pairings = await this.accessors.getAll();\n    const firstPairing = Object.values(pairings)[0];\n    if (firstPairing === undefined) {\n      return;\n    }\n\n    try {\n      const { dappSpecificWallet, maxDappSequenceNumber } = await this.getPairing(firstPairing.pairingId);\n      await this.accessors.update(firstPairing.accountAddress, {\n        ...firstPairing,\n        currSequenceNumber: maxDappSequenceNumber,\n        dappWalletId: dappSpecificWallet?.id,\n      });\n    } catch (err) {\n      await this.accessors.update(firstPairing.accountAddress, undefined);\n    }\n  }\n\n  private async createSigningRequest<TRequestBody>(\n    pairing: DappPairingData,\n    type: string,\n    networkName: NetworkName,\n    requestBody: TRequestBody,\n  ) {\n    const dappEd25519SecretKey = decodeBase64(pairing.dappEd25519SecretKeyB64);\n    const dappEd25519PublicKey = decodeBase64(pairing.dappEd25519PublicKeyB64);\n    const accountTransportEd25519PublicKey = decodeBase64(pairing.accountTransportEd25519PublicKeyB64);\n\n    let sequenceNumber = pairing.currSequenceNumber + 1;\n    return withRetries(\n      async () => {\n        const requestEnvelope = await encryptAndSignEnvelope<any, any>(\n          toKey(dappEd25519SecretKey, KeyTypes.Ed25519SecretKey),\n          toKey(dappEd25519PublicKey, KeyTypes.Ed25519PublicKey),\n          toKey(accountTransportEd25519PublicKey, KeyTypes.Ed25519PublicKey),\n          sequenceNumber,\n          { apiVersion: API_VERSION, networkName, requestType: type },\n          requestBody,\n        );\n\n        const response = await this.axiosInstance.post<CreateSigningRequestSerializedResponse>(\n          `v1/pairing/${pairing.pairingId}/signing-request/`,\n          requestEnvelope,\n        );\n\n        await this.accessors.update(pairing.accountAddress, {\n          ...pairing,\n          currSequenceNumber: sequenceNumber,\n        });\n\n        return response.data.data.signingRequest;\n      },\n      (err) => {\n        if (isAxiosError(err)) {\n          const errorMessage: string = err.response?.data?.message;\n          const expectedSequenceNumber = errorMessage?.match(SEQUENCE_NUMBER_MISMATCH_PATTERN)?.[1];\n          if (expectedSequenceNumber !== undefined) {\n            sequenceNumber = Number(expectedSequenceNumber);\n            return;\n          }\n        }\n        throw err;\n      },\n    );\n  }\n\n  private async getSigningRequest(id: string) {\n    const response = await this.axiosInstance.get<GetSigningRequestSerializedResponse | undefined>(\n      `v1/signing-request/${id}/`,\n      {\n        validateStatus: (status) => status === 200 || status === 404,\n      },\n    );\n    return response.data?.data?.signingRequest;\n  }\n\n  protected async deletePairing(pairingId: string, secretKey: Ed25519SecretKey, publicKey: Ed25519PublicKey) {\n    const requestEnvelope = await encryptAndSignEnvelope<any, any>(\n      secretKey,\n      publicKey,\n      publicKey,\n      0, // ignored\n      {},\n      {},\n    );\n\n    await this.axiosInstance.post<CreateSigningRequestSerializedResponse>(\n      `v1/pairing/${pairingId}/delete/`,\n      requestEnvelope,\n      { validateStatus: (status) => status === 204 || status === 404 },\n    );\n  }\n\n  async cancelSigningRequest(pairing: DappPairingData, id: string) {\n    const sequenceNumber = pairing.currSequenceNumber;\n    const dappEd25519SecretKey = decodeBase64(pairing.dappEd25519SecretKeyB64);\n    const dappEd25519PublicKey = decodeBase64(pairing.dappEd25519PublicKeyB64);\n    const accountTransportEd25519PublicKey = decodeBase64(pairing.accountTransportEd25519PublicKeyB64);\n\n    const requestEnvelope = await encryptAndSignEnvelope<any, any>(\n      toKey(dappEd25519SecretKey, KeyTypes.Ed25519SecretKey),\n      toKey(dappEd25519PublicKey, KeyTypes.Ed25519PublicKey),\n      toKey(accountTransportEd25519PublicKey, KeyTypes.Ed25519PublicKey),\n      sequenceNumber + 1,\n      {},\n      {},\n    );\n\n    const response = await this.axiosInstance.patch<CancelSigningRequestSerializedResponse>(\n      `v1/signing-request/${id}/cancel/`,\n      requestEnvelope,\n    );\n\n    // TODO: auto-sync sequence number on error\n    await this.accessors.update(pairing.accountAddress, {\n      ...pairing,\n      currSequenceNumber: sequenceNumber + 1,\n    });\n\n    return response.data.data.signingRequest;\n  }\n\n  private async signRequest<TRequestBody, TResponseBody>(\n    address: string,\n    type: SigningRequestTypes,\n    requestBody: TRequestBody,\n    { cancelToken, networkName }: SignRequestOptions = {},\n  ) {\n    await this.initPromise;\n    const pairing = await this.accessors.get(address);\n    if (pairing === undefined) {\n      throw new Error('The requested account is not paired');\n    }\n\n    let signingRequest: SerializedDate<SigningRequestData>;\n\n    try {\n      signingRequest = await this.createSigningRequest<TRequestBody>(\n        pairing,\n        type,\n        networkName || this.defaultNetworkName,\n        requestBody,\n      );\n\n      while (signingRequest.status === 'PENDING') {\n        await waitFor(SIGNING_REQUEST_POLLING_INTERVAL);\n        if (cancelToken?.cancelled) {\n          // TODO: send cancel request\n          signingRequest.status = SigningRequestStatus.CANCELLED;\n          break;\n        }\n        signingRequest = (await this.getSigningRequest(signingRequest.id)) ?? signingRequest;\n      }\n    } catch (err) {\n      if (isAxiosError(err) && err.code === '404') {\n        await this.accessors.update(address, undefined);\n        for (const listener of this.onDisconnectListeners) {\n          listener(address);\n        }\n        throw new PairingExpiredError();\n      }\n      throw err;\n    }\n\n    if (signingRequest.status !== 'APPROVED') {\n      throw new SignatureRequestError(signingRequest.status);\n    }\n\n    const decrypted = decryptEnvelope<{}, TResponseBody & {}>(\n      toKey(decodeBase64(pairing.accountTransportEd25519PublicKeyB64), KeyTypes.Ed25519PublicKey),\n      toKey(decodeBase64(pairing.dappEd25519SecretKeyB64), KeyTypes.Ed25519SecretKey),\n      signingRequest.responseEnvelope!,\n    );\n    return decrypted.privateMessage;\n  }\n\n  // region Public API\n\n  /**\n   * Requests a connection to an account (internally known as pairing).\n   * @returns either the address of the connected account, or undefined if the\n   * connection was cancelled.\n   */\n  async addPairing({ publicKey, secretKey }: Ed25519KeyPair, finalizedPairing: SerializedDate<FinalizedPairingData>) {\n    await this.accessors.update(finalizedPairing.account.accountAddress, {\n      accountAddress: finalizedPairing.account.accountAddress,\n      accountAlias: finalizedPairing.account.userSubmittedAlias ?? undefined,\n      accountPublicKeyB64: finalizedPairing.account.publicKeyB64,\n      accountTransportEd25519PublicKeyB64: finalizedPairing.account.transportEd25519PublicKeyB64,\n      currSequenceNumber: finalizedPairing.maxDappSequenceNumber,\n      dappEd25519PublicKeyB64: encodeBase64(publicKey.key),\n      dappEd25519SecretKeyB64: encodeBase64(secretKey.key),\n      dappWalletId: finalizedPairing.dappSpecificWalletId,\n      pairingId: finalizedPairing.id,\n    });\n  }\n\n  async disconnect(address: string) {\n    const pairing = await this.accessors.get(address);\n    if (pairing === undefined) {\n      throw new Error('The specified account is not paired');\n    }\n\n    const dappEd25519SecretKey = decodeBase64(pairing.dappEd25519SecretKeyB64);\n    const dappEd25519PublicKey = decodeBase64(pairing.dappEd25519PublicKeyB64);\n    await this.deletePairing(\n      pairing.pairingId,\n      toKey(dappEd25519SecretKey, KeyTypes.Ed25519SecretKey),\n      toKey(dappEd25519PublicKey, KeyTypes.Ed25519PublicKey),\n    );\n    await this.accessors.update(address, undefined);\n    for (const listener of this.onDisconnectListeners) {\n      listener(address);\n    }\n  }\n\n  async signMessage(address: string, args: SignMessageRequestArgs, options?: SignRequestOptions) {\n    const response = await this.signRequest<SignMessageRequestArgs, SignMessageResponseArgs>(\n      address,\n      SigningRequestTypes.SIGN_MESSAGE,\n      args,\n      options,\n    );\n    validateSignMessageResponse(response);\n    return response;\n  }\n\n  // region signTransaction\n\n  async signTransaction(\n    address: string,\n    args: SignTransactionWithPayloadRequestArgs,\n    options?: SignRequestOptions,\n  ): Promise<SignTransactionWithPayloadResponseArgs>;\n\n  async signTransaction(\n    address: string,\n    args: SignTransactionWithRawTxnRequestArgs,\n    options?: SignRequestOptions,\n  ): Promise<SignTransactionWithRawTxnResponseArgs>;\n\n  async signTransaction(\n    address: string,\n    args: SignTransactionRequestArgs,\n    options?: SignRequestOptions,\n  ): Promise<SignTransactionResponseArgs>;\n\n  async signTransaction(\n    address: string,\n    args: SignTransactionRequestArgs,\n    options?: SignRequestOptions,\n  ): Promise<SignTransactionResponseArgs> {\n    const serializedRequestArgs = serializeSignTransactionRequestArgs(args);\n    const serializedResponseArgs = await this.signRequest<\n      SerializedSignTransactionRequestArgs,\n      SerializedSignTransactionResponseArgs\n    >(address, SigningRequestTypes.SIGN_TRANSACTION, serializedRequestArgs, options);\n    return deserializeSignTransactionResponseArgs(serializedResponseArgs);\n  }\n\n  // endregion\n\n  async signAndSubmitTransaction(\n    address: string,\n    args: SignAndSubmitTransactionRequestArgs,\n    options?: SignRequestOptions,\n  ): Promise<SignAndSubmitTransactionResponseArgs> {\n    const serializedRequestArgs = serializeSignAndSubmitTransactionRequestArgs(args);\n    try {\n      const responseArgs = await this.signRequest<\n        SerializedSignAndSubmitTransactionRequestArgs,\n        SignAndSubmitTransactionResponseArgs\n      >(address, SigningRequestTypes.SIGN_AND_SUBMIT_TRANSACTION, serializedRequestArgs, options);\n      validateSignAndSubmitTransactionResponse(responseArgs);\n      return responseArgs;\n    } catch (e) {\n      if (e instanceof AxiosError && e.response?.data?.message) {\n        throw new Error(e.response?.data?.message);\n      }\n      throw e;\n    }\n  }\n\n  async getConnectedAccounts() {\n    await this.initPromise;\n    const pairings = await this.accessors.getAll();\n    return Object.values(pairings).map<AccountInfo>(\n      ({ accountAddress, accountEd25519PublicKeyB64, accountPublicKeyB64 }) => ({\n        address: AccountAddress.from(accountAddress),\n        publicKey:\n          accountPublicKeyB64 !== undefined\n            ? deserializePublicKeyB64(accountPublicKeyB64)\n            : deserializeEd25519PublicKeyB64(accountEd25519PublicKeyB64),\n      }),\n    );\n  }\n\n  // endregion\n\n  private readonly onDisconnectListeners = new Set<OnDisconnectListener>();\n\n  onDisconnect(listener: OnDisconnectListener): OnDisconnectListenerCleanup {\n    this.onDisconnectListeners.add(listener);\n    return () => this.onDisconnectListeners.delete(listener);\n  }\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  chainIdToNetwork,\n  ConnectRequest,\n  ConnectResponse,\n  type DappInfo,\n  DisconnectRequest,\n  GetConnectedAccountsRequest,\n  GetConnectedAccountsResponse,\n  makeUserApproval,\n  SignAndSubmitTransactionRequest,\n  SignAndSubmitTransactionResponse,\n  SignInRequest,\n  SignInResponse,\n  SignMessageRequest,\n  SignMessageResponse,\n  SignTransactionRequest,\n  SignTransactionResponse,\n  UserApproval,\n  UserDismissal,\n} from '@aptos-connect/wallet-api';\nimport { WebWalletTransport } from '@aptos-connect/web-transport';\nimport {\n  AccountAddress,\n  AccountAddressInput,\n  AnySignature,\n  AptosConfig,\n  Deserializer,\n  Ed25519Signature,\n  FeePayerRawTransaction,\n  generateRawTransaction,\n  Hex,\n} from '@aptos-labs/ts-sdk';\nimport { NetworkName } from '@identity-connect/api';\nimport { createEd25519KeyPair, encodeBase64 } from '@identity-connect/crypto';\nimport { SignAndSubmitTransactionRequestArgs } from '@identity-connect/wallet-api';\nimport { DEFAULT_FRONTEND_URL } from './constants';\nimport { normalizePayloadForIC } from './conversion';\nimport { ACPairingClient } from './PairingClient';\n\nexport interface WithSignerAddress {\n  signerAddress: AccountAddress;\n}\n\nexport interface ACDappClientConfig {\n  backendBaseURL?: string;\n  dappId?: string;\n  dappImageURI?: string;\n  dappName?: string;\n  defaultNetworkName?: NetworkName;\n  frontendBaseURL?: string;\n  provider?: 'google' | 'apple';\n  tgWebAppURL?: string;\n}\n\nexport class ACDappClient {\n  private readonly defaultNetworkName: NetworkName;\n  readonly dappInfo: DappInfo;\n\n  private readonly transport: WebWalletTransport;\n\n  private readonly dappId?: string;\n  private readonly pairingClient: ACPairingClient;\n\n  constructor({\n    backendBaseURL,\n    dappId,\n    dappImageURI,\n    dappName,\n    defaultNetworkName = NetworkName.MAINNET,\n    frontendBaseURL = DEFAULT_FRONTEND_URL,\n    provider = 'google',\n    tgWebAppURL,\n  }: ACDappClientConfig = {}) {\n    this.defaultNetworkName = defaultNetworkName;\n\n    this.dappInfo = {\n      domain: window.location.origin,\n      imageURI: dappImageURI,\n      name: dappName ?? document.title,\n    };\n\n    this.transport = new WebWalletTransport(frontendBaseURL, provider, tgWebAppURL);\n\n    this.dappId = dappId;\n    this.pairingClient = new ACPairingClient({\n      axiosConfig: {\n        baseURL: backendBaseURL ?? frontendBaseURL,\n      },\n      defaultNetworkName,\n    });\n  }\n\n  // region Public API\n\n  private async getKeylessAccounts() {\n    const serializedRequest = GetConnectedAccountsRequest.serialize(this.dappInfo);\n    const serializedResponse = await this.transport.sendRequest(serializedRequest);\n    const response = GetConnectedAccountsResponse.deserialize(serializedResponse);\n    return response.args;\n  }\n\n  private async getIcAccounts() {\n    return this.pairingClient.getConnectedAccounts() ?? [];\n  }\n\n  private async isIcAccount(address: AccountAddressInput) {\n    const icAccounts = await this.getIcAccounts();\n    return icAccounts.find((account) => account.address.equals(AccountAddress.from(address))) !== undefined;\n  }\n\n  async getConnectedAccounts() {\n    const keylessAccounts = await this.getKeylessAccounts();\n    const icAccounts = await this.getIcAccounts();\n    return [...keylessAccounts, ...icAccounts];\n  }\n\n  async disconnect(address: AccountAddressInput) {\n    if (await this.isIcAccount(address)) {\n      const stringAddress = AccountAddress.from(address).toString();\n      await this.pairingClient.disconnect(stringAddress);\n    } else {\n      const serializedRequest = DisconnectRequest.serialize(this.dappInfo);\n      await this.transport.sendRequest(serializedRequest);\n    }\n  }\n\n  async connect({\n    claimOptions,\n    preferredWalletName,\n  }: Omit<ConnectRequest.Args, 'dappId' | 'dappEd25519PublicKeyB64'> = {}) {\n    const dappKeypair = createEd25519KeyPair();\n    const injectedPreferredWalletName =\n      typeof window !== 'undefined' ? (window as any).AC_PREFERRED_WALLET_NAME : undefined;\n\n    const requestArgs = {\n      claimOptions,\n      dappEd25519PublicKeyB64: encodeBase64(dappKeypair.publicKey.key),\n      dappId: this.dappId,\n      preferredWalletName: preferredWalletName ?? injectedPreferredWalletName,\n    } satisfies ConnectRequest.Args;\n\n    const serializedRequest = ConnectRequest.serialize(this.dappInfo, requestArgs);\n    const serializedResponse = await this.transport.sendRequest(serializedRequest);\n    const response = ConnectResponse.deserialize(serializedResponse);\n\n    if (response.args.status === 'approved') {\n      const { account, pairing } = response.args.args;\n      if (pairing) {\n        await this.pairingClient.addPairing(dappKeypair, pairing);\n      }\n      return makeUserApproval({ account });\n    }\n    return response.args;\n  }\n\n  async signIn(args: SignInRequest.Args): Promise<UserDismissal | UserApproval<SignInResponse.ApprovalArgs>> {\n    const serializedRequest = SignInRequest.serialize(this.dappInfo, args);\n\n    const serializedResponse = await this.transport.sendRequest(serializedRequest);\n\n    const response = SignInResponse.deserialize(serializedResponse);\n\n    return response.args;\n  }\n\n  async signMessage(args: SignMessageRequest.Args & WithSignerAddress) {\n    const { signerAddress } = args;\n\n    if (await this.isIcAccount(signerAddress)) {\n      const { chainId } = args;\n      const network = chainIdToNetwork(chainId) as string;\n\n      let message: string;\n      let nonce: string;\n      try {\n        message = new TextDecoder().decode(args.message);\n        nonce = new TextDecoder().decode(args.nonce);\n      } catch (err) {\n        throw new Error('Only UTF-8 encoded text is supported when using IC');\n      }\n\n      const { fullMessage, signature: hexSignature } = await this.pairingClient.signMessage(\n        signerAddress.toString(),\n        {\n          address: true,\n          application: true,\n          chainId: true,\n          message,\n          nonce,\n        },\n        { networkName: network as NetworkName },\n      );\n\n      const signatureBytes = Hex.fromHexInput(hexSignature).toUint8Array();\n      const signature =\n        signatureBytes.length === Ed25519Signature.LENGTH\n          ? new Ed25519Signature(signatureBytes)\n          : AnySignature.deserialize(new Deserializer(signatureBytes));\n      return makeUserApproval<SignMessageResponse.ApprovalArgs>({\n        fullMessage,\n        signature,\n      });\n    }\n    const serializedRequest = SignMessageRequest.serialize(this.dappInfo, args);\n    const serializedResponse = await this.transport.sendRequest(serializedRequest);\n    const response = SignMessageResponse.deserialize(serializedResponse);\n    return response.args;\n  }\n\n  async signTransaction(\n    args: (SignTransactionRequest.Args | SignTransactionRequest.ArgsWithTransaction) & WithSignerAddress,\n  ): Promise<SignTransactionResponse.Args> {\n    const normalizedArgs = 'transaction' in args ? SignTransactionRequest.normalizeArgs(args) : args;\n    const { signerAddress } = args;\n\n    if (await this.isIcAccount(signerAddress)) {\n      const {\n        expirationSecondsFromNow,\n        expirationTimestamp,\n        feePayer,\n        gasUnitPrice,\n        maxGasAmount,\n        network,\n        payload,\n        secondarySigners,\n        sender,\n        sequenceNumber,\n      } = normalizedArgs;\n\n      if (feePayer !== undefined) {\n        throw new Error('Sponsored transaction not currently supported');\n      }\n\n      if (secondarySigners && secondarySigners.length > 0) {\n        throw new Error('Multi-agent transactions not currently supported');\n      }\n\n      if (!('bcsToBytes' in payload)) {\n        throw new Error('Payload input format is only supported with Keyless accounts.');\n      }\n\n      const responseArgs = await this.pairingClient.signTransaction(\n        signerAddress.toString(),\n        {\n          options: {\n            expirationSecondsFromNow,\n            expirationTimestamp,\n            gasUnitPrice,\n            maxGasAmount,\n            sender: sender?.address.toString(),\n            sequenceNumber: sequenceNumber !== undefined ? Number(sequenceNumber) : undefined,\n          },\n          payload,\n        },\n        {\n          networkName: network as NetworkName | undefined,\n        },\n      );\n      return makeUserApproval({\n        authenticator: responseArgs.accountAuthenticator,\n        rawTransaction: responseArgs.rawTxn,\n      });\n    }\n\n    const serializedRequest = SignTransactionRequest.serialize(this.dappInfo, normalizedArgs);\n    const serializedResponse = await this.transport.sendRequest(serializedRequest);\n    const response = SignTransactionResponse.deserialize(serializedResponse);\n    return response.args;\n  }\n\n  async signAndSubmitTransaction(args: SignAndSubmitTransactionRequest.Args & WithSignerAddress) {\n    const { signerAddress } = args;\n    if (await this.isIcAccount(signerAddress)) {\n      const { expirationTimestamp, feePayer, gasUnitPrice, maxGasAmount, network } = args;\n      const aptosConfig = new AptosConfig({ network });\n\n      let convertedArgs: SignAndSubmitTransactionRequestArgs;\n      if (feePayer !== undefined) {\n        const payload = await normalizePayloadForIC(args.payload, aptosConfig);\n        const rawTxn = await generateRawTransaction({\n          aptosConfig,\n          feePayerAddress: feePayer.address,\n          options: {\n            gasUnitPrice,\n            maxGasAmount,\n          },\n          payload,\n          sender: signerAddress,\n        });\n        convertedArgs = {\n          feePayerAuthenticator: feePayer.authenticator,\n          rawTxn: new FeePayerRawTransaction(rawTxn, [], feePayer.address),\n        };\n      } else {\n        const payload = normalizePayloadForIC(args.payload);\n        convertedArgs = {\n          options: {\n            expirationTimestamp,\n            gasUnitPrice,\n            maxGasAmount,\n          },\n          payload,\n        };\n      }\n\n      const { hash } = await this.pairingClient.signAndSubmitTransaction(signerAddress.toString(), convertedArgs, {\n        networkName: network as NetworkName | undefined,\n      });\n      return makeUserApproval<SignAndSubmitTransactionResponse.ApprovalArgs>({ txnHash: hash });\n    }\n\n    const serializedRequest = SignAndSubmitTransactionRequest.serialize(this.dappInfo, args);\n    const serializedResponse = await this.transport.sendRequest(serializedRequest);\n    const response = SignAndSubmitTransactionResponse.deserialize(serializedResponse);\n    return response.args;\n  }\n\n  // endregion\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { CreatePairingSerializedResponse, FinalizedPairingData, SerializedDate } from '@identity-connect/api';\nimport { createEd25519KeyPair, encodeBase64 } from '@identity-connect/crypto';\nimport { isAxiosError } from 'axios';\nimport { DEFAULT_FRONTEND_URL } from './constants';\nimport { UnregisteredDappError } from './errors';\nimport { ACPairingClient, ACPairingClientConfig } from './PairingClient';\nimport { openPrompt, waitForPromptResponse } from './prompt';\n\nexport interface ICDappClientConfig extends ACPairingClientConfig {\n  frontendBaseURL?: string;\n}\n\nexport class ICDappClient extends ACPairingClient {\n  private readonly frontendBaseURL: string;\n\n  constructor(\n    private readonly dappId: string,\n    { frontendBaseURL = DEFAULT_FRONTEND_URL, ...pairingClientConfig }: ICDappClientConfig = {},\n  ) {\n    super(pairingClientConfig);\n    this.frontendBaseURL = frontendBaseURL;\n  }\n\n  private async createPairingRequest(dappEd25519PublicKeyB64: string) {\n    try {\n      const response = await this.axiosInstance.post<CreatePairingSerializedResponse>('v1/pairing/', {\n        dappEd25519PublicKeyB64,\n        dappId: this.dappId,\n      });\n      return response.data.data.pairing;\n    } catch (err) {\n      // TODO: export typed errors from API\n      if (isAxiosError(err) && err.response?.data?.message === 'Dapp not found') {\n        throw new UnregisteredDappError();\n      }\n      throw err;\n    }\n  }\n\n  // region Public API\n\n  /**\n   * Requests a connection to an account (internally known as pairing).\n   * @returns either the address of the connected account, or undefined if the\n   * connection was cancelled.\n   */\n  async connect() {\n    const { publicKey, secretKey } = createEd25519KeyPair();\n    const dappEd25519PublicKeyB64 = encodeBase64(publicKey.key);\n\n    // Open the prompt without pairingId (for a snappier ux)\n    const url = new URL(`${this.frontendBaseURL}/pairing`);\n    const promptWindow = await openPrompt(url.href);\n\n    let pairingId: string;\n    try {\n      const pendingPairing = await this.createPairingRequest(dappEd25519PublicKeyB64);\n      pairingId = pendingPairing.id;\n    } catch (err) {\n      // Close the prompt and have the dapp handle the error\n      promptWindow.close();\n      throw err;\n    }\n\n    // Update the prompt's URL as soon as a pairingId is available\n    url.searchParams.set('pairingId', pairingId);\n    promptWindow.location.href = url.href;\n    const promptResponse = await waitForPromptResponse<SerializedDate<FinalizedPairingData>>(promptWindow);\n\n    if (promptResponse.status === 'dismissed') {\n      // Ignore the result. This is just a courtesy call, so if anything goes wrong\n      // the pairing will be removed during scheduled cleanup)\n      void this.deletePairing(pairingId, secretKey, publicKey);\n      return undefined;\n    }\n\n    const finalizedPairing = promptResponse.args;\n    await this.addPairing({ publicKey, secretKey }, finalizedPairing);\n\n    return finalizedPairing.account.accountAddress;\n  }\n\n  async offboard(address: string) {\n    const pairing = await this.accessors.get(address);\n    if (pairing === undefined) {\n      throw new Error('This account is not paired');\n    }\n\n    const walletId = pairing.dappWalletId;\n    if (walletId === undefined) {\n      throw new Error('This account cannot be offboarded');\n    }\n\n    const url = new URL(`${this.frontendBaseURL}/offboarding?walletId=${walletId}`);\n    const promptWindow = openPrompt(url);\n    const response = await waitForPromptResponse<{ offboarded: boolean }>(promptWindow);\n    if (response.status === 'approved' && response.args.offboarded) {\n      // If exported, disconnect the pairing to clean up\n      this.disconnect(address);\n      return true;\n    }\n    return false;\n  }\n\n  // endregion\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  AccountAddress,\n  AnyPublicKey,\n  Ed25519PublicKey,\n  MultiEd25519PublicKey,\n  MultiKey,\n  PublicKey,\n  SigningScheme,\n} from '@aptos-labs/ts-sdk';\nimport { AccountInfo, APTOS_CHAINS, AptosWalletAccount } from '@aptos-labs/wallet-standard';\n\nexport class AptosConnectAccount implements AptosWalletAccount {\n  // region AptosWalletAccount\n\n  readonly chains = APTOS_CHAINS;\n\n  get address() {\n    return this.#address.toString();\n  }\n\n  get publicKey() {\n    return this.#publicKey.toUint8Array();\n  }\n\n  get signingScheme() {\n    if (this.#publicKey instanceof Ed25519PublicKey) {\n      return SigningScheme.Ed25519;\n    }\n    if (this.#publicKey instanceof MultiEd25519PublicKey) {\n      return SigningScheme.MultiEd25519;\n    }\n    if (this.#publicKey instanceof AnyPublicKey) {\n      return SigningScheme.SingleKey;\n    }\n    if (this.#publicKey instanceof MultiKey) {\n      return SigningScheme.MultiKey;\n    }\n    throw new Error('Unsupported public key type');\n  }\n\n  readonly label?: string;\n\n  readonly features = [];\n\n  // endregion\n\n  // region PetraAccount\n\n  readonly #address: AccountAddress;\n\n  readonly #publicKey: PublicKey;\n\n  constructor({ address, ansName, publicKey }: AccountInfo) {\n    this.#publicKey = publicKey;\n    this.#address = address;\n    this.label = ansName;\n  }\n\n  // endregion\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { ClaimOptions } from '@aptos-connect/wallet-api';\nimport {\n  AccountAddress,\n  AccountAuthenticator,\n  AnyRawTransaction,\n  Aptos,\n  AptosConfig,\n  Ed25519PrivateKey,\n  HexInput,\n  MultiAgentTransaction,\n  Network,\n  NetworkToNodeAPI,\n  SimpleTransaction,\n} from '@aptos-labs/ts-sdk';\nimport {\n  AccountInfo,\n  APTOS_CHAINS,\n  AptosSignAndSubmitTransactionInput,\n  AptosSignAndSubmitTransactionOutput,\n  AptosSignInInput,\n  AptosSignInOutput,\n  AptosSignMessageInput,\n  AptosSignMessageOutput,\n  AptosSignTransactionInputV1_1,\n  AptosSignTransactionOutputV1_1,\n  AptosWalletError,\n  AptosWalletErrorCode,\n  NetworkInfo,\n  UserResponse,\n  UserResponseStatus,\n} from '@aptos-labs/wallet-standard';\nimport { deserializePublicKeyB64, serializePublicKeyB64 } from '@identity-connect/crypto';\nimport { ACDappClient, ACDappClientConfig } from '@identity-connect/dapp-sdk';\nimport { AptosConnectAccount } from './AptosConnectAccount';\nimport { customAccountToStandardAccount, networkToChainId, unwrapUserResponse } from './helpers';\n\ninterface SerializedCurrentAccount {\n  address: string;\n  publicKey: string;\n}\n\ntype WithSSOProvider<T> = T & {\n  provider: 'google' | 'apple';\n};\n\nexport interface AptosConnectWalletConfig extends Omit<ACDappClientConfig, 'defaultNetworkName' | 'provider'> {\n  claimSecretKey?: HexInput;\n  network?: Network;\n  preferredWalletName?: string;\n}\n\nexport abstract class AptosConnectWallet {\n  // region connectedAccount\n\n  protected static connectedAccountStorageKey = '@aptos-connect/connectedAccount';\n\n  protected static get connectedAccount(): AccountInfo | undefined {\n    const serialized = localStorage.getItem(AptosConnectWallet.connectedAccountStorageKey);\n    if (!serialized) {\n      return undefined;\n    }\n\n    try {\n      const { address, publicKey } = JSON.parse(serialized) as SerializedCurrentAccount;\n      return new AccountInfo({\n        address: AccountAddress.from(address),\n        publicKey: deserializePublicKeyB64(publicKey),\n      });\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.warn('Inconsistent state, resetting it');\n      this.connectedAccount = undefined;\n      return undefined;\n    }\n  }\n\n  protected static set connectedAccount(value: AccountInfo | undefined) {\n    if (value !== undefined) {\n      const serialized: SerializedCurrentAccount = {\n        address: value.address.toString(),\n        publicKey: serializePublicKeyB64(value.publicKey),\n      };\n      localStorage.setItem(AptosConnectWallet.connectedAccountStorageKey, JSON.stringify(serialized));\n    } else {\n      localStorage.removeItem(AptosConnectWallet.connectedAccountStorageKey);\n    }\n  }\n\n  // endregion\n\n  // region AptosWallet\n\n  readonly version = '1.0.0';\n\n  readonly chains = APTOS_CHAINS;\n\n  // eslint-disable-next-line class-methods-use-this\n  get accounts() {\n    const { connectedAccount } = AptosConnectWallet;\n    return connectedAccount ? [new AptosConnectAccount(connectedAccount)] : [];\n  }\n\n  // endregion\n\n  // PetraWallet\n\n  private readonly aptosClient: Aptos;\n\n  private readonly client: ACDappClient;\n\n  private readonly preferredWalletName?: string;\n  private readonly claimOptions?: ClaimOptions;\n\n  constructor({\n    claimSecretKey,\n    network = Network.MAINNET,\n    preferredWalletName,\n    ...clientConfig\n  }: WithSSOProvider<AptosConnectWalletConfig>) {\n    this.client = new ACDappClient(clientConfig);\n\n    if (!NetworkToNodeAPI[network]) {\n      throw new Error('Network not supported');\n    }\n\n    const aptosConfig = new AptosConfig({ network });\n    this.aptosClient = new Aptos(aptosConfig);\n    this.preferredWalletName = preferredWalletName;\n    this.claimOptions = claimSecretKey ? { network, secretKey: new Ed25519PrivateKey(claimSecretKey) } : undefined;\n  }\n\n  async connect(): Promise<UserResponse<AccountInfo>> {\n    // If this is an auto-connect, try not opening the prompt\n    const { connectedAccount } = AptosConnectWallet;\n    if (connectedAccount !== undefined) {\n      return { args: connectedAccount, status: UserResponseStatus.APPROVED };\n    }\n\n    const response = await this.client.connect({\n      claimOptions: this.claimOptions,\n      preferredWalletName: this.preferredWalletName,\n    });\n    if (response.status === 'dismissed') {\n      return { status: UserResponseStatus.REJECTED };\n    }\n\n    const newConnectedAccount = customAccountToStandardAccount(response.args.account);\n    AptosConnectWallet.connectedAccount = newConnectedAccount;\n\n    return {\n      args: newConnectedAccount,\n      status: UserResponseStatus.APPROVED,\n    };\n  }\n\n  async disconnect() {\n    const { connectedAccount } = AptosConnectWallet;\n    if (connectedAccount) {\n      await this.client.disconnect(connectedAccount.address);\n      AptosConnectWallet.connectedAccount = undefined;\n    }\n  }\n\n  async signIn(input: AptosSignInInput): Promise<UserResponse<AptosSignInOutput>> {\n    const response = await this.client.signIn({ network: this.aptosClient.config.network, ...input });\n\n    if (response.status === 'dismissed') {\n      return { status: UserResponseStatus.REJECTED };\n    }\n\n    const output = response.args;\n\n    AptosConnectWallet.connectedAccount = output.account;\n\n    return { args: output, status: UserResponseStatus.APPROVED };\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async getAccount(): Promise<AccountInfo> {\n    const { connectedAccount } = AptosConnectWallet;\n    if (!connectedAccount) {\n      // TODO: this function should fail gracefully\n      throw new AptosWalletError(AptosWalletErrorCode.Unauthorized);\n    }\n    return customAccountToStandardAccount(connectedAccount);\n  }\n\n  async getNetwork(): Promise<NetworkInfo> {\n    const { network } = this.aptosClient.config;\n    const chainId = await this.aptosClient.getChainId();\n    const url = NetworkToNodeAPI[network];\n    return {\n      chainId,\n      name: network,\n      url,\n    };\n  }\n\n  async signMessage(input: AptosSignMessageInput): Promise<UserResponse<AptosSignMessageOutput>> {\n    const { connectedAccount } = AptosConnectWallet;\n    if (!connectedAccount) {\n      throw new AptosWalletError(AptosWalletErrorCode.Unauthorized);\n    }\n\n    const chainId = networkToChainId(this.aptosClient.config.network);\n    const { message, nonce } = input;\n\n    const encoder = new TextEncoder();\n    const messageBytes = encoder.encode(message);\n    const nonceBytes = encoder.encode(nonce);\n\n    const response = await this.client.signMessage({\n      chainId,\n      message: messageBytes,\n      nonce: nonceBytes,\n      signerAddress: connectedAccount.address,\n    });\n\n    if (response.status === 'dismissed') {\n      return { status: UserResponseStatus.REJECTED };\n    }\n\n    const { fullMessage, signature } = response.args;\n\n    const extraResponseArgs = {\n      address: connectedAccount.address.toString(),\n      application: this.client.dappInfo.domain,\n      chainId,\n      message,\n      nonce,\n      prefix: 'APTOS' as const,\n    };\n\n    return {\n      args: {\n        fullMessage,\n        signature,\n        ...extraResponseArgs,\n      },\n      status: UserResponseStatus.APPROVED,\n    };\n  }\n\n  async signTransaction(rawTxn: AnyRawTransaction): Promise<UserResponse<AccountAuthenticator>>;\n  async signTransaction(args: AptosSignTransactionInputV1_1): Promise<UserResponse<AptosSignTransactionOutputV1_1>>;\n  async signTransaction(\n    txnOrArgs: AnyRawTransaction | AptosSignTransactionInputV1_1,\n    _asFeePayer?: boolean,\n  ): Promise<UserResponse<AccountAuthenticator | AptosSignTransactionOutputV1_1>> {\n    const { connectedAccount } = AptosConnectWallet;\n    if (!connectedAccount) {\n      throw new AptosWalletError(AptosWalletErrorCode.Unauthorized);\n    }\n\n    if ('bcsToBytes' in txnOrArgs) {\n      const transaction = txnOrArgs;\n      const feePayer = transaction.feePayerAddress ? { address: transaction.feePayerAddress } : undefined;\n      const secondarySigners = transaction.secondarySignerAddresses?.map((address) => ({ address }));\n      const response = await this.client.signTransaction({\n        feePayer,\n        secondarySigners,\n        signerAddress: connectedAccount.address,\n        transaction: transaction.rawTransaction,\n      });\n      return unwrapUserResponse(response, (args) => args.authenticator);\n    }\n\n    const requestArgs = txnOrArgs;\n    const response = await this.client.signTransaction({\n      ...requestArgs,\n      signerAddress: connectedAccount.address,\n    });\n\n    return unwrapUserResponse(response, (responseArgs) => {\n      const { authenticator, rawTransaction } = responseArgs;\n      if (!rawTransaction) {\n        throw new Error('Expected raw transaction in response args');\n      }\n\n      const secondarySigners = requestArgs.secondarySigners ?? [];\n      let transaction: AnyRawTransaction;\n      if (secondarySigners.length > 0) {\n        transaction = new MultiAgentTransaction(\n          rawTransaction,\n          secondarySigners.map((s) => s.address),\n          requestArgs.feePayer?.address,\n        );\n      } else {\n        transaction = new SimpleTransaction(rawTransaction, requestArgs.feePayer?.address);\n      }\n\n      return {\n        authenticator,\n        rawTransaction: transaction,\n      };\n    });\n  }\n\n  async signAndSubmitTransaction(\n    args: AptosSignAndSubmitTransactionInput,\n  ): Promise<UserResponse<AptosSignAndSubmitTransactionOutput>> {\n    const { gasUnitPrice, maxGasAmount, payload } = args;\n\n    const { connectedAccount } = AptosConnectWallet;\n    if (!connectedAccount) {\n      throw new AptosWalletError(AptosWalletErrorCode.Unauthorized);\n    }\n\n    const response = await this.client.signAndSubmitTransaction({\n      gasUnitPrice,\n      maxGasAmount,\n      network: this.aptosClient.config.network,\n      payload,\n      signerAddress: connectedAccount.address,\n    });\n\n    if (response.status === 'dismissed') {\n      return { status: UserResponseStatus.REJECTED };\n    }\n\n    return {\n      args: { hash: response.args.txnHash },\n      status: UserResponseStatus.APPROVED,\n    };\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async onAccountChange(_callback?: (newAccount: AccountInfo) => void): Promise<void> {\n    // TODO\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async onNetworkChange(_callback?: (newNetwork: NetworkInfo) => void): Promise<void> {\n    // Not applicable\n  }\n\n  // endregion\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nexport const walletMetadata = {\n  apple: {\n    icon:\n      // eslint-disable-next-line max-len\n      'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxzdHlsZT4KICAgICAgICBwYXRoIHsKICAgICAgICAgICAgZmlsbDogYmxhY2s7CiAgICAgICAgfQoKICAgICAgICBAbWVkaWEgKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKSB7CiAgICAgICAgICAgIHBhdGggewogICAgICAgICAgICAgICAgZmlsbDogd2hpdGU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICA8L3N0eWxlPgogICAgPHBhdGgKICAgICAgICBkPSJNMjAuMzkzMiA4LjE4MjQyQzIwLjI1NzggOC4yOTA0MyAxNy44NjggOS42NzUzNyAxNy44NjggMTIuNzU0OUMxNy44NjggMTYuMzE2OCAyMC45MDkgMTcuNTc3IDIxIDE3LjYwODJDMjAuOTg2IDE3LjY4NSAyMC41MTY5IDE5LjMzMzkgMTkuMzk2NiAyMS4wMTQxQzE4LjM5NzcgMjIuNDkyNiAxNy4zNTQ1IDIzLjk2ODggMTUuNzY3NSAyMy45Njg4QzE0LjE4MDQgMjMuOTY4OCAxMy43NzIgMjMuMDIwNyAxMS45Mzk5IDIzLjAyMDdDMTAuMTU0NSAyMy4wMjA3IDkuNTE5NzIgMjQgOC4wNjgwNSAyNEM2LjYxNjM5IDI0IDUuNjAzNDkgMjIuNjMxOSA0LjQzODg5IDIwLjk1MTdDMy4wODk5MiAxOC45Nzg3IDIgMTUuOTEzNiAyIDEzLjAwNDVDMiA4LjMzODQzIDQuOTUwMDEgNS44NjM3OSA3Ljg1MzM0IDUuODYzNzlDOS4zOTYwMiA1Ljg2Mzc5IDEwLjY4MiA2LjkwNTQ5IDExLjY1MDUgNi45MDU0OUMxMi41NzI0IDYuOTA1NDkgMTQuMDEwMSA1LjgwMTM4IDE1Ljc2NTEgNS44MDEzOEMxNi40MzAzIDUuODAxMzggMTguODIwMiA1Ljg2Mzc5IDIwLjM5MzIgOC4xODI0MlpNMTQuOTMxOSAzLjgyNTk4QzE1LjY1NzggMi45NDAyOSAxNi4xNzEyIDEuNzExMzcgMTYuMTcxMiAwLjQ4MjQ0OEMxNi4xNzEyIDAuMzEyMDMxIDE2LjE1NzIgMC4xMzkyMTQgMTYuMTI2OSAwQzE0Ljk0NiAwLjA0NTYwNDYgMTMuNTQxIDAuODA4ODgxIDEyLjY5MzggMS44MTkzOEMxMi4wMjg2IDIuNTk3MDYgMTEuNDA3OCAzLjgyNTk4IDExLjQwNzggNS4wNzE3MUMxMS40MDc4IDUuMjU4OTMgMTEuNDM4MiA1LjQ0NjE0IDExLjQ1MjIgNS41MDYxNUMxMS41MjY4IDUuNTIwNTUgMTEuNjQ4MiA1LjUzNzM1IDExLjc2OTYgNS41MzczNUMxMi44MjkxIDUuNTM3MzUgMTQuMTYxOCA0LjgwNzY4IDE0LjkzMTkgMy44MjU5OFoiIC8+Cjwvc3ZnPg==',\n    name: 'Continue with Apple',\n    url: 'https://aptosconnect.app',\n  },\n  google: {\n    icon:\n      // eslint-disable-next-line max-len\n      'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBjbGFzcz0iaF8yMCB3XzIwIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIzLjU0IDEyLjc2MTNDMjMuNTQgMTEuOTQ1OSAyMy40NjY4IDExLjE2MTggMjMuMzMwOSAxMC40MDkxSDEyLjVWMTQuODU3NUgxOC42ODkxQzE4LjQyMjUgMTYuMjk1IDE3LjYxMjMgMTcuNTEyOSAxNi4zOTQzIDE4LjMyODRWMjEuMjEzOEgyMC4xMTA5QzIyLjI4NTUgMTkuMjExOCAyMy41NCAxNi4yNjM2IDIzLjU0IDEyLjc2MTNaIiBmaWxsPSIjNDI4NUY0Ij48L3BhdGg+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMi40OTk1IDIzLjk5OThDMTUuNjA0NSAyMy45OTk4IDE4LjIwNzcgMjIuOTcgMjAuMTEwNCAyMS4yMTM3TDE2LjM5MzggMTguMzI4MkMxNS4zNjQgMTkuMDE4MiAxNC4wNDY3IDE5LjQyNTkgMTIuNDk5NSAxOS40MjU5QzkuNTA0MjUgMTkuNDI1OSA2Ljk2OTAyIDE3LjQwMyA2LjA2NDcgMTQuNjg0OEgyLjIyMjY2VjE3LjY2NDRDNC4xMTQ5MyAyMS40MjI4IDguMDA0MDIgMjMuOTk5OCAxMi40OTk1IDIzLjk5OThaIiBmaWxsPSIjMzRBODUzIj48L3BhdGg+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02LjA2NTIzIDE0LjY4NTFDNS44MzUyMyAxMy45OTUxIDUuNzA0NTUgMTMuMjU4MSA1LjcwNDU1IDEyLjUwMDFDNS43MDQ1NSAxMS43NDIyIDUuODM1MjMgMTEuMDA1MSA2LjA2NTIzIDEwLjMxNTFWNy4zMzU1N0gyLjIyMzE4QzEuNDQ0MzIgOC44ODgwNyAxIDEwLjY0NDQgMSAxMi41MDAxQzEgMTQuMzU1OCAxLjQ0NDMyIDE2LjExMjIgMi4yMjMxOCAxNy42NjQ3TDYuMDY1MjMgMTQuNjg1MVoiIGZpbGw9IiNGQkJDMDUiPjwvcGF0aD48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEyLjQ5OTUgNS41NzM4NkMxNC4xODc5IDUuNTczODYgMTUuNzAzOCA2LjE1NDA5IDE2Ljg5NTYgNy4yOTM2NEwyMC4xOTQgMy45OTUyM0MxOC4yMDI0IDIuMTM5NTUgMTUuNTk5MiAxIDEyLjQ5OTUgMUM4LjAwNDAyIDEgNC4xMTQ5MyAzLjU3NzA1IDIuMjIyNjYgNy4zMzU0NUw2LjA2NDcgMTAuMzE1QzYuOTY5MDIgNy41OTY4MiA5LjUwNDI1IDUuNTczODYgMTIuNDk5NSA1LjU3Mzg2WiIgZmlsbD0iI0VBNDMzNSI+PC9wYXRoPjwvc3ZnPg==',\n    name: 'Continue with Google',\n    url: 'https://aptosconnect.app',\n  },\n} as const;\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  AptosConnectNamespace,\n  AptosDisconnectNamespace,\n  AptosFeatures,\n  AptosGetAccountNamespace,\n  AptosGetNetworkNamespace,\n  AptosOnAccountChangeNamespace,\n  AptosOnNetworkChangeNamespace,\n  AptosSignAndSubmitTransactionFeature,\n  AptosSignAndSubmitTransactionNamespace,\n  AptosSignInNamespace,\n  AptosSignMessageNamespace,\n  AptosSignTransactionNamespace,\n  AptosWallet,\n} from '@aptos-labs/wallet-standard';\nimport { AptosConnectWallet, AptosConnectWalletConfig } from './AptosConnectWallet';\nimport { walletMetadata } from './config';\n\nexport class AptosConnectGoogleWallet extends AptosConnectWallet implements AptosWallet {\n  readonly name = walletMetadata.google.name;\n\n  readonly icon = walletMetadata.google.icon;\n\n  readonly url = walletMetadata.google.url;\n\n  constructor(config: AptosConnectWalletConfig) {\n    super({ ...config, provider: 'google' });\n  }\n\n  // region AptosWallet\n\n  get features(): AptosFeatures & AptosSignAndSubmitTransactionFeature {\n    return {\n      [AptosConnectNamespace]: {\n        connect: this.connect.bind(this),\n        version: '1.0.0',\n      },\n      [AptosDisconnectNamespace]: {\n        disconnect: this.disconnect.bind(this),\n        version: '1.0.0',\n      },\n      [AptosGetAccountNamespace]: {\n        account: this.getAccount.bind(this),\n        version: '1.0.0',\n      },\n      [AptosGetNetworkNamespace]: {\n        network: this.getNetwork.bind(this),\n        version: '1.0.0',\n      },\n      [AptosOnAccountChangeNamespace]: {\n        onAccountChange: this.onAccountChange.bind(this),\n        version: '1.0.0',\n      },\n      [AptosOnNetworkChangeNamespace]: {\n        onNetworkChange: this.onNetworkChange.bind(this),\n        version: '1.0.0',\n      },\n      [AptosSignAndSubmitTransactionNamespace]: {\n        signAndSubmitTransaction: this.signAndSubmitTransaction.bind(this),\n        version: '1.1.0',\n      },\n      [AptosSignInNamespace]: {\n        signIn: this.signIn.bind(this),\n        version: '0.1.0',\n      },\n      [AptosSignMessageNamespace]: {\n        signMessage: this.signMessage.bind(this),\n        version: '1.0.0',\n      },\n      [AptosSignTransactionNamespace]: {\n        signTransaction: this.signTransaction.bind(this),\n        version: '1.1',\n      },\n    };\n  }\n\n  // endregion\n}\n","// Copyright © Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport {\n  AptosConnectNamespace,\n  AptosDisconnectNamespace,\n  AptosFeatures,\n  AptosGetAccountNamespace,\n  AptosGetNetworkNamespace,\n  AptosOnAccountChangeNamespace,\n  AptosOnNetworkChangeNamespace,\n  AptosSignAndSubmitTransactionFeature,\n  AptosSignAndSubmitTransactionNamespace,\n  AptosSignInNamespace,\n  AptosSignMessageNamespace,\n  AptosSignTransactionNamespace,\n  AptosWallet,\n} from '@aptos-labs/wallet-standard';\nimport { AptosConnectWallet, AptosConnectWalletConfig } from './AptosConnectWallet';\nimport { walletMetadata } from './config';\n\nexport class AptosConnectAppleWallet extends AptosConnectWallet implements AptosWallet {\n  readonly name = walletMetadata.apple.name;\n\n  readonly icon = walletMetadata.apple.icon;\n\n  readonly url = walletMetadata.apple.url;\n\n  constructor(config: AptosConnectWalletConfig) {\n    super({ ...config, provider: 'apple' });\n  }\n\n  // region AptosWallet\n\n  get features(): AptosFeatures & AptosSignAndSubmitTransactionFeature {\n    return {\n      [AptosConnectNamespace]: {\n        connect: this.connect.bind(this),\n        version: '1.0.0',\n      },\n      [AptosDisconnectNamespace]: {\n        disconnect: this.disconnect.bind(this),\n        version: '1.0.0',\n      },\n      [AptosGetAccountNamespace]: {\n        account: this.getAccount.bind(this),\n        version: '1.0.0',\n      },\n      [AptosGetNetworkNamespace]: {\n        network: this.getNetwork.bind(this),\n        version: '1.0.0',\n      },\n      [AptosOnAccountChangeNamespace]: {\n        onAccountChange: this.onAccountChange.bind(this),\n        version: '1.0.0',\n      },\n      [AptosOnNetworkChangeNamespace]: {\n        onNetworkChange: this.onNetworkChange.bind(this),\n        version: '1.0.0',\n      },\n      [AptosSignAndSubmitTransactionNamespace]: {\n        signAndSubmitTransaction: this.signAndSubmitTransaction.bind(this),\n        version: '1.1.0',\n      },\n      [AptosSignInNamespace]: {\n        signIn: this.signIn.bind(this),\n        version: '0.1.0',\n      },\n      [AptosSignMessageNamespace]: {\n        signMessage: this.signMessage.bind(this),\n        version: '1.0.0',\n      },\n      [AptosSignTransactionNamespace]: {\n        signTransaction: this.signTransaction.bind(this),\n        version: '1.1',\n      },\n    };\n  }\n\n  // endregion\n}\n"],"names":["root","f","module","exports","require","ed2curve","nacl","this","Error","gf","init","i","r","Float64Array","length","gf0","gf1","D","I","car25519","o","c","Math","floor","sel25519","p","q","b","t","unpack25519","n","A","a","Z","M","j","S","inv25519","pack25519","m","par25519","d","Uint8Array","vn","x","xi","y","yi","crypto_verify_32","neq25519","pow2523","set25519","unpackneg","chk","num","den","den2","den4","den6","convertPublicKey","pk","z","convertSecretKey","sk","lowlevel","crypto_hash","convertKeyPair","edKeyPair","publicKey","secretKey","e","constructor","address","ansName","super","l","from","serialize","serializeU32AsUleb128","Ed25519","MultiEd25519","SingleKey","u","MultiKey","serializeStr","deserialize","s","deserializeUleb128AsU32","deserializeStr","T","Unauthorized","Unsupported","InternalError","Object","freeze","status","message","code","name","setPrototypeOf","prototype","APPROVED","REJECTED","registerWallet","wallet","callback","register","window","dispatchEvent","RegisterWalletEvent","error","console","addEventListener","detail","api","Event","__classPrivateFieldGet","_RegisterWalletEvent_detail","type","bubbles","cancelable","composed","set","__classPrivateFieldSet","preventDefault","stopImmediatePropagation","stopPropagation","base64ToBytes","base64","binaryString","atob","charCodeAt","bytesToBase64","bytes","String","fromCharCode","btoa","bytesToBase64url","replace","chainIdToNetwork","chainId","NetworkToChainId","mainnet","Network","MAINNET","testnet","TESTNET","DEVNET","isSupportedNetwork","network","includes","serializeAccountAuthenticatorInput","serializer","value","authenticator","deserializeAccountAuthenticatorInput","deserializer","AccountAddress","AccountAuthenticator","serializePublicKey","Ed25519PublicKey","SigningScheme","MultiEd25519PublicKey","AnyPublicKey","deserializePublicKey","signingScheme","serializeAccountInfo","deserializeAccountInfo","AccountAddress2","serializeAccountInput","serializeBool","deserializeAccountInput","AccountAddress3","hasPublicKey","deserializeBool","serializeDappInfo","domain","imageURI","deserializeDappInfo","hasImageUri","serializeEntryFunctionArgument","argument","Array","isArray","subArgument","toString","serializeBytes","ArrayBuffer","values","deserializeEntryFunctionArgument","variant","args","push","deserializeBytes","AccountAddress4","FixedBytes","serializeSignature","Ed25519Signature","SigningScheme2","MultiEd25519Signature","AnySignature","deserializeSignature","ConnectRequest","ConnectResponse","DisconnectRequest","DisconnectResponse","SignInRequest","SignInResponse","GetConnectedAccountsRequest","GetConnectedAccountsResponse","IsConnectedRequest","IsConnectedResponse","SignAndSubmitTransactionRequest","SignAndSubmitTransactionResponse","SignMessageRequest","SignMessageResponse","SignTransactionRequest","SignTransactionResponse","serializeTypeArguments","typeArguments","typeArgument","typeTag","parseTypeTag","allowGenerics","deserializeTypeArguments","typeArgumentsLength","TypeTag","serializeEntryFunctionArguments","functionArguments","functionArgument","deserializeEntryFunctionArguments","functionArgumentsLength","serializeTransactionPayloadInput","function","multisigAddress","AccountAddress5","bytecode","Hex","fromHexInput","toUint8Array","serializeForScriptFunction","deserializeTransactionPayloadInput","functionId","deserializeFromScriptArgument","serializeWalletRequest","dappInfo","version","Serializer9","data","deserializeWalletRequest","Deserializer9","serializeWalletRequestWithArgs","serializeArgsFn","deserializeWalletRequestWithArgs","deserializeArgsFn","makeUserApproval","makeUserResponseSerializeFn","serializeArgs","makeUserResponseDeserializeFn","deserializeArgs","isApproved","serializeWalletResponse","serializeFn","Serializer11","deserializeWalletResponse","deserializeFn","Deserializer11","serializeAptosSignInInput","JSON","stringify","deserializeAptosSignInInput","parse","serializeAptosSignInOutput","account","input","plainText","signature","signingMessage","deserializeAptosSignInOutput","AccountInfo","isTypedMessage","messageCls","__messageType","TYPE","ConnectRequest2","serializeOptionStr","dappId","dappEd25519PublicKeyB64","preferredWalletName","claimOptions","asset","deserializeOption","hasClaimOptions","Ed25519PrivateKey","currentVersion","request","isSerialized","supportedVersions","ConnectResponse2","serializeApprovalArgsV1","serializeApprovalArgs","pairing","deserializeApprovalArgs","serializedPairing","serializeArgsV1","serializedResponse","DisconnectRequest2","DisconnectResponse2","SignInRequest2","_","SignInResponse2","GetConnectedAccountsRequest2","GetConnectedAccountsResponse2","accounts","IsConnectedRequest2","IsConnectedResponse2","SignAndSubmitTransactionRequest2","signerAddress","payload","serializeU64","expirationTimestamp","gasUnitPrice","maxGasAmount","feePayer","hasSignerAddress","AccountAddress6","isPayloadBcsSerializable","TransactionPayload","Number","deserializeU64","hasFeePayer","serializedRequest","SignAndSubmitTransactionResponse2","txnHash","SignMessageRequest2","serializeU8","nonce","AccountAddress7","deserializeU8","SignMessageResponse2","fullMessage","SignTransactionRequest2","normalizeArgs","secondarySigners","senderPublicKey","transaction","sender","chain_id","expiration_timestamp_secs","gas_unit_price","max_gas_amount","expirationSecondsFromNow","signer","AccountAddress8","hasSender","TransactionPayload2","secondarySignersLength","SignTransactionResponse2","rawTransaction","AccountAuthenticator2","hasRawTransaction","RawTransaction2","_PromptConnectionRequestMessage","PromptConnectionRequestMessage","_PromptConnectionResponseMessage","PromptConnectionResponseMessage","_PromptApprovalResponseMessage","serializedValue","PromptApprovalResponseMessage","_PromptUnauthorizedErrorMessage","PromptUnauthorizedErrorMessage","encodeWalletRequestBody","rest","serialized","key","utf8Encoded","TextEncoder","encode","encodePopupWalletRequest","makePopupWalletRequestChallenge","accountAddress","body","id","timestamp","Serializer17","AccountAddress9","EncryptionEnvelopeError","EnvelopeMessageMismatchError","_EnvelopeMessageMismatchError","field","DecryptionError","_DecryptionError","KeyTypes","KeyTypes2","createX25519KeyPair","keypairToX25519","keyPair","createEd25519KeyPair","keypairToEd25519","toKey","rawKey","decodeBase64","base64Str","globalThis","Buffer","codePointAt","encodeBase64","fromCodePoint","join","concatUint8array","arrayOne","arrayTwo","mergedArray","SIGNATURE_PREFIX","convertEd25519PublicKeyToX25519PublicKey","ed25519PublicKey","errorKeyName","x25519PublicKey","slice","convertEd25519SecretKeyToX25519SecretKey","ed25519SecretKey","x25519SecretKey","serializeEncryptionResult","enc","nonceB64","securedB64","secured","deserializeEncryptionResult","encryptMessageDirect","senderX25519SecretKey","receiverX25519PublicKey","nacl2","nonceLength","messageUint8","encryptObject","receiverEd25519PublicKey","encryptObjectDirect","decryptMessageDirect","senderX25519PublicKey","receiverX25519SecretKey","securedMessage","decryptedUint8","open","TextDecoder","decode","decryptObject","receiverEd25519SecretKey","decryptObjectDirect","decryptedStr","messageHash","purpose","signaturePrefixHash","sha3_256","signWithEd25519SecretKey","signingEd25519SecretKey","detached","verifySignature","signingPublicKey","REQUIRED_FIELDS","sort","ensurePrivatePublicFieldsDisjoint","privateMessage","publicMessage","intersection","keys","filter","ensureMetadataFields","messageKeys","extraFields","missingFields","extraFieldsStr","missingFieldsStr","encryptAndSignEnvelope","senderEd25519SecretKey","senderEd25519PublicKey","sequence","senderEphemeralX25519KeyPair","metadata","constructMetadata","dangerouslyEncryptAndSignEnvelopeUnvalidated","senderEphemeralX25519PublicKey","receiverEd25519PublicKeyB64","senderEd25519PublicKeyB64","senderX25519PublicKeyB64","timestampMillis","Date","now","encryptionResult","encryptedPrivateMessage","encryptedPrivateMessageBytes","serializedPublicMessage","_metadata","publicMessageBytes","messageSignature","signEnvelope","combineHashedEnvelopeMessageBytes","privateMessageBytes","publicMessageBytesHash","sha3_2562","privateMessageBytesHash","combinedHash","messageHashBytes","signatureBytes","verifyEnvelopeSignature","messageSignatureInput","Ed25519Signature2","AptosEd25519PublicKey","messageVerified","decryptEnvelope","rawPrivateMessage","rawPublicMessage","expectedPublicKeyB64","senderX25519PublicKeyBytes","serializePublicKeyB64","Serializer","deserializePublicKeyB64","publicKeyB64","serializedPublicKey","Deserializer","deserializeEd25519PublicKeyB64","ed25519PublicKeyB64","AptosEd25519PublicKey2","cause","we","toUpperCase","he","me","de","K","V","g","assign","isValid","R","$","P","isNaN","ve","test","Pe","Re","toLowerCase","repeat","match","reduce","parseInt","Te","entries","eventType","eventData","Y","Ce","TelegramWebviewProxy","postEvent","Q","Ne","self","top","defineProperty","Ue","L","re","ne","oe","ke","textColor","bgColor","shouldLog","Intl","DateTimeFormat","hour","minute","second","fractionalSecondDigits","timeZone","format","Le","equals","is","forEach","h","once","signal","findIndex","splice","Oe","destroy","reset","sub","unsub","unsubAll","U","add","ae","O","qe","req_id","result","button_id","height","width","innerWidth","is_state_stable","is_expanded","Ge","ue","pe","parent","postMessage","external","notify","randomUUID","crypto","bind","getRandomValues","rnds8","rng","byteToHex","unsafeStringify","arr","offset","v4","options","buf","native","rnds","random","DEFAULT_PROMPT_SIZE","PROMPT_POLLER_INTERVAL","dismissalSerializedResponse","PromptUnauthorizedError","openPrompt","url","size","left","screenLeft","round","outerWidth","popup","screenTop","outerHeight","strOptions","map","acc","entry","href","URL","promptWindow","waitForPromptResponse","baseUrl","Promise","resolve","reject","listeners","onMessage","source","origin","removeEventListener","clearTimeout","promptPollerId","setInterval","closed","localDappStateKey","serializeLocalDappState","state","connectedAccounts","deserializeLocalDappState","connectedAccountsLength","getState","encodedValue","localStorage","getItem","setState","setItem","getConnectedAccounts","addConnectedAccount","removeConnectedAccount","index","createWalletRequest","encodedClientIdentityKey","clientIdentityKey","response","fetch","bytesToBase642","headers","Accept","method","ok","identityKeyStorageKey","getClientIdentityKey","identityKey","generate","ON_RESUME_DELAY","FG_RESPONSE_POLLING_INTERVAL","BG_RESPONSE_POLLING_INTERVAL","POLLING_TIMEOUT","waitFor","milliseconds","timeoutId","cancel","timer","setTimeout","smartPolling","justResumed","pollingInterval","onWindowFocus","onWindowBlur","startTime","getWalletResponse","requestId","bytesToBase64url2","responseBody","json","base64ToBytes2","openTelegramPrompt","tgWebAppUrl","challenge","sign","signedWalletRequest","encodedRequest","postTelegramEvent","path_full","isTelegramMiniApp","WebWalletTransport","provider","sendPromptRequest","searchParams","prompt","sendRequest","activeAccount","NetworkName","NetworkName2","SigningRequestTypes","SigningRequestTypes2","SigningRequestStatus","SigningRequestStatus2","number","isSafeInteger","isBytes","lengths","hash","create","outputLen","blockLen","exists","instance","checkFinished","destroyed","finished","output","out","min","u32","Uint32Array","buffer","byteOffset","byteLength","createView","DataView","rotr","word","shift","isLE","hexes","padStart","bytesToHex","hex","asciis","_0","_9","_A","_F","_a","_f","asciiToBase16","char","hexToBytes","hl","al","array","ai","hi","n1","n2","undefined","utf8ToBytes","str","toBytes","Hash","clone","_cloneInto","toStr","checkOpts","defaults","opts","call","merged","wrapConstructor","hashCons","hashC","msg","update","digest","tmp","HMAC","_key","assertHash","iHash","pad","oHash","fill","assertExists","digestInto","assertBytes","to","getPrototypeOf","hmac","pbkdf2Init","_password","_salt","_opts","dkLen","asyncTick","assertNumber","password","salt","DK","PRF","PRFSalt","pbkdf2Output","prfW","pbkdf2","view","ti","pos","Ti","subarray","setInt32","ui","setBigUint64","_32n","BigInt","_u32_max","wh","wl","setUint32","SHA2","padOffset","len","take","process","dataView","roundClean","oview","outLen","get","res","U32_MASK64","fromBig","le","split","lst","Ah","Al","toBig","shrSH","_l","shrSL","rotrSH","rotrSL","rotrBH","rotrBL","rotr32H","_h","rotr32L","rotlSH","rotlSL","rotlBH","rotlBL","Bh","Bl","add3L","Cl","add3H","low","Ch","add4L","Dl","add4H","Dh","add5L","El","add5H","Eh","u64","SHA512_Kh","SHA512_Kl","SHA512_W_H","SHA512_W_L","SHA512","Fh","Fl","Gh","Gl","Hh","Hl","getUint32","W15h","W15l","s0h","s0l","W2h","W2l","s1h","s1l","SUMl","SUMh","sigma1h","sigma1l","CHIh","CHIl","T1ll","T1h","T1l","sigma0h","sigma0l","MAJh","MAJl","All","sha512","nfkd","TypeError","normalize","norm","words","passphrase","mnemonicToSeedSync","mnemonic","Chi","Maj","SHA256_K","IV","SHA256_W","SHA256","B","C","E","F","G","H","W15","W2","s0","s1","sigma1","T1","sigma0","T2","sha256","SHA3_PI","SHA3_ROTL","_SHA3_IOTA","_0n","_1n","_2n","_7n","_256n","_0x71n","SHA3_IOTA_H","SHA3_IOTA_L","rotlH","rotlL","keccakP","rounds","idx1","idx0","B0","B1","Th","Tl","curH","curL","PI","Keccak","suffix","enableXOF","posOut","state32","keccak","finish","writeInto","bufferOut","xofInto","xof","gen","pathRegex","replaceDerive","val","HMAC_KEY","HARDENED_OFFSET","getMasterKeyFromSeed","seed","IL","IR","chainCode","CKDPriv","indexBytes","zero","isValidPath","path","some","derivePath","segments","el","parentKeys","segment","VERSION","sleep","timeMs","DEFAULT_VERSION_PATH_BASE","fixNodeUrl","nodeUrl","endsWith","substring","DEFAULT_MAX_GAS_AMOUNT","DEFAULT_TXN_EXP_SEC_FROM_NOW","DEFAULT_TXN_TIMEOUT_SEC","APTOS_COIN","Memoize","hashFunction","ttlMs","tags","target","propertyKey","descriptor","getNewFunction","MemoizeExpiring","clearCacheTagsMap","Map","clear","cleared","Set","tag","maps","mp","has","originalMethod","propMapName","Symbol","returnedValue","that","hasOwnProperty","configurable","enumerable","writable","myMap","hashKey","apply","timestampKey","isExpired","AptosApiError","request2","statusText","errors","async","contentType","params","overrides","HEADERS","TOKEN","Authorization","aptosClient","aptosRequest","endpoint","fullEndpoint","config","errorMessage","post","paginateWithCursor","cursor","requestParams","start","originMethod","NetworkToIndexerAPI","devnet","local","NetworkToNodeAPI","HexString","_HexString","fromBuffer","fromUint8Array","ensure","hexString","startsWith","noPrefix","toShortString","trimmed","hexToBytes2","aptos_types_exports","__export","AccountAuthenticatorEd25519","AccountAuthenticatorMultiEd25519","ArgumentABI","AuthenticationKey","ChainId","ChangeSet","EntryFunction","EntryFunctionABI","FeePayerRawTransaction","Identifier","Module","ModuleId","MultiAgentRawTransaction","MultiSig","MultiSigTransactionPayload","RawTransaction","RawTransactionWithData","RotationProofChallenge","Script","ScriptABI","SignedTransaction","StructTag","Transaction","TransactionArgument","TransactionArgumentAddress","TransactionArgumentBool","TransactionArgumentU128","TransactionArgumentU16","TransactionArgumentU256","TransactionArgumentU32","TransactionArgumentU64","TransactionArgumentU8","TransactionArgumentU8Vector","TransactionAuthenticator","TransactionAuthenticatorEd25519","TransactionAuthenticatorFeePayer","TransactionAuthenticatorMultiAgent","TransactionAuthenticatorMultiEd25519","TransactionPayloadEntryFunction","TransactionPayloadMultisig","TransactionPayloadScript","TransactionScriptABI","TypeArgumentABI","TypeTagAddress","TypeTagBool","TypeTagParser","TypeTagParserError","TypeTagSigner","TypeTagStruct","TypeTagU128","TypeTagU16","TypeTagU256","TypeTagU32","TypeTagU64","TypeTagU8","TypeTagVector","UserTransaction","WriteSet","objectStructTag","optionStructTag","stringStructTag","bcs_exports","bcsSerializeBool","bcsSerializeBytes","bcsSerializeFixedBytes","bcsSerializeStr","bcsSerializeU128","bcsSerializeU16","bcsSerializeU256","bcsSerializeU32","bcsSerializeU8","bcsSerializeUint64","bcsToBytes","deserializeVector","serializeVector","serializeVectorWithFunc","MAX_U8_NUMBER","MAX_U16_NUMBER","MAX_U32_NUMBER","MAX_U64_BIG_INT","MAX_U128_BIG_INT","MAX_U256_BIG_INT","ensureBufferWillHandleSize","newBuffer","serializeWithFunction","fn","bytesLength","dv","textEncoder","serializeFixedBytes","byteValue","serializeU16","setUint16","serializeU32","high","serializeU128","serializeU256","valueArray","getBytes","checkNumberRange","minValue","maxValue","childFunction","valueBigInt","__decorateClass","read","textDecoder","deserializeFixedBytes","bool","getUint8","deserializeU16","getUint16","deserializeU32","deserializeU128","deserializeU256","byte","item","func","cls","list","_AccountAddress","LENGTH","fromHex","addr","addressBytes","toHexString","standardizeAddress","lowercaseAddress","addressWithoutPrefix","addressWithPadding","CORE_CODE_ADDRESS","_Ed25519PublicKey","_Ed25519Signature","MAX_SIGNATURES_SUPPORTED","_MultiEd25519PublicKey","public_keys","threshold","k","begin","_MultiEd25519Signature","signatures","bitmap","BITMAP_LEN","createBitmap","bits","firstBitInByte","dupCheckSet","bit","sigs","load","_TransactionAuthenticatorEd25519","public_key","_TransactionAuthenticatorMultiEd25519","_TransactionAuthenticatorMultiAgent","secondary_signer_addresses","secondary_signers","_TransactionAuthenticatorFeePayer","fee_payer","_AccountAuthenticatorEd25519","_AccountAuthenticatorMultiEd25519","_Identifier","_TypeTagBool","_deserializer","_TypeTagU8","_TypeTagU16","_TypeTagU32","_TypeTagU64","_TypeTagU128","_TypeTagU256","_TypeTagAddress","_TypeTagSigner","_TypeTagVector","_TypeTagStruct","isStringTypeTag","module_name","_StructTag","type_args","fromString","structTag","typeTagStruct","moduleName","typeArgs","typeArg","bail","isWhiteSpace","isValidAlphabetic","isGeneric","nextToken","tagStr","tokenize","tokens","token","_TypeTagParser","typeTags","consume","targetToken","consumeWholeGeneric","parseCommaList","endToken","allowTraillingComma","tokenTy","tokenVal","moduleTokenTy","nameTokenTy","tyTags","idx","_RawTransaction","sequence_number","_Script","ty_args","_EntryFunction","function_name","natural","fromStr","natual","_MultiSigTransactionPayload","transaction_payload","_MultiSig","multisig_address","payloadPresent","_Module","_ModuleId","moduleId","parts","_SignedTransaction","raw_txn","_MultiAgentRawTransaction","rawTxn","secondarySignerAddresses","_FeePayerRawTransaction","fee_payer_address","feePayerAddress","_TransactionPayloadScript","_TransactionPayloadEntryFunction","_TransactionPayloadMultisig","_ChainId","_TransactionArgumentU8","_TransactionArgumentU16","_TransactionArgumentU32","_TransactionArgumentU64","_TransactionArgumentU128","_TransactionArgumentU256","_TransactionArgumentAddress","_TransactionArgumentU8Vector","_TransactionArgumentBool","getHashSalt","sha3Hash","_UserTransaction","_TypeArgumentABI","_ArgumentABI","type_tag","_TransactionScriptABI","doc","tyArgs","_EntryFunctionABI","_AuthenticationKey","fromMultiEd25519PublicKey","pubKeyBytes","MULTI_ED25519_SCHEME","sha3Hash2","fromEd25519PublicKey","ED25519_SCHEME","derivedAddress","DERIVE_RESOURCE_ACCOUNT_SCHEME","structName","sequenceNumber","originator","currentAuthKey","newPublicKey","_AptosAccount","fromAptosAccountObject","obj","privateKeyHex","fromDerivePath","mnemonics","normalizeMnemonics","trim","part","bytesToHex2","bip39","privateKeyBytes","signingKey","fromSeed","authKey","pubKey","getResourceAccountAddress","sourceAddress","sha3Hash3","getCollectionID","creatorAddress","collectionName","signBuffer","signHexString","toSign","rawMessage","rawSignature","verify","toPrivateKeyObject","publicKeyHex","AptosAccount","CurrentTokenOwnershipFieldsFragmentDoc","TokenDataFieldsFragmentDoc","CollectionDataFieldsFragmentDoc","TokenActivitiesFieldsFragmentDoc","GetAccountCoinsDataCount","GetAccountCoinsData","GetAccountCurrentTokens","GetAccountTokensCount","GetAccountTransactionsCount","GetAccountTransactionsData","GetCollectionData","GetCollectionsWithOwnedTokens","GetCurrentObjects","GetDelegatedStakingActivities","GetIndexerLedgerInfo","GetNumberOfDelegators","GetOwnedTokens","GetOwnedTokensByTokenData","GetTokenActivities","GetTokenActivitiesCount","GetTokenCurrentOwnerData","GetTokenData","GetTokenOwnedFromCollection","GetTokenOwnersData","GetTopUserTransactions","GetUserTransactions","assertType","types","ensureBoolean","ensureNumber","ensureBigInt","serializeArg","argVal","argType","serializeArgInner","depth","serializeAddress","serializeVector2","serializeStruct","arg","structType","serializeOption","argToTransactionArgument","RAW_TRANSACTION_SALT","RAW_TRANSACTION_WITH_DATA_SALT","TransactionBuilder","signingFunction","rawTxnBuilder","build","ty_tags","getSigningMessage","sha3Hash4","prefix","TransactionBuilderEd25519","rawToSigned","TransactionBuilderMultiEd25519","TransactionBuilderABI","_TransactionBuilderABI","abis","builderConfig","abiMap","abi","scriptABI","funcABI","expSecFromNow","toBCSArgs","abiArgs","toTransactionArguments","setSequenceNumber","seqNumber","buildTransactionPayload","ty_arg","bcsArgs","scriptArgs","senderAccount","expTimestampSec","TransactionBuilderRemoteABI","aptosClient2","fetchABI","modules","getAccountModules","flatMap","exposed_functions","ef","is_entry","fullName","normlize","funcNameParts","funcAbi","param","typeArgABIs","abiArg","entryFunctionABI","generic_type_params","senderAddress","gas_estimate","all","getAccount","getChainId","estimateGasPrice","builderABI","_AptosClient","doNotFixNodeUrl","getAccountTransactions","query","limit","ledger_version","ledgerVersion","getAccountModule","getAccountResources","getAccountResource","resourceType","generateBCSTransaction","accountFrom","txnBuilder","sigHexStr","generateBCSSimulation","_signingMessage","invalidSigBytes","generateTransaction","builder","type_arguments","arguments","generateFeePayerTransaction","secondarySignerAccounts","signers","feePayerTxn","submitFeePayerTransaction","feePayerTransaction","senderAuthenticator","feePayerAuthenticator","additionalSignersAuthenticators","txAuthenticatorFeePayer","bcsTxn","transactionRes","submitSignedBCSTransaction","signMultiTransaction","signerSignature","signerAuthenticator","signTransaction","getEventsByCreationNumber","creationNumber","getEventsByEventHandle","eventHandleStruct","fieldName","submitTransaction","signedTxn","simulateTransaction","accountOrPubkey","submitBCSSimulation","bcsBody","_b","_c","queryParams","estimate_gas_unit_price","estimateGasUnitPrice","estimate_max_gas_amount","estimateMaxGasAmount","estimate_prioritized_gas_unit_price","estimatePrioritizedGasUnitPrice","getTransactions","getTransactionByHash","getTransactionByVersion","txnVersion","transactionPending","waitForTransactionWithResult","extraArgs","timeoutSecs","checkSuccess","lastTxn","isPending","count","isApiError","ApiError","isRequestError","WaitForTransactionError","success","FailedTransactionError","vm_status","waitForTransaction","getLedgerInfo","getTableItem","handle","generateRawTransaction","gasEstimate","providedSequenceNumber","expireTimestamp","generateSignSubmitTransaction","pendingTransaction","signAndSubmitTransaction","publishPackage","packageMetadata","codeSerializer","createResourceAccountAndPublishPackage","generateSignSubmitWaitForTransaction","forAccount","resources","accountResource","find","balance","coin","rotateAuthKeyEd25519","toPrivateKeyBytes","authentication_key","helperAccount","challengeHex","proofSignedByCurrentPrivateKey","proofSignedByNewPrivateKey","lookupOriginalAddress","addressOrAuthKey","resource","address_map","origAddress","key_type","value_type","getBlockByHeight","blockHeight","withTransactions","with_transactions","getBlockByVersion","clearCache","parseApiError","AptosClient","lastSubmittedTransaction","errorCode","vmErrorCode","error_code","vm_error_code","IndexerClient","_IndexerClient","validateAddress","queryIndexer","graphqlQuery","WITH_CREDENTIALS","extensions","getIndexerLedgerInfo","getAccountNFTs","ownerAddress","variables","getTokenActivities","tokenAddress","whereCondition","token_data_id","_eq","tokenStandard","token_standard","where_condition","order_by","orderBy","getTokenActivitiesCount","token_id","getAccountTokensCount","owner_address","amount","_gt","getTokenData","getTokenOwnersData","propertyVersion","property_version_v1","getTokenCurrentOwnerData","getOwnedTokens","getOwnedTokensByTokenData","getTokenOwnedFromCollectionAddress","collectionAddress","ownerHexAddress","collectionHexAddress","current_token_data","collection_id","getTokenOwnedFromCollectionNameAndCreatorAddress","getCollectionAddress","getCollectionData","collection_name","creator_address","current_collections_v2","getCollectionsWithOwnedTokens","current_collection","getAccountTransactionsCount","getAccountTransactionsData","account_address","getTopUserTransactions","getUserTransactions","_lte","startVersion","getDelegatedStakingActivities","delegatorAddress","poolAddress","delegator","pool","getNumberOfDelegators","getAccountCoinsData","getAccountCoinsDataCount","getAccountOwnedObjects","Provider","fullNodeUrl","indexerUrl","isCustomEndpoints","fullnodeUrl","indexerClient","applyMixin","targetClass","baseClass","baseClassProp","getOwnPropertyNames","propertyName","propertyDescriptor","getOwnPropertyDescriptor","PropertyValue","PropertyMap","setProperty","getPropertyType","typ","deserializePropertyMap","rawPropertyMap","pm","prop","newValue","deserializeValueBasedOnTypeTag","pv","token_types_exports","Token","TokenData","collection","description","maximum","supply","uri","default_properties","mutability_config","token_properties","AccountSequenceNumber","maxWaitTime","maximumInFlight","sleepTime","lastUncommintedNumber","currentNumber","lock","nextSequenceNumber","nextNumber","initialize","warn","synchronize","AsyncQueue","queue","pendingDequeue","cancelled","enqueue","promise","dequeue","isEmpty","AsyncQueueCancelledError","isCancelled","pendingDequeueLength","promiseFulfilledStatus","generated_exports","EventEmitter","AptosErrorCode","MoveFunctionVisibility","RoleType","AptosErrorCode2","MoveFunctionVisibility2","RoleType2","isBcsSerializableV1","isBcsSerializableV2","bcsToHex","isBcsSerializable","bcsSerialize","serializable","serializedValueBytes","BCS","bcsDeserialize","deserializableClass","fromHexString","UnexpectedValueError","_UnexpectedValueError","serializeEntryFunctionArg","Hex2","serializeEntryFunctionPayload","normalizedArgs","serializeJsonTransactionPayload","innerPayload","serializeRawTransaction","serializeSignAndSubmitTransactionRequestArgs","serializedPayload","serializeSignTransactionRequestArgs","serializedRawTxn","deserializeSignTransactionResponseArgs","accountAuthenticator","thisArg","iterator","toStringTag","kindOf","cache","thing","kindOfTest","typeOfTest","isUndefined","isBuffer","isFunction","isArrayBuffer","isArrayBufferView","isView","isString","isNumber","isObject","isBoolean","isPlainObject","isDate","isFile","isBlob","isFileList","isStream","pipe","isFormData","kind","FormData","append","isURLSearchParams","isReadableStream","isRequest","isResponse","isHeaders","allOwnKeys","findKey","_global","global","isContextDefined","context","merge","caseless","assignValue","targetKey","extend","stripBOM","content","inherits","superConstructor","props","descriptors","toFlatObject","sourceObj","destObj","propFilter","searchString","position","lastIndex","indexOf","toArray","isTypedArray","TypedArray","forEachEntry","generator","_iterator","next","done","pair","matchAll","regExp","matches","exec","isHTMLForm","toCamelCase","p1","p2","isRegExp","reduceDescriptors","reducer","getOwnPropertyDescriptors","reducedDescriptors","ret","defineProperties","freezeMethods","toObjectSet","arrayOrString","delimiter","define","noop","toFiniteNumber","defaultValue","isFinite","isSpecCompliantForm","toJSONObject","stack","visit","reducedValue","isAsyncFn","isThenable","then","catch","_setImmediate","setImmediateSupported","postMessageSupported","setImmediate","callbacks","cb","asap","queueMicrotask","nextTick","isIterable","hasOwnProp","AxiosError","captureStackTrace","utils","toJSON","fileName","lineNumber","columnNumber","customProps","axiosError","isVisitable","removeBrackets","renderKey","dots","concat","isFlatArray","predicates","toFormData","formData","PlatformFormData","metaTokens","indexes","option","visitor","defaultVisitor","_Blob","Blob","useBlob","convertValue","toISOString","exposedHelpers","pop","charMap","encodeURIComponent","AxiosURLSearchParams","_pairs","encoder","_encode","buildURL","serializedParams","hashmarkIndex","InterceptorManager","handlers","use","fulfilled","rejected","synchronous","runWhen","eject","silentJSONParsing","forcedJSONParsing","clarifyTimeoutError","URLSearchParams","isBrowser","classes","protocols","hasBrowserEnv","document","_navigator","navigator","hasStandardBrowserEnv","product","hasStandardBrowserWebWorkerEnv","WorkerGlobalScope","importScripts","location","platform","toURLEncodedForm","helpers","isNode","parsePropPath","arrayToObject","formDataToJSON","buildPath","isNumericKey","isLast","stringifySafely","rawValue","parser","transitional","transitionalDefaults","adapter","transformRequest","getContentType","hasJSONContentType","isObjectPayload","setContentType","formSerializer","_FormData","env","transformResponse","JSONRequested","responseType","strictJSONParsing","ERR_BAD_RESPONSE","timeout","xsrfCookieName","xsrfHeaderName","maxContentLength","maxBodyLength","validateStatus","common","ignoreDuplicateOf","rawHeaders","parsed","line","$internals","normalizeHeader","header","normalizeValue","parseTokens","tokensRE","isValidHeaderName","matchHeaderValue","isHeaderNameFilter","formatHeader","w","buildAccessors","accessorName","methodName","arg1","arg2","arg3","AxiosHeaders","valueOrRewrite","rewrite","setHeader","_value","_header","_rewrite","lHeader","setHeaders","parseHeaders","dest","matcher","delete","deleted","deleteHeader","normalized","targets","asStrings","getSetCookie","first","computed","accessor","internals","accessors","defineAccessor","mapped","headerValue","transformData","fns","isCancel","__CANCEL__","CanceledError","ERR_CANCELED","settle","ERR_BAD_REQUEST","parseProtocol","speedometer","samplesCount","timestamps","firstSampleTS","head","tail","chunkLength","startedAt","bytesCount","passed","throttle","freq","lastArgs","invoke","throttled","flush","progressEventReducer","listener","isDownloadStream","bytesNotified","_speedometer","loaded","total","lengthComputable","progressBytes","rate","inRange","progress","estimated","event","progressEventDecorator","asyncDecorator","isMSIE","protocol","host","port","userAgent","write","expires","secure","cookie","toGMTString","RegExp","decodeURIComponent","remove","isAbsoluteURL","combineURLs","baseURL","relativeURL","buildFullPath","requestedURL","allowAbsoluteUrls","isRelativeUrl","headersToObject","mergeConfig","config1","config2","getMergedValue","mergeDeepProperties","valueFromConfig2","defaultToConfig2","mergeDirectKeys","mergeMap","paramsSerializer","timeoutMessage","withCredentials","withXSRFToken","onUploadProgress","onDownloadProgress","decompress","beforeRedirect","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding","configValue","newConfig","auth","username","unescape","Boolean","isURLSameOrigin","xsrfValue","cookies","isXHRAdapterSupported","XMLHttpRequest","_config","resolveConfig","requestData","requestHeaders","onCanceled","uploadThrottled","downloadThrottled","flushUpload","flushDownload","unsubscribe","onloadend","responseHeaders","getAllResponseHeaders","responseData","responseText","err","onreadystatechange","readyState","responseURL","onabort","ECONNABORTED","onerror","ERR_NETWORK","ontimeout","timeoutErrorMessage","ETIMEDOUT","setRequestHeader","upload","abort","subscribe","aborted","send","composeSignals","signals","controller","AbortController","reason","streamChunk","chunk","chunkSize","end","readBytes","iterable","readStream","stream","asyncIterator","reader","getReader","trackStream","onProgress","onFinish","_onFinish","ReadableStream","pull","close","loadedBytes","return","highWaterMark","isFetchSupported","Request","Response","isReadableStreamSupported","encodeText","arrayBuffer","supportsRequestStream","duplexAccessed","hasContentType","duplex","DEFAULT_CHUNK_SIZE","supportsResponseStream","resolvers","ERR_NOT_SUPPORT","getBodyLength","_request","resolveBodyLength","getContentLength","fetchOptions","composedSignal","toAbortSignal","requestContentLength","contentTypeHeader","isCredentialsSupported","credentials","isStreamResponse","responseContentLength","knownAdapters","http","httpAdapter","xhr","xhrAdapter","fetchAdapter","renderReason","isResolvedHandle","getAdapter","adapters","nameOrAdapter","rejectedReasons","reasons","throwIfCancellationRequested","throwIfRequested","dispatchRequest","validators","deprecatedWarnings","assertOptions","schema","allowUnknown","ERR_BAD_OPTION_VALUE","opt","validator","ERR_BAD_OPTION","formatMessage","desc","ERR_DEPRECATED","spelling","correctSpelling","Axios","instanceConfig","interceptors","configOrUrl","dummy","boolean","withXsrfToken","contextHeaders","requestInterceptorChain","synchronousRequestInterceptors","interceptor","unshift","responseInterceptorChain","chain","onFulfilled","onRejected","getUri","fullPath","generateHTTPMethod","isForm","CancelToken","executor","resolvePromise","_listeners","onfulfilled","_resolve","spread","isAxiosError","HttpStatusCode","Continue","SwitchingProtocols","Processing","EarlyHints","Ok","Created","Accepted","NonAuthoritativeInformation","NoContent","ResetContent","PartialContent","MultiStatus","AlreadyReported","ImUsed","MultipleChoices","MovedPermanently","Found","SeeOther","NotModified","UseProxy","Unused","TemporaryRedirect","PermanentRedirect","BadRequest","PaymentRequired","Forbidden","NotFound","MethodNotAllowed","NotAcceptable","ProxyAuthenticationRequired","RequestTimeout","Conflict","Gone","LengthRequired","PreconditionFailed","PayloadTooLarge","UriTooLong","UnsupportedMediaType","RangeNotSatisfiable","ExpectationFailed","ImATeapot","MisdirectedRequest","UnprocessableEntity","Locked","FailedDependency","TooEarly","UpgradeRequired","PreconditionRequired","TooManyRequests","RequestHeaderFieldsTooLarge","UnavailableForLegalReasons","InternalServerError","NotImplemented","BadGateway","ServiceUnavailable","GatewayTimeout","HttpVersionNotSupported","VariantAlsoNegotiates","InsufficientStorage","LoopDetected","NotExtended","NetworkAuthenticationRequired","createInstance","defaultConfig","axios","Cancel","promises","formToJSON","default","DEFAULT_FRONTEND_URL","convertToSerializableArgument","normalizePayloadForIC","aptosConfig","generateTransactionPayload","generateTransactionPayloadWithABI","entryFunctionPayload","ta","SignatureRequestError","_SignatureRequestError","UnexpectedSignatureResponseError","_UnexpectedSignatureResponseError","PairingExpiredError","_PairingExpiredError","DAPP_PAIRINGS_WINDOW_STORAGE_KEY","windowStateAccessors","pairings","getAll","newSerialized","SIGN_MESSAGE_RESPONSE_REQUIRED_FIELDS","validateSignMessageResponse","providedFields","SIGN_AND_SUBMIT_TRANSACTION_RESPONSE_REQUIRED_FIELDS","validateSignAndSubmitTransactionResponse","API_VERSION","SIGNING_REQUEST_POLLING_INTERVAL","SEQUENCE_NUMBER_MISMATCH_PATTERN","withRetries","requestFn","onError","retries","ACPairingClient","axiosConfig","defaultNetworkName","onDisconnectListeners","axiosInstance","isClientSideRendering","initPromise","syncFirstPairing","getPairing","firstPairing","dappSpecificWallet","maxDappSequenceNumber","pairingId","currSequenceNumber","dappWalletId","createSigningRequest","networkName","requestBody","dappEd25519SecretKey","dappEd25519SecretKeyB64","dappEd25519PublicKey","accountTransportEd25519PublicKey","accountTransportEd25519PublicKeyB64","requestEnvelope","Ed25519SecretKey","apiVersion","requestType","signingRequest","expectedSequenceNumber","getSigningRequest","deletePairing","cancelSigningRequest","patch","signRequest","CANCELLED","decrypted","responseEnvelope","addPairing","finalizedPairing","accountAlias","userSubmittedAlias","accountPublicKeyB64","transportEd25519PublicKeyB64","dappSpecificWalletId","disconnect","signMessage","SIGN_MESSAGE","serializedRequestArgs","serializedResponseArgs","SIGN_TRANSACTION","responseArgs","SIGN_AND_SUBMIT_TRANSACTION","accountEd25519PublicKeyB64","onDisconnect","ACDappClient","backendBaseURL","dappImageURI","dappName","frontendBaseURL","tgWebAppURL","title","pairingClient","getKeylessAccounts","getIcAccounts","isIcAccount","icAccounts","keylessAccounts","stringAddress","connect","dappKeypair","injectedPreferredWalletName","AC_PREFERRED_WALLET_NAME","requestArgs","encodeBase642","signIn","hexSignature","application","AptosConfig2","convertedArgs","_address","_publicKey","AptosConnectAccount","chains","APTOS_CHAINS","features","__privateAdd","__privateSet","label","__privateGet","customAccountToStandardAccount","AccountInfo2","unwrapUserResponse","UserResponseStatus","networkToChainId","WeakMap","_AptosConnectWallet","claimSecretKey","Network2","clientConfig","APTOS_CHAINS2","client","AptosConfig","Aptos","connectedAccount","connectedAccountStorageKey","AccountInfo3","removeItem","UserResponseStatus2","newConnectedAccount","AptosWalletError","AptosWalletErrorCode","getNetwork","messageBytes","nonceBytes","extraResponseArgs","txnOrArgs","_asFeePayer","response2","MultiAgentTransaction","SimpleTransaction","onAccountChange","_callback","onNetworkChange","AptosConnectWallet","walletMetadata","apple","icon","google","AptosConnectGoogleWallet","AptosConnectNamespace","AptosDisconnectNamespace","AptosGetAccountNamespace","AptosGetNetworkNamespace","AptosOnAccountChangeNamespace","AptosOnNetworkChangeNamespace","AptosSignAndSubmitTransactionNamespace","AptosSignInNamespace","AptosSignMessageNamespace","AptosSignTransactionNamespace","AptosConnectAppleWallet","AptosConnectNamespace2","AptosDisconnectNamespace2","AptosGetAccountNamespace2","AptosGetNetworkNamespace2","AptosOnAccountChangeNamespace2","AptosOnNetworkChangeNamespace2","AptosSignAndSubmitTransactionNamespace2","AptosSignInNamespace2","AptosSignMessageNamespace2","AptosSignTransactionNamespace2","registerAptosConnect","googleWalletPlugin","appleWalletPlugin"],"sourceRoot":""}